{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"Introducci\u00f3n","text":"<p>Este proyecto es una aplicaci\u00f3n web construida con Django, React y MySQL, dise\u00f1ada para gestionar pedidos de notas de venta previamente generadas en un sistema ERP externo. Adem\u00e1s, es posible hacer pedidos de picking para el correcto despacho y retiro de productos, hacer pedidos de materias primas e insumos a los encargados de esa \u00e1rea, guardar facturas para su posterior visualizacion o descarga y asignar los dias s\u00e1bados trabajados al personal de la empresa. Su prop\u00f3sito es proporcionar una interfaz amigable y eficiente para realizar solicitudes de pedidos, visualizar estad\u00edsticas relevantes mediante un dashboard y consultar registros hist\u00f3ricos y pendientes.</p>"},{"location":"#tecnologias-utilizadas","title":"Tecnolog\u00edas utilizadas","text":""},{"location":"#backend","title":"Backend","text":"<ul> <li>Django como framework principal.</li> <li>Django REST Framework (DRF) para la creaci\u00f3n de una API RESTful.</li> <li>Autenticaci\u00f3n con JWT utilizando cookies HTTP-only para mayor seguridad.</li> <li>MySQL como base de datos relacional.</li> </ul>"},{"location":"#frontend","title":"Frontend","text":"<ul> <li>React para la construcci\u00f3n de la interfaz de usuario.</li> <li>Redux Toolkit para el manejo eficiente del estado global.</li> <li>React Router para la navegaci\u00f3n entre p\u00e1ginas protegidas y p\u00fablicas.</li> <li>Material UI (MUI) para una interfaz moderna, accesible y responsiva.</li> </ul>"},{"location":"#funcionalidades-principales","title":"Funcionalidades principales","text":"<ul> <li>Gesti\u00f3n de pedidos: Formulario, visualizaci\u00f3n, actualizaci\u00f3n e hist\u00f3ricos</li> <li>Gesti\u00f3n de Materias Primas: Formulario, visualizaci\u00f3n, actualizaci\u00f3n e hist\u00f3ricos</li> <li>Gesti\u00f3n de Picking: Formulario, visualizaci\u00f3n, actualizaci\u00f3n e hist\u00f3ricos</li> <li>Guardado de facturas: Facturas pendientes de pago e hist\u00f3ricas, visualizaci\u00f3n y descarga</li> <li>Gesti\u00f3n d\u00edas s\u00e1bados: Asignaci\u00f3n mensual de d\u00edas a cada trabajador e hist\u00f3ricos</li> </ul> <p>Este sistema ofrece una soluci\u00f3n eficiente para complementar un ERP ya existente, mejorando el flujo de trabajo en la gesti\u00f3n de pedidos y proporcionando herramientas visuales para su seguimiento.</p>"},{"location":"#diagrama-de-flujo-software","title":"Diagrama de Flujo Software","text":""},{"location":"arquitectura/arquitectura/","title":"Plantilla base \u2014 Arquitectura React + Django","text":"<p>Documento interno de referencia personal</p> <p>Objetivo: servir como gu\u00eda reutilizable para iniciar, estructurar y evaluar proyectos basados en React (frontend) y Django / Django REST Framework (backend).</p>"},{"location":"arquitectura/arquitectura/#1-identidad-del-proyecto","title":"1\ufe0f\u20e3 Identidad del proyecto","text":""},{"location":"arquitectura/arquitectura/#nombre-del-proyecto","title":"Nombre del proyecto","text":"<p>Completar</p>"},{"location":"arquitectura/arquitectura/#tipo-de-sistema","title":"Tipo de sistema","text":"<p>Marcar lo que aplique:</p> <ul> <li>[ ] CRUD simple</li> <li>[ ] CRUD con reglas de negocio</li> <li>[ ] Sistema transaccional</li> <li>[ ] Dashboard / Backoffice</li> <li>[ ] API pura</li> <li>[ ] Otro:</li> </ul>"},{"location":"arquitectura/arquitectura/#objetivo-principal","title":"Objetivo principal","text":"<p>\u00bfQu\u00e9 problema resuelve este sistema?</p>"},{"location":"arquitectura/arquitectura/#nivel-de-complejidad-esperado","title":"Nivel de complejidad esperado","text":"<ul> <li>Bajo / Medio / Alto</li> </ul> <p>Nota: este punto define cu\u00e1nta arquitectura vale la pena aplicar.</p>"},{"location":"arquitectura/arquitectura/#2-arquitectura-general","title":"2\ufe0f\u20e3 Arquitectura general","text":""},{"location":"arquitectura/arquitectura/#backend","title":"Backend","text":"<ul> <li>Framework: Django + Django REST Framework</li> <li> <p>Tipo:</p> </li> <li> <p>[ ] Monolito</p> </li> <li>[ ] API REST</li> </ul> <p>Motivo de elecci\u00f3n:</p> <ul> <li>DRF permite separaci\u00f3n clara entre frontend y backend</li> <li>Serializaci\u00f3n expl\u00edcita de datos</li> <li>Facilidad para validaciones y permisos</li> </ul>"},{"location":"arquitectura/arquitectura/#frontend","title":"Frontend","text":"<ul> <li>Framework: React</li> <li>Librer\u00eda de UI: (ej: MUI)</li> <li> <p>Manejo de estado:</p> </li> <li> <p>Local por componente</p> </li> <li>Context / Store solo si es necesario</li> </ul> <p>Motivo de elecci\u00f3n:</p> <ul> <li>Componentizaci\u00f3n</li> <li>Separaci\u00f3n clara de responsabilidades</li> </ul>"},{"location":"arquitectura/arquitectura/#3-reglas-del-proyecto-estandar-personal","title":"3\ufe0f\u20e3 Reglas del proyecto (est\u00e1ndar personal)","text":"<p>Estas reglas buscan mantener el c\u00f3digo predecible y mantenible.</p>"},{"location":"arquitectura/arquitectura/#frontend_1","title":"Frontend","text":"<ul> <li>Las pages no contienen l\u00f3gica de negocio</li> <li> <p>Los formularios encapsulan:</p> </li> <li> <p>Estado</p> </li> <li>Validaciones</li> <li>Env\u00edo de datos</li> <li>El acceso a la API se realiza solo v\u00eda servicios</li> <li>Los componentes UI no conocen detalles del backend</li> </ul>"},{"location":"arquitectura/arquitectura/#backend_1","title":"Backend","text":"<ul> <li>Las vistas no contienen l\u00f3gica compleja</li> <li>La l\u00f3gica de negocio vive en servicios</li> <li>Los serializers validan y transforman datos</li> </ul>"},{"location":"arquitectura/arquitectura/#4-estructura-de-carpetas-base","title":"4\ufe0f\u20e3 Estructura de carpetas base","text":""},{"location":"arquitectura/arquitectura/#frontend_2","title":"Frontend","text":"<pre><code>src/\n  pages/\n  components/\n    forms/\n    ui/\n  services/\n  hooks/\n  utils/\n</code></pre> <p>Notas:</p> <ul> <li><code>pages/</code>: composici\u00f3n, no l\u00f3gica</li> <li><code>forms/</code>: formularios con responsabilidad completa</li> <li><code>services/</code>: axios / fetch centralizado</li> </ul>"},{"location":"arquitectura/arquitectura/#backend_2","title":"Backend","text":"<pre><code>app/\n  models/\n  serializers/\n  views/\n  services/\n  urls/\n</code></pre> <p>Notas:</p> <ul> <li><code>services/</code>: reglas de negocio</li> <li><code>views/</code>: orquestaci\u00f3n HTTP</li> </ul>"},{"location":"arquitectura/arquitectura/#5-patrones-reutilizables","title":"5\ufe0f\u20e3 Patrones reutilizables","text":""},{"location":"arquitectura/arquitectura/#pagina-contenedora-react","title":"P\u00e1gina contenedora (React)","text":"<p>Responsabilidad:</p> <ul> <li>Renderizar componentes</li> <li>Actuar como punto de entrada de la ruta</li> </ul> <p>No debe:</p> <ul> <li>Validar datos</li> <li>Consumir API directamente</li> </ul>"},{"location":"arquitectura/arquitectura/#formulario-encapsulado","title":"Formulario encapsulado","text":"<p>Responsabilidad:</p> <ul> <li>Manejar estado del formulario</li> <li>Validaciones</li> <li>Submit y manejo de errores</li> </ul> <p>Beneficios:</p> <ul> <li>Reutilizaci\u00f3n</li> <li>Pruebas m\u00e1s simples</li> <li>Menor acoplamiento</li> </ul>"},{"location":"arquitectura/arquitectura/#6-decisiones-tecnologicas","title":"6\ufe0f\u20e3 Decisiones tecnol\u00f3gicas","text":""},{"location":"arquitectura/arquitectura/#axios","title":"Axios","text":"<p>Usar cuando:</p> <ul> <li>Se requieren interceptores</li> <li>Manejo global de errores</li> <li>Headers autom\u00e1ticos</li> </ul> <p>Evitar cuando:</p> <ul> <li>Requests muy puntuales y simples</li> </ul>"},{"location":"arquitectura/arquitectura/#django-rest-framework","title":"Django REST Framework","text":"<p>Usar cuando:</p> <ul> <li>Frontend desacoplado</li> <li>Posibles m\u00faltiples clientes</li> <li>Necesidad de validaciones robustas</li> </ul>"},{"location":"arquitectura/arquitectura/#7-flujos-principales","title":"7\ufe0f\u20e3 Flujos principales","text":""},{"location":"arquitectura/arquitectura/#flujo-generico-de-creacion","title":"Flujo gen\u00e9rico de creaci\u00f3n","text":"<ol> <li>Page renderiza formulario</li> <li>Formulario maneja estado</li> <li>Servicio env\u00eda request</li> <li>Backend valida (serializer)</li> <li>Servicio aplica reglas</li> <li>Respuesta vuelve al frontend</li> </ol>"},{"location":"arquitectura/arquitectura/#8-checklist-inicial-de-proyecto","title":"8\ufe0f\u20e3 Checklist inicial de proyecto","text":"<ul> <li>[ ] Objetivo definido</li> <li>[ ] Arquitectura decidida</li> <li>[ ] Reglas del proyecto escritas</li> <li>[ ] Estructura base creada</li> <li>[ ] Servicios API centralizados</li> <li>[ ] Documentaci\u00f3n inicial creada</li> </ul>"},{"location":"arquitectura/arquitectura/#9-notas-personales","title":"9\ufe0f\u20e3 Notas personales","text":"<p>Espacio para aprendizajes, decisiones que funcionaron o no, y ajustes futuros.</p>"},{"location":"arquitectura/arquitectura/#10-uso-de-esta-plantilla","title":"1\ufe0f\u20e30\ufe0f\u20e3 Uso de esta plantilla","text":"<ul> <li>Copiar este archivo al iniciar un proyecto nuevo</li> <li>Ajustar decisiones seg\u00fan complejidad real</li> <li>Mantenerla actualizada junto al c\u00f3digo</li> </ul> <p>Esta documentaci\u00f3n es una herramienta de pensamiento, no un entregable p\u00fablico.</p>"},{"location":"arquitectura/roadmapJS/","title":"Roadmap Intensivo JavaScript + React","text":"<p>Objetivo: Alcanzar nivel Semi Senior en teor\u00eda JavaScript y criterio s\u00f3lido en React</p> <p>Perfil: Dev con base fuerte en Python, experiencia previa en React (aunque con apoyo de IA)</p> <p>Dedicaci\u00f3n: 3 horas diarias durante 2 semanas</p>"},{"location":"arquitectura/roadmapJS/#estructura-diaria-muy-importante","title":"Estructura diaria (MUY IMPORTANTE)","text":"<p>Cada d\u00eda se divide siempre igual:</p> <ul> <li>\u23f1 60 min \u2014 JavaScript profundo (modelo mental)</li> <li>\u23f1 60 min \u2014 React aplicado con criterio</li> <li>\u23f1 60 min \u2014 Ejercicios + explicaci\u00f3n (modo entrevista)</li> </ul> <p>No es solo escribir c\u00f3digo: debes poder explicar cada decisi\u00f3n.</p>"},{"location":"arquitectura/roadmapJS/#semana-1-fundamentos-js-base-react-correcta","title":"\ud83d\udd39 SEMANA 1 \u2014 FUNDAMENTOS JS + BASE REACT CORRECTA","text":""},{"location":"arquitectura/roadmapJS/#dia-1-scope-hoisting-y-strict-mode","title":"\ud83d\udcc5 D\u00eda 1 \u2014 Scope, Hoisting y Strict Mode","text":""},{"location":"arquitectura/roadmapJS/#javascript-60-min","title":"JavaScript (60 min)","text":"<ul> <li><code>var</code>, <code>let</code>, <code>const</code></li> <li>Scope de bloque / funci\u00f3n / m\u00f3dulo</li> <li>Hoisting real</li> <li>Temporal Dead Zone</li> <li><code>\"use strict\"</code></li> </ul>"},{"location":"arquitectura/roadmapJS/#react-60-min","title":"React (60 min)","text":"<ul> <li>Por qu\u00e9 React necesita c\u00f3digo sin efectos colaterales</li> <li>StrictMode de React (doble render en dev)</li> <li>Variables locales vs estado</li> </ul>"},{"location":"arquitectura/roadmapJS/#ejercicios-60-min","title":"Ejercicios (60 min)","text":"<pre><code>{\n  console.log(x);\n  let x = 10;\n}\n</code></pre> <pre><code>function test() {\n  y = 5; // strict?\n}\n</code></pre> <pre><code>function Component() {\n  let count = 0;\n  count++;\n  return &lt;p&gt;{count}&lt;/p&gt;;\n}\n</code></pre> <p>Explicar por qu\u00e9 esto est\u00e1 mal en React.</p>"},{"location":"arquitectura/roadmapJS/#dia-2-tipos-coercion-y-renderizado","title":"\ud83d\udcc5 D\u00eda 2 \u2014 Tipos, Coerci\u00f3n y Renderizado","text":""},{"location":"arquitectura/roadmapJS/#javascript","title":"JavaScript","text":"<ul> <li>Tipos primitivos</li> <li>Truthy / Falsy</li> <li><code>==</code> vs <code>===</code></li> <li>Coerci\u00f3n impl\u00edcita</li> </ul>"},{"location":"arquitectura/roadmapJS/#react","title":"React","text":"<ul> <li>Condicionales en JSX</li> <li>Renderizado basado en booleanos</li> </ul>"},{"location":"arquitectura/roadmapJS/#ejercicios","title":"Ejercicios","text":"<pre><code>false == 0\n[] == false\nnull == undefined\n</code></pre> <pre><code>{value &amp;&amp; &lt;Component /&gt;}\n</code></pre> <p>\ud83d\udc49 \u00bfQu\u00e9 pasa si <code>value</code> es <code>0</code>?</p>"},{"location":"arquitectura/roadmapJS/#dia-3-objetos-referencias-e-inmutabilidad","title":"\ud83d\udcc5 D\u00eda 3 \u2014 Objetos, Referencias e Inmutabilidad","text":""},{"location":"arquitectura/roadmapJS/#javascript_1","title":"JavaScript","text":"<ul> <li>Objetos por referencia</li> <li>Mutaci\u00f3n vs reasignaci\u00f3n</li> <li>Spread operator</li> </ul>"},{"location":"arquitectura/roadmapJS/#react_1","title":"React","text":"<ul> <li>Por qu\u00e9 NO mutar estado</li> <li>Inmutabilidad en <code>useState</code></li> </ul>"},{"location":"arquitectura/roadmapJS/#ejercicios_1","title":"\ud83e\uddea Ejercicios","text":"<pre><code>const a = { x: 1 };\nconst b = a;\nb.x = 2;\n</code></pre> <pre><code>setUser(user =&gt; ({ ...user, age: user.age + 1 }));\n</code></pre> <p>\ud83d\udc49 Explicar por qu\u00e9 esta versi\u00f3n es correcta.</p>"},{"location":"arquitectura/roadmapJS/#dia-4-arrays-map-y-keys","title":"D\u00eda 4 \u2014 Arrays, Map y Keys","text":""},{"location":"arquitectura/roadmapJS/#javascript_2","title":"JavaScript","text":"<ul> <li><code>map</code>, <code>filter</code>, <code>reduce</code></li> <li>Complejidad b\u00e1sica</li> </ul>"},{"location":"arquitectura/roadmapJS/#react_2","title":"React","text":"<ul> <li>Listas y <code>key</code></li> <li>Por qu\u00e9 NO usar \u00edndice como key</li> </ul>"},{"location":"arquitectura/roadmapJS/#ejercicios_2","title":"Ejercicios","text":"<pre><code>items.map(i =&gt; i * 2);\n</code></pre> <pre><code>{items.map((item, i) =&gt; (\n  &lt;li key={i}&gt;{item}&lt;/li&gt;\n))}\n</code></pre> <p>\ud83d\udc49 Explicar el problema real.</p>"},{"location":"arquitectura/roadmapJS/#dia-5-closures-funciones-y-hooks","title":"\ud83d\udcc5 D\u00eda 5 \u2014 Closures, Funciones y Hooks","text":""},{"location":"arquitectura/roadmapJS/#javascript_3","title":"JavaScript","text":"<ul> <li>Closures</li> <li>Funciones puras</li> <li>Arrow functions</li> </ul>"},{"location":"arquitectura/roadmapJS/#react_3","title":"React","text":"<ul> <li>Closures en hooks</li> <li>Stale closures</li> </ul>"},{"location":"arquitectura/roadmapJS/#ejercicios_3","title":"Ejercicios","text":"<pre><code>function counter() {\n  let n = 0;\n  return () =&gt; ++n;\n}\n</code></pre> <pre><code>useEffect(() =&gt; {\n  setCount(count + 1);\n}, []);\n</code></pre> <p>\ud83d\udc49 \u00bfPor qu\u00e9 es un bug?</p>"},{"location":"arquitectura/roadmapJS/#dia-6-async-promises-y-effects","title":"\ud83d\udcc5 D\u00eda 6 \u2014 Async, Promises y Effects","text":""},{"location":"arquitectura/roadmapJS/#javascript_4","title":"JavaScript","text":"<ul> <li>Promises</li> <li><code>async / await</code></li> <li><code>try / catch</code></li> </ul>"},{"location":"arquitectura/roadmapJS/#react_4","title":"React","text":"<ul> <li><code>useEffect</code> + async</li> <li>Cleanup</li> </ul>"},{"location":"arquitectura/roadmapJS/#ejercicios_4","title":"Ejercicios","text":"<pre><code>await Promise.resolve(5);\n</code></pre> <pre><code>useEffect(() =&gt; {\n  fetchData();\n}, []);\n</code></pre> <p>\ud83d\udc49 \u00bfD\u00f3nde va el async realmente?</p>"},{"location":"arquitectura/roadmapJS/#dia-7-event-loop-y-render-cycle","title":"\ud83d\udcc5 D\u00eda 7 \u2014 Event Loop y Render Cycle","text":""},{"location":"arquitectura/roadmapJS/#javascript_5","title":"JavaScript","text":"<ul> <li>Call Stack</li> <li>Task vs Microtask</li> </ul>"},{"location":"arquitectura/roadmapJS/#react_5","title":"React","text":"<ul> <li>Render vs Commit</li> <li>State batching</li> </ul>"},{"location":"arquitectura/roadmapJS/#ejercicios_5","title":"Ejercicios","text":"<pre><code>console.log(\"A\");\nsetTimeout(() =&gt; console.log(\"B\"), 0);\nPromise.resolve().then(() =&gt; console.log(\"C\"));\nconsole.log(\"D\");\n</code></pre> <pre><code>setCount(c =&gt; c + 1);\nsetCount(c =&gt; c + 1);\n</code></pre> <p>\ud83d\udc49 Resultado final.</p>"},{"location":"arquitectura/roadmapJS/#semana-2-criterio-semi-senior-real","title":"\ud83d\udd39 SEMANA 2 \u2014 CRITERIO SEMI SENIOR REAL","text":""},{"location":"arquitectura/roadmapJS/#dia-8-defensive-programming","title":"\ud83d\udcc5 D\u00eda 8 \u2014 Defensive Programming","text":""},{"location":"arquitectura/roadmapJS/#js-react","title":"JS + React","text":"<ul> <li>Validaciones</li> <li>Default params</li> <li>Early returns</li> </ul>"},{"location":"arquitectura/roadmapJS/#ejercicios_6","title":"Ejercicios","text":"<pre><code>function sum(arr = []) {\n  if (!Array.isArray(arr)) return 0;\n}\n</code></pre>"},{"location":"arquitectura/roadmapJS/#dia-9-performance-y-re-renders","title":"\ud83d\udcc5 D\u00eda 9 \u2014 Performance y Re-renders","text":""},{"location":"arquitectura/roadmapJS/#javascript_6","title":"JavaScript","text":"<ul> <li>Big O mental</li> </ul>"},{"location":"arquitectura/roadmapJS/#react_6","title":"React","text":"<ul> <li>Re-render innecesario</li> <li><code>memo</code>, <code>useCallback</code></li> </ul>"},{"location":"arquitectura/roadmapJS/#ejercicios_7","title":"Ejercicios","text":"<pre><code>const fn = () =&gt; {};\n</code></pre> <p>\ud83d\udc49 \u00bfPor qu\u00e9 esto rompe memo?</p>"},{"location":"arquitectura/roadmapJS/#dia-10-memory-model-y-closures-peligrosas","title":"\ud83d\udcc5 D\u00eda 10 \u2014 Memory Model y Closures peligrosas","text":""},{"location":"arquitectura/roadmapJS/#js","title":"JS","text":"<ul> <li>Heap</li> <li>Garbage Collector</li> </ul>"},{"location":"arquitectura/roadmapJS/#react_7","title":"React","text":"<ul> <li>Closures que filtran memoria</li> </ul>"},{"location":"arquitectura/roadmapJS/#dia-11-errores-reales-en-produccion","title":"\ud83d\udcc5 D\u00eda 11 \u2014 Errores reales en producci\u00f3n","text":"<ul> <li>Undefined</li> <li>Null</li> <li>NaN</li> </ul>"},{"location":"arquitectura/roadmapJS/#ejercicios_8","title":"Ejercicios","text":"<pre><code>undefined + 1;\nNumber.isNaN(NaN);\n</code></pre>"},{"location":"arquitectura/roadmapJS/#dia-12-clean-code-arquitectura","title":"\ud83d\udcc5 D\u00eda 12 \u2014 Clean Code + Arquitectura","text":"<ul> <li>Componentes peque\u00f1os</li> <li>Separaci\u00f3n l\u00f3gica / UI</li> </ul>"},{"location":"arquitectura/roadmapJS/#dia-13-trampas-de-entrevista","title":"\ud83d\udcc5 D\u00eda 13 \u2014 Trampas de entrevista","text":"<p>Checklist:</p> <ul> <li>Mutaciones \u274c</li> <li>Closures \u274c</li> <li>Keys \u274c</li> </ul>"},{"location":"arquitectura/roadmapJS/#dia-14-simulacion-de-entrevista","title":"\ud83d\udcc5 D\u00eda 14 \u2014 Simulaci\u00f3n de Entrevista","text":"<p>Debes poder responder:</p> <ul> <li>\u00bfPor qu\u00e9 React necesita inmutabilidad?</li> <li>\u00bfQu\u00e9 es una stale closure?</li> <li>\u00bfC\u00f3mo funciona el event loop?</li> </ul> <p>\u2705 Si completas este roadmap, tendr\u00e1s criterio te\u00f3rico de Semi Senior JS + React.</p>"},{"location":"arquitectura/roadmapJS/#recursos-base-no-mas-de-estos","title":"Recursos BASE (no m\u00e1s de estos)","text":"<p>1. MDN Web Docs (OBLIGATORIO)</p> <p>https://developer.mozilla.org</p> <p>\ud83d\udfe2 Es el est\u00e1ndar profesional \ud83d\udfe2 Neutral, preciso, actual \ud83d\udfe2 El que usan los seniors</p> <p>\u00dasalo para: - Confirmar conceptos - Ver ejemplos reales  -Leer definiciones exactas</p> <p>NO lo leas completo, solo las secciones del d\u00eda.</p> <p>2. JavaScript.info (MODELO MENTAL)</p> <p>https://javascript.info</p> <p>\ud83d\udfe2 Excelente para entender por qu\u00e9 \ud83d\udfe2 Ideal viniendo de Python \ud83d\udfe2 Explica trampas y edge cases</p> <p>\u00dasalo para: - Scope - Closures - Event loop - Promises</p> <p>3. Libro: You Don\u2019t Know JS (Kyle Simpson)</p> <p>(Gratis online)</p> <p>Lee SOLO: - Scope &amp; Closures - Types &amp; Grammar</p> <p>\u274c No todo el libro \u274c No lo leas de corrido</p> <p>Recursos React (solo lo necesario) React Docs (oficiales)</p> <p>https://react.dev</p> <p>Lee con foco en: - State - Effects - StrictMode - Rendering</p>"},{"location":"dependencias/django/axes/","title":"Axes","text":""},{"location":"dependencias/django/axes/#que-es","title":"\u00bfQu\u00e9 es?","text":"<p>Axes (Authentication Extension for Django) es una librer\u00eda de seguridad dise\u00f1ada para proteger las aplicaciones Django contra ataques de fuerza bruta y repetidos intentos de login fallidos. Funciona monitoreando las credenciales ingresadas en el sistema de autenticaci\u00f3n y bloqueando direcciones IP, usuarios o combinaciones seg\u00fan una pol\u00edtica configurable.</p> <p>Su arquitectura est\u00e1 basada en el middleware de Django y se\u00f1ales del sistema de autenticaci\u00f3n, lo que permite integrarse sin modificar el flujo normal de django.contrib.auth.</p>"},{"location":"dependencias/django/axes/#para-que-sirve","title":"\u00bfPara qu\u00e9 sirve?","text":"<p>Proporciona mecanismos para:</p> <ul> <li>Bloquear intentos de autenticaci\u00f3n despu\u00e9s de un n\u00famero configurable de fallos consecutivos.</li> <li>Mitigar ataques de fuerza bruta por IP, usuario o combinaci\u00f3n.</li> <li>Registrar eventos de login para auditor\u00eda y trazabilidad.</li> <li>Implementar listas negras y blancas.</li> <li>Proteger formularios de login personalizados o la vista por defecto de Django.</li> </ul>"},{"location":"dependencias/django/axes/#instalacion-y-configuracion","title":"Instalaci\u00f3n y configuraci\u00f3n","text":"<ul> <li>Instalaci\u00f3n</li> </ul> <pre><code>pip install django-axes\n</code></pre> <ul> <li>** Configuraci\u00f3n en settings.py**</li> </ul> <pre><code>INSTALLED_APPS = [\n    ...\n    'axes',\n]\n\nMIDDLEWARE = [\n    'axes.middleware.AxesMiddleware',\n    ...\n]\n\nAUTHENTICATION_BACKENDS = [\n    'axes.backends.AxesBackend',\n    'django.contrib.auth.backends.ModelBackend',\n]\n</code></pre> <ul> <li>Migraciones</li> </ul> <pre><code>python manage.py migrate\n</code></pre> <p>Esto crea el modelo axes.AccessAttempt, que almacena informaci\u00f3n de cada intento de autenticaci\u00f3n.</p>"},{"location":"dependencias/django/axes/#configuracion-avanzada","title":"Configuraci\u00f3n avanzada","text":"<p>Las pol\u00edticas de bloqueo pueden ser controladas mediante los siguientes par\u00e1metros en settings.py:</p> <p>N\u00famero de intentos permitidos</p> <pre><code>AXES_FAILURE_LIMIT = 5\n</code></pre> <p>Tiempo de bloqueo</p> <p><pre><code>AXES_COOLOFF_TIME = timedelta(minutes=30)\n</code></pre> Bloqueo por IP, usuario o ambos</p> <pre><code>AXES_ONLY_USER_FAILURES = False      # Bloquea por IP + usuario\nAXES_LOCK_OUT_BY_COMBINATION_USER_AND_IP = True\n</code></pre> <p>Notificaci\u00f3n y logging</p> <p><pre><code>AXES_VERBOSE = True\n</code></pre> Reset manual de intentos</p> <p>Desde el shell o un endpoint:</p> <pre><code>from axes.utils import reset\n\nreset(ip='192.168.0.1')\nreset(username='admin')\n</code></pre>"},{"location":"dependencias/django/axes/#mecanismo-de-deteccion","title":"Mecanismo de detecci\u00f3n","text":"<p>django-axes se engancha mediante: - Middleware: intercepta cada request y revisa el estado de bloqueo. - Backend personalizado: extiende el backend de autenticaci\u00f3n para incrementar el contador de fallos si las credenciales son inv\u00e1lidas. - Modelo AccessAttempt: registra cada intento fallido, incluyendo metadatos como IP, user-agent, timestamp y m\u00e9todo.</p>"},{"location":"dependencias/django/axes/#auditoria","title":"Auditor\u00eda","text":"<p>La tabla axes_accessattempt permite almacenar y consultar: - IP del atacante - Fecha/hora del intento - Nombre de usuario (si fue ingresado) - N\u00famero de fallos acumulados</p> <p>Ideal para trazabilidad, dashboards de seguridad o alertas personalizadas.</p>"},{"location":"dependencias/django/axes/#integracion-con-vistas-personalizadas","title":"Integraci\u00f3n con vistas personalizadas","text":"<p>Axes se integra autom\u00e1ticamente con la vista LoginView de Django. Para formularios personalizados, basta con usar el sistema de autenticaci\u00f3n est\u00e1ndar (authenticate(), login()).</p> <p>Opcionalmente, se puede deshabilitar temporalmente en ciertas vistas con un decorador:</p> <pre><code>from axes.decorators import axes_dispatch\n\n@axes_dispatch\ndef custom_login_view(request):\n    ...\n</code></pre>"},{"location":"dependencias/django/axes/#extensibilidad","title":"Extensibilidad","text":"<p>Signal de bloqueo:</p> <pre><code>from axes.signals import user_locked_out\n\n@receiver(user_locked_out)\ndef on_lockout(sender, request, username, **kwargs):\n    # Notificar a admin, registrar log, etc.\n</code></pre>"},{"location":"dependencias/django/axes/#buenas-practicas","title":"Buenas pr\u00e1cticas","text":"<ul> <li>Usar AXES_COOLOFF_TIME para evitar bloqueos permanentes accidentales.</li> <li>Configurar AXES_LOCKOUT_TEMPLATE para mostrar una p\u00e1gina personalizada de bloqueo.</li> <li>Registrar alertas v\u00eda logging o email cuando un usuario es bloqueado.</li> <li>Si se usan proxies o balancers, definir AXES_PROXY_ORDER y AXES_META_PRECEDENCE_ORDER para obtener la IP real del atacante.</li> <li>Combinar con django-ratelimit para protecci\u00f3n m\u00e1s fina a nivel de request.</li> </ul>"},{"location":"dependencias/django/axes/#conclusion","title":"Conclusi\u00f3n","text":"<p>django-axes proporciona una capa cr\u00edtica de defensa contra intentos de fuerza bruta en aplicaciones Django, con una implementaci\u00f3n s\u00f3lida y altamente configurable. Su integraci\u00f3n es sencilla, no invasiva, y ofrece herramientas tanto para prevenir accesos maliciosos como para auditar intentos de login fallidos. Es una soluci\u00f3n recomendada para cualquier sistema con autenticaci\u00f3n expuesta p\u00fablicamente.</p>"},{"location":"dependencias/django/boto3/","title":"Boto3","text":"<p>Boto3 es el SDK (Software Development Kit) oficial de Amazon Web Services (AWS) para Python. Permite interactuar con los servicios de AWS desde c\u00f3digo, como S3, DynamoDB, EC2, Lambda, SQS, SNS y muchos otros.</p>"},{"location":"dependencias/django/boto3/#para-que-sirve","title":"\u00bfPara qu\u00e9 sirve?","text":"<p>Boto3 se usa para automatizar, administrar e integrar servicios de AWS en aplicaciones Python. Algunos casos comunes:</p> <ul> <li> <p>Subir, descargar y gestionar archivos en S3 (almacenamiento en la nube)</p> </li> <li> <p>Guardar y consultar datos en DynamoDB</p> </li> <li> <p>Ejecutar funciones AWS Lambda</p> </li> <li> <p>Enviar mensajes con SNS o SQS</p> </li> <li> <p>Crear o administrar servidores EC2</p> </li> </ul>"},{"location":"dependencias/django/boto3/#como-funciona","title":"\u00bfC\u00f3mo funciona?","text":"<p>Boto3 trabaja con dos enfoques principales:</p>"},{"location":"dependencias/django/boto3/#clientes","title":"Clientes","text":"<pre><code>    import boto3\n    s3 = boto3.client('s3')\n    s3.list_buckets()\n</code></pre>"},{"location":"dependencias/django/boto3/#recursos","title":"Recursos","text":"<pre><code>import boto3\ns3 = boto3.resource('s3')\nfor bucket in s3.buckets.all():\n    print(bucket.name)\n</code></pre>"},{"location":"dependencias/django/boto3/#autenticacion-credenciales","title":"Autenticaci\u00f3n (credenciales)","text":"<p>Boto3 necesita credenciales de AWS, usualmente definidas en:</p> <ul> <li>Variables de entorno:</li> </ul> <pre><code>AWS_ACCESS_KEY_ID\nAWS_SECRET_ACCESS_KEY\nAWS_REGION\n</code></pre> <ul> <li> <p>O en ~/.aws/credentials</p> </li> <li> <p>O mediante roles IAM (cuando se usa en AWS directamente)</p> </li> </ul>"},{"location":"dependencias/django/boto3/#nota","title":"Nota","text":"<p>En este proyecto se uso Boto3 para utilizar el R2 de Cloudflare (el cual es muy similar a S3 de AWS pero mucho m\u00e1s barato)</p>"},{"location":"dependencias/django/corsheaders/","title":"Django Cors Headers","text":""},{"location":"dependencias/django/corsheaders/#que-es","title":"\u00bfQu\u00e9 es?","text":"<p>Es un middleware para Django que permite controlar y configurar las pol\u00edticas CORS (Cross-Origin Resource Sharing) en el backend. CORS es un mecanismo de seguridad implementado por los navegadores para restringir solicitudes HTTP realizadas desde un origen diferente al dominio del recurso solicitado.</p> <p>Este middleware permite aceptar solicitudes desde otros dominios (por ejemplo, de una SPA en React alojada en otro servidor) y definir de forma granular qu\u00e9 or\u00edgenes, m\u00e9todos y cabeceras son permitidos.</p>"},{"location":"dependencias/django/corsheaders/#para-que-sirve","title":"\u00bfPara qu\u00e9 sirve?","text":"<p>La principal funci\u00f3n de django-cors-headers es habilitar o restringir el acceso a recursos de la API Django desde or\u00edgenes externos. Es indispensable en arquitecturas frontend-backend desacopladas, como:</p> <ul> <li>React, Vue, Angular consumiendo un backend Django.</li> <li>Aplicaciones m\u00f3viles o microservicios.</li> <li>Entornos de desarrollo local con distintos puertos/dom\u00ednios.</li> </ul>"},{"location":"dependencias/django/corsheaders/#instalacion-y-configuracion-basica","title":"Instalaci\u00f3n y configuraci\u00f3n b\u00e1sica","text":"<ul> <li>Instalaci\u00f3n</li> </ul> <pre><code>pip install django-cors-headers\n</code></pre> <ul> <li>Activaci\u00f3n en settings.py</li> </ul> <pre><code>INSTALLED_APPS = [\n    ...\n    'corsheaders',\n    ...\n]\n\nMIDDLEWARE = [\n    'corsheaders.middleware.CorsMiddleware',\n    'django.middleware.common.CommonMiddleware',\n    ...\n]\n</code></pre> <p>Nota: CorsMiddleware debe ir antes de CommonMiddleware y antes de cualquier middleware que genere respuesta, como WhiteNoiseMiddleware.</p> <ul> <li>Configuraciones comunes</li> </ul> <p>Permitir todos los or\u00edgenes (no recomendado en producci\u00f3n)</p> <p><pre><code>CORS_ALLOW_ALL_ORIGINS = True\n</code></pre> Permitir or\u00edgenes espec\u00edficos</p> <pre><code>CORS_ALLOWED_ORIGINS = [\n    \"http://localhost:3000\",\n    \"https://frontend.example.com\",\n]\n</code></pre> <p>Permitir cookies y cabeceras de autenticaci\u00f3n (CORS + credentials)</p> <pre><code>CORS_ALLOW_CREDENTIALS = True\n</code></pre> <p>Esto es obligatorio si se usa autenticaci\u00f3n v\u00eda cookies HTTP-only o cabeceras Authorization con JWT.</p>"},{"location":"dependencias/django/corsheaders/#configuracion-avanzada","title":"Configuraci\u00f3n avanzada","text":"<ul> <li>Permitir cabeceras personalizadas</li> </ul> <pre><code>CORS_ALLOW_HEADERS = list(default_headers) + [\n    'X-Custom-Header',\n    'Authorization',\n]\n</code></pre> <ul> <li>Permitir m\u00e9todos adicionales</li> </ul> <pre><code>CORS_ALLOW_METHODS = list(default_methods) + [\n    'PATCH',\n]\n</code></pre> <ul> <li>Or\u00edgenes regex (\u00fatil para entornos din\u00e1micos)</li> </ul> <pre><code>CORS_ALLOWED_ORIGIN_REGEXES = [\n    r\"^https://.*\\.example\\.com$\",\n]\n</code></pre>"},{"location":"dependencias/django/corsheaders/#consideraciones-de-seguridad","title":"Consideraciones de seguridad","text":"<ul> <li>Evitar CORS_ALLOW_ALL_ORIGINS = True en producci\u00f3n, especialmente si CORS_ALLOW_CREDENTIALS = True, ya que puede permitir robo de credenciales o ejecuci\u00f3n de acciones CSRF desde sitios externos.</li> <li>En producci\u00f3n, siempre se recomienda listar los or\u00edgenes exactos en CORS_ALLOWED_ORIGINS.</li> <li>Asegurar que el frontend incluya credentials: 'include' en fetch() o Axios si se trabaja con cookies:</li> </ul> <pre><code>axios.get('/api/user', { withCredentials: true })\n</code></pre>"},{"location":"dependencias/django/corsheaders/#comportamiento-esperado","title":"Comportamiento esperado","text":"<p>Cuando se realiza una solicitud cross-origin, el navegador emite primero una pre-flight request OPTIONS. El middleware de corsheaders:</p> <ul> <li>Detecta si la cabecera Origin est\u00e1 permitida.</li> <li>Devuelve las cabeceras CORS apropiadas:<ul> <li>Access-Control-Allow-Origin</li> <li>Access-Control-Allow-Methods</li> <li>Access-Control-Allow-Headers</li> <li>Access-Control-Allow-Credentials (si est\u00e1 habilitado)</li> </ul> </li> </ul> <p>Solo si estas cabeceras est\u00e1n correctamente configuradas, el navegador permitir\u00e1 que el frontend acceda a la respuesta.</p>"},{"location":"dependencias/django/corsheaders/#conclusion","title":"Conclusi\u00f3n","text":"<p>django-cors-headers es un componente esencial en cualquier stack Django expuesto a clientes frontend desacoplados o dominios externos. Ofrece un mecanismo robusto y flexible para configurar pol\u00edticas CORS conforme a las necesidades de seguridad y funcionalidad del proyecto.</p> <p>Es indispensable comprender su interacci\u00f3n con cookies, tokens y cabeceras personalizadas, especialmente cuando se trabaja con autenticaci\u00f3n basada en JWT o sesiones HTTP-only.</p>"},{"location":"dependencias/django/django_rest_framework/","title":"Django Rest Framework","text":""},{"location":"dependencias/django/django_rest_framework/#que-es","title":"\u00bfQu\u00e9 es?","text":"<p>Django REST Framework (DRF) es una poderosa biblioteca de Python construida sobre Django, que permite crear APIs RESTful de manera sencilla, robusta y escalable. DRF abstrae y automatiza gran parte del trabajo necesario para exponer datos desde una base de datos Django a trav\u00e9s de una API.</p> <p>Caracter\u00edsticas clave: - Soporte completo para serializaci\u00f3n de modelos Django. - Soporte para autenticaci\u00f3n (token, session, JWT, OAuth). - Manejo integrado de permisos y validaciones. - Documentaci\u00f3n autom\u00e1tica de la API (browsable API). - Soporte para paginaci\u00f3n, filtros, b\u00fasquedas y ordenamientos.</p>"},{"location":"dependencias/django/django_rest_framework/#para-que-sirve","title":"\u00bfPara qu\u00e9 sirve?","text":"<p>DRF se usa para:</p> Funci\u00f3n Ejemplo Exponer datos como API Mostrar datos de usuarios, productos, pedidos, etc. Crear endpoints CRUD Crear, leer, actualizar y eliminar recursos REST Aplicaciones frontend Servir datos a aplicaciones React, Vue, Angular, m\u00f3viles, etc. Autenticaci\u00f3n de usuarios Login, logout, permisos basados en roles Integraci\u00f3n externa Comunicar tu sistema con otras APIs o servicios"},{"location":"dependencias/django/django_rest_framework/#como-se-usa","title":"\u00bfC\u00f3mo se usa?","text":"<ul> <li>Instalaci\u00f3n</li> </ul> <pre><code>pip install djangorestframework\n</code></pre> <p>Luego agregar 'rest_framework' en INSTALLED_APPS en settings.py.</p> <ul> <li>Configuraci\u00f3n b\u00e1sica</li> </ul> <pre><code># settings.py\nREST_FRAMEWORK = {\n    'DEFAULT_PERMISSION_CLASSES': [\n        'rest_framework.permissions.IsAuthenticated',\n    ],\n    'DEFAULT_AUTHENTICATION_CLASSES': [\n        'rest_framework.authentication.SessionAuthentication',\n        'rest_framework.authentication.BasicAuthentication',\n    ],\n}\n</code></pre> <ul> <li>Serializers</li> </ul> <p>Permiten convertir modelos Django en JSON y viceversa.</p> <pre><code>from rest_framework import serializers\nfrom .models import Producto\n\nclass ProductoSerializer(serializers.ModelSerializer):\n    class Meta:\n        model = Producto\n        fields = '__all__'\n</code></pre> <ul> <li>Views</li> </ul> <p>Se puede usar APIView o vistas basadas en clases gen\u00e9ricas.</p> <pre><code>from rest_framework import generics\nfrom .models import Producto\nfrom .serializers import ProductoSerializer\n\nclass ProductoListCreateView(generics.ListCreateAPIView):\n    queryset = Producto.objects.all()\n    serializer_class = ProductoSerializer\n</code></pre> <ul> <li>URLs</li> </ul> <pre><code>from django.urls import path\nfrom .views import ProductoListCreateView\n\nurlpatterns = [\n    path('productos/', ProductoListCreateView.as_view(), name='producto-list-create'),\n]\n</code></pre> <ul> <li>Browsable API</li> </ul> <p>DRF genera una interfaz visual para probar tus endpoints desde el navegador. Solo aseg\u00farate de incluir:</p> <pre><code>from django.urls import path, include\n\nurlpatterns = [\n    path('api-auth/', include('rest_framework.urls')),\n]\n</code></pre>"},{"location":"dependencias/django/django_rest_framework/#tips-practicos","title":"Tips pr\u00e1cticos","text":"<ul> <li>Usar ViewSets + Routers si se quiere generar autom\u00e1ticamente todas las rutas CRUD:</li> </ul> <pre><code>from rest_framework import viewsets, routers\n\nclass ProductoViewSet(viewsets.ModelViewSet):\n    queryset = Producto.objects.all()\n    serializer_class = ProductoSerializer\n\nrouter = routers.DefaultRouter()\nrouter.register(r'productos', ProductoViewSet)\n\nurlpatterns = [\n    path('', include(router.urls)),\n]\n</code></pre> <ul> <li>Autenticaci\u00f3n moderna con JWT</li> </ul> <p>Agregar djangorestframework-simplejwt para manejar autenticaci\u00f3n JWT:</p> <p><pre><code>pip install djangorestframework-simplejwt\n</code></pre> Y configurar:</p> <pre><code>REST_FRAMEWORK['DEFAULT_AUTHENTICATION_CLASSES'] += [\n    'rest_framework_simplejwt.authentication.JWTAuthentication',\n]\n</code></pre> <ul> <li>Crear permisos personalizados</li> </ul> <pre><code>from rest_framework.permissions import BasePermission\n\nclass EsAdmin(BasePermission):\n    def has_permission(self, request, view):\n        return request.user and request.user.is_staff\n</code></pre> <ul> <li>Usar @action para endpoints personalizados</li> </ul> <pre><code>from rest_framework.decorators import action\nfrom rest_framework.response import Response\n\nclass ProductoViewSet(viewsets.ModelViewSet):\n    ...\n\n    @action(detail=True, methods=['post'])\n    def destacar(self, request, pk=None):\n        producto = self.get_object()\n        producto.destacado = True\n        producto.save()\n        return Response({'status': 'producto destacado'})\n</code></pre>"},{"location":"dependencias/django/django_rest_framework/#conclusion","title":"Conclusi\u00f3n","text":"<p>Django REST Framework es una herramienta esencial si est\u00e1s construyendo APIs modernas con Django. Te permite mantener una arquitectura limpia, segura y escalable, reduciendo el tiempo de desarrollo y mejorando la mantenibilidad del proyecto.</p>"},{"location":"dependencias/django/rest_framework_simplejwt/","title":"Rest Framework SimpleJWT","text":""},{"location":"dependencias/django/rest_framework_simplejwt/#que-es","title":"\u00bfQu\u00e9 es?","text":"<p>Es una librer\u00eda que implementa autenticaci\u00f3n mediante JWT (JSON Web Tokens) para Django REST Framework (DRF). Proporciona endpoints y clases de autenticaci\u00f3n para manejar el ciclo completo de autenticaci\u00f3n basada en tokens stateless, incluyendo:</p> <ul> <li>Generaci\u00f3n de tokens (access, refresh)</li> <li>Renovaci\u00f3n de tokens</li> <li>Revocaci\u00f3n y verificaci\u00f3n de tokens</li> <li>Custom claims y pol\u00edticas de expiraci\u00f3n</li> </ul>"},{"location":"dependencias/django/rest_framework_simplejwt/#para-que-sirve","title":"\u00bfPara qu\u00e9 sirve?","text":"<p>Sirve para autenticaci\u00f3n sin sesi\u00f3n (stateless) en aplicaciones SPA (React, Vue, etc.), m\u00f3viles o microservicios, permitiendo:</p> <ul> <li>Login seguro con JWT</li> <li>Renovaci\u00f3n de sesi\u00f3n sin pedir credenciales</li> <li>Escalabilidad: no depende de cookies ni sesiones en servidor</li> <li>Protecci\u00f3n de endpoints v\u00eda DRF</li> </ul>"},{"location":"dependencias/django/rest_framework_simplejwt/#como-se-configura","title":"\u00bfC\u00f3mo se configura?","text":"<ul> <li>Instalaci\u00f3n</li> </ul> <pre><code>pip install djangorestframework-simplejwt\n</code></pre> <p>Y agregar a INSTALLED_APPS en settings.py.</p> <ul> <li>Configuraci\u00f3n en settings.py</li> </ul> <pre><code>REST_FRAMEWORK = {\n    'DEFAULT_AUTHENTICATION_CLASSES': (\n        'rest_framework_simplejwt.authentication.JWTAuthentication',\n    ),\n}\n</code></pre> <p>Opcionalmente, puedes definir ajustes de tokens:</p> <pre><code>from datetime import timedelta\n\nSIMPLE_JWT = {\n    'ACCESS_TOKEN_LIFETIME': timedelta(minutes=5),\n    'REFRESH_TOKEN_LIFETIME': timedelta(days=1),\n    'ROTATE_REFRESH_TOKENS': True,\n    'BLACKLIST_AFTER_ROTATION': True,\n    'AUTH_HEADER_TYPES': ('Bearer',),\n}\n</code></pre> <ul> <li>Endpoints disponibles</li> </ul> <p>Importa los endpoints en tu archivo urls.py:</p> <pre><code>from rest_framework_simplejwt.views import (\n    TokenObtainPairView,\n    TokenRefreshView,\n    TokenVerifyView,\n)\n\nurlpatterns = [\n    path('api/token/', TokenObtainPairView.as_view(), name='token_obtain_pair'),       # Login\n    path('api/token/refresh/', TokenRefreshView.as_view(), name='token_refresh'),      # Refrescar token\n    path('api/token/verify/', TokenVerifyView.as_view(), name='token_verify'),         # Verificar validez\n]\n</code></pre> <ol> <li> <p>Login (<code>/api/token/</code>) </p> <ul> <li>Se env\u00edan credenciales.  </li> <li>Devuelve: <code>access</code> y <code>refresh</code>.  </li> </ul> </li> <li> <p>Uso de access token         - Cabecera: <code>Authorization: Bearer &lt;access_token&gt;</code> </p> </li> <li> <p>Renovaci\u00f3n (<code>/api/token/refresh/</code>) </p> <ul> <li>Se env\u00eda el <code>refresh_token</code>.  </li> <li>Devuelve nuevo <code>access_token</code>.  </li> </ul> </li> <li> <p>Verificaci\u00f3n (<code>/api/token/verify/</code>) </p> <ul> <li>\u00datil para depurar o verificar tokens manualmente.  </li> </ul> </li> </ol>"},{"location":"dependencias/django/rest_framework_simplejwt/#personalizacion","title":"Personalizaci\u00f3n","text":"<ul> <li>Custom Token Claims</li> </ul> <p>Puedes sobrescribir TokenObtainPairSerializer para incluir informaci\u00f3n adicional:</p> <p><pre><code>from rest_framework_simplejwt.serializers import TokenObtainPairSerializer\n\nclass MyTokenObtainPairSerializer(TokenObtainPairSerializer):\n    def validate(self, attrs):\n        data = super().validate(attrs)\n        data['username'] = self.user.username\n        data['is_staff'] = self.user.is_staff\n        return data\n</code></pre> Y luego enlazarlo a una view personalizada:</p> <pre><code>from rest_framework_simplejwt.views import TokenObtainPairView\n\nclass MyTokenObtainPairView(TokenObtainPairView):\n    serializer_class = MyTokenObtainPairSerializer\n</code></pre> <ul> <li>Blacklisting tokens</li> </ul> <p>Para invalidar tokens despu\u00e9s del logout o rotaci\u00f3n:</p> <pre><code>pip install djangorestframework-simplejwt[blacklist]\n</code></pre> <p>Agregar 'rest_framework_simplejwt.token_blacklist' a INSTALLED_APPS.</p> <p>En SIMPLE_JWT, activar:</p> <p><pre><code>'BLACKLIST_AFTER_ROTATION': True,\n</code></pre> Usar el endpoint para logout implementando manualmente el blacklist.</p>"},{"location":"dependencias/django/rest_framework_simplejwt/#buenas-practicas-y-tips","title":"Buenas pr\u00e1cticas y tips","text":"<ul> <li>Usar rotaci\u00f3n de tokens (ROTATE_REFRESH_TOKENS = True) + blacklist para mayor seguridad.</li> <li>No guardar tokens en localStorage (riesgo XSS); usar httpOnly cookies si se manejan tokens en frontend.</li> <li>Si el frontend es React/Vue y backend Django, usar CORS y withCredentials con cookies para m\u00e1xima seguridad.</li> <li>Proteger rutas con decoradores o permisos en DRF:</li> </ul> <pre><code>from rest_framework.permissions import IsAuthenticated\n\nclass MySecureView(APIView):\n    permission_classes = [IsAuthenticated]\n    ...\n</code></pre> <ul> <li>Limitar el acceso con custom permissions basados en roles/grupos.</li> </ul>"},{"location":"dependencias/django/rest_framework_simplejwt/#conclusion","title":"Conclusi\u00f3n","text":"<p>rest_framework_simplejwt ofrece una soluci\u00f3n robusta y flexible para autenticaci\u00f3n basada en JWT dentro de Django REST Framework. Ideal para arquitecturas modernas donde el backend es un proveedor de API y el frontend se comunica v\u00eda tokens.</p> <p>Su integraci\u00f3n es r\u00e1pida, segura y escalable, y permite m\u00faltiples niveles de personalizaci\u00f3n seg\u00fan las necesidades del proyecto.</p>"},{"location":"dependencias/react/axios/","title":"Axios","text":"<p>Axios es una librer\u00eda cliente HTTP basada en Promesas, ampliamente usada en React para hacer peticiones a APIs. A diferencia de fetch, ofrece ventajas como:</p> <ul> <li>Interceptores (para manejar errores globalmente).</li> <li>Cancelaci\u00f3n de peticiones.</li> <li>Transformaci\u00f3n autom\u00e1tica de datos JSON.</li> <li>Soporte para navegadores antiguos.</li> </ul>"},{"location":"dependencias/react/axios/#teoria-detras-de-axios-fundamentos-y-funcionamiento-interno","title":"Teor\u00eda Detr\u00e1s de Axios: Fundamentos y Funcionamiento Interno","text":""},{"location":"dependencias/react/axios/#1-arquitectura-de-axios","title":"\ud83d\udd37 1. Arquitectura de Axios","text":"<p>Axios se basa en un sistema modular con estos componentes esenciales:</p> <p>A. Core</p> <ul> <li>Adaptadores:<ul> <li>Usa XMLHttpRequest en navegadores y http en Node.js.</li> <li>Intercambiable (puedes implementar tu propio adaptador).</li> </ul> </li> <li>Interceptores:<ul> <li>Middleware para modificar requests/responses globalmente.</li> </ul> </li> </ul> <pre><code>axios.interceptors.request.use(config =&gt; {\n  config.headers.Authorization = 'Bearer token';\n  return config;\n});\n</code></pre> <ul> <li>Gesti\u00f3n de Promesas:<ul> <li>Convierte callbacks en Promesas para mejor manejo as\u00edncrono.</li> </ul> </li> </ul> <p>B. Capa de Transformaci\u00f3n</p> <ul> <li>Transformaci\u00f3n autom\u00e1tica de datos:<ul> <li>Convierte JSON a objetos JS sin necesidad de .json() (como en Fetch).</li> <li>Soporta transformaci\u00f3n manual con transformRequest/transformResponse.</li> </ul> </li> </ul> <pre><code>axios({\n  transformResponse: [\n    (data) =&gt; JSON.parse(data).customFormat, // Transformaci\u00f3n personalizada\n  ],\n});\n</code></pre> <p>C. Gesti\u00f3n de Errores</p> <ul> <li>Estructura unificada de errores:<ul> <li>Detecta errores de red (4xx/5xx) y los normaliza en un objeto est\u00e1ndar:</li> </ul> </li> </ul> <pre><code>{\n  message: \"Request failed with status code 404\",\n  config: {...},  // Configuraci\u00f3n de la petici\u00f3n\n  response: { data: {}, status: 404 }, // Respuesta del servidor\n  isAxiosError: true\n}\n</code></pre>"},{"location":"dependencias/react/axios/#2-flujo-de-una-peticion-axios","title":"\ud83d\udd37 2. Flujo de una Petici\u00f3n Axios","text":"<ol> <li> <p>Interceptores de Request:</p> <ul> <li>Modifican la configuraci\u00f3n antes de enviar (ej: a\u00f1adir headers).</li> </ul> </li> <li> <p>Adaptador:</p> <ul> <li>Decide si usa XHR (navegador) o http (Node.js).</li> </ul> </li> <li> <p>Transformaci\u00f3n de Request:</p> <ul> <li>Serializa datos (ej: objetos \u2192 JSON).</li> </ul> </li> <li> <p>Respuesta del Servidor:</p> <ul> <li>Recibe datos en crudo.</li> </ul> </li> <li> <p>Transformaci\u00f3n de Response:</p> <ul> <li>Parsea JSON o aplica transformaciones personalizadas.</li> </ul> </li> <li> <p>Interceptores de Response:</p> <ul> <li>Manejo global de errores o datos.</li> </ul> </li> </ol> <p></p>"},{"location":"dependencias/react/axios/#3-cancelacion-de-peticiones","title":"\ud83d\udd37 3. Cancelaci\u00f3n de Peticiones","text":"<p>Axios implementa el enfoque AbortController, al igual que Fetch, para evitar \"memory leaks\" en componentes desmontados:</p> <pre><code>const controller = new AbortController();\n\naxios.get('/api/data', { signal: controller.signal })\n  .catch(error =&gt; {\n    if (error.name === 'AbortError') {\n      console.log('Petici\u00f3n abortada');\n    }\n  });\n\n// Aborta la petici\u00f3n\ncontroller.abort();\n</code></pre>"},{"location":"dependencias/react/axios/#4-teoria-de-interceptores","title":"\ud83d\udd37 4. Teor\u00eda de Interceptores","text":"<p>Los interceptores act\u00faan como middleware en el ciclo de vida de una petici\u00f3n, siguiendo el patr\u00f3n Chain of Responsibility:</p> <pre><code>// Request Interceptor\naxios.interceptors.request.use(\n  (config) =&gt; {\n    console.log('Request enviada:', config.url);\n    return config; // Debe devolver la configuraci\u00f3n modificada\n  },\n  (error) =&gt; Promise.reject(error)\n);\n\n// Response Interceptor\naxios.interceptors.response.use(\n  (response) =&gt; {\n    console.log('Response recibida:', response.status);\n    return response; // Devuelve la respuesta modificada\n  },\n  (error) =&gt; {\n    if (error.response.status === 401) {\n      localStorage.removeItem('token');\n    }\n    return Promise.reject(error);\n  }\n);\n</code></pre>"},{"location":"dependencias/react/axios/#5-gestion-de-concurrencia","title":"\ud83d\udd37 5. Gesti\u00f3n de Concurrencia","text":"<p>Axios incluye m\u00e9todos para manejar m\u00faltiples peticiones simult\u00e1neas:</p> <p><code>axios.all()</code> + <code>axios.spread()</code></p> <pre><code>const [users, posts] = await axios.all([\n  axios.get('/api/users'),\n  axios.get('/api/posts'),\n]);\n\n// Equivalente con Promise.all:\nconst [users, posts] = await Promise.all([...]);\n</code></pre>"},{"location":"dependencias/react/axios/#uso-basico-con-react","title":"Uso B\u00e1sico con React","text":""},{"location":"dependencias/react/axios/#peticion-get-ejemplo-en-un-componente","title":"Petici\u00f3n GET (Ejemplo en un componente)","text":"<pre><code>import axios from 'axios';\nimport { useEffect, useState } from 'react';\n\nfunction UserList() {\n  const [users, setUsers] = useState([]);\n\n  useEffect(() =&gt; {\n    axios.get('https://jsonplaceholder.typicode.com/users')\n      .then((response) =&gt; setUsers(response.data))\n      .catch((error) =&gt; console.error(\"Error fetching users:\", error));\n  }, []);\n\n  return (\n    &lt;ul&gt;\n      {users.map((user) =&gt; (\n        &lt;li key={user.id}&gt;{user.name}&lt;/li&gt;\n      ))}\n    &lt;/ul&gt;\n  );\n}\n</code></pre>"},{"location":"dependencias/react/axios/#peticion-post-ejemplo-con-formulario","title":"Petici\u00f3n POST (Ejemplo con formulario)","text":"<pre><code>function AddPost() {\n  const [title, setTitle] = useState('');\n\n  const handleSubmit = async (e) =&gt; {\n    e.preventDefault();\n    try {\n      await axios.post('https://jsonplaceholder.typicode.com/posts', { title });\n      alert('Post creado!');\n    } catch (error) {\n      console.error(\"Error al crear post:\", error);\n    }\n  };\n\n  return (\n    &lt;form onSubmit={handleSubmit}&gt;\n      &lt;input \n        value={title} \n        onChange={(e) =&gt; setTitle(e.target.value)} \n      /&gt;\n      &lt;button type=\"submit\"&gt;Enviar&lt;/button&gt;\n    &lt;/form&gt;\n  );\n}\n</code></pre>"},{"location":"dependencias/react/axios/#axios-react-router-v7-integracion-avanzada","title":"Axios + React Router v7 (Integraci\u00f3n Avanzada)","text":""},{"location":"dependencias/react/axios/#usando-loader-para-cargar-datos-antes-de-renderizar","title":"Usando loader para cargar datos antes de renderizar","text":"<p>En React Router v7, puedes usar Axios dentro de un loader para precargar datos antes de mostrar la ruta:</p> <pre><code>import { createBrowserRouter, RouterProvider } from 'react-router-dom';\n\nconst router = createBrowserRouter([\n  {\n    path: '/posts',\n    element: &lt;PostsPage /&gt;,\n    loader: async () =&gt; {\n      const response = await axios.get('/api/posts');\n      return response.data; // Los datos estar\u00e1n disponibles en useLoaderData()\n    },\n  },\n]);\n\nfunction PostsPage() {\n  const posts = useLoaderData(); // &lt;- Datos cargados por el loader\n  return (\n    &lt;div&gt;\n      {posts.map((post) =&gt; (\n        &lt;div key={post.id}&gt;{post.title}&lt;/div&gt;\n      ))}\n    &lt;/div&gt;\n  );\n}\n</code></pre>"},{"location":"dependencias/react/axios/#usando-action-para-enviar-datos-postputdelete","title":"Usando action para enviar datos (POST/PUT/DELETE)","text":"<pre><code>{\n  path: '/posts/new',\n  element: &lt;NewPost /&gt;,\n  action: async ({ request }) =&gt; {\n    const formData = await request.formData();\n    const response = await axios.post('/api/posts', Object.fromEntries(formData));\n    return redirect('/posts'); // Redirige despu\u00e9s del \u00e9xito\n  },\n}\n</code></pre>"},{"location":"dependencias/react/axios/#mejores-practicas-con-axios","title":"Mejores Pr\u00e1cticas con Axios","text":""},{"location":"dependencias/react/axios/#crear-una-instancia-reutilizable","title":"Crear una instancia reutilizable","text":"<pre><code>// src/api/axios.js\nimport axios from 'axios';\n\nexport const api = axios.create({\n  baseURL: 'https://api.example.com',\n  timeout: 5000,\n  headers: { 'Authorization': 'Bearer token' },\n});\n</code></pre>"},{"location":"dependencias/react/axios/#interceptores-manejo-global-de-errores","title":"Interceptores (manejo global de errores)","text":"<pre><code>api.interceptors.response.use(\n  (response) =&gt; response,\n  (error) =&gt; {\n    if (error.response.status === 401) {\n      window.location.href = '/login'; // Redirige si no est\u00e1 autenticado\n    }\n    return Promise.reject(error);\n  }\n);\n</code></pre>"},{"location":"dependencias/react/axios/#cancelacion-de-peticiones-evitar-memory-leaks","title":"Cancelaci\u00f3n de peticiones (evitar memory leaks)","text":"<pre><code>useEffect(() =&gt; {\n  const source = axios.CancelToken.source();\n\n  axios.get('/api/data', { cancelToken: source.token })\n    .then((response) =&gt; setData(response.data))\n    .catch((error) =&gt; {\n      if (axios.isCancel(error)) {\n        console.log('Petici\u00f3n cancelada');\n      }\n    });\n\n  return () =&gt; source.cancel(); // Cancela al desmontar el componente\n}, []);\n</code></pre>"},{"location":"dependencias/react/axios/#axios-vs-fetch-nativo","title":"Axios vs Fetch nativo","text":"Caracter\u00edstica Axios Fetch Soporte navegadores M\u00e1s amplio (IE11+) Modernos (necesita polyfill) Transformaci\u00f3n JSON Autom\u00e1tica Manual (response.json()) Interceptores S\u00ed No Cancelaci\u00f3n S\u00ed (AbortController) S\u00ed (AbortController) Progreso de carga S\u00ed No"},{"location":"dependencias/react/date-fns/","title":"Date fns","text":"<p>Es una librer\u00eda moderna de JavaScript para manipulaci\u00f3n de fechas. Su filosof\u00eda se basa en:</p> <ul> <li>Modularidad: Importa solo las funciones que necesitas (reduce el bundle size).</li> <li>Inmutabilidad: Nunca modifica fechas originales (retorna nuevas instancias).</li> <li>Pureza: Funciones sin side effects.</li> <li>TypeScript: Soporte nativo.</li> </ul>"},{"location":"dependencias/react/date-fns/#principios-teoricos-clave","title":"Principios Te\u00f3ricos Clave","text":"<ul> <li> <p>Paradigma Funcional</p> <p>Cada funci\u00f3n en date-fns es autocontenida y determin\u00edstica:</p> </li> </ul> <pre><code>import { addDays, format } from 'date-fns';\n\nconst hoy = new Date();\nconst ma\u00f1ana = addDays(hoy, 1); // No modifica `hoy` (inmutabilidad)\nconsole.log(format(ma\u00f1ana, 'yyyy-MM-dd')); // \"2023-05-21\"\n</code></pre> <ul> <li> <p>Tratamiento de Fechas como Objetos Date Nativos     A diferencia de Moment.js (que usa su propio objeto), date-fns trabaja con el objeto Date de JavaScript, evitando overhead.</p> </li> <li> <p>Internacionalizaci\u00f3n (i18n) Modular</p> </li> </ul> <pre><code>import { format } from 'date-fns';\nimport { es } from 'date-fns/locale';\n\nformat(new Date(), 'PPPP', { locale: es }); // \"martes, 23 de mayo de 2023\"\n</code></pre>"},{"location":"dependencias/react/date-fns/#funciones-esenciales","title":"Funciones Esenciales","text":"<ul> <li>Formateo de Fechas</li> </ul> <pre><code>import { format } from 'date-fns';\n\nformat(new Date(), 'yyyy-MM-dd');       // \"2023-05-23\"\nformat(new Date(), \"HH:mm 'hrs'\");      // \"14:30 hrs\"\nformat(new Date(), 'PPPP');             // \"Tuesday, May 23rd, 2023\"\n</code></pre> <ul> <li>Manipulaci\u00f3n de Fechas</li> </ul> <pre><code>import { addDays, subMonths, differenceInDays } from 'date-fns';\n\nconst hoy = new Date();\naddDays(hoy, 7);       // Suma 7 d\u00edas\nsubMonths(hoy, 2);      // Resta 2 meses\ndifferenceInDays(fechaFin, fechaInicio); // D\u00edas entre dos fechas\n</code></pre> <ul> <li>Comparaci\u00f3n de Fechas</li> </ul> <pre><code>import { isAfter, isEqual, isWithinInterval } from 'date-fns';\n\nisAfter(fecha1, fecha2);          // true si fecha1 &gt; fecha2\nisEqual(fecha1, fecha2);          // true si son iguales\nisWithinInterval(fecha, { start, end }); // \u00bfEst\u00e1 `fecha` en el intervalo?\n</code></pre> <ul> <li>Parsing y Validaci\u00f3n</li> </ul> <pre><code>import { parseISO, isValid } from 'date-fns';\n\nconst fecha = parseISO('2023-05-23'); // Convierte string ISO a Date\nisValid(fecha); // true si es una fecha v\u00e1lida\n</code></pre>"},{"location":"dependencias/react/date-fns/#internacionalizacion-i18n","title":"Internacionalizaci\u00f3n (i18n)","text":"<pre><code>import { format, setDefaultOptions } from 'date-fns';\nimport { es, fr, de } from 'date-fns/locale';\n\n// Configuraci\u00f3n global\nsetDefaultOptions({ locale: es });\n\nformat(new Date(), 'PPPP'); // \"martes, 23 de mayo de 2023\"\n\n// Por funci\u00f3n\nformat(new Date(), 'PPPP', { locale: fr }); // \"mardi 23 mai 2023\"\n</code></pre>"},{"location":"dependencias/react/date-fns/#uso-avanzado-en-react","title":"Uso Avanzado en React","text":"<ul> <li>Hook Personalizado para Fechas</li> </ul> <pre><code>import { useState } from 'react';\nimport { format, addDays } from 'date-fns';\n\nfunction useDateManager(initialDate = new Date()) {\n  const [date, setDate] = useState(initialDate);\n\n  const addDaysToDate = (days) =&gt; setDate(addDays(date, days));\n\n  return {\n    date,\n    formattedDate: format(date, 'yyyy-MM-dd'),\n    addDaysToDate,\n  };\n}\n</code></pre> <ul> <li>Integraci\u00f3n con React Router (ejemplo de filtro por fecha)</li> </ul> <pre><code>import { useLoaderData } from 'react-router-dom';\nimport { format, subDays } from 'date-fns';\n\nexport async function loader() {\n  const fechaInicio = subDays(new Date(), 30); // \u00daltimos 30 d\u00edas\n  const response = await fetch(`/api/ventas?since=${format(fechaInicio, 'yyyy-MM-dd')}`);\n  return response.json();\n}\n\nfunction VentasComponent() {\n  const data = useLoaderData();\n  // ...\n}\n</code></pre>"},{"location":"dependencias/react/exceljs/","title":"ExcelJS","text":"<p>Es una librer\u00eda JavaScript que permite crear, leer y manipular archivos de Excel (XLSX) directamente en el navegador o en Node.js. Cuando se combina con React y Material-UI, puedes crear interfaces elegantes para generar reportes en Excel.</p>"},{"location":"dependencias/react/exceljs/#teoria-de-la-libreria","title":"Teor\u00eda de la Librer\u00eda","text":""},{"location":"dependencias/react/exceljs/#fundamentos-del-formato-excel-xlsx","title":"Fundamentos del formato Excel (XLSX)","text":"<ul> <li> <p>Office Open XML (OOXML): El formato moderno de Excel (.xlsx) es esencialmente un paquete ZIP que contiene m\u00faltiples archivos XML estructurados</p> </li> <li> <p>Workbook.xml: Estructura principal del libro</p> </li> <li> <p>Worksheets/sheetX.xml: Datos de cada hoja</p> </li> <li> <p>Styles.xml: Definiciones de estilos</p> </li> <li> <p>SharedStrings.xml: Strings compartidos para optimizaci\u00f3n</p> </li> <li> <p>Theme.xml: Informaci\u00f3n de temas</p> </li> <li> <p>ExcelJS abstrae esta complejidad proporcionando una API de alto nivel.</p> </li> </ul>"},{"location":"dependencias/react/exceljs/#arquitectura-de-exceljs","title":"Arquitectura de ExcelJS","text":"<p>Modelo de objetos clave:</p> <ul> <li> <p>Workbook (Libro de trabajo)</p> <ul> <li>Contenedor principal que representa un archivo Excel</li> <li>Puede contener m\u00faltiples hojas (Worksheets)</li> <li>Maneja estilos compartidos, temas y propiedades globales</li> </ul> </li> <li> <p>Worksheet (Hoja de c\u00e1lculo)</p> <ul> <li>Representa una pesta\u00f1a/hoja individual</li> <li>Contiene celdas organizadas en filas y columnas</li> <li>Maneja propiedades como congelamiento de paneles, tablas, etc.</li> </ul> </li> <li> <p>Row (Fila)</p> <ul> <li>Unidad horizontal de celdas</li> <li>Puede contener propiedades de formato a nivel de fila</li> </ul> </li> <li> <p>Cell (Celda)</p> <ul> <li>Unidad b\u00e1sica de datos</li> <li>Contiene valor, estilo, f\u00f3rmulas, etc.</li> </ul> </li> <li> <p>Style (Estilo)</p> <ul> <li>Define formato visual: fuentes, bordes, rellenos, alineaci\u00f3n</li> <li>Se puede aplicar a celdas, filas, columnas o rangos</li> </ul> </li> </ul>"},{"location":"dependencias/react/exceljs/#flujo-de-trabajo-tipico","title":"Flujo de trabajo t\u00edpico","text":"<p>Creaci\u00f3n/Manipulaci\u00f3n:</p> <pre><code>const workbook = new ExcelJS.Workbook();\nconst worksheet = workbook.addWorksheet('Mi Hoja');\nworksheet.addRow([1, 'Texto', new Date()]);\n</code></pre> <p>Serializaci\u00f3n:</p> <pre><code>// En el navegador:\nconst buffer = await workbook.xlsx.writeBuffer();\n\n// En Node.js:\nawait workbook.xlsx.writeFile('ruta/archivo.xlsx');\n</code></pre> <p>Parsing (lectura):</p> <pre><code>await workbook.xlsx.load(bufferOrFile);\nconst worksheet = workbook.getWorksheet(1);\n</code></pre>"},{"location":"dependencias/react/exceljs/#teoria-de-implementacion","title":"Teor\u00eda de implementaci\u00f3n","text":"<p>a) Gesti\u00f3n de memoria ExcelJS utiliza un modelo de manipulaci\u00f3n diferida (lazy loading) para manejar grandes conjuntos de datos eficientemente. Las celdas no se crean en memoria hasta que se accede a ellas.</p> <p>b) Sistema de estilos compartidos Implementa un patr\u00f3n Flyweight para estilos, donde m\u00faltiples celdas pueden referenciar el mismo objeto de estilo, reduciendo el uso de memoria.</p> <p>c) Serializaci\u00f3n XML</p> <ul> <li>q Internamente usa:<ul> <li>SAX parser para lectura (bajo consumo de memoria)</li> <li>DOM builder para escritura (m\u00e1s control sobre la estructura)</li> </ul> </li> </ul> <p>d) Soporte para streams En Node.js, implementa interfaces de stream para manejar archivos muy grandes sin cargarlos completamente en memoria.</p>"},{"location":"dependencias/react/exceljs/#teoria-de-integracion-con-react","title":"Teor\u00eda de integraci\u00f3n con React","text":"<ul> <li> <p>Virtual DOM vs Excel DOM React maneja el Virtual DOM para actualizaciones eficientes de la UI, mientras que ExcelJS maneja su propio \"DOM de Excel\" (la representaci\u00f3n en memoria del libro).</p> </li> <li> <p>Patr\u00f3n de reconciliaci\u00f3n Cuando usas ExcelJS con React, esencialmente est\u00e1s haciendo:</p> <ul> <li>Extracci\u00f3n de datos del estado/components de React</li> <li>Transformaci\u00f3n al modelo de ExcelJS</li> <li>Generaci\u00f3n del archivo binario</li> </ul> </li> <li> <p>Principio de responsabilidad \u00fanica</p> <ul> <li>ExcelJS se encarga solo de la generaci\u00f3n del Excel, mientras que:</li> <li>React maneja la UI</li> <li>Material-UI proporciona componentes visuales</li> <li>FileSaver (u otras) maneja la descarga</li> </ul> </li> </ul>"},{"location":"dependencias/react/exceljs/#teoria-de-formatos-condicionales","title":"Teor\u00eda de formatos condicionales","text":"<ul> <li> <p>ExcelJS implementa formatos condicionales mediante:</p> <ul> <li>Funciones de evaluaci\u00f3n: Permite definir l\u00f3gica para aplicar estilos</li> <li>Jerarqu\u00eda de estilos: Estilos pueden heredar/sobrescribir propiedades</li> <li>Caching de resultados: Para mejorar performance en evaluaciones repetidas</li> </ul> </li> </ul> <p>Ejemplo te\u00f3rico:</p> <pre><code>cell.style = {\n  font: { color: { argb: condition ? 'FFFF0000' : 'FF00FF00' } }\n};\n</code></pre>"},{"location":"dependencias/react/exceljs/#modelo-de-extensiones","title":"Modelo de extensiones","text":"<p>ExcelJS est\u00e1 dise\u00f1ado con un sistema de plugins que permite extender funcionalidades como:</p> <ul> <li>Nuevos tipos de formatos</li> <li>Soporte para gr\u00e1ficos avanzados</li> <li>Integraci\u00f3n con f\u00f3rmulas personalizadas</li> </ul>"},{"location":"dependencias/react/exceljs/#teoria-de-seguridad","title":"Teor\u00eda de seguridad","text":"<p>Consideraciones importantes:</p> <ul> <li>Sanitizaci\u00f3n de inputs: Previene inyecci\u00f3n en f\u00f3rmulas</li> <li>Validaci\u00f3n de tipos: Asegura que los valores sean compatibles con Excel</li> <li>Protecci\u00f3n contra XXE: En el parsing de XML</li> </ul>"},{"location":"dependencias/react/exceljs/#uso-basico","title":"Uso B\u00e1sico","text":"<p><code>npm install exceljs file-saver</code></p> <ul> <li>Crear componente</li> </ul> <pre><code>import React from 'react';\nimport Button from '@mui/material/Button';\nimport DownloadIcon from '@mui/icons-material/Download';\nimport ExcelJS from 'exceljs';\nimport { saveAs } from 'file-saver';\n\nconst ExcelExportButton = ({ data }) =&gt; {\n  const exportToExcel = async () =&gt; {\n    // Crear un nuevo libro de trabajo\n    const workbook = new ExcelJS.Workbook();\n    const worksheet = workbook.addWorksheet('Reporte');\n\n    // Agregar encabezados\n    worksheet.columns = [\n      { header: 'ID', key: 'id', width: 10 },\n      { header: 'Nombre', key: 'name', width: 32 },\n      { header: 'Email', key: 'email', width: 32 },\n      { header: 'Fecha', key: 'date', width: 15 },\n    ];\n\n    // Agregar datos\n    data.forEach(item =&gt; {\n      worksheet.addRow(item);\n    });\n\n    // Estilizar encabezados\n    worksheet.getRow(1).eachCell((cell) =&gt; {\n      cell.font = { bold: true };\n      cell.fill = {\n        type: 'pattern',\n        pattern: 'solid',\n        fgColor: { argb: 'FFD3D3D3' }\n      };\n    });\n\n    // Generar el archivo\n    const buffer = await workbook.xlsx.writeBuffer();\n    saveAs(new Blob([buffer]), 'reporte.xlsx');\n  };\n\n  return (\n    &lt;Button \n      variant=\"contained\" \n      color=\"primary\" \n      startIcon={&lt;DownloadIcon /&gt;}\n      onClick={exportToExcel}\n    &gt;\n      Exportar a Excel\n    &lt;/Button&gt;\n  );\n};\n\nexport default ExcelExportButton;\n</code></pre> <ul> <li>Usar componente</li> </ul> <pre><code>import React from 'react';\nimport { Container, Typography } from '@mui/material';\nimport ExcelExportButton from './ExcelExportButton';\n\nconst App = () =&gt; {\n  const sampleData = [\n    { id: 1, name: 'Juan P\u00e9rez', email: 'juan@example.com', date: '2023-05-01' },\n    { id: 2, name: 'Mar\u00eda Garc\u00eda', email: 'maria@example.com', date: '2023-05-02' },\n    { id: 3, name: 'Carlos L\u00f3pez', email: 'carlos@example.com', date: '2023-05-03' },\n  ];\n\n  return (\n    &lt;Container maxWidth=\"md\" sx={{ mt: 4 }}&gt;\n      &lt;Typography variant=\"h4\" gutterBottom&gt;\n        Reporte de Usuarios\n      &lt;/Typography&gt;\n      &lt;ExcelExportButton data={sampleData} /&gt;\n    &lt;/Container&gt;\n  );\n};\n\nexport default App;\n</code></pre>"},{"location":"dependencias/react/exceljs/#caracteristicas-avanzadas","title":"Caracter\u00edsticas avanzadas","text":"<ul> <li>Formato Condicional</li> </ul> <pre><code>worksheet.eachRow((row, rowNumber) =&gt; {\n  if (rowNumber &gt; 1) { // Saltar encabezados\n    const emailCell = row.getCell('email');\n    if (!emailCell.value.includes('@')) {\n      emailCell.font = { color: { argb: 'FFFF0000' }, bold: true };\n    }\n  }\n});\n</code></pre> <ul> <li>Combinar Celdas</li> </ul> <pre><code>worksheet.mergeCells('A1:D1');\nconst titleCell = worksheet.getCell('A1');\ntitleCell.value = 'Reporte de Usuarios';\ntitleCell.font = { size: 16, bold: true };\ntitleCell.alignment = { horizontal: 'center' };\n</code></pre> <ul> <li>Agregar im\u00e1genes</li> </ul> <pre><code>// Es necesario convertir la imagen a buffer primero\nconst imageId = workbook.addImage({\n  buffer: fs.readFileSync('logo.png'),\n  extension: 'png',\n});\n\nworksheet.addImage(imageId, 'A1:C3');\n</code></pre> <ul> <li>Leer archivos Excel</li> </ul> <pre><code>const handleFileUpload = async (event) =&gt; {\n  const file = event.target.files[0];\n  const arrayBuffer = await file.arrayBuffer();\n\n  const workbook = new ExcelJS.Workbook();\n  await workbook.xlsx.load(arrayBuffer);\n\n  const worksheet = workbook.getWorksheet(1);\n  const data = [];\n\n  worksheet.eachRow((row, rowNumber) =&gt; {\n    if (rowNumber &gt; 1) { // Saltar encabezados\n      data.push({\n        id: row.getCell(1).value,\n        name: row.getCell(2).value,\n        email: row.getCell(3).value,\n        date: row.getCell(4).value,\n      });\n    }\n  });\n\n  setImportedData(data);\n};\n</code></pre>"},{"location":"dependencias/react/exceljs/#integracion-con-data-grid-de-mui","title":"Integraci\u00f3n con Data Grid de MUI","text":"<pre><code>import { DataGrid } from '@mui/x-data-grid';\n\nconst ExcelExportDataGrid = ({ rows, columns }) =&gt; {\n  const exportToExcel = async () =&gt; {\n    const workbook = new ExcelJS.Workbook();\n    const worksheet = workbook.addWorksheet('Datos');\n\n    // Agregar encabezados\n    worksheet.columns = columns.map(col =&gt; ({\n      header: col.headerName || col.field,\n      key: col.field,\n      width: 20\n    }));\n\n    // Agregar datos\n    rows.forEach(row =&gt; {\n      worksheet.addRow(row);\n    });\n\n    // Generar archivo\n    const buffer = await workbook.xlsx.writeBuffer();\n    saveAs(new Blob([buffer]), 'datos.xlsx');\n  };\n\n  return (\n    &lt;div style={{ height: 400, width: '100%' }}&gt;\n      &lt;DataGrid\n        rows={rows}\n        columns={columns}\n        components={{\n          Toolbar: () =&gt; (\n            &lt;div&gt;\n              &lt;Button onClick={exportToExcel} startIcon={&lt;DownloadIcon /&gt;}&gt;\n                Exportar\n              &lt;/Button&gt;\n            &lt;/div&gt;\n          ),\n        }}\n      /&gt;\n    &lt;/div&gt;\n  );\n};\n</code></pre>"},{"location":"dependencias/react/exceljs/#consideraciones","title":"Consideraciones","text":"<ol> <li>Tama\u00f1o del archivo: Para conjuntos de datos muy grandes, es mejor procesar en chunks o usar Web Workers.</li> <li>Estilos avanzados: ExcelJS soporta bordes, colores, fuentes y alineaci\u00f3n compleja.</li> <li>Formatos especiales: Se pueden definir formatos para fechas, n\u00fameros, monedas, etc.</li> <li>Rendimiento: Para archivos muy grandes, el proceso puede bloquear la UI. Considerar mostrar un indicador de progreso.</li> </ol>"},{"location":"dependencias/react/mui/","title":"Material UI (MUI)","text":"<p>Material UI (MUI) es una librer\u00eda de componentes UI para React basada en Material Design de Google. Proporciona componentes accesibles, personalizables y listos para producci\u00f3n, permitiendo construir interfaces consistentes y escalables.</p> <p>Este proyecto utiliza MUI Core, MUI Icons y MUI X Pickers como base del sistema de interfaz.</p>"},{"location":"dependencias/react/mui/#por-que-material-ui","title":"\u00bfPor qu\u00e9 Material UI?","text":"<p>MUI es ampliamente utilizado en aplicaciones empresariales por las siguientes razones:</p> <ul> <li>Componentes listos para producci\u00f3n y accesibles (ARIA).</li> <li>Sistema de estilos basado en temas.</li> <li>Integraci\u00f3n nativa con React.</li> <li>Alto nivel de personalizaci\u00f3n sin sacrificar consistencia visual.</li> <li>Ecosistema completo (icons, pickers, data grid, etc.).</li> </ul>"},{"location":"dependencias/react/mui/#teoria-detras-de-mui-fundamentos-y-arquitectura","title":"Teor\u00eda detr\u00e1s de MUI: Fundamentos y Arquitectura","text":""},{"location":"dependencias/react/mui/#1-arquitectura-de-material-ui","title":"\ud83d\udd37 1. Arquitectura de Material UI","text":"<p>Material UI se organiza en capas:</p> <p>A. Componentes Base (@mui/material)</p> <ul> <li>Implementan los principios de Material Design.</li> <li>Incluyen l\u00f3gica de accesibilidad, estados y estilos.</li> <li>Ejemplos: Button, TextField, Dialog, Grid, AppBar.</li> </ul> <pre><code>import { Button, TextField } from '@mui/material';\n</code></pre> <p>B. Sistema de Estilos (Emotion)</p> <p>MUI utiliza Emotion como motor de estilos por defecto:</p> <ul> <li>CSS-in-JS</li> <li>Estilos din\u00e1micos basados en props</li> <li>Scoped styles (evita colisiones globales)</li> </ul> <pre><code>&lt;Button sx={{ mt: 2, backgroundColor: 'primary.main' }}&gt;\n  Guardar\n&lt;/Button&gt;\n</code></pre> <p>C. Theme Provider (Sistema de Temas)</p> <p>El tema es el n\u00facleo de la personalizaci\u00f3n visual:</p> <ul> <li>Paleta de colores</li> <li>Tipograf\u00eda</li> <li>Breakpoints</li> <li>Espaciado</li> <li>Overrides de componentes</li> </ul> <pre><code>import { createTheme, ThemeProvider } from '@mui/material/styles';\n\nconst theme = createTheme({\n  palette: {\n    primary: { main: '#1976d2' },\n    secondary: { main: '#9c27b0' },\n  },\n});\n\n&lt;ThemeProvider theme={theme}&gt;\n  &lt;App /&gt;\n&lt;/ThemeProvider&gt;\n</code></pre>"},{"location":"dependencias/react/mui/#2-flujo-de-renderizado-en-mui","title":"\ud83d\udd37 2. Flujo de Renderizado en MUI","text":"<ol> <li>El componente recibe props.</li> <li>MUI resuelve estilos del tema.</li> <li>Emotion genera las clases CSS.</li> <li>Se renderiza el componente accesible.</li> <li>React actualiza el DOM.</li> </ol> <p>Este enfoque mantiene el renderizado eficiente y consistente.</p>"},{"location":"dependencias/react/mui/#mui-icons","title":"MUI Icons","text":""},{"location":"dependencias/react/mui/#3-arquitectura-de-iconos","title":"\ud83d\udd37 3. Arquitectura de Iconos","text":"<p>MUI Icons provee m\u00e1s de 2.000 iconos SVG oficiales de Material Design.</p> <ul> <li>Cada icono es un componente React.</li> <li>Se renderizan como SVG (escalables y livianos).</li> <li>Integraci\u00f3n directa con props y estilos MUI.</li> </ul> <pre><code>import AddIcon from '@mui/icons-material/Add';\nimport DeleteIcon from '@mui/icons-material/Delete';\n\n&lt;Button startIcon={&lt;AddIcon /&gt;}&gt;\n  Agregar\n&lt;/Button&gt;\n</code></pre> <p>Ventajas:</p> <ul> <li>No requiere librer\u00edas externas.</li> <li>Compatible con el sistema de temas.</li> <li>F\u00e1cil control de tama\u00f1o y color.</li> </ul>"},{"location":"dependencias/react/mui/#mui-x-date-time-pickers","title":"MUI X \u2013 Date &amp; Time Pickers","text":""},{"location":"dependencias/react/mui/#4-arquitectura-de-pickers","title":"\ud83d\udd37 4. Arquitectura de Pickers","text":"<p>Los Pickers pertenecen a @mui/x-date-pickers y est\u00e1n dise\u00f1ados como componentes controlados.</p> <p>Requieren un date adapter para manejar fechas.</p> <pre><code>npm install @mui/x-date-pickers date-fns\n</code></pre>"},{"location":"dependencias/react/mui/#localizationprovider-y-adapter","title":"LocalizationProvider y Adapter","text":"<pre><code>import { LocalizationProvider } from '@mui/x-date-pickers';\nimport { AdapterDateFns } from '@mui/x-date-pickers/AdapterDateFns';\nimport { es } from 'date-fns/locale';\n\n&lt;LocalizationProvider dateAdapter={AdapterDateFns} adapterLocale={es}&gt;\n  &lt;App /&gt;\n&lt;/LocalizationProvider&gt;\n</code></pre>"},{"location":"dependencias/react/mui/#uso-de-datepicker","title":"Uso de DatePicker","text":"<pre><code>import { DatePicker } from '@mui/x-date-pickers/DatePicker';\nimport { TextField } from '@mui/material';\n\n&lt;DatePicker\n  label=\"Fecha\"\n  value={value}\n  onChange={(newValue) =&gt; setValue(newValue)}\n  renderInput={(params) =&gt; &lt;TextField {...params} /&gt;}\n/&gt;\n</code></pre>"},{"location":"dependencias/react/mui/#integracion-con-react-hook-form","title":"Integraci\u00f3n con React Hook Form","text":"<p>MUI se integra con React Hook Form mediante <code>Controller</code>:</p> <pre><code>import { Controller } from 'react-hook-form';\nimport { TextField } from '@mui/material';\n\n&lt;Controller\n  name=\"email\"\n  control={control}\n  render={({ field, fieldState }) =&gt; (\n    &lt;TextField\n      {...field}\n      label=\"Email\"\n      error={!!fieldState.error}\n      helperText={fieldState.error?.message}\n      fullWidth\n    /&gt;\n  )}\n/&gt;\n</code></pre>"},{"location":"dependencias/react/mui/#buenas-practicas-con-mui","title":"Buenas Pr\u00e1cticas con MUI","text":"<ul> <li>Centralizar el tema en un \u00fanico archivo.</li> <li>Usar <code>sx</code> para estilos espec\u00edficos y simples.</li> <li>Evitar estilos inline repetitivos.</li> <li>Reutilizar componentes base.</li> <li>Usar Grid y Stack para layouts consistentes.</li> </ul>"},{"location":"dependencias/react/mui/#mui-vs-css-tradicional","title":"MUI vs CSS Tradicional","text":"Caracter\u00edstica MUI CSS Tradicional Componentes Listos Manuales Accesibilidad Incluida Manual Temas Centralizados No nativo Escalabilidad Alta Media Consistencia Alta Depende del equipo"},{"location":"dependencias/react/mui/#mui-x-data-grid","title":"MUI X \u2013 Data Grid","text":""},{"location":"dependencias/react/mui/#5-arquitectura-de-datagrid","title":"\ud83d\udd37 5. Arquitectura de DataGrid","text":"<p>MUI DataGrid pertenece a @mui/x-data-grid y est\u00e1 dise\u00f1ado para manejar grandes vol\u00famenes de datos de forma eficiente.</p> <p>Caracter\u00edsticas principales:</p> <ul> <li>Virtualizaci\u00f3n de filas y columnas.</li> <li>Paginaci\u00f3n controlada y no controlada.</li> <li>Sorting, filtering y selecci\u00f3n de filas.</li> <li>Integraci\u00f3n nativa con MUI Theme.</li> <li>Optimizado para performance (renderizado parcial).</li> </ul> <pre><code>npm install @mui/x-data-grid\n</code></pre>"},{"location":"dependencias/react/mui/#componentes-disponibles","title":"Componentes disponibles","text":"<ul> <li>DataGrid: versi\u00f3n gratuita (uso general).</li> <li>DataGridPro / Premium: funcionalidades avanzadas (licencia).</li> </ul> <p>En este proyecto se utiliza DataGrid.</p>"},{"location":"dependencias/react/mui/#configuracion-basica","title":"Configuraci\u00f3n b\u00e1sica","text":"<pre><code>import { DataGrid } from '@mui/x-data-grid';\n\nconst columns = [\n  { field: 'id', headerName: 'ID', width: 90 },\n  { field: 'name', headerName: 'Nombre', flex: 1 },\n  { field: 'price', headerName: 'Precio', type: 'number', flex: 1 },\n];\n\nconst rows = [\n  { id: 1, name: 'Producto A', price: 1200 },\n  { id: 2, name: 'Producto B', price: 950 },\n];\n\n&lt;DataGrid\n  rows={rows}\n  columns={columns}\n  pageSizeOptions={[5, 10, 25]}\n  initialState={{\n    pagination: { paginationModel: { pageSize: 10, page: 0 } },\n  }}\n  disableRowSelectionOnClick\n/&gt;\n</code></pre>"},{"location":"dependencias/react/mui/#flujo-interno-del-datagrid","title":"\ud83d\udd37 Flujo interno del DataGrid","text":"<ol> <li>Recepci\u00f3n de filas y columnas.</li> <li>Normalizaci\u00f3n interna de datos.</li> <li>Virtualizaci\u00f3n (solo renderiza lo visible).</li> <li>Aplicaci\u00f3n de sorting/filtering.</li> <li>Renderizado optimizado.</li> </ol> <p>Este flujo permite manejar miles de filas sin impacto significativo en rendimiento.</p>"},{"location":"dependencias/react/mui/#integracion-con-estado-global-redux-toolkit","title":"Integraci\u00f3n con estado global (Redux Toolkit)","text":"<pre><code>const rows = useSelector((state) =&gt; state.products.data);\n\n&lt;DataGrid rows={rows} columns={columns} /&gt;\n</code></pre> <p>Se recomienda:</p> <ul> <li>Mantener los datos en Redux.</li> <li>Controlar filtros/paginaci\u00f3n desde el store solo si es necesario.</li> </ul>"},{"location":"dependencias/react/mui/#integracion-con-apis-axios","title":"Integraci\u00f3n con APIs (Axios)","text":"<pre><code>useEffect(() =&gt; {\n  dispatch(fetchProducts());\n}, []);\n</code></pre> <p>El DataGrid act\u00faa \u00fanicamente como capa de presentaci\u00f3n.</p>"},{"location":"dependencias/react/mui/#personalizacion-y-estilos","title":"Personalizaci\u00f3n y estilos","text":"<pre><code>&lt;DataGrid\n  sx={{\n    '&amp; .MuiDataGrid-columnHeaders': {\n      backgroundColor: 'primary.main',\n      color: 'white',\n    },\n  }}\n/&gt;\n</code></pre>"},{"location":"dependencias/react/mui/#buenas-practicas-con-datagrid","title":"Buenas pr\u00e1cticas con DataGrid","text":"<ul> <li>Usar <code>flex</code> en columnas para layouts responsivos.</li> <li>Evitar recrear <code>columns</code> en cada render.</li> <li>No pasar funciones inline costosas.</li> <li>Usar paginaci\u00f3n server-side cuando el dataset es grande.</li> </ul>"},{"location":"dependencias/react/mui/#datagrid-vs-tabla-html","title":"DataGrid vs Tabla HTML","text":"Caracter\u00edstica DataGrid Tabla HTML Virtualizaci\u00f3n S\u00ed No Performance Alta Baja Sorting Integrado Manual Paginaci\u00f3n Integrada Manual Accesibilidad Alta Manual <p>Material UI proporciona un sistema completo de dise\u00f1o y componentes que acelera el desarrollo y mantiene consistencia visual en aplicaciones React modernas. un sistema completo de dise\u00f1o y componentes que acelera el desarrollo y mantiene consistencia visual en aplicaciones React modernas.</p>"},{"location":"dependencias/react/notistack/","title":"Notistack","text":"<p>Notistack es una extensi\u00f3n de los snackbars de Material-UI que permite:</p> <ul> <li>Apilar m\u00faltiples notificaciones (a diferencia del snackbar nativo de MUI, que solo muestra una a la vez).</li> <li>Personalizar cada snackbar individualmente (posici\u00f3n, duraci\u00f3n, estilo, etc.).</li> <li>Control program\u00e1tico (cerrar, reabrir o actualizar notificaciones desde cualquier parte de la app).</li> <li>Soporte para React (funciona perfectamente con hooks y context).</li> </ul> <p>Esencialmente, resuelve el problema de manejar m\u00faltiples mensajes emergentes sin que se solapen o desaparezcan abruptamente.</p>"},{"location":"dependencias/react/notistack/#teoria-y-funcionamiento","title":"Teor\u00eda y Funcionamiento","text":"<ul> <li>El Snackbar nativo de Material-UI solo muestra un mensaje a la vez. Si se disparan varias notificaciones seguidas, se pierden.</li> <li>Notistack usa una cola (queue) para manejar m\u00faltiples mensajes y los muestra en orden.</li> <li>Permite diferentes tipos de snackbars (\u00e9xito, error, advertencia, info) con estilos predefinidos.</li> <li>Es altamente personalizable (puedes modificar animaciones, tiempo de duraci\u00f3n, posici\u00f3n, etc.).</li> </ul>"},{"location":"dependencias/react/notistack/#arquitectura-basica","title":"Arquitectura b\u00e1sica","text":"<ol> <li> <p>Provider (SnackbarProvider) \u2192 Envuelve la aplicaci\u00f3n y gestiona el estado global de las notificaciones.</p> </li> <li> <p>Hooks (useSnackbar) \u2192 Permite disparar notificaciones desde cualquier componente.</p> </li> <li> <p>Snackbars apilados \u2192 Se muestran en una pila (stack) seg\u00fan su prioridad.</p> </li> </ol>"},{"location":"dependencias/react/notistack/#uso-basico","title":"Uso B\u00e1sico","text":"<p><code>npm install notistack @mui/material @emotion/react @emotion/styled</code></p>"},{"location":"dependencias/react/notistack/#envolver-la-aplicacion-en-snackbarprovider","title":"Envolver la aplicaci\u00f3n en <code>SnackbarProvider</code>:","text":"<pre><code>// App.js o index.js\nimport { SnackbarProvider } from 'notistack';\n\nfunction App() {\n  return (\n    &lt;SnackbarProvider maxSnack={3} autoHideDuration={3000}&gt;\n      &lt;RestoDeTuApp /&gt;\n    &lt;/SnackbarProvider&gt;\n  );\n}\n</code></pre> <p><code>maxSnack</code>: N\u00famero m\u00e1ximo de notificaciones visibles a la vez.</p> <p><code>autoHideDuration</code>: Tiempo en ms antes de que se cierre autom\u00e1ticamente (opcional).</p>"},{"location":"dependencias/react/notistack/#mostrar-notificaciones","title":"Mostrar notificaciones","text":"<p>Se usa el <code>useSnackbar</code> en cualquier componente</p> <pre><code>import { useSnackbar } from 'notistack';\n\nfunction MiComponente() {\n  const { enqueueSnackbar } = useSnackbar();\n\n  const handleClick = () =&gt; {\n    // Notificaci\u00f3n b\u00e1sica\n    enqueueSnackbar('Mensaje de \u00e9xito', { variant: 'success' });\n\n    // Con opciones personalizadas\n    enqueueSnackbar('Error cr\u00edtico', { \n      variant: 'error',\n      persist: true, // No se cierra autom\u00e1ticamente\n      anchorOrigin: { vertical: 'top', horizontal: 'right' }\n    });\n  };\n\n  return &lt;button onClick={handleClick}&gt;Mostrar Notificaci\u00f3n&lt;/button&gt;;\n}\n</code></pre>"},{"location":"dependencias/react/notistack/#variables-disponibles","title":"Variables disponibles","text":"Tipo Uso t\u00edpico default Mensaje neutro success Operaci\u00f3n exitosa error Algo fall\u00f3 warning Advertencia info Informaci\u00f3n adicional"},{"location":"dependencias/react/notistack/#personalizacion-avanzada","title":"Personalizaci\u00f3n Avanzada","text":"<p>A. Cambiar estilos</p> <p>Se puede sobrescribir los estilos con makeStyles (o sx en MUI):</p> <pre><code>import { makeStyles } from '@mui/styles';\n\nconst useStyles = makeStyles(() =&gt; ({\n  success: { backgroundColor: '#4caf50' },\n  error: { backgroundColor: '#f44336' },\n}));\n\n// Luego pasarlo al provider:\n&lt;SnackbarProvider classes={useStyles()}&gt;\n</code></pre> <p>B. A\u00f1adir acciones (botones)</p> <pre><code>enqueueSnackbar('Mensaje con acci\u00f3n', {\n  action: (\n    &lt;Button color=\"inherit\" onClick={() =&gt; alert('Acci\u00f3n ejecutada')}&gt;\n      Cerrar\n    &lt;/Button&gt;\n  ),\n});\n</code></pre> <p>C. Cerrar notificaciones manualmente</p> <pre><code>const { enqueueSnackbar, closeSnackbar } = useSnackbar();\n\nconst key = enqueueSnackbar('Mensaje que puede cerrarse', {\n  action: (key) =&gt; (\n    &lt;Button onClick={() =&gt; closeSnackbar(key)}&gt;Cerrar&lt;/Button&gt;\n  ),\n});\n</code></pre>"},{"location":"dependencias/react/react-hook-form/","title":"React Hook Form","text":"<p>Es una librer\u00eda ligera (~9KB) para gestionar formularios en React con un enfoque basado en hooks. Sus principales ventajas son:</p> <ul> <li>Alto rendimiento: Minimiza renders innecesarios.</li> <li>Validaci\u00f3n f\u00e1cil: Soporta esquemas (Yup, Zod) o validaci\u00f3n nativa.</li> <li>Manejo de errores intuitivo: Acceso r\u00e1pido a mensajes de error.</li> <li>Sin dependencias innecesarias: M\u00e1s liviana que Formik o Redux Form.</li> <li>Controlado o No Controlado: Funciona con ambos enfoques.</li> </ul>"},{"location":"dependencias/react/react-hook-form/#teoria-y-conceptos-clave","title":"Teor\u00eda Y Conceptos Clave","text":"<p>A. Registro de Campos (register)</p> <p>Conecta inputs al formulario sin necesidad de estado local.</p> <p>Ejemplo b\u00e1sico:</p> <pre><code>&lt;input {...register(\"nombre\")} /&gt;\n</code></pre> <p>Esto registra el campo nombre en el formulario.</p> <p>B. Manejo de Env\u00edo (handleSubmit)</p> <p>RHF procesa los datos cuando el formulario pasa la validaci\u00f3n.</p> <p>Estructura:</p> <pre><code>const onSubmit = (data) =&gt; console.log(data); // \"data\" = valores del form\n&lt;form onSubmit={handleSubmit(onSubmit)}&gt;\n</code></pre> <p>C. Validaci\u00f3n</p> <p>Es posible usar:</p> <p>Validaci\u00f3n nativa (HTML5 + JS):</p> <pre><code>&lt;input \n  {...register(\"email\", { \n    required: \"Email es obligatorio\", \n    pattern: { value: /^\\S+@\\S+$/i, message: \"Email inv\u00e1lido\" }\n  })} \n/&gt;\n</code></pre> <p>Esquemas externos (Yup/Zod):</p> <pre><code>import { yupResolver } from '@hookform/resolvers/yup';\nconst schema = yup.object().shape({ email: yup.string().email().required() });\n\nconst { register, handleSubmit } = useForm({ resolver: yupResolver(schema) });\n</code></pre> <p>D. Manejo de Errores (formState.errors)</p> <p>Los errores se acceden desde formState.</p> <pre><code>const { formState: { errors } } = useForm();\n&lt;span&gt;{errors.nombre?.message}&lt;/span&gt;\n</code></pre>"},{"location":"dependencias/react/react-hook-form/#uso-basico","title":"Uso B\u00e1sico","text":"<p><code>npm install react-hook-form</code></p> <p>Ejemplo:</p> <pre><code>import { useForm } from 'react-hook-form';\n\nfunction Formulario() {\n  const { \n    register,\n    handleSubmit,\n    formState: { errors }\n  } = useForm();\n\n  const onSubmit = (data) =&gt; alert(JSON.stringify(data));\n\n  return (\n    &lt;form onSubmit={handleSubmit(onSubmit)}&gt;\n      &lt;input \n        {...register(\"nombre\", { required: \"Campo obligatorio\" })} \n        placeholder=\"Nombre\"\n      /&gt;\n      {errors.nombre &amp;&amp; &lt;span&gt;{errors.nombre.message}&lt;/span&gt;}\n\n      &lt;button type=\"submit\"&gt;Enviar&lt;/button&gt;\n    &lt;/form&gt;\n  );\n}\n</code></pre> <p>Validaci\u00f3n con Yup</p> <pre><code>import { yupResolver } from '@hookform/resolvers/yup';\nimport * as yup from 'yup';\n\nconst schema = yup.object().shape({\n  email: yup.string().email(\"Email inv\u00e1lido\").required(\"Requerido\"),\n  edad: yup.number().min(18, \"Debes ser mayor de edad\").required(),\n});\n\nfunction Formulario() {\n  const { register, handleSubmit, formState: { errors } } = useForm({\n    resolver: yupResolver(schema),\n  });\n\n  return (\n    &lt;form onSubmit={handleSubmit((data) =&gt; console.log(data))}&gt;\n      &lt;input {...register(\"email\")} placeholder=\"Email\" /&gt;\n      {errors.email &amp;&amp; &lt;p&gt;{errors.email.message}&lt;/p&gt;}\n\n      &lt;input {...register(\"edad\")} type=\"number\" placeholder=\"Edad\" /&gt;\n      {errors.edad &amp;&amp; &lt;p&gt;{errors.edad.message}&lt;/p&gt;}\n    &lt;/form&gt;\n  );\n}\n</code></pre>"},{"location":"dependencias/react/react-hook-form/#caracteristicas-avanzadas","title":"Caracter\u00edsticas Avanzadas","text":"<p>A. Formularios Din\u00e1micos (Campos Array)</p> <p>Usar useFieldArray para listas de campos:</p> <pre><code>import { useFieldArray } from 'react-hook-form';\n\nfunction Form() {\n  const { control, register } = useForm();\n  const { fields, append, remove } = useFieldArray({\n    control,\n    name: \"usuarios\", // Nombre del array\n  });\n\n  return (\n    &lt;form&gt;\n      {fields.map((item, index) =&gt; (\n        &lt;div key={item.id}&gt;\n          &lt;input {...register(`usuarios.${index}.nombre`)} /&gt;\n          &lt;button onClick={() =&gt; remove(index)}&gt;Eliminar&lt;/button&gt;\n        &lt;/div&gt;\n      ))}\n      &lt;button onClick={() =&gt; append({ nombre: \"\" })}&gt;Agregar Usuario&lt;/button&gt;\n    &lt;/form&gt;\n  );\n}\n</code></pre> <p>B. Integraci\u00f3n con UI Libraries (MUI, Chakra)</p> <pre><code>import { TextField } from '@mui/material';\nimport { Controller } from 'react-hook-form';\n\nfunction Form() {\n  const { control } = useForm();\n\n  return (\n    &lt;Controller\n      name=\"email\"\n      control={control}\n      render={({ field }) =&gt; (\n        &lt;TextField {...field} label=\"Email\" /&gt;\n      )}\n    /&gt;\n  );\n}\n</code></pre> <p>C. Resetear Formulario</p> <pre><code>const { reset } = useForm();\n\n&lt;button onClick={() =&gt; reset({ nombre: \"\", email: \"\" })}&gt;Limpiar&lt;/button&gt;\n</code></pre>"},{"location":"dependencias/react/reactRouter/","title":"React Router","text":"<p>React Router es la biblioteca est\u00e1ndar para el enrutamiento (navegaci\u00f3n entre p\u00e1ginas) en aplicaciones React. Permite crear aplicaciones de una sola p\u00e1gina (SPA) con navegaci\u00f3n que simula la experiencia de m\u00faltiples p\u00e1ginas, manteniendo la interfaz sincronizada con la URL.</p> <p>Sus principales funciones son:</p> <ul> <li>Mapeo de rutas a componentes: Asocia URLs espec\u00edficas con componentes React</li> <li>Navegaci\u00f3n declarativa: Permite definir enlaces y rutas de forma declarativa</li> <li>Anidamiento de rutas: Soporta rutas hijas y layouts anidados</li> <li>Gesti\u00f3n del historial: Maneja el historial del navegador (atr\u00e1s/adelante)</li> <li>Protecci\u00f3n de rutas: Permite implementar autenticaci\u00f3n y autorizaci\u00f3n</li> </ul>"},{"location":"dependencias/react/reactRouter/#componentes-clave","title":"Componentes clave","text":"Componente/Hook Descripci\u00f3n <code>RouterProvider</code> Provee el router creado con createBrowserRouter (reemplaza a ). <code>Form</code> Reemplaza <code>form</code> para enviar datos a action sin recargar la p\u00e1gina. <code>Link</code> Navegaci\u00f3n SPA (igual que en v6). <code>NavLink</code> Como , pero con estilos activos (ej: className={({ isActive }) =&gt; ...}). <code>Outlet</code> Renderiza rutas hijas (para layouts anidados). <code>ScrollRestoration</code> Auto-ajusta el scroll al cambiar de ruta."},{"location":"dependencias/react/reactRouter/#hooks-esenciales","title":"Hooks esenciales","text":"Hook Descripci\u00f3n useLoaderData() Accede a los datos cargados por loader. useActionData() Obtiene la respuesta de un action (ej: despu\u00e9s de un <code>Form</code>). useRouteError() Maneja errores de carga/acci\u00f3n (reemplaza captura manual con try/catch). useNavigation() Detecta estados de navegaci\u00f3n (loading, submitting, idle). useFetcher() Para cargar datos o acciones sin navegar (ej: APIs modales)."},{"location":"dependencias/react/reactRouter/#ejemplo-de-uso","title":"Ejemplo de uso","text":"<pre><code>import { \n  createBrowserRouter,\n  RouterProvider,\n  Form,\n  Link,\n  Outlet,\n  useLoaderData,\n  useRouteError \n} from 'react-router-dom';\n\n// 1. Define rutas con loaders/actions\nconst router = createBrowserRouter([\n  {\n    path: '/',\n    element: &lt;Layout /&gt;,\n    errorElement: &lt;ErrorPage /&gt;,\n    children: [\n      {\n        index: true,\n        element: &lt;Home /&gt;,\n        loader: () =&gt; fetch('/api/data'), // Carga datos\n      },\n      {\n        path: 'posts',\n        action: ({ request }) =&gt; {        // Maneja submits\n          return createPost(await request.formData());\n        },\n        element: &lt;Posts /&gt;,\n      },\n    ],\n  },\n]);\n\n// 2. Provee el router\nfunction App() {\n  return &lt;RouterProvider router={router} /&gt;;\n}\n\n// 3. Componentes con hooks de RRv7\nfunction Layout() {\n  return (\n    &lt;div&gt;\n      &lt;nav&gt;\n        &lt;Link to=\"/\"&gt;Home&lt;/Link&gt;\n        &lt;Link to=\"/posts\"&gt;Posts&lt;/Link&gt;\n      &lt;/nav&gt;\n      &lt;Outlet /&gt; {/* Renderiza rutas hijas */}\n    &lt;/div&gt;\n  );\n}\n\nfunction Posts() {\n  const data = useLoaderData(); // Datos del loader\n  return (\n    &lt;Form method=\"post\"&gt; {/* Env\u00eda a la acci\u00f3n definida */}\n      &lt;input name=\"title\" /&gt;\n      &lt;button&gt;Guardar&lt;/button&gt;\n    &lt;/Form&gt;\n  );\n}\n\nfunction ErrorPage() {\n  const error = useRouteError(); // Accede al error\n  return &lt;div&gt;Error: {error.message}&lt;/div&gt;;\n}\n</code></pre>"},{"location":"dependencias/react/reactdom/","title":"React Dom","text":"<p>React DOM es un paquete que act\u00faa como puente entre React y el DOM (Document Object Model) del navegador. Es la parte de React que se encarga de renderizar componentes React en el navegador web y de actualizar el DOM cuando cambia el estado de la aplicaci\u00f3n.</p> <p>Sus principales funciones son:</p> <ul> <li>Renderizar componentes React en el DOM: Toma los componentes React y los convierte en elementos HTML reales en la p\u00e1gina.</li> <li>Actualizar eficientemente el DOM: Cuando el estado de la aplicaci\u00f3n cambia, React DOM calcula la diferencia (diffing) entre el DOM actual y el nuevo y aplica solo los cambios necesarios.</li> <li>Gestionar eventos: Proporciona un sistema de eventos sint\u00e9ticos que normaliza los eventos entre navegadores.</li> </ul>"},{"location":"dependencias/react/reactdom/#diferencias-entre-react-y-react-dom","title":"Diferencias entre React y React DOM","text":"<p>React: Contiene la l\u00f3gica central para crear componentes y manejar el estado.</p> <p>React DOM: Se encarga espec\u00edficamente de interactuar con el DOM del navegador.</p>"},{"location":"dependencias/react/reduxToolKit/","title":"Redux Toolkit","text":"<p>Redux Toolkit (RTK) es la forma oficial y recomendada de usar Redux para el manejo de estado global en aplicaciones React. Fue dise\u00f1ado para reducir el boilerplate, estandarizar buenas pr\u00e1cticas y simplificar patrones complejos presentes en Redux cl\u00e1sico.</p>"},{"location":"dependencias/react/reduxToolKit/#por-que-redux-toolkit","title":"\u00bfPor qu\u00e9 Redux Toolkit?","text":"<p>Redux Toolkit resuelve los principales problemas hist\u00f3ricos de Redux:</p> <ul> <li>Exceso de c\u00f3digo repetitivo (actions, reducers, constants).</li> <li>Configuraci\u00f3n compleja del store.</li> <li>Manejo manual de inmutabilidad.</li> <li>Curva de aprendizaje elevada.</li> </ul> <p>RTK proporciona abstracciones de alto nivel que encapsulan estas complejidades sin perder control ni predictibilidad.</p>"},{"location":"dependencias/react/reduxToolKit/#teoria-detras-de-redux-toolkit-fundamentos-y-funcionamiento-interno","title":"Teor\u00eda detr\u00e1s de Redux Toolkit: Fundamentos y Funcionamiento Interno","text":""},{"location":"dependencias/react/reduxToolKit/#1-arquitectura-de-redux-toolkit","title":"\ud83d\udd37 1. Arquitectura de Redux Toolkit","text":"<p>Redux Toolkit se construye sobre Redux, integrando varias herramientas clave:</p> <p>A. Store (Single Source of Truth)</p> <ul> <li>El estado global se almacena en un \u00fanico objeto centralizado.</li> <li>Solo puede modificarse mediante acciones.</li> </ul> <p>RTK provee <code>configureStore</code>, que:</p> <ul> <li>Combina reducers autom\u00e1ticamente.</li> <li>Incluye middleware por defecto (<code>redux-thunk</code>).</li> <li>Habilita Redux DevTools sin configuraci\u00f3n adicional.</li> </ul> <pre><code>import { configureStore } from '@reduxjs/toolkit';\n\nexport const store = configureStore({\n  reducer: {\n    example: exampleReducer,\n  },\n});\n</code></pre> <p>B. Reducers + Actions (Slices)</p> <p>RTK introduce el concepto de slice, que agrupa:</p> <ul> <li>Estado inicial</li> <li>Reducers</li> <li>Action creators</li> </ul> <p>Todo en una sola definici\u00f3n.</p> <pre><code>import { createSlice } from '@reduxjs/toolkit';\n\nconst exampleSlice = createSlice({\n  name: 'example',\n  initialState: { value: 0 },\n  reducers: {\n    increment: (state) =&gt; {\n      state.value += 1; // Mutaci\u00f3n segura con Immer\n    },\n    decrement: (state) =&gt; {\n      state.value -= 1;\n    },\n  },\n});\n\nexport const { increment, decrement } = exampleSlice.actions;\nexport default exampleSlice.reducer;\n</code></pre> <p>Internamente, RTK utiliza Immer, lo que permite escribir c\u00f3digo mutable que se convierte en inmutable de forma segura.</p> <p>C. Middleware y Thunks</p> <p>Redux Toolkit incluye redux-thunk por defecto para manejar l\u00f3gica as\u00edncrona.</p> <p>Para ello se utiliza <code>createAsyncThunk</code>, que genera autom\u00e1ticamente:</p> <ul> <li>Acci\u00f3n <code>pending</code></li> <li>Acci\u00f3n <code>fulfilled</code></li> <li>Acci\u00f3n <code>rejected</code></li> </ul> <pre><code>import { createAsyncThunk } from '@reduxjs/toolkit';\nimport axios from 'axios';\n\nexport const fetchUsers = createAsyncThunk(\n  'users/fetchUsers',\n  async () =&gt; {\n    const response = await axios.get('/api/users');\n    return response.data;\n  }\n);\n</code></pre>"},{"location":"dependencias/react/reduxToolKit/#2-flujo-de-datos-en-redux-toolkit","title":"\ud83d\udd37 2. Flujo de Datos en Redux Toolkit","text":"<ol> <li>El componente despacha una acci\u00f3n (<code>dispatch</code>).</li> <li>El reducer del slice procesa la acci\u00f3n.</li> <li>Immer genera un nuevo estado inmutable.</li> <li>El store notifica a los componentes suscritos.</li> <li>React vuelve a renderizar con el nuevo estado.</li> </ol> <p>Este flujo sigue estrictamente el patr\u00f3n unidireccional de Redux.</p>"},{"location":"dependencias/react/reduxToolKit/#3-manejo-de-estado-asincrono","title":"\ud83d\udd37 3. Manejo de Estado As\u00edncrono","text":"<p>Ejemplo completo con <code>extraReducers</code>:</p> <pre><code>const usersSlice = createSlice({\n  name: 'users',\n  initialState: {\n    data: [],\n    loading: false,\n    error: null,\n  },\n  reducers: {},\n  extraReducers: (builder) =&gt; {\n    builder\n      .addCase(fetchUsers.pending, (state) =&gt; {\n        state.loading = true;\n      })\n      .addCase(fetchUsers.fulfilled, (state, action) =&gt; {\n        state.loading = false;\n        state.data = action.payload;\n      })\n      .addCase(fetchUsers.rejected, (state, action) =&gt; {\n        state.loading = false;\n        state.error = action.error.message;\n      });\n  },\n});\n</code></pre>"},{"location":"dependencias/react/reduxToolKit/#4-integracion-con-react","title":"\ud83d\udd37 4. Integraci\u00f3n con React","text":"<p>Redux Toolkit se utiliza junto a react-redux.</p>"},{"location":"dependencias/react/reduxToolKit/#configuracion-del-provider","title":"Configuraci\u00f3n del Provider","text":"<pre><code>import { Provider } from 'react-redux';\nimport { store } from './store';\n\nroot.render(\n  &lt;Provider store={store}&gt;\n    &lt;App /&gt;\n  &lt;/Provider&gt;\n);\n</code></pre>"},{"location":"dependencias/react/reduxToolKit/#uso-en-componentes","title":"Uso en componentes","text":"<pre><code>import { useDispatch, useSelector } from 'react-redux';\n\nfunction Counter() {\n  const value = useSelector((state) =&gt; state.example.value);\n  const dispatch = useDispatch();\n\n  return (\n    &lt;div&gt;\n      &lt;span&gt;{value}&lt;/span&gt;\n      &lt;button onClick={() =&gt; dispatch(increment())}&gt;+&lt;/button&gt;\n    &lt;/div&gt;\n  );\n}\n</code></pre>"},{"location":"dependencias/react/reduxToolKit/#5-normalizacion-y-escalabilidad","title":"\ud83d\udd37 5. Normalizaci\u00f3n y Escalabilidad","text":"<p>Buenas pr\u00e1cticas recomendadas:</p> <ul> <li>Un slice por dominio funcional.</li> <li>Evitar l\u00f3gica compleja dentro de componentes.</li> <li>Centralizar llamadas a API en thunks.</li> <li>Normalizar entidades cuando el estado crece (por id).</li> </ul>"},{"location":"dependencias/react/reduxToolKit/#6-redux-toolkit-react-router","title":"\ud83d\udd37 6. Redux Toolkit + React Router","text":"<p>Redux Toolkit puede convivir con loaders/actions de React Router:</p> <ul> <li>Redux: estado global (auth, usuario, UI).</li> <li>Router loaders: datos espec\u00edficos de rutas.</li> </ul> <p>No se recomienda duplicar datos entre ambos.</p>"},{"location":"dependencias/react/reduxToolKit/#7-redux-toolkit-vs-redux-clasico","title":"\ud83d\udd37 7. Redux Toolkit vs Redux Cl\u00e1sico","text":"Caracter\u00edstica Redux Toolkit Redux Cl\u00e1sico Boilerplate Bajo Alto Inmutabilidad Autom\u00e1tica (Immer) Manual Async createAsyncThunk Thunks manuales DevTools Incluido Configuraci\u00f3n manual Escalabilidad Alta Compleja"},{"location":"dependencias/react/reduxToolKit/#mejores-practicas-con-redux-toolkit","title":"Mejores Pr\u00e1cticas con Redux Toolkit","text":"<ul> <li>Usar RTK como \u00fanica forma de Redux.</li> <li>Mantener slices peque\u00f1os y enfocados.</li> <li>No mutar estado fuera de reducers.</li> <li>Usar selectors para desacoplar componentes.</li> </ul> <p>Redux Toolkit proporciona una arquitectura robusta, predecible y escalable para el manejo de estado global en aplicaciones React modernas.</p>"},{"location":"dependencias/react/yup/","title":"Yup","text":"<p>Yup es una librer\u00eda de validaci\u00f3n de esquemas basada en Promesas, ampliamente utilizada en aplicaciones React para validar formularios y estructuras de datos. Se integra de forma natural con React Hook Form, permitiendo definir reglas de validaci\u00f3n declarativas, reutilizables y escalables.</p> <p>En este proyecto, Yup es el est\u00e1ndar para la validaci\u00f3n de formularios.</p>"},{"location":"dependencias/react/yup/#por-que-yup","title":"\u00bfPor qu\u00e9 Yup?","text":"<p>Yup resuelve problemas comunes de validaci\u00f3n:</p> <ul> <li>Validaciones distribuidas y repetidas en componentes.</li> <li>L\u00f3gica imperativa dif\u00edcil de mantener.</li> <li>Inconsistencias entre frontend y backend.</li> </ul> <p>Ventajas principales:</p> <ul> <li>Validaci\u00f3n declarativa basada en esquemas.</li> <li>Soporte para validaciones s\u00edncronas y as\u00edncronas.</li> <li>Composici\u00f3n y reutilizaci\u00f3n de reglas.</li> <li>Integraci\u00f3n directa con React Hook Form.</li> </ul>"},{"location":"dependencias/react/yup/#teoria-detras-de-yup-fundamentos-y-arquitectura","title":"Teor\u00eda detr\u00e1s de Yup: Fundamentos y Arquitectura","text":""},{"location":"dependencias/react/yup/#1-arquitectura-de-yup","title":"\ud83d\udd37 1. Arquitectura de Yup","text":"<p>Yup se basa en el concepto de Schema Validation:</p> <ul> <li>Un schema describe la forma y reglas de un objeto.</li> <li>Los datos se validan contra ese schema.</li> <li>El resultado es un objeto validado o un conjunto de errores estructurados.</li> </ul> <p>Tipos principales de schemas:</p> <ul> <li><code>string()</code></li> <li><code>number()</code></li> <li><code>boolean()</code></li> <li><code>date()</code></li> <li><code>array()</code></li> <li><code>object()</code></li> </ul> <pre><code>import * as yup from 'yup';\n\nconst schema = yup.object({\n  name: yup.string().required(),\n  age: yup.number().min(18),\n});\n</code></pre>"},{"location":"dependencias/react/yup/#2-flujo-de-validacion-en-yup","title":"\ud83d\udd37 2. Flujo de Validaci\u00f3n en Yup","text":"<ol> <li>Se define un schema.</li> <li>Se pasan los datos a validar.</li> <li>Yup ejecuta las reglas de arriba hacia abajo.</li> <li>Se generan errores tipados por campo.</li> <li>Se retorna el resultado o se lanza una excepci\u00f3n.</li> </ol> <p>Este flujo permite validaciones predecibles y reutilizables.</p>"},{"location":"dependencias/react/yup/#3-tipos-de-validacion","title":"\ud83d\udd37 3. Tipos de Validaci\u00f3n","text":""},{"location":"dependencias/react/yup/#validacion-basica","title":"Validaci\u00f3n b\u00e1sica","text":"<pre><code>yup.string()\n  .required('Campo obligatorio')\n  .email('Email inv\u00e1lido');\n</code></pre>"},{"location":"dependencias/react/yup/#validacion-condicional","title":"Validaci\u00f3n condicional","text":"<pre><code>yup.string().when('isCompany', {\n  is: true,\n  then: (schema) =&gt; schema.required(),\n  otherwise: (schema) =&gt; schema.notRequired(),\n});\n</code></pre>"},{"location":"dependencias/react/yup/#validacion-basada-en-multiples-campos","title":"Validaci\u00f3n basada en m\u00faltiples campos","text":"<pre><code>yup.string().oneOf([\n  yup.ref('password'),\n], 'Las contrase\u00f1as no coinciden');\n</code></pre>"},{"location":"dependencias/react/yup/#4-manejo-de-errores","title":"\ud83d\udd37 4. Manejo de Errores","text":"<p>Yup retorna errores estructurados por campo:</p> <pre><code>{\n  name: 'ValidationError',\n  errors: ['Campo obligatorio'],\n  inner: [\n    { path: 'email', message: 'Email inv\u00e1lido' }\n  ]\n}\n</code></pre> <p>Esto permite mapear errores f\u00e1cilmente a la UI.</p>"},{"location":"dependencias/react/yup/#integracion-con-react-hook-form","title":"Integraci\u00f3n con React Hook Form","text":"<p>La integraci\u00f3n se realiza mediante <code>@hookform/resolvers/yup</code>.</p> <pre><code>npm install yup @hookform/resolvers\n</code></pre>"},{"location":"dependencias/react/yup/#configuracion-del-resolver","title":"Configuraci\u00f3n del resolver","text":"<pre><code>import { useForm } from 'react-hook-form';\nimport { yupResolver } from '@hookform/resolvers/yup';\nimport * as yup from 'yup';\n\nconst schema = yup.object({\n  email: yup.string().email().required(),\n  password: yup.string().min(8).required(),\n});\n\nconst { control, handleSubmit } = useForm({\n  resolver: yupResolver(schema),\n});\n</code></pre>"},{"location":"dependencias/react/yup/#uso-con-mui","title":"Uso con MUI","text":"<pre><code>&lt;Controller\n  name=\"email\"\n  control={control}\n  render={({ field, fieldState }) =&gt; (\n    &lt;TextField\n      {...field}\n      label=\"Email\"\n      error={!!fieldState.error}\n      helperText={fieldState.error?.message}\n    /&gt;\n  )}\n/&gt;\n</code></pre>"},{"location":"dependencias/react/yup/#validaciones-asincronas","title":"Validaciones As\u00edncronas","text":"<p>Yup permite validaciones que dependen de l\u00f3gica externa:</p> <pre><code>yup.string().test(\n  'email-unique',\n  'El email ya existe',\n  async (value) =&gt; {\n    const exists = await api.checkEmail(value);\n    return !exists;\n  }\n);\n</code></pre>"},{"location":"dependencias/react/yup/#reutilizacion-y-composicion-de-schemas","title":"Reutilizaci\u00f3n y Composici\u00f3n de Schemas","text":"<pre><code>const baseUserSchema = {\n  email: yup.string().email().required(),\n};\n\nconst createUserSchema = yup.object({\n  ...baseUserSchema,\n  password: yup.string().min(8).required(),\n});\n</code></pre> <p>Este enfoque favorece la escalabilidad del proyecto.</p>"},{"location":"dependencias/react/yup/#buenas-practicas-con-yup","title":"Buenas Pr\u00e1cticas con Yup","text":"<ul> <li>Centralizar schemas en una carpeta (<code>schemas/</code>).</li> <li>Reutilizar reglas comunes.</li> <li>Evitar validaciones complejas dentro de componentes.</li> <li>Mantener mensajes de error claros y consistentes.</li> <li>Alinear reglas con validaciones del backend.</li> </ul>"},{"location":"dependencias/react/yup/#yup-vs-validacion-manual","title":"Yup vs Validaci\u00f3n Manual","text":"Caracter\u00edstica Yup Validaci\u00f3n Manual Declarativa S\u00ed No Reutilizable Alta Baja Integraci\u00f3n RHF Nativa Manual Escalabilidad Alta Baja Mantenibilidad Alta Baja <p>Yup proporciona un sistema de validaci\u00f3n robusto, declarativo y escalable, ideal para formularios complejos en aplicaciones React modernas.</p>"},{"location":"instalacion/instalacion_Django/","title":"Gu\u00eda de Instalaci\u00f3n de Django","text":"<p>Este documento es una gu\u00eda para el proceso de instalaci\u00f3n de un proyecto Django en la m\u00e1quina local. es necesario seguir cada paso para configurar correctamente el entorno.</p>"},{"location":"instalacion/instalacion_Django/#requisitos-previos","title":"Requisitos previos","text":"<p>Antes de comenzar, hay que tener los siguientes requisitos instalados en el sistema:</p> <ul> <li>Python 3.10+</li> <li>Pip </li> <li>Virtualenv </li> </ul>"},{"location":"instalacion/instalacion_Django/#1-crear-un-entorno-virtual","title":"1. Crear un entorno virtual","text":"<p>Es recomendable utilizar un entorno virtual para evitar conflictos con otras librer\u00edas de Python que se pueda tener instaladas globalmente. Para crear un entorno virtual, estos son los pasos:</p>"},{"location":"instalacion/instalacion_Django/#navegar-al-directorio-de-trabajo","title":"Navegar al directorio de trabajo","text":"<p>cd /ruta/a/tu/proyecto</p>"},{"location":"instalacion/instalacion_Django/#crear-un-entorno-virtual","title":"Crear un entorno virtual","text":"<p>python3 -m venv env</p>"},{"location":"instalacion/instalacion_Django/#activar-el-entorno-virtual","title":"Activar el entorno virtual","text":"<p>venv\\Scripts\\activate</p>"},{"location":"instalacion/instalacion_Django/#tips","title":"Tips","text":"<ul> <li>En la carpeta del proyecto crear el entorno virtual con virtualenv venv </li> <li>Para activar el entorno se hace en la carpeta Scripts y luego ./activate</li> <li>Si esta correcto, en la terminal se ver\u00e1 el nombre de la carpeta antes de la ruta</li> </ul>"},{"location":"instalacion/instalacion_Django/#2-instalar-django","title":"2. Instalar Django","text":"<p>Una vez que se tenga el entorno virtual activo, es posible instalar Django utilizando <code>pip</code>:</p> <p>pip install django</p>"},{"location":"instalacion/instalacion_Django/#3-crear-un-nuevo-proyecto-django","title":"3. Crear un nuevo proyecto Django","text":"<p>django-admin startproject nombre_del_proyecto</p> <p>cd nombre_del_proyecto</p>"},{"location":"instalacion/instalacion_Django/#tips_1","title":"Tips","text":"<ul> <li>Crear carpeta donde ir\u00e1 el proyecto de Backend (backend)</li> <li>Cambiar a la carpeta del proyecto (cd backendNombre) </li> <li>Crear el proyecto django-admin startproject nombreProyecto</li> <li>Se crea el archivo manage.py, el cual maneja todo el proyecto</li> <li>En la carpeta del proyecto (cd nombreProyecto)</li> <li>Pedir\u00e1 las migraciones iniciales, pero es preferible hacerlas despu\u00e9s de crear el modelo del usuario para que no tenga conflictos</li> </ul>"},{"location":"instalacion/instalacion_Django/#4-verificar-la-instalacion","title":"4. Verificar la instalaci\u00f3n","text":"<p>python manage.py runserver</p> <p>Esto iniciar\u00e1 el servidor de desarrollo en http://127.0.0.1:8000/. Si se visualiza la p\u00e1gina predeterminada de Django, significa que la instalaci\u00f3n fue exitosa.</p>"},{"location":"instalacion/instalacion_Django/#5-crear-la-aplicacion","title":"5. Crear la Aplicaci\u00f3n","text":"<p>python manage.py startapp nombre_de_app </p> <p>Esto crear\u00e1 una nueva carpeta con la estructura b\u00e1sica de una aplicaci\u00f3n Django. Ahora se puede empezar a desarrollar la funcionalidad de la aplicaci\u00f3n.</p>"},{"location":"instalacion/instalacion_Django/#tips_2","title":"Tips","text":"<ul> <li>Es necesario conectar la aplicaci\u00f3n con el proyecto de Django, en settings.py</li> </ul> <pre><code>INSTALLED_APPS = [\n    'nombre.apps.NombreConfig',\n\n]\n</code></pre>"},{"location":"instalacion/instalacion_React/","title":"Gu\u00eda de Instalaci\u00f3n de React","text":"<p>Este documento describe el proceso de instalaci\u00f3n y configuraci\u00f3n inicial de un proyecto React en un entorno Windows. El objetivo es estandarizar la preparaci\u00f3n del entorno de desarrollo para cualquier desarrollador que utilice este proyecto.</p>"},{"location":"instalacion/instalacion_React/#requisitos-previos","title":"Requisitos previos","text":"<p>Antes de comenzar, es necesario contar con los siguientes requisitos instalados en el sistema:</p> <ul> <li>Windows 10 / 11</li> <li>Node.js 18+ (incluye npm)</li> <li>npm (incluido con Node.js)</li> <li>Git (recomendado)</li> </ul> <p>Para verificar las versiones instaladas:</p> <pre><code>node -v\nnpm -v\ngit --version\n</code></pre>"},{"location":"instalacion/instalacion_React/#1-crear-el-proyecto-react","title":"1. Crear el proyecto React","text":"<p>Para este proyecto se utiliza Vite como herramienta de inicializaci\u00f3n, debido a su rapidez y configuraci\u00f3n moderna.</p>"},{"location":"instalacion/instalacion_React/#navegar-al-directorio-de-trabajo","title":"Navegar al directorio de trabajo","text":"<pre><code>cd C:\\ruta\\al\\proyecto\n</code></pre>"},{"location":"instalacion/instalacion_React/#crear-el-proyecto-con-vite","title":"Crear el proyecto con Vite","text":"<pre><code>npm create vite@latest nombre-del-proyecto\n</code></pre> <p>Durante la creaci\u00f3n:</p> <ul> <li>Seleccionar React</li> <li>Elegir JavaScript o TypeScript seg\u00fan definici\u00f3n del proyecto</li> </ul> <p>Luego acceder al directorio del proyecto:</p> <pre><code>cd nombre-del-proyecto\n</code></pre>"},{"location":"instalacion/instalacion_React/#tips","title":"Tips","text":"<ul> <li>Se recomienda crear una carpeta frontend para el proyecto React</li> <li>Usar nombres en min\u00fascula y sin espacios</li> </ul>"},{"location":"instalacion/instalacion_React/#2-instalar-dependencias-base","title":"2. Instalar dependencias base","text":"<p>Dentro del proyecto, instalar las dependencias iniciales:</p> <pre><code>npm install\n</code></pre> <p>Esto instalar\u00e1 todas las librer\u00edas definidas en <code>package.json</code>.</p>"},{"location":"instalacion/instalacion_React/#3-instalar-librerias-utilizadas-en-el-proyecto","title":"3. Instalar librer\u00edas utilizadas en el proyecto","text":"<p>El proyecto utiliza las siguientes librer\u00edas principales:</p>"},{"location":"instalacion/instalacion_React/#react-router-dom-ruteo","title":"React Router DOM (ruteo)","text":"<pre><code>npm install react-router-dom\n</code></pre>"},{"location":"instalacion/instalacion_React/#react-hook-form-manejo-de-formularios","title":"React Hook Form (manejo de formularios)","text":"<pre><code>npm install react-hook-form\n</code></pre>"},{"location":"instalacion/instalacion_React/#material-ui-interfaz-grafica","title":"Material UI (interfaz gr\u00e1fica)","text":"<pre><code>npm install @mui/material @emotion/react @emotion/styled\n</code></pre>"},{"location":"instalacion/instalacion_React/#axios-consumo-de-apis","title":"Axios (consumo de APIs)","text":"<pre><code>npm install axios\n</code></pre>"},{"location":"instalacion/instalacion_React/#4-levantar-el-servidor-de-desarrollo","title":"4. Levantar el servidor de desarrollo","text":"<p>Para iniciar el servidor local:</p> <pre><code>npm run dev\n</code></pre> <p>El proyecto quedar\u00e1 disponible en una URL similar a:</p> <pre><code>http://localhost:5173/\n</code></pre> <p>Si se visualiza la pantalla inicial del proyecto, la instalaci\u00f3n fue exitosa.</p>"},{"location":"instalacion/instalacion_React/#5-estructura-base-del-proyecto","title":"5. Estructura base del proyecto","text":"<p>La estructura general del proyecto es la siguiente:</p> <pre><code>nombre-del-proyecto/\n\u251c\u2500\u2500 public/\n\u251c\u2500\u2500 src/\n\u2502   \u251c\u2500\u2500 assets/\n\u2502   \u251c\u2500\u2500 components/\n\u2502   \u251c\u2500\u2500 pages/\n\u2502   \u251c\u2500\u2500 services/\n\u2502   \u251c\u2500\u2500 hooks/\n\u2502   \u251c\u2500\u2500 App.jsx\n\u2502   \u251c\u2500\u2500 main.jsx\n\u2502   \u2514\u2500\u2500 index.css\n\u251c\u2500\u2500 index.html\n\u251c\u2500\u2500 package.json\n\u251c\u2500\u2500 vite.config.js\n\u2514\u2500\u2500 .gitignore\n</code></pre> <ul> <li>main.jsx: punto de entrada de la aplicaci\u00f3n</li> <li>App.jsx: configuraci\u00f3n principal de rutas y layout</li> <li>services/: configuraci\u00f3n de Axios y servicios de API</li> </ul>"},{"location":"instalacion/instalacion_React/#6-variables-de-entorno","title":"6. Variables de entorno","text":"<p>Para configurar variables de entorno, crear un archivo <code>.env</code> en la ra\u00edz del proyecto:</p> <pre><code>VITE_API_URL=http://localhost:8000\n</code></pre> <p>Las variables deben comenzar con <code>VITE_</code> para que Vite pueda exponerlas al proyecto.</p>"},{"location":"instalacion/instalacion_React/#7-build-para-produccion","title":"7. Build para producci\u00f3n","text":"<p>Para generar la versi\u00f3n optimizada del proyecto:</p> <pre><code>npm run build\n</code></pre> <p>Se generar\u00e1 la carpeta <code>dist/</code>, la cual contiene los archivos listos para despliegue.</p>"},{"location":"instalacion/instalacion_React/#8-verificacion-final","title":"8. Verificaci\u00f3n final","text":"<p>La instalaci\u00f3n se considera correcta si:</p> <ul> <li>El proyecto instala dependencias sin errores</li> <li>El servidor de desarrollo levanta correctamente</li> <li>La aplicaci\u00f3n se visualiza en el navegador</li> </ul> <p>El entorno React ha sido configurado correctamente y est\u00e1 listo para desarrollo.</p>"},{"location":"proyecto/backend/nota_app/admin/","title":"Archivo <code>admin.py</code>","text":""},{"location":"proyecto/backend/nota_app/admin/#importaciones","title":"Importaciones","text":"<pre><code>from django.contrib import admin\nfrom .models import Usuarios, Notas, Clientes\nfrom .forms import UsuarioAdminForm\n</code></pre> <ul> <li>django.contrib.admin: M\u00f3dulo base del sistema de administraci\u00f3n de Django.</li> <li>Usuarios, Notas, Clientes: Modelos definidos en la aplicaci\u00f3n actual.</li> <li>UsuarioAdminForm: Formulario personalizado para el modelo Usuarios.</li> </ul>"},{"location":"proyecto/backend/nota_app/admin/#clase-usuarioadmin","title":"Clase: UsuarioAdmin","text":"<p><pre><code>class UsuarioAdmin(admin.ModelAdmin):\n</code></pre> Define una configuraci\u00f3n personalizada del panel de administraci\u00f3n para el modelo Usuarios, heredando de admin.ModelAdmin.</p>"},{"location":"proyecto/backend/nota_app/admin/#atributos-definidos","title":"Atributos definidos:","text":"<pre><code>form = UsuarioAdminForm\n    list_display = ('username', 'nombre', 'apellido', 'correo', 'rut', 'cargo', 'is_staff', 'is_active')\n    search_fields = ('username', 'correo', 'rut', 'nombre', 'apellido')\n    list_filter = ('is_staff', 'is_active')\n    ordering = ('id',)\n\n    fieldsets = (\n        (None, {'fields': ('username', 'password')}),\n        ('Datos personales', {'fields': ('nombre', 'apellido', 'correo', 'rut', 'cargo')}),\n        ('Permisos', {'fields': ('is_staff', 'is_active', 'is_superuser', 'groups', 'user_permissions')}),\n</code></pre> <ul> <li> <p>form: Utiliza un formulario personalizado para validar o extender el comportamiento del modelo en el panel de administraci\u00f3n.</p> </li> <li> <p>list_display: Define las columnas visibles en la vista de lista de objetos Usuarios.</p> </li> <li> <p>search_fields: Permite la b\u00fasqueda r\u00e1pida por los campos especificados.</p> </li> <li> <p>list_filter: Agrega filtros laterales para los atributos booleanos m\u00e1s relevantes del modelo.</p> </li> <li> <p>ordering: Define el orden por defecto (ascendente) por ID.</p> </li> <li> <p>fieldsets: Agrupa los campos del formulario en secciones l\u00f3gicas dentro del formulario de edici\u00f3n.</p> </li> </ul> <p>El siguiente c\u00f3digo define recursos para importar y exportar datos usando la librer\u00eda django-import-export y luego los asocia a clases del panel de administraci\u00f3n de Django.</p> <p>Cada ModelResource determina qu\u00e9 modelo se puede importar/exportar, y opcionalmente qu\u00e9 campos incluir, c\u00f3mo identificar registros y c\u00f3mo manejarlos durante la importaci\u00f3n.</p> <p>Finalmente, las clases Admin asocian cada recurso a su respectiva vista en el Django Admin.</p> <pre><code>class PersonalResource(resources.ModelResource):\n\n    class Meta:\n        model = Personal\n        import_id_fields = ()\n        fields = (\n            'nombre',\n            'apellido',\n            'rut',\n            'correo',\n            'direccion',\n            'comuna',\n            'telefono',\n            'cargo',\n            'id_usuario',\n        )\n\n\nclass ProveedoresResource(resources.ModelResource):\n    class Meta:\n        model = Proveedores\n</code></pre>"},{"location":"proyecto/backend/nota_app/admin/#explicacion","title":"Explicaci\u00f3n","text":"<ul> <li>ModelResource: Representa la configuraci\u00f3n de importaci\u00f3n/exportaci\u00f3n para el modelo Personal.</li> <li>model: Define el modelo al que pertenece el recurso.</li> <li>import_id_fields = ()<ul> <li>Indica que no se utilizar\u00e1n campos espec\u00edficos para identificar registros durante la importaci\u00f3n.</li> <li>Es \u00fatil cuando solo se quiere crear nuevos registros en cada importaci\u00f3n.</li> </ul> </li> <li>fields: Lista expl\u00edcita de campos permitidos para importar/exportar.<ul> <li>Limita las columnas visibles en archivos XLSX/CSV exportados.</li> <li>Evita exponer campos sensibles o innecesarios.</li> </ul> </li> </ul> <pre><code>class ProveedoresAdmin(ImportExportModelAdmin):\n    resource_class = ProveedoresResource\n</code></pre>"},{"location":"proyecto/backend/nota_app/admin/#explicacion_1","title":"Explicaci\u00f3n","text":"<ul> <li>Habilita botones de Import y Export en el Django Admin para el modelo Proveedores.</li> <li>Usa la definici\u00f3n de campos del recurso ProveedoresResource.</li> </ul> <p>Registro de modelos en el panel de administraci\u00f3n</p> <pre><code>admin.site.register(Usuarios, UsuarioAdmin)\nadmin.site.register(Notas)\nadmin.site.register(Clientes, ClientesAdmin)\nadmin.site.register(Personal, PersonalAdmin)\nadmin.site.register(Proveedores, ProveedoresAdmin)\nadmin.site.register(Productos, ProductosAdmin)\nadmin.site.register(PedidoMateriasPrimas)\nadmin.site.register(DocumentFacturas)\nadmin.site.register(NotaProducto)\n</code></pre> <ul> <li>Usuarios: Registrado con la clase personalizada UsuarioAdmin.</li> <li>Notas y Clientes: Registrados con la configuraci\u00f3n predeterminada de ModelAdmin.</li> </ul>"},{"location":"proyecto/backend/nota_app/apps/","title":"Archivo <code>apps.py</code>","text":"<p>Este archivo define la configuraci\u00f3n principal de la app nota_app dentro del proyecto Django</p> <p>Django utiliza esta configuraci\u00f3n cuando registra la aplicaci\u00f3n. Se puede hacer referencia a esta clase en INSTALLED_APPS dentro del archivo settings.py, de forma autom\u00e1tica si fue creada con el comando python manage.py startapp nota_app</p>"},{"location":"proyecto/backend/nota_app/apps/#contenido-del-archivo","title":"Contenido del archivo","text":"<pre><code>from django.apps import AppConfig\n\nclass NotaAppConfig(AppConfig):\n    default_auto_field = 'django.db.models.BigAutoField'\n    name = 'nota_app'\n\n    def ready(self):\n        import os\n        from django.conf import settings\n        os.makedirs(os.path.join(settings.MEDIA_ROOT, \"facturas\"), exist_ok=True)\n</code></pre> <p>La clase NotaAppConfig extiende AppConfig y se utiliza para configurar algunos aspectos fundamentales de la aplicaci\u00f3n nota_app.</p> <ul> <li> <p>default_auto_field: Establece el tipo de campo por defecto para claves primarias autom\u00e1ticas. En este caso, se utiliza BigAutoField, lo cual es \u00fatil para manejar grandes vol\u00famenes de datos sin colisiones de IDs.</p> </li> <li> <p>name: Define el nombre interno de la aplicaci\u00f3n. Este nombre debe coincidir con el nombre del paquete o carpeta en la que se encuentra la app.</p> </li> </ul>"},{"location":"proyecto/backend/nota_app/apps/#appconfig","title":"AppConfig","text":"<p>Es una clase base de Django que permite personalizar el comportamiento de una aplicaci\u00f3n. Todo proyecto/app en Django tiene un archivo apps.py donde se define esta configuraci\u00f3n (generado autom\u00e1ticamente al crear la app con python manage.py startapp).</p>"},{"location":"proyecto/backend/nota_app/apps/#metodo-ready","title":"M\u00e9todo ready()","text":"<p>El m\u00e9todo ready() se ejecuta una vez por proceso cuando Django inicia</p>"},{"location":"proyecto/backend/nota_app/apps/#funcion-del-bloque","title":"Funci\u00f3n del bloque:","text":"<ul> <li>Obtiene la ruta del directorio MEDIA_ROOT.</li> <li>Construye la subcarpeta facturas/.</li> <li>La crea si no existe (exist_ok=True evita errores si ya est\u00e1 creada).</li> </ul>"},{"location":"proyecto/backend/nota_app/apps/#por-que-hacerlo-aqui","title":"\u00bfPor qu\u00e9 hacerlo aqu\u00ed?","text":"<ul> <li>Asegura que la carpeta exista antes de que se suban documentos.</li> <li>Evita fallos de escritura en rutas inexistentes.</li> <li>Es un lugar seguro para ejecutar l\u00f3gica de inicializaci\u00f3n de la app.</li> </ul> <p>Hay que agregar la aplicaci\u00f3n a INSTALLED_APPS:</p> <pre><code># settings.py\nINSTALLED_APPS = [\n    ...\n    'nota_app.apps.NotaAppConfig',  # \u2190 Ruta completa a la clase\n    # O simplemente 'pedidosApp' (Django busca autom\u00e1ticamente la clase Config)\n]\n</code></pre>"},{"location":"proyecto/backend/nota_app/auth_urls/","title":"Archivo <code>auth_urls.py</code>","text":"<p>Este m\u00f3dulo define las rutas necesarias para obtener y refrescar tokens JWT utilizando cookies, a trav\u00e9s de vistas personalizadas que extienden <code>TokenObtainPairView</code> y <code>TokenRefreshView</code> de <code>SimpleJWT</code>.</p>"},{"location":"proyecto/backend/nota_app/auth_urls/#importaciones","title":"Importaciones","text":"<pre><code>from django.urls import path\nfrom .views import CookieTokenObtainPairView, CookieTokenRefreshView\n</code></pre> <ul> <li><code>django.urls.path</code>: Funci\u00f3n utilizada para declarar rutas URL en Django.</li> <li><code>CookieTokenObtainPairView</code>: Vista personalizada para obtener un par de tokens (access y refresh) e incluirlos en cookies.</li> <li><code>CookieTokenRefreshView</code>: Vista personalizada para refrescar el token de acceso utilizando el token de refresco almacenado en una cookie.</li> </ul>"},{"location":"proyecto/backend/nota_app/auth_urls/#lista-de-rutas-urlpatterns","title":"Lista de rutas (<code>urlpatterns</code>)","text":"<pre><code>urlpatterns = [\n    path('', CookieTokenObtainPairView.as_view(), name='token_obtain_pair'),\n    path('refresh/', CookieTokenRefreshView.as_view(), name='token_refresh'),\n]\n</code></pre>"},{"location":"proyecto/backend/nota_app/auth_urls/#rutas-definidas","title":"Rutas definidas:","text":"<ol> <li> <p><code>''</code> (ra\u00edz del m\u00f3dulo de autenticaci\u00f3n) </p> <ul> <li>Vista: <code>CookieTokenObtainPairView.as_view()</code> </li> <li>Nombre: <code>token_obtain_pair</code> </li> <li>Descripci\u00f3n: Endpoint para autenticaci\u00f3n. Recibe credenciales, emite tokens y los establece como cookies en la respuesta.</li> </ul> </li> <li> <p><code>refresh/</code> </p> <ul> <li>Vista: <code>CookieTokenRefreshView.as_view()</code> </li> <li>Nombre: <code>token_refresh</code> </li> <li>Descripci\u00f3n: Endpoint para renovar el token de acceso usando el token de refresco presente en las cookies del navegador.</li> </ul> </li> </ol> <p>Este m\u00f3dulo es com\u00fanmente usado como parte de una implementaci\u00f3n de autenticaci\u00f3n JWT basada en cookies, segura frente a ataques de XSS y CSRF cuando se configura adecuadamente.</p>"},{"location":"proyecto/backend/nota_app/forms/","title":"Archivo <code>forms.py</code>","text":""},{"location":"proyecto/backend/nota_app/forms/#formulario-usuarioadminform","title":"Formulario: <code>UsuarioAdminForm</code>","text":"<p>Define un formulario personalizado para la administraci\u00f3n del modelo <code>Usuarios</code> en Django. Este formulario soluciona el problema de que las contrase\u00f1as no se hashean autom\u00e1ticamente cuando se crea un usuario desde el panel de administraci\u00f3n.</p>"},{"location":"proyecto/backend/nota_app/forms/#proposito","title":"Prop\u00f3sito","text":"<p>Permite que la contrase\u00f1a ingresada para un nuevo usuario en el admin de Django sea correctamente hasheada antes de ser guardada en la base de datos.</p>"},{"location":"proyecto/backend/nota_app/forms/#detalle-del-codigo","title":"Detalle del c\u00f3digo","text":"<pre><code>class UsuarioAdminForm(forms.ModelForm):\n     password = forms.CharField(widget=forms.PasswordInput(attrs={\n            'autocomplete': 'new-password',  \n            'placeholder': 'Introduce la contrase\u00f1a'  \n        }), required=False, label='Contrase\u00f1a')\n\n    class Meta:\n        model = Usuarios\n        fields = '__all__'\n\n    def save(self, commit=True):\n        user = super().save(commit=False)\n        password = self.cleaned_data.get('password')\n        if password:\n            user.set_password(password)\n        if commit:\n            user.save()\n        return user\n</code></pre>"},{"location":"proyecto/backend/nota_app/forms/#componentes","title":"Componentes","text":"<ul> <li>Herencia: Extiende <code>forms.ModelForm</code>, lo que permite vincularlo directamente al modelo <code>Usuarios</code>.</li> <li>Campo personalizado:</li> <li><code>password</code>: Se define expl\u00edcitamente como un campo <code>CharField</code> con <code>PasswordInput</code> para ocultar el texto ingresado. Es opcional (<code>required=False</code>) para permitir la edici\u00f3n sin requerir cambio de contrase\u00f1a.</li> <li>Clase Meta:</li> <li>Modelo asociado: <code>Usuarios</code>.</li> <li>Campos: todos los campos del modelo (<code>'__all__'</code>).</li> <li>M\u00e9todo <code>save()</code>:</li> <li>Se sobreescribe para interceptar el guardado del modelo.</li> <li>Si se provee una contrase\u00f1a, se hashea utilizando el m\u00e9todo <code>set_password()</code>.</li> <li>El objeto se guarda manualmente solo si <code>commit=True</code>.</li> </ul>"},{"location":"proyecto/backend/nota_app/init_app/","title":"Archivo <code>__init__.py</code>","text":"<p>Es un archivo que marca un directorio como un paquete Python. Su presencia le indica a Python que no es solo una carpeta com\u00fan, sino un m\u00f3dulo/paquete que puede ser importado desde otros lugares.</p> <ul> <li>Esta vac\u00edo</li> <li>Por este archivo se pueden hacer imports. Sin el, Python no reconoce la App como un paquete y los imports fallar\u00e1n</li> </ul> <pre><code>from mi_app.models import MiModelo  # Funciona porque mi_app es un paquete\n</code></pre> <ul> <li>Si se borra no se iniciar\u00e1 la aplicaci\u00f3n correctamente. Es posible crear el mismo archivo vac\u00edo para recuperar el funcionamiento</li> </ul>"},{"location":"proyecto/backend/nota_app/middleware/","title":"Archivo <code>middleware.py</code>","text":"<p>Est\u00e1 dise\u00f1ado para integrar tokens JWT almacenados en cookies con el sistema de autenticaci\u00f3n de Django REST Framework, moviendo el token desde las cookies a los headers de autorizaci\u00f3n.</p> <pre><code>class JWTTokenFromCookieMiddleware:\n    def __init__(self, get_response):\n        self.get_response = get_response\n\n    def __call__(self, request):\n        token = request.COOKIES.get('access_token')\n        if token:\n            request.META['HTTP_AUTHORIZATION'] = f'Bearer {token}'\n        return self.get_response(request)\n</code></pre>"},{"location":"proyecto/backend/nota_app/middleware/#funcionamiento-detallado","title":"Funcionamiento Detallado","text":"Componente Funci\u00f3n __init__ Inicializa el middleware con get_response (patr\u00f3n est\u00e1ndar de Django) __call__ Intercepta cada request para procesar el token request.COOKIES.get('access_token') Obtiene el token JWT de las cookies request.META['HTTP_AUTHORIZATION'] Establece el header de autorizaci\u00f3n"},{"location":"proyecto/backend/nota_app/middleware/#configuracion-requerida","title":"Configuraci\u00f3n Requerida","text":"<ul> <li>Agregar a settings.py:</li> </ul> <pre><code>MIDDLEWARE = [\n    ...\n    'path.to.JWTTokenFromCookieMiddleware',\n    ...\n]\n</code></pre> <ul> <li> <p>Requisitos del Frontend:</p> <ul> <li>El cliente debe almacenar el token JWT en una cookie llamada access_token</li> <li>La cookie debe enviarse con cada request (HttpOnly + Secure recomendado)</li> </ul> </li> </ul>"},{"location":"proyecto/backend/nota_app/middleware/#consideraciones-de-seguridad","title":"Consideraciones de Seguridad","text":"Buenas Pr\u00e1cticas Riesgos Usar cookies HttpOnly Exposici\u00f3n a XSS si no es HttpOnly Habilitar Secure flag (HTTPS) Intercepci\u00f3n en conexiones no cifradas Implementar CSRF protection Ataques CSRF si no se maneja correctamente"},{"location":"proyecto/backend/nota_app/middleware/#diagrama-de-flujo","title":"Diagrama de Flujo","text":""},{"location":"proyecto/backend/nota_app/middleware/#casos-de-uso-recomendados","title":"Casos de Uso Recomendados","text":"<ul> <li>Aplicaciones SPA (React, Vue, Angular) con autenticaci\u00f3n JWT</li> <li>Implementaciones donde el almacenamiento en cookies es preferible a localStorage</li> <li>Sistemas que requieren compatibilidad con protecci\u00f3n CSRF</li> </ul>"},{"location":"proyecto/backend/nota_app/middleware/#limitaciones","title":"Limitaciones","text":"<ul> <li>No maneja renovaci\u00f3n autom\u00e1tica de tokens</li> <li>Depende de que el frontend gestione correctamente las cookies</li> <li>No incluye mecanismos de fallback para otros m\u00e9todos de autenticaci\u00f3n</li> </ul>"},{"location":"proyecto/backend/nota_app/migrations/","title":"Carpeta de App <code>migrations</code>","text":"<p>Cuando se ejecuta el comando python manage.py makemigrations por primera vez en una app, Django genera este archivo en la carpeta migrations</p> <ul> <li>Contiene las operaciones iniciales para crear las tablas en la base de datos seg\u00fan los modelos (models.py).</li> <li>Se ejecuta al aplicar las migraciones (python manage.py migrate).</li> <li>Es la base del historial de migraciones de la app. Django usa este archivo para saber c\u00f3mo construir el esquema de la base de datos desde cero.</li> </ul> <p><code>__init__.py</code> de la carpeta migrations es un archivo vac\u00edo (o con c\u00f3digo de inicializaci\u00f3n), el cual indica que la carpeta migrations es un paquete Python y permite que Django cargue las migraciones correctamente.</p> <p>Nunca borrar estos archivos. Si se requiere hacer modificaciones de las tablas, hay que hacerlas en el modelo y no en estos archivos directamente, luego hacer una nueva migraci\u00f3n</p>"},{"location":"proyecto/backend/nota_app/models/","title":"Archivo <code>models.py</code>","text":"<p>Los modelos extienden funcionalidades base de Django y establecen relaciones clave para el negocio. Se crean en base a la clase models de Django</p>"},{"location":"proyecto/backend/nota_app/models/#caracteristicas","title":"Caracter\u00edsticas","text":"<p>Django con los modelos sigue el patr\u00f3n ORM (Object-Relational Mapping), que permite trabajar con bases de datos relacionales usando clases de Python.</p> <ul> <li> <p>Los modelos se definen como clases que heredan de django.db.models.Model. Cada atributo de la clase representa una columna en la base de datos.</p> </li> <li> <p>Django transforma los modelos en instrucciones SQL mediante dos pasos:</p> <ul> <li>python manage.py makemigrations: genera archivos de migraci\u00f3n (cambios estructurales).</li> <li>python manage.py migrate: aplica esos cambios a la base de datos (crea/modifica tablas).</li> </ul> </li> <li> <p>Una vez creado el modelo, se puede usar como si fuera una clase de Python, pero internamente se comunica con la base de datos:</p> </li> </ul> <pre><code># Crear registros\nCliente.objects.create(nombre='Juan', correo='juan@email.com')\n\n# Consultar registros\nclientes = Cliente.objects.all()  # SELECT * FROM clientes\nuno = Cliente.objects.get(id=1)   # SELECT * FROM clientes WHERE id=1\n\n# Actualizar registros\ncliente = Cliente.objects.get(id=1)\ncliente.nombre = 'Pedro'\ncliente.save()\n\n# Eliminar registros\ncliente.delete()\n</code></pre>"},{"location":"proyecto/backend/nota_app/models/#ventajas-del-orm","title":"Ventajas del ORM","text":"<ul> <li>Abstracci\u00f3n: no necesitas escribir SQL directamente.</li> <li>Seguridad: previene inyecciones SQL.</li> <li>Portabilidad: funciona con varias bases de datos (PostgreSQL, SQLite, MySQL\u2026).</li> <li>Productividad: permite trabajar con objetos Python directamente.</li> </ul>"},{"location":"proyecto/backend/nota_app/models/#integracion-con-otras-partes-del-framework","title":"Integraci\u00f3n con otras partes del framework","text":"<p>Los modelos se conectan con:</p> <ul> <li>Formularios (ModelForm)</li> <li>Serializers en Django REST Framework</li> <li>Admin para paneles autom\u00e1ticos</li> <li>Views/CBVs para l\u00f3gica de negocio</li> </ul>"},{"location":"proyecto/backend/nota_app/models/#importaciones","title":"Importaciones","text":"<p>Este conjunto de importaciones es fundamental para trabajar con modelos y autenticaci\u00f3n en Django.</p> <pre><code>from django.db import models\nfrom django.contrib.auth.models import AbstractUser\nimport django.contrib.auth.validators\n</code></pre> <p><code>from django.db import models</code></p> <ul> <li>Qu\u00e9 hace: Importa el m\u00f3dulo principal para definir modelos de base de datos en Django</li> <li>Para qu\u00e9 sirve:<ul> <li>Permite crear clases que se mapean a tablas de la base de datos</li> <li>Proporciona los diferentes tipos de campos (CharField, IntegerField, etc.)</li> <li>Incluye funcionalidades para relaciones entre modelos (ForeignKey, ManyToManyField)</li> </ul> </li> </ul> <p><code>from django.contrib.auth.models import AbstractUser</code></p> <ul> <li>Qu\u00e9 hace: Importa la clase base abstracta para el modelo de usuario</li> <li>Para qu\u00e9 sirve:<ul> <li>Permite extender o personalizar el modelo de usuario por defecto de Django</li> <li>Incluye todos los campos y m\u00e9todos b\u00e1sicos de autenticaci\u00f3n (username, password, permisos)</li> <li>Es la forma recomendada de crear usuarios personalizados en Django</li> </ul> </li> </ul> <p><code>import django.contrib.auth.validators</code></p> <ul> <li>Qu\u00e9 hace: Importa validadores para el sistema de autenticaci\u00f3n</li> <li>Para qu\u00e9 sirve:<ul> <li>Contiene validaciones predefinidas para campos de autenticaci\u00f3n</li> <li>Incluye el validador UnicodeUsernameValidator usado para nombres de usuario</li> <li>Proporciona seguridad est\u00e1ndar para campos sensibles</li> </ul> </li> </ul>"},{"location":"proyecto/backend/nota_app/models/#estas-importaciones-trabajan-juntas-para","title":"Estas importaciones trabajan juntas para:","text":"<ul> <li>Definir modelos (models) - La estructura base de datos</li> <li>Personalizar usuarios (AbstractUser) - Extender el sistema de autenticaci\u00f3n</li> <li>Validar datos (auth.validators) - Asegurar la calidad de la informaci\u00f3n</li> </ul>"},{"location":"proyecto/backend/nota_app/models/#por-que-son-importantes","title":"\u00bfPor qu\u00e9 son importantes?","text":"<ul> <li>models: Es el coraz\u00f3n de la capa de base de datos en Django</li> <li>AbstractUser: Proporciona un sistema de autenticaci\u00f3n seguro y personalizable</li> <li>auth.validators: Asegura que los datos cumplan con est\u00e1ndares de seguridad</li> </ul> <p>Estas importaciones son esenciales para cualquier aplicaci\u00f3n Django que necesite:</p> <ul> <li>Almacenamiento estructurado de datos (models)</li> <li>Sistema de usuarios personalizado (AbstractUser)</li> <li>Validaci\u00f3n robusta de credenciales (auth.validators)</li> </ul>"},{"location":"proyecto/backend/nota_app/models/#estructura-basica","title":"Estructura B\u00e1sica","text":"<pre><code>class Clientes(models.Model):  # Hereda de la clase base Model\n    # Campos...\n    class Meta:\n        managed = True  # Django gestiona las migraciones\n        db_table = 'clientes'  # Nombre personalizado para la tabla\n</code></pre> <ul> <li>class Meta: Configuraci\u00f3n adicional del modelo</li> <li>managed = True: Permite que Django gestione las migraciones</li> <li>db_table = 'notas': Nombre personalizado para la tabla en la BD</li> </ul>"},{"location":"proyecto/backend/nota_app/models/#campos-de-auditoria","title":"Campos de Auditor\u00eda","text":"<pre><code>fecha_creacion = models.DateTimeField(auto_now_add=True)  # Se setea solo al crear\nfecha_modificacion = models.DateTimeField(auto_now=True)  # Se actualiza autom\u00e1ticamente\n</code></pre>"},{"location":"proyecto/backend/nota_app/models/#relaciones","title":"Relaciones","text":"<pre><code>id_usuario = models.ForeignKey(\n    'Usuarios',  # Modelo relacionado\n    models.DO_NOTHING,  # No hacer nada si se borra el usuario\n    db_column='id_usuario',\n    related_name='clientes_creados'  # Acceso inverso\n)\n</code></pre>"},{"location":"proyecto/backend/nota_app/models/#construccion-de-los-modelos","title":"Construcci\u00f3n de los modelos","text":""},{"location":"proyecto/backend/nota_app/models/#tipos-de-campos-field-types","title":"Tipos de Campos (Field Types)","text":"<ul> <li> <p>AutoField:</p> <ul> <li>id_cliente = models.AutoField(primary_key=True)</li> <li>Funci\u00f3n: Crea un entero autoincremental (1, 2, 3...) como clave primaria</li> <li>Equivalente DB: INT AUTO_INCREMENT (MySQL), SERIAL (PostgreSQL)</li> </ul> </li> <li> <p>CharField:</p> <ul> <li>razon_social = models.CharField(max_length=300)</li> <li>Funci\u00f3n: Almacena cadenas de texto con longitud m\u00e1xima</li> <li>Par\u00e1metro clave: max_length (requerido)</li> <li>Equivalente DB: VARCHAR(n)</li> </ul> </li> <li> <p>DateTimeField:</p> <ul> <li>fecha_creacion = models.DateTimeField(auto_now_add=True)</li> <li>Variantes:<ul> <li>auto_now_add: Guarda timestamp al crear</li> <li>auto_now: Actualiza al modificar</li> </ul> </li> <li>Equivalente DB: DATETIME</li> </ul> </li> <li> <p>ForeignKey:</p> <ul> <li>id_usuario = models.ForeignKey(...)</li> <li>Funci\u00f3n: Establece relaci\u00f3n muchos-a-uno</li> <li>Par\u00e1metros clave:<ul> <li>on_delete: Comportamiento al borrar el relacionado</li> <li>related_name: Nombre para la relaci\u00f3n inversa</li> </ul> </li> </ul> </li> </ul>"},{"location":"proyecto/backend/nota_app/models/#blank-y-null","title":"blank y null:","text":"<ul> <li>Usar blank=True para campos opcionales en formularios</li> <li>Usar null=True para campos num\u00e9ricos/fechas opcionales</li> <li>Para textos: blank=True (evitar null en Char/TextField)</li> </ul>"},{"location":"proyecto/backend/nota_app/models/#parametros-especiales","title":"Par\u00e1metros Especiales","text":"<ul> <li> <p>unique=True:</p> <ul> <li>rut_cliente = models.CharField(unique=True)</li> <li>Efecto: Garantiza valores \u00fanicos en la base de datos</li> <li>Costo: Crea \u00edndice \u00fanico (mejor rendimiento en b\u00fasquedas)</li> </ul> </li> <li> <p>db_column:</p> <ul> <li>Personaliza el nombre de columna en la DB</li> <li>Ej: db_column='id_usuario' \u2192 Se almacena como id_usuario en tabla</li> </ul> </li> <li> <p>related_name:</p> <ul> <li>related_name='clientes_creados'</li> <li>Funci\u00f3n: Permite acceder a los clientes desde el usuario:</li> </ul> </li> </ul> <pre><code>usuario = Usuarios.objects.first()\nusuario.clientes_creados.all()  # Todos los clientes creados por este usuario\n</code></pre>"},{"location":"proyecto/backend/nota_app/serializer/","title":"Archivo <code>serializer.py</code>","text":""},{"location":"proyecto/backend/nota_app/serializer/#que-es-un-serializer","title":"\u00bfQu\u00e9 es un serializer?","text":"<p>Un serializer se encarga de:</p> <ul> <li>Convertir modelos (u otros objetos de Python) a JSON para enviarlos como respuesta en una API.</li> <li>Validar y convertir datos JSON (u otros formatos) a objetos de Python, como instancias de modelos.</li> </ul> <p>Es como un \"traductor\" entre la base de datos (modelos) y el mundo exterior (clientes que consumen la API).</p>"},{"location":"proyecto/backend/nota_app/serializer/#tipos-de-serializers","title":"Tipos de serializers","text":"<ul> <li>Serializer (clase base): Se usa cuando se requiere control total. Es necesario definir todos los campos y m\u00e9todos a mano.</li> </ul> <pre><code>from rest_framework import serializers\n\nclass UsuarioSerializer(serializers.Serializer):\n    id = serializers.IntegerField(read_only=True)\n    nombre = serializers.CharField(max_length=100)\n    email = serializers.EmailField()\n</code></pre> <ul> <li>ModelSerializer (el m\u00e1s com\u00fan):</li> </ul> <p>Se basa en un modelo de Django. DRF infiere autom\u00e1ticamente los campos a partir del modelo.</p> <pre><code>from rest_framework import serializers\nfrom .models import Usuario\n\nclass UsuarioSerializer(serializers.ModelSerializer):\n    class Meta:\n        model = Usuario\n        fields = '__all__'  # o ['id', 'nombre', 'email']\n</code></pre>"},{"location":"proyecto/backend/nota_app/serializer/#como-funciona-el-ciclo","title":"\u00bfC\u00f3mo funciona el ciclo?","text":"<p>Suponemos un modelo Nota:</p> <pre><code>class Nota(models.Model):\n    titulo = models.CharField(max_length=100)\n    contenido = models.TextField()\n</code></pre> <p>El serializer ser\u00eda:</p> <pre><code>class NotaSerializer(serializers.ModelSerializer):\n    class Meta:\n        model = Nota\n        fields = ['id', 'titulo', 'contenido']\n</code></pre>"},{"location":"proyecto/backend/nota_app/serializer/#a-serializar-modelo-json","title":"A. Serializar (modelo \u2192 JSON)","text":"<pre><code>nota = Nota.objects.first()\nserializer = NotaSerializer(nota)\nserializer.data\n# \u2192 {'id': 1, 'titulo': 'Mi nota', 'contenido': 'Contenido...'}\n</code></pre>"},{"location":"proyecto/backend/nota_app/serializer/#b-deserializar-y-validar-json-modelo","title":"B. Deserializar y validar (JSON \u2192 modelo)","text":"<pre><code>data = {'titulo': 'Nueva nota', 'contenido': 'Texto'}\nserializer = NotaSerializer(data=data)\n\nif serializer.is_valid():\n    nota = serializer.save()\nelse:\n    print(serializer.errors)\n</code></pre>"},{"location":"proyecto/backend/nota_app/serializer/#validaciones","title":"Validaciones","text":"<p>Se pueden agregar validaciones personalizadas</p> <pre><code>class UsuarioSerializer(serializers.ModelSerializer):\n    class Meta:\n        model = Usuario\n        fields = ['nombre', 'email']\n\n    def validate_email(self, value):\n        if \"spam\" in value:\n            raise serializers.ValidationError(\"Email inv\u00e1lido.\")\n        return value\n</code></pre> <p>Tambi\u00e9n se puede validar todos los campos juntos:</p> <pre><code>def validate(self, data):\n    if data['nombre'] == 'Admin':\n        raise serializers.ValidationError(\"Ese nombre no est\u00e1 permitido.\")\n    return data\n</code></pre>"},{"location":"proyecto/backend/nota_app/serializer/#metodos","title":"M\u00e9todos","text":"Acci\u00f3n \u00bfQu\u00e9 hace el serializer? .data Convierte objeto Python a JSON (serializa) .is_valid() Valida datos de entrada (JSON) .save() Crea o actualiza instancia del modelo .errors Muestra errores de validaci\u00f3n"},{"location":"proyecto/backend/nota_app/serializer/#proyecto-notas","title":"Proyecto Notas","text":""},{"location":"proyecto/backend/nota_app/serializer/#usuario","title":"Usuario","text":"<ul> <li>En el proyecto, para el serializer de Usuario, se utliza:</li> </ul> <p><pre><code>extra_kwargs = {\n    'password': {'write_only': True}\n}\n</code></pre> Con esto se especifica que el campo password debe ser de solo escritura para evitar exponerlo en respuestas serializadas.</p> <ul> <li> <p>El metodo <code>create(self, validated_data)</code> sobreescribe el m\u00e9todo de creaci\u00f3n para gestionar el hash de la contrase\u00f1a:</p> <ul> <li>Extrae el campo password del diccionario validated_data (m\u00e9todo de DRF).</li> <li>Crea la instancia del modelo sin la contrase\u00f1a.</li> <li>Asigna la contrase\u00f1a utilizando el m\u00e9todo set_password() (para aplicar hashing) (m\u00e9todo de AbstarctUser)</li> <li>Guarda y retorna la instancia.</li> </ul> </li> <li> <p>El metodo <code>update(self, instance, validated_data)</code> sobrescribe el m\u00e9todo de actualizaci\u00f3n:</p> <ul> <li>Si password est\u00e1 presente, se procesa con set_password() antes de guardar.</li> <li>Se actualizan todos los atributos restantes con setattr().</li> </ul> </li> </ul> <pre><code>def create(self, validated_data):\n    password = validated_data.pop('password')\n    user = Usuarios(**validated_data)\n    user.set_password(password)\n    user.save()\n    return user\n\ndef update(self, instance, validated_data):\n    password = validated_data.pop('password', None)\n    for attr, value in validated_data.items():\n        setattr(instance, attr, value)\n    if password:\n        instance.set_password(password)\n    instance.save()\n    return instance\n</code></pre> <p>Django REST Framework, por defecto, no sabe que password requiere hashing, por lo tanto:</p> <ul> <li>Si no  se sobreescribe create y update, el password se guardar\u00eda sin cifrar.</li> <li>Este serializer personaliza esos m\u00e9todos para evitar ese problema.</li> </ul> Elemento \u00bfQu\u00e9 es? validated_data Diccionario generado por serializer.is_valid() con los datos limpios. setattr() Funci\u00f3n de Python que asigna din\u00e1micamente un valor a un atributo."},{"location":"proyecto/backend/nota_app/serializer/#notas","title":"Notas","text":""},{"location":"proyecto/backend/nota_app/serializer/#campos-personalizados","title":"Campos personalizados","text":"<pre><code>class NotasSerializer(serializers.ModelSerializer):\n    cliente = ClientesSerializer(read_only=True)\n\n    # Campo de escritura: se recibe el RUT del cliente\n    rut_cliente = serializers.CharField(write_only=True)\n\n    # Campo opcional para decidir si crear cliente si no existe\n    guardar_cliente = serializers.BooleanField(write_only=True, required=False, default=False)\n\n    # Campos necesarios para crear cliente desde el formulario\n    razon_social = serializers.CharField(write_only=True, required=False)\n    direccion = serializers.CharField(write_only=True, required=False)\n    comuna = serializers.CharField(write_only=True, required=False)\n    telefono = serializers.CharField(write_only=True, required=False)\n    correo = serializers.CharField(write_only=True, required=False)\n    contacto = serializers.CharField(write_only=True, required=False)\n\n    # Campos para mostrar directamente en el frontend (aplanados del cliente)\n    razon_social_cliente = serializers.CharField(source='cliente.razon_social', read_only=True)\n    direccion_cliente = serializers.CharField(source='cliente.direccion', read_only=True)\n    comuna_cliente = serializers.CharField(source='cliente.comuna', read_only=True)\n    telefono_cliente = serializers.CharField(source='cliente.telefono', read_only=True)\n    correo_cliente = serializers.CharField(source='cliente.correo', read_only=True)\n    contacto_cliente = serializers.CharField(source='cliente.contacto', read_only=True)\n    rut_cliente_cliente = serializers.CharField(source='cliente.rut_cliente', read_only=True)\n\n    usuario_creador = serializers.CharField(source='id_usuario.username', read_only=True)\n    usuario_modificador = serializers.CharField(source='id_usuario_modificacion.username', read_only=True)\n</code></pre> <p>En este serailizer se crearon campos para crear al cliente desde el formulario notas, si este no existe en la bd. Adem\u00e1s, se mandan los datos aplanados (sin anidaci\u00f3n) para mostrar los datos del cliente en el formulario (se rellenan campos si el cliente se encuentra en la bd). </p> <ul> <li> <p><code>usuario_creador</code>: campo de solo lectura que muestra el username del usuario que cre\u00f3 la nota.</p> </li> <li> <p><code>usuario_modificador</code>: campo de solo lectura que muestra el username del \u00faltimo usuario que modific\u00f3 la nota.</p> </li> </ul> <p>Ambos obtienen el valor desde claves for\u00e1neas (id_usuario, id_usuario_modificacion) que apuntan al modelo Usuarios.</p> <pre><code>guardar_cliente = serializers.BooleanField(write_only=True, required=False, default=False)\n</code></pre> <ul> <li>Campo adicional que no existe en el modelo.</li> <li>Se usa para controlar si se debe crear un cliente autom\u00e1ticamente.</li> <li>Es write_only: solo se acepta en el request, pero no se muestra en la respuesta.</li> </ul>"},{"location":"proyecto/backend/nota_app/serializer/#clase-meta","title":"Clase Meta","text":"<pre><code>class Meta:\n    model = Notas\n    fields = '__all__'\n    read_only_fields = ['id_usuario', 'id_usuario_modificacion']\n</code></pre> <ul> <li>model = Notas: indica el modelo que se est\u00e1 serializando.</li> <li>fields = '__all__': incluye todos los campos del modelo.</li> <li>read_only_fields: estos campos no pueden ser escritos directamente desde el request; se asignan autom\u00e1ticamente desde el c\u00f3digo.</li> </ul>"},{"location":"proyecto/backend/nota_app/serializer/#metodo-createself-validated_data","title":"M\u00e9todo create(self, validated_data)","text":"<pre><code>def create(self, validated_data):\n        request = self.context['request']\n        rut_cliente = validated_data.pop('rut_cliente')\n        guardar_cliente = validated_data.pop('guardar_cliente', False)\n\n        # Extrae los campos necesarios para el cliente desde la nota\n        campos_cliente = ['razon_social', 'direccion', 'comuna', 'telefono', 'correo', 'contacto']\n        cliente_data = {campo: validated_data.get(campo) for campo in campos_cliente}\n\n        try:\n            cliente = Clientes.objects.get(rut_cliente=rut_cliente)\n        except Clientes.DoesNotExist:\n            if guardar_cliente:\n                cliente_data.update({\n                    'rut_cliente': rut_cliente,\n                    'id_usuario': request.user,\n                })\n                cliente = Clientes.objects.create(**cliente_data)\n            else:\n                raise serializers.ValidationError(f\"El cliente con RUT {rut_cliente} no existe y no se solicit\u00f3 crearlo.\")\n\n        validated_data['cliente'] = cliente\n        validated_data['id_usuario'] = request.user\n        return super().create(validated_data)\n</code></pre> <p>Este m\u00e9todo se encarga de crear una nueva instancia del modelo y asociarla a un cliente existente, o crear ese cliente si no existe y se ha solicitado guardarlo. Adem\u00e1s, asocia el usuario autenticado que hizo la petici\u00f3n. Este m\u00e9todo sobrescribe create para manejar la l\u00f3gica de asociaci\u00f3n de un cliente a una nota. Si el cliente no existe y se ha solicitado su creaci\u00f3n (guardar_cliente=True), se crea autom\u00e1ticamente con los datos entregados. Adem\u00e1s, se asigna el usuario autenticado como creador tanto del cliente (si es creado) como de la nota.</p> <pre><code>def create(self, validated_data):\n</code></pre> <ul> <li>Sobrescribe el m\u00e9todo create del serializer para manejar l\u00f3gica adicional al guardar la instancia.</li> </ul> <pre><code>request = self.context['request']\n</code></pre> <ul> <li>Obtiene el objeto request desde el contexto del serializer (\u00fatil para acceder al usuario autenticado u otros datos del request).</li> </ul> <pre><code>rut_cliente = validated_data.pop('rut_cliente')\nguardar_cliente = validated_data.pop('guardar_cliente', False)\n</code></pre> <ul> <li>Extrae el rut_cliente desde los datos validados (y lo remueve del diccionario).</li> <li>Tambi\u00e9n extrae guardar_cliente que indica si se debe crear el cliente si no existe. Por defecto es False.</li> </ul> <pre><code>campos_cliente = ['razon_social', 'direccion', 'comuna', 'telefono', 'correo', 'contacto']\ncliente_data = {campo: validated_data.get(campo) for campo in campos_cliente}\n</code></pre> <ul> <li>Crea un diccionario con los datos necesarios para el modelo Clientes, extray\u00e9ndolos desde validated_data.</li> </ul> <pre><code>try:\n    cliente = Clientes.objects.get(rut_cliente=rut_cliente)\n</code></pre> <ul> <li>Intenta buscar un cliente ya existente con ese RUT.</li> </ul> <pre><code>except Clientes.DoesNotExist:\n    if guardar_cliente:\n        cliente_data.update({\n            'rut_cliente': rut_cliente,\n            'id_usuario': request.user,\n        })\n        cliente = Clientes.objects.create(**cliente_data)\n</code></pre> <ul> <li>Si el cliente no existe y se solicit\u00f3 crearlo (guardar_cliente=True), se crea un nuevo cliente con los datos extra\u00eddos y el usuario autenticado.</li> </ul> <pre><code>    else:\n        raise serializers.ValidationError(f\"El cliente con RUT {rut_cliente} no existe y no se solicit\u00f3 crearlo.\")\n</code></pre> <ul> <li>Si el cliente no existe y no se debe crear, lanza un error de validaci\u00f3n.</li> </ul> <pre><code>validated_data['cliente'] = cliente\nvalidated_data['id_usuario'] = request.user\n</code></pre> <ul> <li>Agrega el objeto cliente ya obtenido o creado al validated_data.</li> <li>Tambi\u00e9n se asocia el usuario autenticado como id_usuario.</li> </ul> <pre><code>return super().create(validated_data)\n</code></pre> <ul> <li> <p>Llama al m\u00e9todo original del serializer para continuar con la creaci\u00f3n del objeto principal</p> </li> <li> <p>Metodos create y update asignan usuarios logueados</p> </li> </ul> <pre><code>def create(self, validated_data):\n\n    # Asigna autom\u00e1ticamente el id_usuario del usuario autenticado\n    validated_data['id_usuario'] = self.context['request'].user \n    return super().create(validated_data)\n\ndef update(self, instance, validated_data):\n\n    # Asigna autom\u00e1ticamente el id_usuario_modificacion del usuario autenticado al actualizar\n    validated_data['id_usuario_modificacion'] = self.context['request'].user\n    return super().update(instance, validated_data)\n</code></pre>"},{"location":"proyecto/backend/nota_app/serializer/#historico-sabados","title":"Historico Sabados","text":"<p>Este serializer no utiliza serializer.ModelSerializer (DRF) si no que el serializer.Serializer que viene con Django, ya que no utiliza un modelo para entregar o recibir datos, es por esto que hay que explicitar los campos que se mostraran en la API. </p> <pre><code>class HistoricoSabadosSerializer(serializers.Serializer):\nmes = serializers.CharField(help_text=\"Mes en formato YYYY-MM\")\nid_personal = serializers.IntegerField(help_text=\"ID del personal\")\nnombre = serializers.CharField(help_text=\"Nombre del empleado\")\napellido = serializers.CharField(help_text=\"Apellido del empleado\")\nsabados = serializers.ListField(\n    child=serializers.CharField(),\n    help_text=\"Lista de fechas de s\u00e1bados trabajados en formato DD-MM-YYYY\"\n)\ntotal_sabados = serializers.IntegerField(help_text=\"Cantidad de s\u00e1bados trabajados\")\n</code></pre> <p>Este serializer permite construir y devolver un reporte personalizado de los s\u00e1bados trabajados por un empleado en un mes. Define expl\u00edcitamente cada campo necesario para el reporte, en lugar de depender del modelo de la base de datos. Es ideal para endpoints del tipo /personal/historico_sabados/?mes=2025-07 donde se retornan datos calculados.</p>"},{"location":"proyecto/backend/nota_app/urls_app/","title":"Archivo <code>urls.py</code>","text":""},{"location":"proyecto/backend/nota_app/urls_app/#importaciones","title":"Importaciones","text":"<pre><code>from django.urls import path, include\nfrom rest_framework import routers\nfrom .views import UsuarioView, NotasView, ClientesView, DashboardViewSet\n</code></pre> <ul> <li>path e include: Son herramientas de Django para definir URLs.</li> <li>routers: Proporcionado por DRF para generar rutas autom\u00e1ticamente.</li> <li>Las views: Son las clases que manejar\u00e1n las solicitudes a cada endpoint.</li> </ul>"},{"location":"proyecto/backend/nota_app/urls_app/#configuracion-del-router","title":"Configuraci\u00f3n del Router","text":"<pre><code>router = routers.DefaultRouter()\nrouter.register(r'usuario', UsuarioView, 'usuario')\nrouter.register(r'nota', NotasView, 'nota')\nrouter.register(r'cliente', ClientesView, 'cliente')\nrouter.register(r'dashboard', DashboardViewSet, 'dashboard')\nrouter.register(r'productos', ProductosView, 'productos')\nrouter.register(r'proveedores', ProveedoresView, 'proveedores')\nrouter.register(r'personal', PersonalView, 'personal')\nrouter.register(r'pedido_materias_primas', PedidoMateriasPrimasView, 'pedido_materias_primas')\nrouter.register(r'facturas', DocumentFacturasView, 'facturas')\nrouter.register(r'notas_productos', NotaProductoView, 'notas_productos')\n</code></pre> <ul> <li>DefaultRouter(): Crea un router que genera URLs est\u00e1ndar para CRUD.</li> <li>router.register(): Asocia una URL con una ViewSet.<ul> <li>Primer argumento (r'usuario'): La ruta base.</li> <li>Segundo argumento (UsuarioView): La clase View que manejar\u00e1 las peticiones.</li> <li>Tercer argumento ('usuario'): Nombre base para las URLs generadas.</li> </ul> </li> </ul> <p>La r indica que es una \"raw string\" (cadena cruda). En Python, esto significa que los caracteres de escape (como \\n) se tratan literalmente. En este caso no es estrictamente necesario porque las rutas no contienen caracteres especiales, pero es una convenci\u00f3n com\u00fan usarla en patrones de URLs.</p>"},{"location":"proyecto/backend/nota_app/urls_app/#rutas-personalizadas","title":"Rutas personalizadas","text":"<pre><code>usuario_extra_routes = [\n    path('usuario/actual/', UsuarioView.as_view({'get': 'actual'}), name='usuario-actual'),\n    path('usuario/verify-password/', UsuarioView.as_view({'post': 'verify_password'}), name='verify-password'),\n    path('usuario/logout/', UsuarioView.as_view({'post': 'logout'}), name='logout'),\n]\n</code></pre> <p>Estas son rutas adicionales para acciones espec\u00edficas que no son CRUD est\u00e1ndar:</p> <ul> <li>usuario/actual/: Endpoint GET para obtener el usuario actual</li> <li>verify-password/: Endpoint POST para verificar contrase\u00f1a</li> <li>logout/: Endpoint POST para cerrar sesi\u00f3n</li> </ul>"},{"location":"proyecto/backend/nota_app/urls_app/#configuracion-final-de-urls","title":"Configuraci\u00f3n final de URLs","text":"<pre><code>urlpatterns = [\n    path('csrf/', CSRFTokenView.as_view(), name='csrf'),\n    path('', include(router.urls)),\n    *usuario_extra_routes,\n]\n</code></pre> <ul> <li>Llama a una vista basada en la clase llamada CSRFTokenView, para entregar el token CSRF al frontend</li> <li>include(router.urls): Incluye todas las URLs generadas por el router.</li> <li>*usuario_extra_routes: Desempaqueta las rutas personalizadas en la lista.</li> </ul>"},{"location":"proyecto/backend/nota_app/views/","title":"Archivo <code>views.py</code>","text":""},{"location":"proyecto/backend/nota_app/views/#importaciones","title":"Importaciones","text":"<p>Algunas importaciones claves (no son todas las que estan presentes en el c\u00f3digo original):</p> <pre><code>from rest_framework import viewsets\nfrom .serializer import UsuariosSerializer, NotasSerializer, ClientesSerializer\nfrom .models import Usuarios, Notas, Clientes\nfrom rest_framework import permissions\nfrom rest_framework.decorators import action\nfrom rest_framework.response import Response\nfrom django.contrib.auth.hashers import check_password\nfrom django.utils.decorators import method_decorator\nfrom rest_framework_simplejwt.views import TokenObtainPairView, TokenRefreshView\nfrom rest_framework.permissions import AllowAny\nfrom rest_framework import status\nfrom django.db.models import Count, Q\nfrom datetime import datetime\nimport logging\nfrom django.utils.timezone import make_aware\nfrom django.db.models import DateField\nfrom django.db.models.functions import Cast\nfrom rest_framework.views import APIView\nfrom django.views.decorators.csrf import ensure_csrf_cookie\nfrom django.http import JsonResponse\nfrom django.middleware.csrf import get_token\n\nlogger = logging.getLogger(__name__)\n</code></pre> <ul> <li>Importa viewsets de DRF. ModelViewSet proporciona acciones CRUD autom\u00e1ticas.</li> <li>Importa permisos gen\u00e9ricos como IsAuthenticated o IsAdminUser.</li> <li>Permite definir acciones personalizadas dentro del ViewSet, como @action(detail=False, methods=['get']).</li> <li>Permite enviar respuestas HTTP personalizadas.</li> <li>Funci\u00f3n para comparar una contrase\u00f1a en texto plano con una contrase\u00f1a hasheada del usuario.</li> <li>Permiso para permitir acceso a cualquier usuario, incluso no autenticado.</li> <li>Proporciona c\u00f3digos de estado HTTP legibles (HTTP_200_OK, HTTP_400_BAD_REQUEST, etc.).</li> <li>Count: para agregaciones, Q: para filtros complejos</li> <li>Utilidades est\u00e1ndar: fechas y logging para depuraci\u00f3n o errores.</li> <li>Herramientas para manejar zonas horarias y convertir campos</li> <li>Vista gen\u00e9rica base para crear endpoints personalizados que no requieren un ViewSet.</li> <li>Permiten convertir campos a tipos espec\u00edficos en las consultas, por ejemplo, para filtrar por fecha sin hora (Cast(fecha, DateField())).</li> <li>Convierte objetos datetime en fechas con zona horaria.</li> <li><code>ensure_csrf_cookie</code>: fuerza el env\u00edo del token CSRF en las respuestas (\u00fatil para Single Page Apps).</li> <li><code>get_token</code>: obtiene el token CSRF para entregarlo al cliente.</li> <li>Habilita un logger espec\u00edfico para este m\u00f3dulo, \u00fatil para registrar errores, advertencias u otra informaci\u00f3n de depuraci\u00f3n.</li> </ul>"},{"location":"proyecto/backend/nota_app/views/#vistas","title":"Vistas","text":""},{"location":"proyecto/backend/nota_app/views/#1-class-usuarioviewviewsetsmodelviewset","title":"<code>1.- class UsuarioView(viewsets.ModelViewSet):</code>","text":"<pre><code>    def get_permissions(self):\n        if self.action in ['actual', 'verify_password', 'logout']:\n            return [permissions.IsAuthenticated()]\n        return [permissions.IsAdminUser()]\n</code></pre> <p>Controla qu\u00e9 permisos aplicar seg\u00fan la acci\u00f3n:</p> <ul> <li>Para las acciones personalizadas actual, verify_password y logout \u2192 requiere estar autenticado.</li> <li>Para todo lo dem\u00e1s (CRUD) \u2192 solo lo puede hacer un admin.</li> </ul>"},{"location":"proyecto/backend/nota_app/views/#accion-personalizada-actual","title":"Acci\u00f3n personalizada: <code>actual</code>","text":"<pre><code>    @action(detail=False, methods=['get'], permission_classes=[permissions.IsAuthenticated])\n    def actual(self, request, **kwargs):\n        user = self.request.user\n</code></pre> <p>Acci\u00f3n que retorna la informaci\u00f3n del usuario autenticado.</p> <pre><code>        serializer = self.get_serializer(user)\n</code></pre> <p>Serializa al usuario.</p> <pre><code>        grupos = list(user.groups.values_list('name', flat=True))\n</code></pre> <p>Obtiene los nombres de los grupos a los que pertenece el usuario (por ejemplo, \u201cadmin\u201d, \u201cvendedor\u201d).</p> <pre><code>        data = serializer.data\n        data['groups'] = grupos\n</code></pre> <p>Agrega la lista de grupos al JSON de respuesta.</p> <pre><code>        return Response(data)\n</code></pre> <p>Devuelve la informaci\u00f3n del usuario y sus grupos.</p>"},{"location":"proyecto/backend/nota_app/views/#accion-personalizada-verify_password","title":"Acci\u00f3n personalizada: <code>verify_password</code>","text":"<pre><code>    @action(detail=False, methods=['post'], permission_classes=[permissions.IsAuthenticated])\n    def verify_password(self, request, **kwargs):\n        password = request.data.get('password')\n</code></pre> <p>Acci\u00f3n para verificar que el usuario autenticado ingres\u00f3 su contrase\u00f1a actual correctamente.</p> <pre><code>        if not password:\n            return Response({'error': 'La contrase\u00f1a es requerida'}, status=400)\n</code></pre> <p>Si no se recibe una contrase\u00f1a, devuelve un error.</p> <pre><code>        if check_password(password, request.user.password):\n            return Response({'valid': True})\n        else:\n            return Response({'valid': False})\n</code></pre> <p>Compara la contrase\u00f1a recibida con la almacenada (hasheada). Devuelve si es v\u00e1lida o no.</p>"},{"location":"proyecto/backend/nota_app/views/#accion-personalizada-logout","title":"Acci\u00f3n personalizada: <code>logout</code>","text":"<pre><code>    @action(detail=False, methods=['post'], permission_classes=[permissions.IsAuthenticated])\n    def logout(self, request, **kwargs):\n        response = Response({\"message\": \"Logout exitoso\"}, status=status.HTTP_200_OK)\n</code></pre> <p>Acci\u00f3n para hacer logout. Crea una respuesta HTTP con mensaje de \u00e9xito.</p> <pre><code>        response.delete_cookie('access_token')\n        response.delete_cookie('refresh_token')\n        response.delete_cookie('csrftoken')\n</code></pre> <p>Elimina las cookies relacionadas al JWT y CSRF, cerrando la sesi\u00f3n del lado del navegador.</p>"},{"location":"proyecto/backend/nota_app/views/#2-class-notasviewviewsetsmodelviewset","title":"<code>2.- class NotasView(viewsets.ModelViewSet):</code>","text":"<pre><code>    permission_classes = [permissions.IsAuthenticatedOrReadOnly]\n</code></pre> <p>Establece los permisos: - Usuarios autenticados pueden realizar operaciones de escritura (POST, PUT, DELETE). - Los no autenticados solo pueden leer (GET).</p>"},{"location":"proyecto/backend/nota_app/views/#accion-personalizada-validar_numero","title":"Acci\u00f3n personalizada: <code>validar_numero</code>","text":"<pre><code>    @action(detail=False, methods=['get'], url_path='validar-numero')\n</code></pre> <p>Crea una acci\u00f3n personalizada accesible desde:</p> <p><code>GET /notas/validar-numero/</code></p> <ul> <li> <p>detail=False \u2192 no requiere ID (no apunta a una nota espec\u00edfica).</p> </li> <li> <p>url_path='validar-numero' \u2192 as\u00ed se define el nombre de la URL.</p> </li> </ul> <pre><code>    def validar_numero(self, request):\n        num_nota = request.query_params.get('num_nota')\n</code></pre> <p>Extrae el par\u00e1metro num_nota desde la URL</p> <pre><code>        if not num_nota:\n            return Response({'error': 'El n\u00famero de nota es requerido'}, status=status.HTTP_400_BAD_REQUEST)\n</code></pre> <p>Si no se proporciona num_nota, devuelve un error 400 con un mensaje.</p> <pre><code>        existe = Notas.objects.filter(num_nota=num_nota).exists()\n</code></pre> <p>Consulta si ya existe una nota con ese n\u00famero (.exists() es eficiente porque no carga objetos completos).</p> <pre><code>        return Response({'existe': existe})\n</code></pre> <p>Devuelve la respuesta en formato JSON</p>"},{"location":"proyecto/backend/nota_app/views/#accion-personalizada-cliente_por_nota","title":"Acci\u00f3n personalizada: cliente_por_nota","text":"<pre><code>    @action(detail=False, methods=['get'], url_path='cliente_por_nota')\n</code></pre> <p>Crea un endpoint accesible en:</p> <p><code>GET /notas/cliente_por_nota/?nota=12345</code></p> <ul> <li>detail=False \u2192 la acci\u00f3n no requiere ID de una nota.</li> <li>url_path='cliente_por_nota' \u2192 define la ruta final del endpoint.</li> </ul> <pre><code>def cliente_por_nota(self, request):\n    num_nota = request.query_params.get('nota')\n</code></pre> <p>Obtiene el par\u00e1metro nota desde los query params</p> <pre><code>if not num_nota:\n    return Response({'error': 'Debe proporcionar el n\u00famero de nota.'}, status=status.HTTP_400_BAD_REQUEST)\n</code></pre> <ul> <li>Si no se env\u00eda el par\u00e1metro nota, responde con 400 Bad Request.</li> <li>Se exige este par\u00e1metro para poder buscar la nota.</li> </ul> <pre><code>nota = Notas.objects.get(num_nota=num_nota)\ncliente = nota.cliente\n</code></pre> <ul> <li>Busca una nota cuyo n\u00famero coincida con num_nota.</li> <li>Luego obtiene el cliente asociado a la nota.</li> </ul> <pre><code>if cliente:\n    data = {\n        'id_cliente': cliente.id_cliente,\n        'razon_social': cliente.razon_social,\n        'rut_cliente': cliente.rut_cliente,\n        'direccion': cliente.direccion,\n        'comuna': cliente.comuna,\n        'telefono': cliente.telefono,\n        'correo': cliente.correo,\n        'contacto': cliente.contacto,\n        'despacho_retira': nota.despacho_retira,\n        'fecha_despacho': nota.fecha_despacho,\n        'nota_id': nota.id_nota,\n    }\n    return Response(data, status=status.HTTP_200_OK)\n</code></pre> <p>La respuesta incluye:</p> <ul> <li>Datos completos del cliente</li> <li>Informaci\u00f3n adicional de la nota:<ul> <li>despacho_retira</li> <li>fecha_despacho</li> <li>id_nota</li> </ul> </li> </ul> <p>Devuelve HTTP 200 OK con toda la informaci\u00f3n.</p>"},{"location":"proyecto/backend/nota_app/views/#class-clientesviewviewsetsmodelviewset","title":"<code>class ClientesView(viewsets.ModelViewSet):</code>","text":"<pre><code> def obtener_por_rut(self, request):\n        rut = request.query_params.get('rut')\n</code></pre> <p>Extrae el par\u00e1metro rut desde la URL (query string), por ejemplo:</p> <pre><code>        if not rut:\n            return Response({'error': 'RUT es requerido'}, status=status.HTTP_400_BAD_REQUEST)\n</code></pre> <p>Si no se env\u00eda un rut, devuelve un error 400 con un mensaje.</p> <pre><code>        try:\n            cliente = Clientes.objects.get(rut_cliente=rut)\n</code></pre> <p>Busca un cliente cuyo campo rut_cliente coincida exactamente con el valor del RUT.</p> <pre><code># Manejo de m\u00e9todos PUT/PATCH\n            if request.method in ['PUT', 'PATCH']:\n                partial = request.method == 'PATCH'  # True para PATCH, False para PUT\n                serializer = self.get_serializer(cliente, data=request.data, partial=partial)\n                serializer.is_valid(raise_exception=True)\n                serializer.save()\n                return Response(serializer.data)\n</code></pre> <p>PUT: reemplaza todos los datos del cliente. PATCH: actualiza parcialmente. Se usa el serializer para validar y guardar.</p> <pre><code>         # Manejo del GET\n            data = {\n                'direccion': cliente.direccion,\n                'comuna': cliente.comuna,\n                'telefono': cliente.telefono,\n                'correo': cliente.correo,\n                'contacto': cliente.contacto,\n                'razon_social': cliente.razon_social,\n            }\n</code></pre> <p>Retorna los datos principales del cliente como JSON.</p> <pre><code>    except Clientes.DoesNotExist:\n        return Response({'error': 'Cliente no encontrado'}, status=status.HTTP_404_NOT_FOUND)\n    except Exception as e:\n        return Response({'error': str(e)}, status=status.HTTP_400_BAD_REQUEST)\n</code></pre> <p>Si no se encuentra el cliente con el RUT especificado, devuelve un error 404 con un mensaje. Otros errores generales devuelven 400 con el mensaje.</p>"},{"location":"proyecto/backend/nota_app/views/#class-cookietokenobtainpairviewtokenobtainpairview","title":"<code>class CookieTokenObtainPairView(TokenObtainPairView):</code>","text":"<ul> <li>Hereda de TokenObtainPairView de SimpleJWT, que se usa normalmente para loguear a un usuario y devolver los tokens (access y refresh).</li> <li>Esta versi\u00f3n modifica el comportamiento para guardar los tokens en cookies.</li> </ul> <pre><code>    permission_classes = [AllowAny]\n</code></pre> <p>Cualquier usuario, autenticado o no, puede acceder a esta vista (porque es el login).</p> <pre><code>    def post(self, request, *args, **kwargs):\n        response = super().post(request, *args, **kwargs)\n</code></pre> <p>Ejecuta el comportamiento por defecto: valida usuario y devuelve tokens.</p> <pre><code>        refresh = response.data.get(\"refresh\")\n        access = response.data.get(\"access\")\n</code></pre> <p>Extrae los tokens generados por SimpleJWT desde el cuerpo de la respuesta.</p> <pre><code>        response.set_cookie(\n            key=\"access_token\",\n            value=access,\n            httponly=True,\n            secure=True,\n            samesite='None',\n            max_age=60 * 60,  # 1 hora\n        )\n</code></pre> <p>Guarda el access_token como una cookie segura:</p> <ul> <li>httponly=True: el frontend no puede acceder al token con JavaScript.</li> <li>secure=True: solo se env\u00eda por HTTPS.</li> <li>samesite='None': Ya que son dos dominios diferentes el backend con el frontend.</li> <li>max_age=3600: expira en 1 hora.</li> </ul> <pre><code>        response.set_cookie(\n            key=\"refresh_token\",\n            value=refresh,\n            httponly=True,\n            secure=True,\n            samesite='None',\n            max_age=7 * 24 * 60 * 60,  # 7 d\u00edas\n        )\n</code></pre> <p>Similar para el refresh_token, pero con un tiempo de vida m\u00e1s largo (7 d\u00edas).</p> <pre><code>        response.set_cookie(\n            key=\"csrftoken\",\n            value=get_token(request),\n            httponly=False,\n            secure=True,\n            samesite='None',\n            max_age=60 * 60,\n        )\n</code></pre> <p>Similar a los anteriores pero para el CSRF, con un tiempo de vida de 1 hora.</p> <pre><code>        response.data = {\"message\": \"Login exitoso\"}\n        return response\n</code></pre> <p>Modifica la respuesta JSON para no devolver los tokens en el cuerpo (m\u00e1s seguro), solo devuelve un mensaje.</p>"},{"location":"proyecto/backend/nota_app/views/#class-cookietokenrefreshviewtokenrefreshview","title":"<code>class CookieTokenRefreshView(TokenRefreshView):</code>","text":"<p>Hereda de TokenRefreshView, que se usa para renovar el access_token usando el refresh_token.</p> <pre><code>    def post(self, request, *args, **kwargs):\n        refresh_token = request.COOKIES.get(\"refresh_token\")\n</code></pre> <p>Toma el refresh_token desde la cookie, no desde el body del request.</p> <pre><code>        if refresh_token is None:\n            return Response({\"error\": \"Token de refresh no encontrado\"}, status=401)\n</code></pre> <p>Si no se encuentra el token, devuelve error 401 (no autorizado).</p> <pre><code>        request.data[\"refresh\"] = refresh_token\n        response = super().post(request, *args, **kwargs)\n</code></pre> <p>Inserta el token en el request y llama al m\u00e9todo original para que genere un nuevo access_token.</p> <pre><code>        if response.status_code != 200:\n            return response\n</code></pre> <p>Si hubo un error al refrescar, devuelve la respuesta original con el error.</p> <pre><code>        access = response.data.get(\"access\")\n</code></pre> <p>Toma el nuevo access_token desde la respuesta.</p> <pre><code>        response.set_cookie(\n            key=\"access_token\",\n            value=access,\n            httponly=True,\n            secure=True,\n            samesite='None',\n            max_age=60 * 60,  # 1 hora\n        )\n</code></pre> <p>Vuelve a guardar el nuevo access_token en la cookie.</p> <pre><code>        response.data = {\"message\": \"Token refrescado exitosamente\"}\n        return response\n</code></pre> <p>Devuelve solo un mensaje, no el token en el cuerpo.</p>"},{"location":"proyecto/backend/nota_app/views/#class-dashboardviewsetviewsetsviewset","title":"<code>class DashboardViewSet(viewsets.ViewSet):</code>","text":"<p>Se usa para agrupar vistas l\u00f3gicas bajo una sola ruta (como /dashboard/resumen/) para entregar un resumen estad\u00edstico del sistema en un rango de fechas, usando Django REST Framework. </p> <pre><code>        fecha_inicio_str = request.query_params.get('fecha_inicio')\n        fecha_fin_str = request.query_params.get('fecha_fin')\n</code></pre> <p>Extrae los par\u00e1metros fecha_inicio y fecha_fin desde la query</p> <pre><code>        if not fecha_inicio_str or not fecha_fin_str:\n            return Response(\n                {'error': 'Se requieren ambos par\u00e1metros: fecha_inicio y fecha_fin'},\n                status=400\n            )\n</code></pre> <p>Verifica que ambos par\u00e1metros est\u00e9n presentes.</p> <pre><code>        fecha_inicio = make_aware(datetime.strptime(fecha_inicio_str + ' 00:00:00', '%Y-%m-%d %H:%M:%S'))\n        fecha_fin = make_aware(datetime.strptime(fecha_fin_str + ' 23:59:59', '%Y-%m-%d %H:%M:%S'))\n</code></pre> <p>Convierte los strings a datetime, asegur\u00e1ndose de incluir todo el d\u00eda (inicio 00:00, fin 23:59).</p> <ul> <li>make_aware agrega la zona horaria de Django.</li> </ul> <pre><code>       if fecha_fin &lt; fecha_inicio:\n                return Response(\n                    {'error': 'La fecha de fin no puede ser anterior a la fecha de inicio'},\n                    status=400\n                )\n</code></pre> <p>Impide que se consulten rangos de fechas inv\u00e1lidos (fin antes del inicio).</p> <pre><code>        notas_filtro = Q(fecha_despacho__gte=fecha_inicio) &amp; Q(fecha_despacho__lte=fecha_fin)\n</code></pre> <p>Construye una expresi\u00f3n de filtro Q para filtrar las notas por el campo fecha_despacho.</p> <pre><code>        total_notas = Notas.objects.filter(notas_filtro).count()\n</code></pre> <p>Cuenta el total de notas en el per\u00edodo.</p> <pre><code>        notas_por_despacho = Notas.objects.filter(notas_filtro).values(\n            'despacho_retira'\n        ).annotate(\n            total=Count('id_nota')\n        ).order_by('-total')\n</code></pre> <ol> <li> <p>Notas.objects.filter(notas_filtro)</p> <ul> <li>Base de la consulta: Parte del modelo Notas y aplica un filtro predefinido (notas_filtro)</li> <li>El filtro notas_filtro limita qu\u00e9 registros se incluir\u00e1n</li> </ul> </li> <li> <p>.values('despacho_retira')</p> <ul> <li>Agrupaci\u00f3n: Selecciona solo el campo despacho_retira para trabajar</li> <li>Esto agrupar\u00e1 los resultados por los distintos valores de despacho_retira</li> <li>Equivalente SQL: GROUP BY despacho_retira</li> </ul> </li> <li> <p>.annotate(total=Count('id_nota'))</p> <ul> <li>Conteo: Para cada grupo (cada valor \u00fanico de despacho_retira), cuenta cu\u00e1ntos registros hay</li> <li>Count('id_nota') cuenta las ocurrencias usando el campo id_nota </li> <li>El resultado se almacena en un campo temporal llamado total</li> <li>Equivalente SQL: COUNT(id_nota) AS total</li> </ul> </li> <li> <p>.order_by('-total')</p> <ul> <li>Ordenamiento: Ordena los resultados por el campo total en orden descendente (por el -)</li> <li>Los despachos con m\u00e1s notas aparecer\u00e1n primero</li> </ul> </li> </ol> <pre><code>        notas_por_dia = Notas.objects.filter(\n            notas_filtro &amp; Q(fecha_despacho__isnull=False)\n        ).annotate(\n            dia=Cast('fecha_despacho', DateField())\n        ).values('dia').annotate(\n            total=Count('id_nota')\n        ).order_by('dia')\n</code></pre> <p>Agrupa por d\u00eda usando Cast para truncar datetime a solo date.</p> <p>Cuenta cu\u00e1ntas notas se emitieron por d\u00eda.</p> <pre><code>         # Notas por comuna\n            notas_por_comuna = Notas.objects.filter(notas_filtro).exclude(\n                cliente__comuna__isnull=True\n            ).values(\n                'cliente__comuna', 'despacho_retira'\n            ).annotate(\n                total=Count('id_nota')\n            ).order_by('-total')\n</code></pre> <p>Agrupa por comuna del cliente y tipo de despacho.</p> <p>Ignora clientes sin comuna.</p> <pre><code>        response_data = {\n            'notas': {\n                'total': total_notas,\n                'por_estado': list(notas_por_despacho),\n                'por_dia': [{\n                    'day': item['dia'].strftime('%Y-%m-%d') if item['dia'] else 'Fecha no disponible',\n                    'total': item['total']\n                } for item in notas_por_dia],\n            },\n            'comunas': {\n                'resumen': list(notas_por_comuna),\n            }\n        }\n</code></pre> <p>Crea un diccionario estructurado para enviar como JSON de respuesta.</p> <pre><code>        logger.debug(f\"Datos del dashboard: {response_data}\")\n        return Response(response_data)\n</code></pre> <p>Devuelve el resultado al cliente.</p> <pre><code>    except ValueError as e:\n        logger.error(f\"Error en formato de fecha: {str(e)}\")\n        return Response(\n            {'error': 'Formato de fecha inv\u00e1lido. Use YYYY-MM-DD'},\n            status=400\n        )\n</code></pre> <p>Si datetime.strptime falla (por mal formato), devuelve error 400.</p> <pre><code>    except Exception as e:\n        logger.error(f\"Error en dashboard/resumen: {str(e)}\", exc_info=True)\n        return Response(\n            {'error': f'Error interno del servidor: {str(e)}'},\n            status=500\n        )\n</code></pre> <p>Cualquier otro error devuelve error 500 y se loggea con exc_info=True.</p>"},{"location":"proyecto/backend/nota_app/views/#productosview","title":"ProductosView","text":"<pre><code>class ProductosView(viewsets.ModelViewSet):\n    serializer_class = ProductosSerializer\n    queryset = Productos.objects.all()\n    permission_classes = [permissions.IsAuthenticatedOrReadOnly]\n\n    @action(detail=False, methods=['get', 'put', 'patch'], url_path='por-codigo')\n    def obtener_por_codigo(self, request):\n        codigo = request.query_params.get('codigo')\n        if not codigo:\n            return Response({'error': 'C\u00f3digo es requerido'}, status=status.HTTP_400_BAD_REQUEST)\n\n        try:\n            producto = Productos.objects.get(codigo=codigo)\n\n            # Manejo de m\u00e9todos PUT/PATCH\n            if request.method in ['PUT', 'PATCH']:\n                partial = request.method == 'PATCH'  # True para PATCH, False para PUT\n                serializer = self.get_serializer(producto, data=request.data, partial=partial)\n                serializer.is_valid(raise_exception=True)\n                serializer.save()\n                return Response(serializer.data)\n\n            # Manejo del GET\n            data = {\n                'id_producto': producto.id_producto,\n                'nombre': producto.nombre,\n                'codigo': producto.codigo,\n                'descripcion': producto.descripcion,\n                'precio': producto.precio_venta,\n                'stock': producto.stock,\n                'categoria': producto.categoria,\n                'unidad_medida': producto.unidad_medida,\n                'precio_compra': producto.precio_compra,\n            }\n            return Response(data)\n\n        except Productos.DoesNotExist:\n            return Response({'error': 'Producto no encontrado'}, status=status.HTTP_404_NOT_FOUND)\n        except Exception as e:\n            return Response({'error': str(e)}, status=status.HTTP_400_BAD_REQUEST)\n</code></pre> <p>Extracci\u00f3n del par\u00e1metro</p> <pre><code>codigo = request.query_params.get('codigo')\n</code></pre> <p>El m\u00e9todo obtiene el par\u00e1metro codigo desde la URL</p> <p>Validaci\u00f3n del par\u00e1metro</p> <pre><code>if not codigo:\n    return Response({'error': 'C\u00f3digo es requerido'}, status=status.HTTP_400_BAD_REQUEST)\n</code></pre> <p>Si el c\u00f3digo no fue entregado, responde con 400 Bad Request.</p> <p>Buscar el producto por c\u00f3digo</p> <pre><code>producto = Productos.objects.get(codigo=codigo)\n</code></pre> <ul> <li>Intenta obtener el producto usando el campo codigo.</li> <li>Si no existe, ser\u00e1 capturado por la excepci\u00f3n Productos.DoesNotExist.</li> </ul> <p>Actualizaci\u00f3n</p> <pre><code>if request.method in ['PUT', 'PATCH']:\n    partial = request.method == 'PATCH'\n    serializer = self.get_serializer(producto, data=request.data, partial=partial)\n    serializer.is_valid(raise_exception=True)\n    serializer.save()\n    return Response(serializer.data)\n</code></pre> <p>Explicaci\u00f3n:</p> <ul> <li>Si llega un PUT, se requiere actualizar todos los campos.</li> <li>Si llega un PATCH, se permiten actualizaciones parciales.</li> <li>Se reutiliza el ProductosSerializer de la vista.</li> </ul> <p>Respuesta: Se devuelve el producto actualizado en formato JSON.</p> <p>Este c\u00f3digo:</p> <pre><code>    serializer = self.get_serializer(producto, data=request.data, partial=partial)\n</code></pre> <p>1.- self.get_serializer(...)</p> <p>get_serializer() es un m\u00e9todo de ModelViewSet que:</p> <ul> <li>Obtiene autom\u00e1ticamente el serializer configurado en serializer_class.</li> <li>Aplica contexto adicional (como request, view, etc.).</li> <li>Permite reutilizar el mismo serializer sin tener que instanciarlo manualmente.</li> </ul> <p>2.- Primer argumento: proveedor</p> <p>El primer argumento es la instancia existente del modelo que se quiere actualizar.</p> <p>Ejemplo:</p> <ul> <li>proveedor = Proveedores.objects.get(rut_proveedor=rut)</li> <li>Ese objeto se pasa al serializer para ser modificado.</li> </ul> <p>Esto le dice al serializer: \"Este objeto es el que quiero actualizar.\"</p> <p>3.- data=request.data</p> <p>Aqu\u00ed se le pasa la nueva informaci\u00f3n enviada por el cliente (generalmente desde un PUT o PATCH).  El serializer usar\u00e1 estos datos para validar y actualizar el objeto existente.</p> <p>4.-  partial=partial</p> <p>Si es PATCH \u2192 partial=True</p> <ul> <li>La actualizaci\u00f3n es parcial</li> <li>Solo actualiza los campos enviados</li> <li>Los campos obligatorios NO son requeridos</li> </ul> <p>Si es PUT \u2192 partial=False</p> <ul> <li>La actualizaci\u00f3n debe ser completa</li> <li>Todos los campos requeridos deben estar presentes</li> <li>Un PUT reemplaza el objeto entero</li> </ul> <p>Esto le indica al serializer:</p> <p>\"\u00bfDebo actualizar solo lo enviado (PATCH) o validar todo el objeto completo (PUT)?\"</p> <p>Respuesta para m\u00e9todo GET</p> <pre><code>data = {\n    'id_producto': producto.id_producto,\n    'nombre': producto.nombre,\n    'codigo': producto.codigo,\n    'descripcion': producto.descripcion,\n    'precio': producto.precio_venta,\n    'stock': producto.stock,\n    'categoria': producto.categoria,\n    'unidad_medida': producto.unidad_medida,\n    'precio_compra': producto.precio_compra,\n}\nreturn Response(data)\n</code></pre> <p>En caso de GET:</p> <ul> <li>Devuelve la informaci\u00f3n b\u00e1sica del producto.</li> <li>No usa serializer para mayor eficiencia.</li> </ul> <p>Manejo de errores</p> <pre><code>except Productos.DoesNotExist:\n    return Response({'error': 'Producto no encontrado'}, status=status.HTTP_404_NOT_FOUND)\nexcept Exception as e:\n    return Response({'error': str(e)}, status=status.HTTP_400_BAD_REQUEST)\n</code></pre> <ul> <li>Si el producto no existe \u2192 HTTP 404.</li> <li>Cualquier otro error inesperado \u2192 HTTP 400.</li> </ul>"},{"location":"proyecto/backend/nota_app/views/#proveedoresview","title":"ProveedoresView","text":"<pre><code>class ProveedoresView(viewsets.ModelViewSet):\n    serializer_class = ProveedoresSerializer\n    queryset = Proveedores.objects.all()\n    permission_classes = [permissions.IsAuthenticatedOrReadOnly]\n\n    @action(detail=False, methods=['get', 'put', 'patch'], url_path='por-rut')\n    def obtener_por_rut(self, request):\n        rut = request.query_params.get('rut')\n        if not rut:\n            return Response({'error': 'RUT es requerido'}, status=status.HTTP_400_BAD_REQUEST)\n\n        try:\n            proveedor = Proveedores.objects.get(rut_proveedor=rut)\n\n            # Manejo de m\u00e9todos PUT/PATCH\n            if request.method in ['PUT', 'PATCH']:\n                partial = request.method == 'PATCH'  # True para PATCH, False para PUT\n                serializer = self.get_serializer(proveedor, data=request.data, partial=partial)\n                serializer.is_valid(raise_exception=True)\n                serializer.save()\n                return Response(serializer.data)\n\n            # Manejo del GET\n            data = {\n                'id_proveedor': proveedor.id_proveedor,\n                'razon_social': proveedor.razon_social,\n                'rut_proveedor': proveedor.rut_proveedor,\n            }\n            return Response(data)\n\n        except Proveedores.DoesNotExist:\n            return Response({'error': 'Proveedor no encontrado'}, status=status.HTTP_404_NOT_FOUND)\n        except Exception as e:\n            return Response({'error': str(e)}, status=status.HTTP_400_BAD_REQUEST)\n</code></pre> <p>Similar al ProductosView</p>"},{"location":"proyecto/backend/nota_app/views/#personalview","title":"PersonalView","text":"<pre><code>class PersonalView(viewsets.ModelViewSet):\n    serializer_class = PersonalSerializer\n    queryset = Personal.objects.all()\n    permission_classes = [permissions.IsAuthenticatedOrReadOnly]\n\n    @action(detail=True, methods=['post'], url_path='asignar-sabados')\n    def asignar_sabados(self, request, pk=None):\n        personal = self.get_object()\n        fechas = request.data.get('sabados', [])\n\n        if not isinstance(fechas, list):\n            return Response(\n                {'error': 'El campo \"sabados\" debe ser una lista de fechas.'},\n                status=status.HTTP_400_BAD_REQUEST\n            )\n\n        try:\n            with transaction.atomic():\n                # Crear o obtener s\u00e1bados\n                sabados_objs = []\n                for fecha_str in fechas:\n                    sabado, _ = Sabado.objects.get_or_create(fecha=fecha_str)\n                    sabados_objs.append(sabado)\n\n                # Obtener IDs de s\u00e1bados existentes\n                sabados_existentes = personal.sabados_trabajados.all()\n                sabados_existentes_ids = set(sabados_existentes.values_list('sabado__id_sabado', flat=True))\n\n                # Eliminar relaciones que ya no est\u00e1n\n                personal.sabados_trabajados.exclude(sabado__in=sabados_objs).delete()\n\n                # Crear nuevas relaciones\n                nuevos_sabados = [\n                    SabadoTrabajado(personal=personal, sabado=sabado)\n                    for sabado in sabados_objs \n                    if sabado.id_sabado not in sabados_existentes_ids\n                ]\n                SabadoTrabajado.objects.bulk_create(nuevos_sabados)\n\n                return Response({\n                    'message': f'S\u00e1bados actualizados. {len(nuevos_sabados)} nuevos.'\n                }, status=status.HTTP_200_OK)\n\n        except Exception as e:\n            return Response(\n                {'error': f'Error al actualizar s\u00e1bados: {str(e)}'},\n                status=status.HTTP_500_INTERNAL_SERVER_ERROR\n            )\n\n\n    @action(detail=True, methods=['get'], url_path='sabados-trabajados')\n    def obtener_sabados_trabajados(self, request, pk=None):\n        personal = self.get_object()\n        sabados = personal.sabados_trabajados.all().select_related('sabado')\n        fechas = [s.sabado.fecha.strftime(\"%Y-%m-%d\") for s in sabados]\n        return Response({'sabados': fechas}, status=status.HTTP_200_OK)\n\n    @action(detail=False, methods=['get'], url_path='historico-sabados')\n    def historico_sabados(self, request):\n        \"\"\"\n        Obtiene el hist\u00f3rico de s\u00e1bados trabajados agrupados por mes y persona\n        \"\"\"\n        # Obtener los \u00faltimos 6 meses de datos\n        sabados_trabajados = (\n            SabadoTrabajado.objects\n            .filter(sabado__fecha__gte=timezone.now()-timedelta(days=180))\n            .select_related('personal', 'sabado')\n            .order_by('sabado__fecha', 'personal__nombre')\n        )\n\n        # Procesamiento para agrupar por mes y persona\n        historico = defaultdict(lambda: defaultdict(list))\n\n        for st in sabados_trabajados:\n            mes = st.sabado.fecha.strftime('%Y-%m')  # Formato: AAAA-MM\n            historico[mes][st.personal].append(st.sabado.fecha.strftime('%d-%m-%Y'))\n\n        # Preparar respuesta estructurada\n        response_data = []\n        for mes, personal_data in sorted(historico.items(), reverse=True):\n            for personal, sabados in sorted(personal_data.items(), key=lambda x: (x[0].apellido, x[0].nombre)):\n                response_data.append({\n                    'mes': mes,\n                    'id_personal': personal.id_personal,\n                    'nombre': personal.nombre,\n                    'apellido': personal.apellido,\n                    'sabados': sabados,\n                    'total_sabados': len(sabados)\n                })\n\n        # Validar y serializar la respuesta\n        serializer = HistoricoSabadosSerializer(response_data, many=True)\n        return Response(serializer.data)\n</code></pre> <p>Define el CRUD y permisos</p> <pre><code>serializer_class = PersonalSerializer\nqueryset = Personal.objects.all()\npermission_classes = [permissions.IsAuthenticatedOrReadOnly]\n</code></pre> <ul> <li>Usuarios autenticados \u2192 pueden crear, actualizar o eliminar.</li> <li>Usuarios no autenticados \u2192 solo lectura (GET).</li> </ul>"},{"location":"proyecto/backend/nota_app/views/#accion-personalizada-asignar_sabados","title":"Acci\u00f3n personalizada: asignar_sabados","text":"<pre><code>@action(detail=True, methods=['post'], url_path='asignar-sabados')\n</code></pre> <p>Crea un endpoint accesible.</p> <ul> <li>detail=True \u2192 requiere un ID de persona.</li> <li>methods=['post'] \u2192 solo acepta POST.</li> <li>url_path='asignar-sabados' \u2192 define la URL final.</li> </ul> <p>Extracci\u00f3n de datos enviados por el cliente</p> <pre><code>personal = self.get_object()\nfechas = request.data.get('sabados', [])\n</code></pre> <ul> <li>self.get_object() retorna la instancia de Personal seg\u00fan el pk.</li> <li>Extrae la lista sabados del body del POST.</li> </ul> <p>Validaci\u00f3n de formato</p> <pre><code>if not isinstance(fechas, list):\n    return Response({'error': 'El campo \"sabados\" debe ser una lista de fechas.'}, status=400)\n</code></pre> <p>Se asegura de que sabados sea una lista.</p> <p>Bloque transaccional</p> <pre><code>with transaction.atomic():\n</code></pre> <p>Garantiza que todo el proceso se guarde o se revierta si ocurre un error.</p> <p>Crear o recuperar los objetos Sabado</p> <pre><code>sabados_objs = []\nfor fecha_str in fechas:\n    sabado, _ = Sabado.objects.get_or_create(fecha=fecha_str)\n    sabados_objs.append(sabado)\n</code></pre> <ul> <li>Crea (o reutiliza) cada fecha de s\u00e1bado.</li> <li>Los guarda en una lista para procesarlos despu\u00e9s.</li> </ul> <p>Obtener s\u00e1bados ya asignados</p> <pre><code>sabados_existentes = personal.sabados_trabajados.all()\nsabados_existentes_ids = set(sabados_existentes.values_list('sabado__id_sabado', flat=True))\n</code></pre> <p>Permite comparar qu\u00e9 s\u00e1bados ya estaban asociados al trabajador.</p> <p>Eliminar relaciones que ya no est\u00e1n</p> <pre><code>personal.sabados_trabajados.exclude(sabado__in=sabados_objs).delete()\n</code></pre> <p>Si un s\u00e1bado ya no aparece en la nueva lista, se elimina la relaci\u00f3n.</p> <p>Agregar nuevas relaciones</p> <pre><code>nuevos_sabados = [\n    SabadoTrabajado(personal=personal, sabado=sabado)\n    for sabado in sabados_objs \n    if sabado.id_sabado not in sabados_existentes_ids\n]\nSabadoTrabajado.objects.bulk_create(nuevos_sabados)\n</code></pre> <ul> <li>Se generan solo las relaciones nuevas.</li> <li>Se guardan todas juntas usando bulk_create \u2192 mucho m\u00e1s eficiente.</li> </ul> <p>Respuesta</p> <pre><code>return Response({'message': f'S\u00e1bados actualizados. {len(nuevos_sabados)} nuevos.'})\n</code></pre> <p>Devuelve un mensaje indicando cu\u00e1ntos fueron agregados.</p>"},{"location":"proyecto/backend/nota_app/views/#accion-personalizada-obtener_sabados_trabajados","title":"Acci\u00f3n personalizada: obtener_sabados_trabajados","text":"<p>Consulta simplificada</p> <pre><code>sabados = personal.sabados_trabajados.all().select_related('sabado')\n</code></pre> <p>select_related evita consultas adicionales al traer el objeto sabado.</p> <p>Formateo de fechas</p> <pre><code>fechas = [s.sabado.fecha.strftime(\"%Y-%m-%d\") for s in sabados]\n</code></pre> <p>Devuelve un array de fechas en formato A\u00d1O-MES-D\u00cdA.</p>"},{"location":"proyecto/backend/nota_app/views/#accion-personalizada-historico_sabados","title":"Acci\u00f3n personalizada: historico_sabados","text":"<p>Consulta de los \u00faltimos 180 d\u00edas</p> <pre><code>sabados_trabajados = (\n    SabadoTrabajado.objects\n    .filter(sabado__fecha__gte=timezone.now()-timedelta(days=180))\n    .select_related('personal', 'sabado')\n    .order_by('sabado__fecha', 'personal__nombre')\n)\n</code></pre> <p>Agrupaci\u00f3n por mes y persona</p> <pre><code>historico = defaultdict(lambda: defaultdict(list))\n</code></pre> <p>Genera estructura:</p> <pre><code>{\n  '2025-01': {\n      PersonalObj: ['10-01-2025', '24-01-2025']\n  },\n  ...\n}\n</code></pre> <p>Construcci\u00f3n de la respuesta final</p> <pre><code>response_data.append({\n    'mes': mes,\n    'id_personal': personal.id_personal,\n    'nombre': personal.nombre,\n    'apellido': personal.apellido,\n    'sabados': sabados,\n    'total_sabados': len(sabados)\n})\n</code></pre> <p>Serializaci\u00f3n final</p> <p>serializer = HistoricoSabadosSerializer(response_data, many=True) return Response(serializer.data)</p>"},{"location":"proyecto/backend/nota_app/views/#pedidomateriasprimasview","title":"PedidoMateriasPrimasView","text":"<pre><code>class PedidoMateriasPrimasView(viewsets.ModelViewSet):\n    serializer_class = PedidoMateriasPrimasSerializer\n    queryset = PedidoMateriasPrimas.objects.all()\n    permission_classes = [permissions.IsAuthenticatedOrReadOnly]\n\n    @action(detail=False, methods=['get'], url_path='buscar-proveedores')\n    def buscar_proveedores(self, request):\n        q = request.GET.get('q', '')\n        proveedores = Proveedores.objects.filter(razon_social__icontains=q)[:10]\n        serializer = ProveedoresSerializer(proveedores, many=True)\n        return Response(serializer.data, status=status.HTTP_200_OK)\n\n    @action(detail=False, methods=['get'], url_path='buscar-productos')\n    def buscar_productos(self, request):\n        q = request.GET.get('q', '')\n        productos = Productos.objects.filter(nombre__icontains=q)[:10]\n        serializer = ProductosSerializer(productos, many=True)\n        return Response(serializer.data, status=status.HTTP_200_OK)\n</code></pre> <p>buscar_proveedores</p> <pre><code>  q = request.GET.get('q', '')\n</code></pre> <ul> <li>Extrae el par\u00e1metro q de la URL</li> <li>Si no viene nada, usa string vac\u00edo ('').</li> </ul> <pre><code>    proveedores = Proveedores.objects.filter(razon_social__icontains=q)[:10]\n</code></pre> <ul> <li>Busca en la base datos coincidencias parciales.</li> <li>icontains \u2192 insensible a may\u00fasculas/min\u00fasculas.</li> <li>[:10] \u2192 limita resultados a 10 \u2192 ideal para autocompletar.</li> </ul> <pre><code>    serializer = ProductosSerializer(productos, many=True)\n</code></pre> <ul> <li>Serializa la lista para devolverla como JSON.</li> </ul> <pre><code>    return Response(serializer.data, status=status.HTTP_200_OK)\n</code></pre> <ul> <li>Devuelve JSON con los proveedores encontrados.</li> </ul>"},{"location":"proyecto/backend/nota_app/views/#documentfacturasview","title":"DocumentFacturasView","text":"<pre><code>class DocumentFacturasView(viewsets.ModelViewSet):\n    serializer_class = DocumentFacturasSerializer\n    queryset = DocumentFacturas.objects.all()\n    permission_classes = [permissions.IsAuthenticatedOrReadOnly]\n\n\n    @action(detail=False, methods=['get'], url_path='buscar-por-titulo')\n    def buscar_por_titulo(self, request):\n        q = request.GET.get('q', '')\n        pdfs = DocumentFacturas.objects.filter(title__icontains=q)[:10]\n        serializer = self.get_serializer(pdfs, many=True)\n        return Response(serializer.data, status=status.HTTP_200_OK)\n\n    def destroy(self, request, *args, **kwargs):\n        instance = self.get_object()\n\n        # Obtener el nombre del archivo del campo file_url\n        file_key = instance.file_url.split(f\"{os.getenv('AWS_STORAGE_BUCKET_NAME')}/\")[-1]\n\n        # Conexi\u00f3n a R2\n        s3 = boto3.client(\n            \"s3\",\n            endpoint_url=os.getenv(\"AWS_S3_ENDPOINT_URL\"),\n            aws_access_key_id=os.getenv(\"AWS_ACCESS_KEY_ID\"),\n            aws_secret_access_key=os.getenv(\"AWS_SECRET_ACCESS_KEY\"),\n        )\n\n        try:\n            s3.delete_object(Bucket=os.getenv(\"AWS_STORAGE_BUCKET_NAME\"), Key=file_key)\n            print(f\"\u2705 Archivo eliminado de R2: {file_key}\")\n        except Exception as e:\n            print(f\"\u26a0\ufe0f Error al eliminar en R2: {e}\")\n\n        # Finalmente elimina el registro en la base de datos\n        self.perform_destroy(instance)\n        return Response(status=status.HTTP_204_NO_CONTENT)\n</code></pre> <p>buscar_por_titulo</p> <pre><code>  q = request.GET.get('q', '')\n</code></pre> <ul> <li>Extrae el par\u00e1metro q de la URL</li> <li>Si no viene nada, usa string vac\u00edo ('').</li> </ul> <pre><code>    pdfs = DocumentFacturas.objects.filter(title__icontains=q)[:10]\n</code></pre> <ul> <li>Busca en la base datos coincidencias parciales.</li> <li>icontains \u2192 insensible a may\u00fasculas/min\u00fasculas.</li> <li>[:10] \u2192 limita resultados a 10 \u2192 ideal para autocompletar.</li> </ul> <pre><code>   serializer = self.get_serializer(pdfs, many=True)\n</code></pre> <ul> <li>Serializa la lista para devolverla como JSON.</li> </ul> <pre><code>    return Response(serializer.data, status=status.HTTP_200_OK)\n</code></pre> <ul> <li>Devuelve JSON con los pdfs encontrados.</li> </ul> <p>destroy</p> <p>Se sobreescribe este m\u00e9todo para agregar la l\u00f3gica de borrar archivos del storage</p> <pre><code>instance = self.get_object()\nfile_key = instance.file_url.split(f\"{os.getenv('AWS_STORAGE_BUCKET_NAME')}/\")[-1]\n</code></pre> <ul> <li> <p>Obtiene la instancia a eliminar     -Obtiene el queryset definido en tu view (o lo que devuelva get_queryset()).</p> <ul> <li>Lee el lookup field (por defecto pk) desde la URL.</li> <li>Hace un query a la base de datos para obtener ese objeto.</li> <li>Si no lo encuentra \u2192 lanza autom\u00e1ticamente un 404 (NotFound).</li> <li>Aplica permisos y filtros si existen.</li> </ul> </li> <li> <p>Extrae el nombre del archivo de la URL de R2.</p> </li> <li>file_url normalmente contiene algo como:<ul> <li>https://bucket/nombre-archivo.pdf</li> <li>Esta l\u00ednea separa para obtener el 'Key' que S3 necesita</li> </ul> </li> </ul> <pre><code>s3 = boto3.client(\n            \"s3\",\n            endpoint_url=os.getenv(\"AWS_S3_ENDPOINT_URL\"),\n            aws_access_key_id=os.getenv(\"AWS_ACCESS_KEY_ID\"),\n            aws_secret_access_key=os.getenv(\"AWS_SECRET_ACCESS_KEY\"),\n        )\n</code></pre> <p>Se crea un cliente S3, es decir, un objeto que permite ejecutar comandos contra S3</p> <ul> <li>Crea una conexi\u00f3n hacia el bucket S3/R2,</li> <li>Usando las credenciales</li> <li>Con la URL base configurada</li> </ul> <pre><code>  try:\n            s3.delete_object(Bucket=os.getenv(\"AWS_STORAGE_BUCKET_NAME\"), Key=file_key)\n            print(f\"\u2705 Archivo eliminado de R2: {file_key}\")\n        except Exception as e:\n            print(f\"\u26a0\ufe0f Error al eliminar en R2: {e}\")\n</code></pre> <p>Se elimina el archivo del bucket </p> <pre><code> self.perform_destroy(instance)\n        return Response(status=status.HTTP_204_NO_CONTENT)\n</code></pre> <p>Borra el registro en la BD</p>"},{"location":"proyecto/backend/nota_app/views/#notaproductoview","title":"NotaProductoView","text":"<pre><code>class NotaProductoView(viewsets.ModelViewSet):\n    \"\"\"\n    ViewSet para manejar NotaProducto.\n    - CRUD de NotaProducto\n    - Subida de Excel para cargar/actualizar datos\n    \"\"\"\n    permission_classes = [permissions.IsAuthenticated]\n    queryset = NotaProducto.objects.all()\n    serializer_class = NotaProductoSerializer\n\n\n    @action(detail=False, methods=['post'], url_path='upload_excel')\n    def upload_excel(self, request):\n        \"\"\"\n        Sube un Excel con columnas [numnota, cod_articu, pend] y\n        lo guarda en la tabla NotaProducto (crea o actualiza).\n        \"\"\"\n        file = request.FILES.get(\"file\")\n        if not file:\n            return Response(\n                {\"error\": \"No se recibi\u00f3 archivo\"},\n                status=status.HTTP_400_BAD_REQUEST\n            )\n\n        try:\n            columnas_necesarias = ['numnota', 'cod_articu', 'pend']\n            df = pd.read_excel(file, usecols=columnas_necesarias)\n\n            registros_procesados = 0\n            for _, row in df.iterrows():\n\n                num_nota_excel = int(row['numnota'])\n                cod_articu_excel = str(row['cod_articu']).strip()\n                cantidad = int(row['pend'])\n\n                try:\n\n                    nota = Notas.objects.get(num_nota=num_nota_excel)\n                    producto = Productos.objects.get(codigo=cod_articu_excel)\n\n                    obj, created = NotaProducto.objects.update_or_create(\n                        nota=nota,\n                        producto=producto,\n                        defaults={\n                            'cantidad': cantidad,\n                            'usuario_creacion': request.user, \n                            'usuario_modificacion': request.user\n                            }\n                    )\n                    if created:\n                        obj.usuario_creacion = request.user\n                        obj.save()\n                    registros_procesados += 1\n\n                except (Notas.DoesNotExist, Productos.DoesNotExist):\n                    # Si no existe la nota o el producto, se omite\n                    continue\n\n            return Response(\n                {\"msg\": f\"Archivo procesado correctamente. {registros_procesados} registros cargados/actualizados.\"},\n                status=status.HTTP_200_OK\n            )\n\n        except Exception as e:\n            return Response(\n                {\"error\": f\"Error al procesar el archivo: {str(e)}\"},\n                status=status.HTTP_400_BAD_REQUEST\n            )\n</code></pre> <p>upload_excel</p> <p>Carga un archivo Excel para crear o actualizar registros de NotaProducto.</p> <p>Descripci\u00f3n</p> <p>Este endpoint recibe un archivo Excel con columnas:</p> <ul> <li>numnota \u2192 N\u00famero de nota asociada.</li> <li>cod_articu \u2192 C\u00f3digo del producto.</li> <li>pend \u2192 Cantidad pendiente.</li> </ul> <p>Por cada fila, el sistema:</p> <ul> <li>Verifica si existe la Nota (Notas) y el Producto (Productos).</li> <li>Crea o actualiza el registro en NotaProducto mediante update_or_create.</li> <li>Registra el usuario que carga o modifica el registro.</li> <li>Omite filas cuyo producto o nota no existan.</li> </ul> <pre><code>try:\n            columnas_necesarias = ['numnota', 'cod_articu', 'pend']\n            df = pd.read_excel(file, usecols=columnas_necesarias)\n\n            registros_procesados = 0\n            for _, row in df.iterrows():\n\n                num_nota_excel = int(row['numnota'])\n                cod_articu_excel = str(row['cod_articu']).strip()\n                cantidad = int(row['pend'])\n</code></pre> <ul> <li>Lee el archivo Excel enviado por el usuario (file).</li> <li>Pandas (pd) interpreta el archivo y lo convierte en un DataFrame (una tabla en memoria).</li> <li>usecols=columnas_necesarias indica que solo debe leer estas columnas</li> <li>df.iterrows() devuelve cada fila del DataFrame una por una.</li> <li>Cada vuelta del for entrega:<ul> <li>_: \u00edndice de la fila (se ignora con _ porque no se usa).</li> <li>row: un objeto tipo Serie con los valores de la fila.</li> </ul> </li> <li>Obtiene el valor de la columna numnota.</li> <li>Lo convierte a entero, porque los modelos del sistema probablemente esperan int.</li> <li>Convierte a string (por si Excel lo interpreta como n\u00famero).</li> <li>strip() elimina espacios en blanco antes y despu\u00e9s, para evitar errores</li> </ul> <pre><code>if created:\n    obj.usuario_creacion = request.user\n    obj.save()\n    registros_procesados += 1\n\n    except (Notas.DoesNotExist, Productos.DoesNotExist):\n        # Si no existe la nota o el producto, se omite\n        continue\n</code></pre> <p>if created: Esta variable viene desde update_or_create().</p> <p>update_or_create retorna: (objeto, created)</p> <ul> <li>donde:<ul> <li>created = True    El registro NO exist\u00eda \u2192 se cre\u00f3 uno nuevo.</li> <li>created = False   El registro exist\u00eda \u2192 solo se actualiz\u00f3.</li> </ul> </li> </ul> <p>Entonces este if es para ejecutar un c\u00f3digo solo cuando el registro es nuevo.</p> <p>obj.usuario_creacion = request.user</p> <ul> <li>Se asigna el usuario autenticado que est\u00e1 realizando la carga del Excel.</li> <li>Esto solo se hace si es un objeto nuevo, porque:<ul> <li>usuario_creacion debe representar qui\u00e9n cre\u00f3 el registro.</li> <li>Si se est\u00e1 actualizando (created=False), no corresponde cambiar el usuario de creaci\u00f3n.</li> </ul> </li> </ul> <p>obj.save()</p> <ul> <li>Guarda en base de datos el cambio del campo usuario_creacion.</li> <li>Aunque update_or_create ya guard\u00f3 el registro, este segundo .save() se necesita porque se est\u00e1 modificando un campo adicional (usuario_creacion) despu\u00e9s de la creaci\u00f3n.</li> </ul> <p>continue</p> <ul> <li>Hace que el bucle for pase inmediatamente al siguiente registro del Excel.</li> <li>No ejecuta lo que queda dentro del ciclo.</li> <li>En este caso, significa: \u201cEste registro no es v\u00e1lido \u2192 saltarlo y seguir con el siguiente\u201d.</li> </ul>"},{"location":"proyecto/backend/nota_ventas/asgi/","title":"Archivo <code>asgi.py</code>","text":"<p>Este archivo configura la interfaz ASGI (Asynchronous Server Gateway Interface) para el proyecto Django</p>"},{"location":"proyecto/backend/nota_ventas/asgi/#proposito","title":"Prop\u00f3sito","text":"<p>Permite que Django se comunique con servidores que soportan ASGI, lo cual es \u00fatil para manejar conexiones as\u00edncronas como WebSockets o tareas en tiempo real.</p> <p>Este archivo es usado principalmente cuando se hace despliegue del proyecto usando servidores ASGI (como Daphne o Uvicorn).</p>"},{"location":"proyecto/backend/nota_ventas/asgi/#contenido-del-archivo","title":"Contenido del archivo","text":"<pre><code>import os\nfrom django.core.asgi import get_asgi_application\n\nos.environ.setdefault('DJANGO_SETTINGS_MODULE', 'pedidosMP.settings')\n\napplication = get_asgi_application()\n</code></pre>"},{"location":"proyecto/backend/nota_ventas/asgi/#explicacion-linea-por-linea","title":"Explicaci\u00f3n l\u00ednea por l\u00ednea","text":"<p>import os: Importa el m\u00f3dulo os para acceder a variables del entorno del sistema operativo.</p> <p>from django.core.asgi import get_asgi_application: Importa la funci\u00f3n que crea una instancia de la aplicaci\u00f3n ASGI a partir de la configuraci\u00f3n del proyecto Django.</p> <p>os.environ.setdefault('DJANGO_SETTINGS_MODULE', 'pedidosMP.settings'): Define la variable de entorno que Django necesita para encontrar el archivo settings.py del proyecto. Si ya est\u00e1 definida, no la sobrescribe.</p> <p>application = get_asgi_application(): Crea una instancia de la aplicaci\u00f3n ASGI que ser\u00e1 utilizada por el servidor ASGI para comunicarse con Django.</p>"},{"location":"proyecto/backend/nota_ventas/init/","title":"Archivo <code>__init__.py</code>","text":"<p>Este archivo se ubica en el directorio principal del proyecto Django. Su prop\u00f3sito es inicializar configuraciones necesarias para el correcto funcionamiento del entorno de Django, en este caso, establecer el uso de <code>pymysql</code> como reemplazo del conector <code>MySQLdb</code>.</p>"},{"location":"proyecto/backend/nota_ventas/init/#contenido-del-archivo","title":"Contenido del Archivo","text":"<pre><code>import pymysql\n\npymysql.install_as_MySQLdb()\n</code></pre>"},{"location":"proyecto/backend/nota_ventas/init/#explicacion","title":"Explicaci\u00f3n","text":"<p>import pymysql: Importa la biblioteca pymysql, un cliente MySQL escrito en Python puro que se puede usar como reemplazo del tradicional MySQLdb.</p> <p>pymysql.install_as_MySQLdb(): Este m\u00e9todo indica a Django (u otras librer\u00edas que esperan encontrar MySQLdb) que usen pymysql como si fuera MySQLdb. Es necesario porque Django por defecto intenta usar MySQLdb, que no siempre est\u00e1 disponible o compatible en todos los entornos (especialmente en Windows).</p>"},{"location":"proyecto/backend/nota_ventas/init/#por-que-se-hace-esto","title":"\u00bfPor qu\u00e9 se hace esto?","text":"<p>Django tiene compatibilidad nativa con MySQLdb, pero esta biblioteca no siempre es f\u00e1cil de instalar o compatible en algunos sistemas operativos. pymysql es m\u00e1s f\u00e1cil de instalar (por ejemplo, usando pip install pymysql) y funciona bien como reemplazo. Al hacer esta instalaci\u00f3n desde init.py, nos aseguramos de que Django lo reconozca autom\u00e1ticamente al arrancar el proyecto.</p>"},{"location":"proyecto/backend/nota_ventas/init/#requisitos","title":"Requisitos","text":"<p>Tener pymysql instalado en el entorno:</p> <p><pre><code>pip install pymysql\n</code></pre> Y en settings.py de Django, se puede seguir usando 'ENGINE': 'django.db.backends.mysql' sin cambiar nada m\u00e1s, gracias a esta l\u00ednea en init.py.</p>"},{"location":"proyecto/backend/nota_ventas/pycache/","title":"Carpeta de proyecto <code>__pycache__</code>","text":"<p>En un proyecto Django (y en general en cualquier proyecto de Python), la carpeta pycache es un directorio que Python crea autom\u00e1ticamente para almacenar archivos de bytecode compilado (con extensi\u00f3n .pyc o .pyo) de los m\u00f3dulos importados.</p>"},{"location":"proyecto/backend/nota_ventas/pycache/#para-que-sirve","title":"\u00bfPara qu\u00e9 sirve?","text":"<ol> <li> <p>Optimizaci\u00f3n de rendimiento: Cuando Python importa un m\u00f3dulo (por ejemplo, models.py, views.py, etc.), compila el c\u00f3digo fuente a un formato intermedio llamado bytecode para acelerar futuras importaciones. Este bytecode se guarda en pycache para evitar tener que recompilar el c\u00f3digo cada vez que se importa.</p> </li> <li> <p>Ahorro de tiempo: En proyectos grandes con muchos m\u00f3dulos, recompilar constantemente el c\u00f3digo ser\u00eda lento. Al guardar el bytecode, Python puede cargar los m\u00f3dulos m\u00e1s r\u00e1pido en ejecuciones posteriores.</p> </li> </ol>"},{"location":"proyecto/backend/nota_ventas/pycache/#caracteristicas-importantes","title":"Caracter\u00edsticas importantes:","text":"<ul> <li>Se crea una carpeta pycache en cada directorio que contenga m\u00f3dulos Python importados.</li> <li>Los archivos dentro tienen nombres como:</li> </ul> <pre><code>nombre_del_modulo.cpython-XX.pyc\n# (donde XX es la versi\u00f3n de Python, ej. cpython-38 para Python 3.8)\n</code></pre> <ul> <li>Django no necesita esta carpeta para funcionar, es solo una optimizaci\u00f3n de Python.</li> <li>Puede ser eliminada manualmente sin problemas (Python la recrear\u00e1 cuando sea necesario)</li> <li>No debe ser incluida en Git</li> </ul>"},{"location":"proyecto/backend/nota_ventas/pycache/#por-que-aparece-en-django","title":"\u00bfPor qu\u00e9 aparece en Django?","text":"<p>Django usa muchos m\u00f3dulos Python internamente (modelos, vistas, configuraciones, etc.), por lo que pycache se genera autom\u00e1ticamente al ejecutar comandos como runserver, migrate, o al importar cualquier archivo .py.</p>"},{"location":"proyecto/backend/nota_ventas/settings/","title":"Archivo <code>settings.py</code>","text":"<p>Este archivo contiene la configuraci\u00f3n b\u00e1sica para el proyecto notaVentas, creado con Django 5.2.1</p>"},{"location":"proyecto/backend/nota_ventas/settings/#configuracion-y-explicacion-de-los-parametros-de-settings","title":"Configuraci\u00f3n y explicaci\u00f3n de los par\u00e1metros de settings","text":""},{"location":"proyecto/backend/nota_ventas/settings/#importaciones","title":"Importaciones","text":""},{"location":"proyecto/backend/nota_ventas/settings/#import-os","title":"import os","text":"<p>El m\u00f3dulo os de Python proporciona funciones para interactuar con el sistema operativo. En Django, se usa com\u00fanmente en settings.py para manejar rutas de archivos, variables de entorno y otras operaciones relacionadas con el sistema.</p>"},{"location":"proyecto/backend/nota_ventas/settings/#from-dotenv-import-load_dotenv","title":"from dotenv import load_dotenv","text":"<p>python-dotenv es una librer\u00eda que carga variables de entorno desde un archivo .env (similar a lo que hace Django con settings.py, pero de forma m\u00e1s segura y configurable). Esto es \u00fatil para:</p> <ul> <li>Evitar hardcodear contrase\u00f1as, claves de API u otra informaci\u00f3n sensible directamente en el c\u00f3digo.</li> <li>Mantener configuraciones separadas por entorno (desarrollo, producci\u00f3n, testing).</li> </ul>"},{"location":"proyecto/backend/nota_ventas/settings/#from-datetime-import-timedelta","title":"from datetime import timedelta","text":"<p>timedelta es una clase de Python que representa una duraci\u00f3n (diferencia entre dos fechas o tiempos). En Django, se usa frecuentemente para configuraciones relacionadas con tiempos, como:</p> <ul> <li>Sesiones de usuario: SESSION_COOKIE_AGE = timedelta(days=30).</li> <li>Tokens JWT: Si se usa librer\u00edas como djangorestframework-simplejwt, se configura la expiraci\u00f3n del token:</li> </ul>"},{"location":"proyecto/backend/nota_ventas/settings/#from-pathlib-import-path","title":"from pathlib import Path","text":"<p>pathlib es un m\u00f3dulo introducido en Python 3.4 (PEP 428) que proporciona una interfaz m\u00e1s intuitiva y legible para trabajar con rutas del sistema de archivos, en comparaci\u00f3n con el antiguo enfoque de os.path.</p> <p>Ventajas sobre os.path: - Sintaxis m\u00e1s clara y orientada a objetos. - M\u00e9todos encadenables (ej: Path().joinpath().resolve()). - Soporte multiplataforma (Windows, Linux, macOS) sin preocuparse por barras / o .</p>"},{"location":"proyecto/backend/nota_ventas/settings/#load_dotenv","title":"load_dotenv()","text":"<p>Se debe instalar esta libreria pip install python-dotenv</p> <p>La l\u00ednea load_dotenv() en el archivo settings.py de un proyecto Django tiene una funci\u00f3n clave: cargar variables de entorno desde un archivo .env al entorno de ejecuci\u00f3n de Python. Esto es especialmente \u00fatil para manejar configuraciones sensibles (como claves secretas, credenciales de bases de datos, etc.) sin hardcodearlas directamente en el c\u00f3digo.</p>"},{"location":"proyecto/backend/nota_ventas/settings/#que-hace-exactamente","title":"\u00bfQu\u00e9 hace exactamente?","text":"<ul> <li>Busca un archivo .env en el directorio ra\u00edz del proyecto (o en la ruta que se le indique).</li> <li>Lee las variables definidas en ese archivo (ej: SECRET_KEY=abc123).</li> <li>Las carga en el entorno de Python, haci\u00e9ndolas accesibles via os.getenv() o os.environ.</li> </ul>"},{"location":"proyecto/backend/nota_ventas/settings/#is_production","title":"IS_PRODUCTION","text":"<p>Con esta variable de entorno se diferencia si el settings.py esta en produccion o desarrollo, siendo False su valor por defecto si es que no encuentra la variable en .env, luego se compara este valor con True, por lo que queda un valor booleano de True o False.</p> <pre><code>IS_PRODUCTION = os.getenv('IS_PRODUCTION', 'False') == 'True'\n</code></pre>"},{"location":"proyecto/backend/nota_ventas/settings/#base_dir","title":"BASE_DIR","text":"<p>Define la ra\u00edz del proyecto, que es utilizada para la construcci\u00f3n de rutas dentro del mismo. BASE_DIR = Path(file).resolve().parent.parent</p>"},{"location":"proyecto/backend/nota_ventas/settings/#explicacion-detallada","title":"Explicaci\u00f3n detallada:","text":"<p>1.- Path(__file__)</p> <p>__file__ es una variable especial en Python que contiene la ruta del archivo actual (en este caso, settings.py).</p> <p>Path() es el constructor de la clase Path de pathlib. Convierte la ruta del archivo en un objeto Path, que permite operaciones avanzadas con rutas.</p> <p>Ejemplo: Si settings.py est\u00e1 en: /home/usuario/mi_proyecto/config/settings.py, entonces Path(__file__) crea un objeto Path que apunta a esa ruta.</p> <p>2.- .resolve()</p> <ul> <li>Convierte la ruta en una ruta absoluta y resuelve cualquier referencia simb\u00f3lica (como ./ o ../).</li> <li>Esto asegura que no haya ambig\u00fcedades en la ruta, independientemente de c\u00f3mo se ejecute el script.</li> </ul> <p>Ejemplo: Si la ruta original era ./config/settings.py, .resolve() la convertir\u00e1 en algo como: /home/usuario/mi_proyecto/config/settings.py.</p> <p>3.- .parent</p> <ul> <li>Devuelve el directorio padre de la ruta actual (equivalente a os.path.dirname()).</li> <li>Cada vez que llama a .parent, sube un nivel en la estructura de directorios.</li> </ul> <p>Primer .parent: Si la ruta era /home/usuario/mi_proyecto/config/settings.py, despu\u00e9s de .parent apuntar\u00e1 a: /home/usuario/mi_proyecto/config/.</p> <p>Segundo .parent: Si aplicamos .parent nuevamente, subimos otro nivel: /home/usuario/mi_proyecto/.</p> <p>4.- Resultado final (BASE_DIR)</p> <ul> <li>Despu\u00e9s de dos .parent, se obtiene la ruta base del proyecto Django (donde est\u00e1 manage.py).</li> <li>Esto es \u00fatil porque muchas configuraciones (como STATICFILES_DIRS, MEDIA_ROOT, etc.) usan BASE_DIR para construir rutas relativas.</li> </ul>"},{"location":"proyecto/backend/nota_ventas/settings/#beneficios","title":"Beneficios","text":"<ul> <li>Flexibilidad: As\u00ed el proyecto puede moverse a otra ubicaci\u00f3n sin romper las rutas.</li> <li>Multiplataforma: Path funciona correctamente en Windows, Linux y macOS (usa / o \\ autom\u00e1ticamente).</li> <li>Legibilidad: Es m\u00e1s claro que usar os.path.join(os.path.dirname(...)).</li> </ul>"},{"location":"proyecto/backend/nota_ventas/settings/#secret_key","title":"SECRET_KEY","text":"<p>La clave secreta utilizada en la producci\u00f3n para la seguridad de las sesiones y el manejo de cookies. Nunca se debe compartir esta clave.</p> <p>El SECRET_KEY es una cadena aleatoria cr\u00edtica que Django utiliza para proporcionar seguridad criptogr\u00e1fica al proyecto. Es generada autom\u00e1ticamente cuando se crea un nuevo proyecto Django con startproject.</p> <p>Funciones principales:</p> <ul> <li>Seguridad de sesiones: Se usa para firmar las cookies de sesi\u00f3n</li> <li>Protecci\u00f3n CSRF: Genera y verifica tokens CSRF</li> <li>Sistema de mensajes: Firma los mensajes flash</li> <li>Funciones criptogr\u00e1ficas: Para generaci\u00f3n de hashes y firmas</li> <li>Algunos backends de almacenamiento: Como signed_cookies</li> </ul> <p>\u00bfC\u00f3mo se utiliza? Django usa internamente el SECRET_KEY en m\u00faltiples componentes sin que necesariamente se tenga que interactuar directamente con \u00e9l.</p>"},{"location":"proyecto/backend/nota_ventas/settings/#ejemplos","title":"Ejemplos:","text":"<ul> <li> <p>En el sistema de sesiones request.session['user_id'] = 42  # Se firma con SECRET_KEY</p> </li> <li> <p>En protecci\u00f3n CSRF {% csrf_token %}  # El token generado usa SECRET_KEY</p> </li> <li> <p>En el sistema de mensajes messages.success(request, \"\u00c9xito!\")  # El mensaje se firma</p> </li> </ul>"},{"location":"proyecto/backend/nota_ventas/settings/#buenas-practicas","title":"Buenas pr\u00e1cticas","text":"<ul> <li>Nunca comprometerlo: No subir a repositorios p\u00fablicos</li> <li>Entorno de producci\u00f3n: Usar diferentes keys para desarrollo y producci\u00f3n</li> <li>Rotaci\u00f3n: Si se compromete, generar uno nuevo (pero afectar\u00e1 sesiones existentes)</li> <li>Almacenamiento seguro: Usar variables de entorno en producci\u00f3n:  </li> </ul> <pre><code>import os  \n\nSECRET_KEY = os.getenv('SECRET_KEY_DJANGO')\nif IS_PRODUCTION and not SECRET_KEY:\n    raise ValueError(\"SECRET_KEY_DJANGO debe estar definido en producci\u00f3n!\")\n</code></pre>"},{"location":"proyecto/backend/nota_ventas/settings/#debug","title":"DEBUG","text":"<p>El modo debug es una configuraci\u00f3n fundamental que afecta el comportamiento de la aplicaci\u00f3n Django de varias formas importantes:</p>"},{"location":"proyecto/backend/nota_ventas/settings/#1-muestra-informacion-detallada-de-errores","title":"1. Muestra informaci\u00f3n detallada de errores","text":"<p>Cuando ocurre un error, Django muestra una p\u00e1gina completa con:</p> <ul> <li>El traceback completo</li> <li>Valores de variables locales</li> <li>Consultas SQL ejecutadas</li> <li>Configuraci\u00f3n relevante</li> </ul>"},{"location":"proyecto/backend/nota_ventas/settings/#2-habilita-herramientas-de-desarrollo","title":"2. Habilita herramientas de desarrollo","text":"<ul> <li>Panel de debug (cuando se usa django-debug-toolbar)</li> <li>Listado de archivos est\u00e1ticos</li> <li>Informaci\u00f3n detallada en consola</li> </ul>"},{"location":"proyecto/backend/nota_ventas/settings/#3-desactiva-ciertas-optimizaciones","title":"3. Desactiva ciertas optimizaciones","text":"<ul> <li>Las plantillas se recargan autom\u00e1ticamente al cambiar</li> <li>No se cachean ciertos elementos</li> </ul>"},{"location":"proyecto/backend/nota_ventas/settings/#4-permite-archivos-estaticos-locales","title":"4. Permite archivos est\u00e1ticos locales","text":"<ul> <li>Django sirve archivos est\u00e1ticos (CSS, JS) directamente</li> <li>No requiere configurar un servidor web separado (como Nginx)</li> </ul>"},{"location":"proyecto/backend/nota_ventas/settings/#peligros-de-tener-debug-true-en-produccion","title":"Peligros de tener DEBUG = True en producci\u00f3n","text":"<p>\u26a0\ufe0f Nunca se debe activar DEBUG en producci\u00f3n porque:</p> <ul> <li>Expone informaci\u00f3n sensible (configuraciones, rutas de archivos)</li> <li>Permite ejecutar c\u00f3digo Python a trav\u00e9s de la consola de debug</li> <li>Muestra detalles de implementaci\u00f3n que pueden ayudar a atacantes</li> </ul>"},{"location":"proyecto/backend/nota_ventas/settings/#que-ocurre-cuando-debugfalse","title":"\u00bfQu\u00e9 ocurre cuando DEBUG=False?","text":"<ul> <li>Los errores muestran mensajes gen\u00e9ricos (500, 404)</li> <li>Se debe configurar ALLOWED_HOSTS</li> <li>Django no sirve archivos est\u00e1ticos (se debe usar Whitenoise o servidor web)</li> <li>Se activan optimizaciones de rendimiento</li> </ul>"},{"location":"proyecto/backend/nota_ventas/settings/#allowed_hosts","title":"ALLOWED_HOSTS","text":"<p>Es una lista de strings que representa los nombres de host/dominios que el sitio Django puede servir. Cuando DEBUG=False (en producci\u00f3n), Django solo responder\u00e1 a requests que incluyan un header Host que coincida con uno de los valores en esta lista.</p> <ul> <li>Seguridad: Previene ataques de HTTP Host header poisoning.</li> <li>Validaci\u00f3n: Asegura que la aplicaci\u00f3n solo responda a los dominios que se ha especificado.</li> <li>Requerimiento obligatorio: Cuando DEBUG=False, Django requiere que esta lista no est\u00e9 vac\u00eda.</li> </ul> <pre><code>ALLOWED_HOSTS = [h for h in os.getenv(\"ALLOWED_HOSTS\", \"\").split(\",\") if h]\n</code></pre>"},{"location":"proyecto/backend/nota_ventas/settings/#buenas-practicas_1","title":"Buenas pr\u00e1cticas","text":"<ul> <li>En desarrollo local se puede dejar vac\u00edo si DEBUG=True</li> <li>En producci\u00f3n siempre se debe especificar los dominios exactos</li> <li>Nunca usar ['*'] en producci\u00f3n a menos que sea absolutamente necesario</li> <li>Para entornos como Heroku, es necesario incluir el dominio de la plataforma</li> </ul>"},{"location":"proyecto/backend/nota_ventas/settings/#installed_apps","title":"INSTALLED_APPS","text":"<p>Es una lista/tupla que contiene los nombres de todas las aplicaciones Django que est\u00e1n activas en el proyecto. Incluye tanto aplicaciones integradas de Django como aplicaciones de terceros y las que se desarrollan por el usuario.</p> <ol> <li>Registra aplicaciones: Le dice a Django qu\u00e9 componentes de aplicaci\u00f3n deben ser incluidos en el proyecto</li> <li>Habilita funcionalidades: Cada app registrada puede aportar:<ul> <li>Modelos de base de datos</li> <li>Migraciones</li> <li>Vistas (views)</li> <li>Templates</li> <li>Archivos est\u00e1ticos</li> <li>Comandos de gesti\u00f3n personalizados</li> </ul> </li> <li>Ordena la carga: Las apps se cargan en el orden especificado (importante para dependencias entre apps)</li> </ol>"},{"location":"proyecto/backend/nota_ventas/settings/#aplicaciones-importantes-por-defecto","title":"Aplicaciones importantes por defecto","text":"<p>django.contrib.admin: Interfaz de administraci\u00f3n django.contrib.auth: Sistema de autenticaci\u00f3n django.contrib.contenttypes: Framework para tipos de contenido django.contrib.sessions: Manejo de sesiones django.contrib.messages: Sistema de mensajes django.contrib.staticfiles: Manejo de archivos est\u00e1ticos  </p>"},{"location":"proyecto/backend/nota_ventas/settings/#aplicaciones-externas","title":"Aplicaciones externas","text":"<p>rest_framework:</p> <p>Framework para construir APIs REST en Django (serializadores, vistas, routers).</p> <p>rest_framework_simplejwt:</p> <p>Implementaci\u00f3n de autenticaci\u00f3n JWT (tokens) para DRF. Maneja login, refresh tokens, expiraciones, etc.</p> <p>rest_framework_simplejwt.token_blacklist:</p> <p>Permite \u201cinvalidar\u201d tokens JWT (por ejemplo, al cerrar sesi\u00f3n) mediante un sistema de blacklist almacenado en DB.</p> <p>corsheaders:</p> <p>Middleware para permitir CORS: que React (u otro front) pueda hacer peticiones a la API Django desde otro dominio o puerto.</p> <p>axes:</p> <p>Sistema de seguridad para bloquear usuarios despu\u00e9s de varios intentos fallidos de login. Previene ataques de fuerza bruta.</p> <p>import_export:</p> <p>A\u00f1ade herramientas al admin para importar y exportar datos (CSV, XLS, JSON, etc.) directamente desde el panel de administraci\u00f3n.</p> <p>storages:</p> <p>Paquete de Django que permite manejar almacenamiento externo, principalmente para:</p> <ul> <li>Amazon S3</li> <li>Google Cloud Storage</li> <li>Azure</li> <li>Cloudflare R2</li> </ul> <p>Se usa para subir archivos o est\u00e1ticos a la nube.</p> <p>csp:</p> <p>Implementa Content Security Policy, un sistema de seguridad que ayuda a prevenir ataques XSS, inyecci\u00f3n de scripts y contenido malicioso.</p> <p>Permite controlar:</p> <ul> <li>Qu\u00e9 scripts se pueden ejecutar</li> <li>De d\u00f3nde pueden venir im\u00e1genes</li> <li>Si se permite inline JS</li> <li>Etc.</li> </ul> <p>nota_app.apps.NotaAppConfig:</p> <p>La aplicaci\u00f3n interna donde estan los modelos, views y l\u00f3gica del proyecto.</p>"},{"location":"proyecto/backend/nota_ventas/settings/#buenas-practicas_2","title":"Buenas pr\u00e1cticas","text":"<ol> <li> <p>Orden recomendado:</p> <ul> <li>Apps de Django core primero</li> <li>Apps de terceros despu\u00e9s</li> <li>Las apps locales al final</li> </ul> </li> <li> <p>Registrar las apps: Usar la configuraci\u00f3n de la app (AppConfig) en lugar del nombre simple: 'miapp.apps.MiappConfig' </p> </li> <li>Mantenimiento: Agregar nuevas apps cuando se instalen paquetes o se creen nuevas aplicaciones.</li> <li>No eliminar apps core sin entender sus dependencias, ya que muchas caracter\u00edsticas de Django dependen de ellas.</li> </ol> <p>Esta configuraci\u00f3n es esencial para que Django sepa qu\u00e9 componentes debe cargar y c\u00f3mo deben interactuar entre s\u00ed en el proyecto.</p>"},{"location":"proyecto/backend/nota_ventas/settings/#middleware","title":"MIDDLEWARE","text":"<p>Es una lista de clases que procesan las solicitudes (requests) y respuestas (responses) globalmente antes de que lleguen a las vistas o despu\u00e9s de que estas generen una respuesta. Act\u00faa como una serie de capas intermedias que pueden modificar, validar o realizar acciones adicionales en cada petici\u00f3n HTTP.</p> <p>Cada middleware se ejecuta en el orden definido en settings.py y puede realizar operaciones como:</p> <ul> <li>Procesar el request antes de que llegue a la vista (ej: autenticaci\u00f3n, CORS, seguridad)</li> <li>Procesar la respuesta antes de enviarla al cliente (ej: compresi\u00f3n, cookies, headers)</li> <li>Manejar excepciones globalmente (ej: errores 404, 500)</li> <li>Modificar o a\u00f1adir datos al request/response (ej: user session, idioma, timezone)</li> </ul>"},{"location":"proyecto/backend/nota_ventas/settings/#estructura-tipica-en-settingspy","title":"Estructura t\u00edpica en settings.py","text":"<pre><code>MIDDLEWARE = [\n    'corsheaders.middleware.CorsMiddleware',\n    'nota_app.middleware.JWTTokenFromCookieMiddleware',\n    'csp.middleware.CSPMiddleware',\n    'django.middleware.security.SecurityMiddleware', \n    'whitenoise.middleware.WhiteNoiseMiddleware',   \n    'django.contrib.sessions.middleware.SessionMiddleware',\n    'django.middleware.common.CommonMiddleware',\n    'django.middleware.csrf.CsrfViewMiddleware',\n    'django.contrib.auth.middleware.AuthenticationMiddleware',\n    'axes.middleware.AxesMiddleware',\n    'django.contrib.messages.middleware.MessageMiddleware',\n    'django.middleware.clickjacking.XFrameOptionsMiddleware',\n]\n</code></pre>"},{"location":"proyecto/backend/nota_ventas/settings/#descripcion-de-los-middlewares-instalados","title":"Descripcion de los middlewares instalados","text":"<p>corsheaders.middleware.CorsMiddleware</p> <p>Permite solicitudes desde otros dominios o puertos (CORS). Es esencial para que React u otro frontend pueda llamar a la API.</p> <p>nota_app.middleware.JWTTokenFromCookieMiddleware</p> <p>Middleware personalizado. Toma el JWT almacenado en cookies HttpOnly, lo extrae y lo inserta en el header Authorization para que DRF pueda autenticar al usuario f\u00e1cilmente.</p> <p>csp.middleware.CSPMiddleware</p> <p>Habilita Content Security Policy. Evita XSS, inyecci\u00f3n de scripts y cargas de recursos no permitidos.</p> <p>django.middleware.security.SecurityMiddleware</p> <p>Aplica capas importantes de seguridad:</p> <ul> <li>Forzar HTTPS</li> <li>HSTS</li> <li>Seguridad de headers (X-Content-Type-Options, etc.)</li> </ul> <p>whitenoise.middleware.WhiteNoiseMiddleware</p> <p>Sirve archivos est\u00e1ticos directamente desde Django en producci\u00f3n. Ideal para Railway/Render/Heroku. Incluye compresi\u00f3n, cacheo y versionado.</p> <p>django.contrib.sessions.middleware.SessionMiddleware</p> <p>Manejo de sesiones basadas en cookies. Guarda datos por usuario (carrito, preferencias, estado de login si no se usa JWT).</p> <p>django.middleware.common.CommonMiddleware</p> <p>Funciones de conveniencia: - Normalizaci\u00f3n de rutas - Manejo de redirecciones sin slash - Headers comunes HTTP</p> <p>django.middleware.csrf.CsrfViewMiddleware</p> <p>Protecci\u00f3n contra ataques CSRF. Valida tokens en formularios y requests.</p> <p>django.contrib.auth.middleware.AuthenticationMiddleware</p> <p>Carga autom\u00e1ticamente el usuario autenticado en request.user. Requiere que SessionMiddleware est\u00e9 antes.</p> <p>axes.middleware.AxesMiddleware</p> <p>Monitorea intentos fallidos de login. Bloquea usuarios o IPs si intentan fuerza bruta.</p> <p>django.contrib.messages.middleware.MessageMiddleware</p> <p>Manejo de mensajes temporales (\u201cflash messages\u201d). Usado principalmente en vistas del admin o formularios tradicionales.</p> <p>django.middleware.clickjacking.XFrameOptionsMiddleware</p> <p>Previene ataques clickjacking. Impide que el sitio se cargue dentro de un iframe no autorizado.</p>"},{"location":"proyecto/backend/nota_ventas/settings/#buenas-practicas_3","title":"Buenas pr\u00e1cticas","text":"<ul> <li>El orden importa: Algunos middleware dependen de otros (ej: SessionMiddleware debe ir antes que AuthenticationMiddleware)</li> <li>No abusar: Cada middleware a\u00f1ade overhead a cada petici\u00f3n</li> <li>Usar middleware de terceros solo si es necesario (ej: corsheaders, debug_toolbar)</li> </ul>"},{"location":"proyecto/backend/nota_ventas/settings/#root_urlconf","title":"ROOT_URLCONF","text":"<ul> <li>Define el archivo principal de URLs: Le dice a Django d\u00f3nde encontrar las rutas (URL patterns) que debe usar para mapear las URLs a las vistas correspondientes.</li> <li>Punto de entrada para el enrutamiento: Cuando llega una solicitud HTTP, Django consulta este archivo para determinar qu\u00e9 vista debe ejecutarse.</li> <li>Por defecto, Django lo configura autom\u00e1ticamente al crear un proyecto, pero es posible modificarlo si se necesita un esquema de URLs m\u00e1s complejo.</li> </ul>"},{"location":"proyecto/backend/nota_ventas/settings/#templates","title":"TEMPLATES","text":"<p>Define c\u00f3mo el sistema de plantillas (templates) debe cargar y procesar los archivos HTML (o cualquier formato de plantilla) de la aplicaci\u00f3n</p> <ul> <li>Define motores de plantillas: Es una lista de configuraciones que le indica a Django qu\u00e9 backend de plantillas usar (generalmente el de Django o Jinja2)</li> <li>Configura ubicaciones de templates: Especifica d\u00f3nde buscar archivos de plantillas (en apps, directorios globales, etc.)</li> <li>Habilita funcionalidades adicionales: Como procesadores de contexto, autoescape (seguridad contra XSS), y opciones de depuraci\u00f3n</li> </ul> <pre><code>TEMPLATES = [  \n        {  \n        'BACKEND': 'django.template.backends.django.DjangoTemplates', # Motor de Django  \n        'DIRS': [os.path.join(BASE_DIR, 'templates')], # Directorios globales  \n        'APP_DIRS': True, # Busca templates dentro de cada app  \n                'OPTIONS': {  \n            'context_processors': [  \n                # Procesadores de contexto (variables disponibles en todas las plantillas)  \n                'django.template.context_processors.debug',  \n                'django.template.context_processors.request',  \n                'django.contrib.auth.context_processors.auth',  \n                'django.contrib.messages.context_processors.messages',  \n            ],\n        },\n    },\n]\n</code></pre>"},{"location":"proyecto/backend/nota_ventas/settings/#wsgi_application","title":"WSGI_APPLICATION","text":"<p>Especifica qu\u00e9 aplicaci\u00f3n WSGI (Web Server Gateway Interface) utilizar\u00e1 el proyecto para servir la aplicaci\u00f3n web. WSGI es el est\u00e1ndar de Python para comunicar servidores web con aplicaciones web.</p> <ul> <li>Define la ruta hacia el objeto callable de WSGI que el servidor usar\u00e1 para iniciar la aplicaci\u00f3n Django.</li> <li>Por defecto, Django crea un archivo wsgi.py en el proyecto, que contiene este objeto callable (application).</li> </ul> <p>Valor por defecto: WSGI_APPLICATION = 'mi_proyecto.wsgi.application'</p> <p>Si se desplega Django en un servidor de producci\u00f3n, se necesita WSGI para que el servidor web pueda ejecutar la aplicaci\u00f3n correctamente. En desarrollo, Django usa su propio servidor (runserver), que no necesita WSGI.</p>"},{"location":"proyecto/backend/nota_ventas/settings/#databases","title":"DATABASES","text":"<p>Define c\u00f3mo el proyecto se conecta a una o varias bases de datos. Django soporta m\u00faltiples motores de bases de datos (PostgreSQL, MySQL, SQLite, Oracle, etc.) y permite configurar conexiones a varias bases de datos si es necesario</p> <p>Es un diccionario que contiene la configuraci\u00f3n de conexi\u00f3n a la(s) base(s) de datos. Por defecto, Django usa SQLite, pero es posible cambiarlo a la BD que se requiera</p>"},{"location":"proyecto/backend/nota_ventas/settings/#ejemplo-con-mysql","title":"Ejemplo con MySQL","text":"<pre><code># define configuraciones avanzadas para la conexi\u00f3n a la base de datos\ndb_options = {\n    'charset': 'utf8mb4',\n}\n# Esto solo es necesario en produccion, en local no funiona con SSL\nif IS_PRODUCTION:\n    db_options['ssl'] = {'ssl_mode': 'REQUIRED'}\n\nDATABASES = {\n    'default': {\n       'ENGINE': 'django.db.backends.mysql',\n        'NAME': os.getenv('MYSQLDATABASE') or os.getenv('DB_NAME'),\n        'USER': os.getenv('MYSQLUSER') or os.getenv('DB_USER'),\n        'PASSWORD': os.getenv('MYSQLPASSWORD') or os.getenv('DB_PASSWORD'),\n        'HOST': os.getenv('MYSQLHOST') or os.getenv('DB_HOST'),\n        'PORT': os.getenv('MYSQLPORT') or os.getenv('DB_PORT'),\n        'OPTIONS': db_options,\n    }\n}\n</code></pre>"},{"location":"proyecto/backend/nota_ventas/settings/#tips","title":"Tips","text":"<p>Hay que instalar los drivers necesarios para cada BD  </p>"},{"location":"proyecto/backend/nota_ventas/settings/#auth_user_model","title":"AUTH_USER_MODEL","text":"<p>Define el modelo de usuario personalizado que el proyecto utilizar\u00e1 para manejar la autenticaci\u00f3n, permisos y gesti\u00f3n de usuarios. Por defecto, Django usa su modelo User incorporado, pero es posible reemplazarlo con uno propio.</p>"},{"location":"proyecto/backend/nota_ventas/settings/#reglas-importantes","title":"Reglas importantes","text":""},{"location":"proyecto/backend/nota_ventas/settings/#1-debe-ser-una-subclase-de-abstractuser-o-abstractbaseuser","title":"1.- Debe ser una subclase de AbstractUser o AbstractBaseUser:","text":"<ul> <li>AbstractUser: Extiende el modelo por defecto (recomendado para personalizaciones simples).</li> <li>AbstractBaseUser: Para control total (avanzado).</li> </ul>"},{"location":"proyecto/backend/nota_ventas/settings/#2-definirlo-antes-de-la-primera-migracion","title":"2.- Definirlo ANTES de la primera migraci\u00f3n:","text":"<p>Si ya se han ejecutado migraciones, se tendra que borrar la base de datos y empezar de cero.</p>"},{"location":"proyecto/backend/nota_ventas/settings/#3-referencia-en-relaciones","title":"3.- Referencia en relaciones:","text":"<p>En los modelos, usar settings.AUTH_USER_MODEL (no User directamente):</p> <pre><code>from django.conf import settings\n\nclass Pedido(models.Model):\n    usuario = models.ForeignKey(settings.AUTH_USER_MODEL, on_delete=models.CASCADE)\n</code></pre> <p><pre><code>AUTH_USER_MODEL = 'auth.User'  # Modelo User est\u00e1ndar de Django\n</code></pre> Este proyecto tiene un modelo de usuario personalizado, por lo que no se usa User ni settings.AUTH_USER_MODEL</p> <pre><code>AUTH_USER_MODEL = os.getenv('USERDB')\n</code></pre>"},{"location":"proyecto/backend/nota_ventas/settings/#auth_password_validators","title":"AUTH_PASSWORD_VALIDATORS","text":"<p>Define reglas de validaci\u00f3n para asegurar que las contrase\u00f1as de los usuarios sean seguras. Por defecto, Django incluye varios validadores que verifican complejidad, similitud con el nombre de usuario, uso de contrase\u00f1as comunes, etc.</p>"},{"location":"proyecto/backend/nota_ventas/settings/#validadores-disponibles","title":"Validadores disponibles","text":"Validador (NAME) Descripci\u00f3n Opciones configurables UserAttributeSimilarityValidator Evita contrase\u00f1as similares al nombre de usuario, email, etc. user_attributes (atributos a comparar), max_similarity (0 a 1) MinimumLengthValidator Exige una longitud m\u00ednima min_length (por defecto 8) CommonPasswordValidator Bloquea contrase\u00f1as comunes (como \"123456\") password_list_path (ruta a una lista personalizada) NumericPasswordValidator Evita contrase\u00f1as solo num\u00e9ricas <p>Se pueden modificar sus par\u00e1metros o desactivarlos:</p> <pre><code>{\n    'NAME': 'django.contrib.auth.password_validation.MinimumLengthValidator',\n    'OPTIONS': {\n        'min_length': 10,  # Ahora requiere al menos 10 caracteres\n    }\n},\n</code></pre> <p>Ajustar la similitud con atributos del usuario</p> <pre><code>{\n    'NAME': 'django.contrib.auth.password_validation.UserAttributeSimilarityValidator',\n    'OPTIONS': {\n        'user_attributes': ('username', 'email', 'first_name'),\n        'max_similarity': 0.5,  # M\u00e1s estricto (por defecto: 0.7)\n    }\n},\n</code></pre>"},{"location":"proyecto/backend/nota_ventas/settings/#language_code","title":"LANGUAGE_CODE","text":"<p>Define el idioma predeterminado de la aplicaci\u00f3n. Controla aspectos como:</p> <ul> <li>Traducciones de textos en templates, formularios y mensajes del sistema.</li> <li>Formato de fechas, n\u00fameros y horas.</li> <li>Comportamiento de la internacionalizaci\u00f3n (i18n) y localizaci\u00f3n (l10n).</li> </ul>"},{"location":"proyecto/backend/nota_ventas/settings/#usos","title":"Usos","text":"<ol> <li> <p>Traducciones autom\u00e1ticas  </p> <ul> <li>Django usa este valor para cargar los archivos de traducci\u00f3n correspondientes (si est\u00e1n disponibles en locale/).</li> </ul> </li> <li> <p>Formatos regionales</p> <ul> <li>Fechas (DATE_FORMAT, DATETIME_FORMAT).</li> <li>N\u00fameros (separador decimal, miles).</li> <li>Horas (formato 12h/24h).</li> </ul> </li> <li> <p>Mensajes del sistema</p> <ul> <li>Errores de formularios, mensajes del admin, etc., aparecer\u00e1n en el idioma configurado.</li> </ul> </li> <li> <p>Middleware de internacionalizaci\u00f3n</p> <ul> <li>Si se usa django.middleware.locale.LocaleMiddleware, permite cambiar el idioma din\u00e1micamente basado en la preferencia del usuario.</li> </ul> </li> </ol>"},{"location":"proyecto/backend/nota_ventas/settings/#time_zone","title":"TIME_ZONE","text":"<p>Define la zona horaria predeterminada para la aplicaci\u00f3n. Controla c\u00f3mo Django maneja:</p> <ul> <li>Fechas y horas en la base de datos.</li> <li>Visualizaci\u00f3n de tiempos en templates y formularios.</li> <li>Comportamiento de funciones sensibles al tiempo (como timezone.now())</li> </ul>"},{"location":"proyecto/backend/nota_ventas/settings/#use_tz-usar-zonas-horarias","title":"USE_TZ (Usar Zonas Horarias)","text":"<ul> <li>Si USE_TZ = True  (recomendado), Django trabaja con zonas horarias (UTC + conversi\u00f3n).</li> <li>Si USE_TZ = False, Usa la hora local del servidor (no recomendado para apps globales).</li> </ul>"},{"location":"proyecto/backend/nota_ventas/settings/#use_i18n","title":"USE_I18N","text":"<p>Habilita o deshabilita el sistema de internacionalizaci\u00f3n (i18n) del framework. La internacionalizaci\u00f3n permite adaptar la aplicaci\u00f3n a diferentes idiomas y regiones sin cambios en el c\u00f3digo base.</p>"},{"location":"proyecto/backend/nota_ventas/settings/#ejemplo","title":"Ejemplo","text":"<pre><code>TIME_ZONE = \"America/Santiago\"  # Hora de Chile\nUSE_TZ = True  # Siempre activado\nUSE_I18N = True\n</code></pre>"},{"location":"proyecto/backend/nota_ventas/settings/#static_url","title":"STATIC_URL","text":"<p>Define la URL base desde la que se servir\u00e1n los archivos est\u00e1ticos (CSS, JavaScript, im\u00e1genes, etc.) en la aplicaci\u00f3n. Permite a Django saber d\u00f3nde encontrar y c\u00f3mo servir los archivos est\u00e1ticos.</p>"},{"location":"proyecto/backend/nota_ventas/settings/#tips_1","title":"TIPS","text":"<ul> <li>Durante el desarrollo, Django sirve los archivos est\u00e1ticos autom\u00e1ticamente.</li> <li>En producci\u00f3n, es primordial configurar el servidor web para servir estos archivos y nunca depender de Django para este prop\u00f3sito por razones de rendimiento y seguridad.</li> </ul> <pre><code># Para collectsatic necesario en Railway\nSTATIC_URL = '/static/'\nSTATIC_ROOT = '/app/backend/staticfiles' if os.getenv('IS_PRODUCTION') == 'True' else os.path.join(BASE_DIR, 'staticfiles')\nSTATICFILES_STORAGE = 'whitenoise.storage.CompressedManifestStaticFilesStorage'\nWHITENOISE_MAX_AGE = 604800 if IS_PRODUCTION else 0\n</code></pre>"},{"location":"proyecto/backend/nota_ventas/settings/#especifica-como-django-debe-almacenar-y-servir-los-archivos-estaticos","title":"Especifica c\u00f3mo Django debe almacenar y servir los archivos est\u00e1ticos.","text":"<p>Se usa WhiteNoise, una librer\u00eda que:</p> <ul> <li>Comprime autom\u00e1ticamente los archivos (gzip o brotli).</li> <li>Genera versiones con hash \u00fanicos en el nombre para control de cach\u00e9 (main.abcd1234.css).</li> <li>Permite servir los archivos est\u00e1ticos directamente desde la app sin depender de Nginx o S3.</li> <li>Esta opci\u00f3n es ideal para entornos como Railway, donde no se usa un servidor web dedicado.</li> <li>Controla el tiempo de cach\u00e9 de los archivos est\u00e1ticos en el navegador del cliente.</li> <li>604800 segundos = 7 d\u00edas (ideal en producci\u00f3n).</li> <li>0 en desarrollo para que los cambios se vean de inmediato al actualizar el navegador.</li> </ul>"},{"location":"proyecto/backend/nota_ventas/settings/#default_auto_field","title":"DEFAULT_AUTO_FIELD","text":"<p>Define el tipo de campo autom\u00e1tico predeterminado que se usar\u00e1 para las claves primarias (primary keys) en los modelos cuando no se especifique expl\u00edcitamente un campo primary_key=True</p> <ul> <li>Valor por defecto: 'django.db.models.BigAutoField', entero de 64 bits</li> <li>El campo id se crear\u00e1 autom\u00e1ticamente usando el tipo especificado en DEFAULT_AUTO_FIELD</li> </ul>"},{"location":"proyecto/backend/nota_ventas/settings/#django-rest-framework","title":"Django Rest Framework","text":"<p>Esta configuraci\u00f3n define el comportamiento global de Django REST Framework (DRF) en el proyecto, especificando c\u00f3mo manejar\u00e1 la autenticaci\u00f3n, permisos, versionado, y limitaci\u00f3n de solicitudes (throttling). </p>"},{"location":"proyecto/backend/nota_ventas/settings/#que-es-drf","title":"\u00bfQue es DRF?","text":"<ul> <li>Simplifica la creaci\u00f3n de APIs RESTful</li> <li>Proporciona serializadores para conversi\u00f3n de datos</li> <li>Ofrece vistas gen\u00e9ricas y viewsets para endpoints comunes</li> <li>Incluye autenticaci\u00f3n, permisos y throttling</li> <li>Soporta m\u00faltiples formatos (JSON, XML, etc.)</li> </ul> <pre><code>REST_FRAMEWORK = {\n    'DEFAULT_AUTHENTICATION_CLASSES': [\n        'rest_framework_simplejwt.authentication.JWTAuthentication',\n    ],\n    'DEFAULT_PERMISSION_CLASSES': [\n        'rest_framework.permissions.IsAuthenticated', \n    ],\n    'DEFAULT_VERSIONING_CLASS': 'rest_framework.versioning.URLPathVersioning',\n    'DEFAULT_VERSION': 'v1',\n    'ALLOWED_VERSIONS': ['v1', 'v2'],\n\n    'DEFAULT_THROTTLE_CLASSES': [\n        'rest_framework.throttling.AnonRateThrottle',\n        'rest_framework.throttling.UserRateThrottle'\n    ],\n    'DEFAULT_THROTTLE_RATES': {\n        'anon': '30/hour',\n        'user': '200/hour'\n    }\n}\n</code></pre>"},{"location":"proyecto/backend/nota_ventas/settings/#autenticacion-default_authentication_classes","title":"Autenticaci\u00f3n (DEFAULT_AUTHENTICATION_CLASSES)","text":"<p>Prop\u00f3sito: Define los m\u00e9todos de autenticaci\u00f3n que se usar\u00e1n en todas las vistas de la API. Configuraci\u00f3n:</p> <pre><code>'DEFAULT_AUTHENTICATION_CLASSES': [\n    'rest_framework_simplejwt.authentication.JWTAuthentication',\n],\n</code></pre>"},{"location":"proyecto/backend/nota_ventas/settings/#explicacion","title":"Explicaci\u00f3n:","text":"<ul> <li> <p>JWTAuthentication: Usa JSON Web Tokens (JWT) para autenticar peticiones.</p> <ul> <li>Ideal para APIs stateless (sin sesiones).</li> <li>Requiere el paquete djangorestframework-simplejwt (pip install djangorestframework-simplejwt).</li> </ul> </li> <li> <p>Alternativas comunes:</p> <ul> <li>SessionAuthentication: Para autenticaci\u00f3n basada en sesiones (t\u00edpico en aplicaciones web).</li> <li>TokenAuthentication: Autenticaci\u00f3n por tokens simples (menos seguro que JWT).</li> </ul> </li> </ul>"},{"location":"proyecto/backend/nota_ventas/settings/#permisos-default_permission_classes","title":"Permisos (DEFAULT_PERMISSION_CLASSES)","text":"<p>Prop\u00f3sito: Establece los permisos globales para acceder a los endpoints de la API. Configuraci\u00f3n:</p> <pre><code>'DEFAULT_PERMISSION_CLASSES': [\n    'rest_framework.permissions.IsAuthenticated', \n],\n</code></pre>"},{"location":"proyecto/backend/nota_ventas/settings/#explicacion_1","title":"Explicaci\u00f3n:","text":"<ul> <li>IsAuthenticated: Solo usuarios autenticados pueden acceder a la API.</li> <li>Otras opciones \u00fatiles:<ul> <li>AllowAny: Acceso p\u00fablico (sin autenticaci\u00f3n).</li> <li>IsAdminUser: Solo para superusuarios.</li> <li>DjangoModelPermissions: Permisos basados en el modelo de Django.</li> </ul> </li> </ul>"},{"location":"proyecto/backend/nota_ventas/settings/#versionado-default_versioning_class-y-default_version","title":"Versionado (DEFAULT_VERSIONING_CLASS y DEFAULT_VERSION)","text":"<p>Prop\u00f3sito: Gestiona diferentes versiones de la API para mantener compatibilidad. Configuraci\u00f3n:</p> <pre><code>'DEFAULT_VERSIONING_CLASS': 'rest_framework.versioning.URLPathVersioning',\n'DEFAULT_VERSION': 'v1',\n'ALLOWED_VERSIONS': ['v1', 'v2'],\n</code></pre>"},{"location":"proyecto/backend/nota_ventas/settings/#explicacion_2","title":"Explicaci\u00f3n:","text":"<ul> <li>URLPathVersioning: La versi\u00f3n se incluye en la URL (ej: /api/v1/endpoint/).</li> <li>DEFAULT_VERSION: Versi\u00f3n predeterminada si no se especifica.</li> <li>ALLOWED_VERSIONS: Versiones permitidas (evita errores si se pasa una versi\u00f3n no soportada).</li> <li>Alternativas:<ul> <li>NamespaceVersioning: Usa namespaces de URLs.</li> <li>QueryParameterVersioning: La versi\u00f3n se pasa como par\u00e1metro (ej: ?version=v1).</li> </ul> </li> </ul>"},{"location":"proyecto/backend/nota_ventas/settings/#throttling-default_throttle_classes-y-default_throttle_rates","title":"Throttling (DEFAULT_THROTTLE_CLASSES y DEFAULT_THROTTLE_RATES)","text":"<p>Prop\u00f3sito: Limita el n\u00famero de peticiones para evitar abuso o sobrecarga del servidor. Configuraci\u00f3n:</p> <pre><code>'DEFAULT_THROTTLE_CLASSES': [\n        'rest_framework.throttling.AnonRateThrottle',\n        'rest_framework.throttling.UserRateThrottle'\n    ],\n'DEFAULT_THROTTLE_RATES': {\n        'anon': '30/hour',\n        'user': '200/hour'\n}\n</code></pre>"},{"location":"proyecto/backend/nota_ventas/settings/#explicacion_3","title":"Explicaci\u00f3n:","text":"<ul> <li>AnonRateThrottle: Limita peticiones de usuarios an\u00f3nimos (ej: 30/hora).</li> <li>UserRateThrottle: Limita peticiones de usuarios autenticados (ej: 200/hora).</li> <li>Formato de tasas:<ul> <li>'100/day': 100 peticiones por d\u00eda.</li> <li>'10/minute': 10 peticiones por minuto.</li> </ul> </li> <li>Personalizaci\u00f3n: Se puede definir throttles espec\u00edficos por vista.</li> </ul>"},{"location":"proyecto/backend/nota_ventas/settings/#requisitos-adicionales","title":"Requisitos Adicionales","text":"<ul> <li>Instalar librer\u00edas necesarias:</li> </ul> <pre><code>pip install djangorestframework\n</code></pre> <ul> <li>Agregar rest_framework a INSTALLED_APPS en settings.py.</li> </ul>"},{"location":"proyecto/backend/nota_ventas/settings/#json-web-token","title":"Json Web Token","text":"<p>Esta configuraci\u00f3n controla el comportamiento de los JSON Web Tokens (JWT) en la API cuando se usa djangorestframework-simplejwt. Define c\u00f3mo se generan, validan y manejan los tokens de acceso (access) y refresco (refresh), as\u00ed como aspectos de seguridad relacionados con cookies y encabezados HTTP.</p> <pre><code>SIMPLE_JWT = {\n    'ACCESS_TOKEN_LIFETIME': timedelta(minutes=60),\n    'REFRESH_TOKEN_LIFETIME': timedelta(days=7),\n    'ALGORITHM': 'HS256',\n    'SIGNING_KEY': SECRET_KEY,\n    'AUTH_HEADER_TYPES': ('Bearer',),\n    'AUTH_HEADER_NAME': 'HTTP_AUTHORIZATION',\n    'JTI_CLAIM': 'jti',\n    'AUTH_COOKIE': 'refresh_token',   # Nombre de la cookie\n    'AUTH_COOKIE_HTTP_ONLY': True,    # Solo accesible por HTTP\n    'AUTH_COOKIE_SECURE': True,       # Solo en HTTPS (True en producci\u00f3n)\n    'AUTH_COOKIE_SAMESITE': 'None',   # Protecci\u00f3n CSRF\n    'AUTH_COOKIE_PATH': '/',          # Ruta donde es v\u00e1lida la cookie\n    'AUTH_COOKIE_DOMAIN': None,       # Dominio (None para localhost)\n    'ROTATE_REFRESH_TOKENS': True,    # Genera un nuevo refres token cada vez que se usa el actual\n    'BLACKLIST_AFTER_ROTATION': True, # Agrega a la lista negra el token que se uso\n}\n</code></pre>"},{"location":"proyecto/backend/nota_ventas/settings/#access_token_lifetime","title":"ACCESS_TOKEN_LIFETIME","text":"<ul> <li>Tipo: timedelta</li> <li>Valor por defecto: timedelta(minutes=5)</li> <li>Descripci\u00f3n: Establece cu\u00e1nto tiempo es v\u00e1lido el token de acceso (access token). Despu\u00e9s de este per\u00edodo, el token expira y el usuario debe autenticarse nuevamente o usar un token de refresco.</li> </ul>"},{"location":"proyecto/backend/nota_ventas/settings/#refresh_token_lifetime","title":"REFRESH_TOKEN_LIFETIME","text":"<ul> <li>Tipo: timedelta</li> <li>Valor por defecto: timedelta(days=1)</li> <li>Descripci\u00f3n: Define la validez del token de refresco (refresh token). Este token se usa para obtener un nuevo access token sin requerir credenciales.</li> </ul>"},{"location":"proyecto/backend/nota_ventas/settings/#algorithm","title":"ALGORITHM","text":"<ul> <li>Tipo: str</li> <li>Valor por defecto: 'HS256'</li> <li>Descripci\u00f3n: Algoritmo usado para firmar los tokens. Opciones comunes:<ul> <li>HS256 (HMAC con SHA-256): Usa una clave secreta (SIGNING_KEY).</li> <li>RS256 (RSA con SHA-256): Usa un par de claves p\u00fablica/privada.</li> </ul> </li> </ul>"},{"location":"proyecto/backend/nota_ventas/settings/#signing_key","title":"SIGNING_KEY","text":"<ul> <li>Tipo: str</li> <li>Valor por defecto: settings.SECRET_KEY</li> <li>Descripci\u00f3n: Clave secreta para firmar los tokens. Por defecto, usa la SECRET_KEY de Django.</li> </ul>"},{"location":"proyecto/backend/nota_ventas/settings/#auth_header_types","title":"AUTH_HEADER_TYPES","text":"<ul> <li>Tipo: tuple</li> <li>Valor por defecto: ('Bearer',)</li> <li>Descripci\u00f3n: Tipos de esquemas de autenticaci\u00f3n aceptados en el encabezado Authorization</li> </ul>"},{"location":"proyecto/backend/nota_ventas/settings/#auth_header_name","title":"AUTH_HEADER_NAME","text":"<ul> <li>Tipo: str</li> <li>Valor por defecto: 'HTTP_AUTHORIZATION'</li> <li>Descripci\u00f3n: Nombre del encabezado HTTP donde se espera el token.</li> </ul>"},{"location":"proyecto/backend/nota_ventas/settings/#auth_cookie","title":"AUTH_COOKIE","text":"<ul> <li>Tipo: str</li> <li>Valor por defecto: None</li> <li>Descripci\u00f3n: Nombre de la cookie que almacenar\u00e1 el refresh token (\u00fatil para autenticaci\u00f3n en navegadores).</li> </ul>"},{"location":"proyecto/backend/nota_ventas/settings/#auth_cookie_http_only","title":"AUTH_COOKIE_HTTP_ONLY","text":"<ul> <li>Tipo: bool</li> <li>Valor por defecto: True</li> <li>Descripci\u00f3n: Si es True, la cookie no es accesible desde JavaScript (protecci\u00f3n contra XSS).</li> </ul>"},{"location":"proyecto/backend/nota_ventas/settings/#auth_cookie_secure","title":"AUTH_COOKIE_SECURE","text":"<ul> <li>Tipo: bool</li> <li>Valor por defecto: False</li> <li>Descripci\u00f3n: Si es True, la cookie solo se env\u00eda sobre HTTPS (obligatorio en producci\u00f3n).</li> </ul>"},{"location":"proyecto/backend/nota_ventas/settings/#auth_cookie_samesite","title":"AUTH_COOKIE_SAMESITE","text":"<ul> <li>Tipo: str</li> <li>Valor por defecto: 'Lax'</li> <li>Descripci\u00f3n: Pol\u00edtica SameSite para prevenir ataques CSRF. Opciones:<ul> <li>'Strict': Cookie solo en solicitudes del mismo sitio.</li> <li>'Lax' (recomendado): Cookie en solicitudes seguras (GET) cruzadas.</li> <li>'None': Cookie en cualquier contexto (requiere Secure=True).</li> </ul> </li> </ul>"},{"location":"proyecto/backend/nota_ventas/settings/#jti_claim","title":"JTI_CLAIM","text":"<ul> <li>Tipo: str</li> <li>Valor por defecto: 'jti'</li> <li>Descripci\u00f3n: Nombre de la claim (atributo) en el JWT que almacena el identificador \u00fanico del token (usado para blacklisting).</li> </ul>"},{"location":"proyecto/backend/nota_ventas/settings/#auth_cookie_path-y-auth_cookie_domain","title":"AUTH_COOKIE_PATH y AUTH_COOKIE_DOMAIN","text":"<p>Descripci\u00f3n:</p> <ul> <li>PATH: Ruta donde la cookie es v\u00e1lida (ej: '/' para todo el sitio).</li> <li>DOMAIN: Dominio donde la cookie es v\u00e1lida (ej: '.midominio.com', None para localhost en desarrollo).</li> </ul>"},{"location":"proyecto/backend/nota_ventas/settings/#rotate_refresh_tokens","title":"ROTATE_REFRESH_TOKENS","text":"<ul> <li>Tipo: bool</li> <li>Valor por defecto: False</li> <li>Descripci\u00f3n: Si es True, cada vez que se usa un refresh token para obtener un nuevo access token, se genera un nuevo refresh token (y el anterior se invalida).</li> </ul>"},{"location":"proyecto/backend/nota_ventas/settings/#blacklist_after_rotation","title":"BLACKLIST_AFTER_ROTATION","text":"<ul> <li>Tipo: bool</li> <li>Valor por defecto: False</li> <li>Descripci\u00f3n: Si es True, los refresh tokens anteriores se a\u00f1aden a una lista negra (blacklist) despu\u00e9s de rotarlos. Requiere la configuraci\u00f3n de rest_framework_simplejwt.token_blacklist en INSTALLED_APPS.</li> </ul>"},{"location":"proyecto/backend/nota_ventas/settings/#cors_allowed_origins","title":"CORS_ALLOWED_ORIGINS","text":"<p>Es una configuraci\u00f3n importante cuando la API Django necesita ser accedida desde frontends que se ejecutan en diferentes dominios (Cross-Origin Resource Sharing). En este caso por REACT</p>"},{"location":"proyecto/backend/nota_ventas/settings/#que-es-cors","title":"\u00bfQu\u00e9 es CORS?","text":"<p>CORS (Cross-Origin Resource Sharing) es un mecanismo de seguridad del navegador que restringe las solicitudes HTTP entre diferentes or\u00edgenes (dominios). Cuando el frontend (ej. React en http://localhost:3000) intenta acceder a la API Django (ej. http://api.midominio.com), el navegador bloquea la solicitud por razones de seguridad a menos que el servidor permita expl\u00edcitamente el acceso</p>"},{"location":"proyecto/backend/nota_ventas/settings/#configurcion-de-cors","title":"Configurci\u00f3n de CORS","text":"<ol> <li>Para habilitar CORS es necesario el paquete django-cors-headers:</li> </ol> <pre><code>    pip install django-cors-headers\n</code></pre> <ol> <li>Agregar a INSTALLED_APPS:</li> </ol> <pre><code>    INSTALLED_APPS = [\n        ...\n        'corsheaders',\n        ...\n    ]\n</code></pre> <ol> <li>Agregar el middleware (debe estar lo m\u00e1s arriba posible):</li> </ol> <pre><code>    MIDDLEWARE = [\n        'corsheaders.middleware.CorsMiddleware',  # \u00a1Debe estar antes de CommonMiddleware!\n        ...\n        'django.middleware.common.CommonMiddleware',\n        ...\n    ]\n</code></pre>"},{"location":"proyecto/backend/nota_ventas/settings/#configuraciones-de-seguridad","title":"CONFIGURACIONES DE SEGURIDAD","text":"<pre><code># Configuracion CORS\nCORS_ALLOWED_ORIGINS = os.getenv('CORS_KEYS', '').split(',') if os.getenv('CORS_KEYS') else []\n\nCORS_ALLOW_CREDENTIALS = True\nCORS_EXPOSE_HEADERS = ['Content-Type', 'X-CSRFToken']  # Necesario para CSRF\n\n# CSRF\nCSRF_COOKIE_SECURE = IS_PRODUCTION\nCSRF_COOKIE_HTTPONLY = False\nCSRF_COOKIE_SAMESITE = 'None' # backend y frontend en dominios diferentes\nCSRF_USE_SESSIONS = False\nCSRF_TRUSTED_ORIGINS = [\n    origin for origin in os.getenv('CORS_KEYS', '').split(',') if origin.startswith('https://')\n    or origin.startswith('http://')\n    ]\n\n# Cookies de sesi\u00f3n\nSESSION_COOKIE_SECURE = IS_PRODUCTION\nSESSION_COOKIE_SAMESITE = 'None'\n\n# Headers de seguridad\nSECURE_CONTENT_TYPE_NOSNIFF = True\nSECURE_BROWSER_XSS_FILTER = True\nX_FRAME_OPTIONS = 'DENY'\n\n# Axes\nAUTHENTICATION_BACKENDS = [\n    'axes.backends.AxesStandaloneBackend',  \n    'django.contrib.auth.backends.ModelBackend',\n]\n\nAXES_FAILURE_LIMIT = 10  # N\u00famero de intentos fallidos antes de bloquear\nAXES_COOLOFF_TIME = 1  # 1 hora de bloqueo (puede ser timedelta(hours=1))\nAXES_LOCKOUT_PARAMETERS = ['ip_address', 'username']  # Bloquear por IP + usuario\nAXES_RESET_ON_SUCCESS = True  # Reiniciar contador tras login exitoso\nAXES_ENABLED = IS_PRODUCTION\n\n# HTTPS en produccion\nSECURE_SSL_REDIRECT = IS_PRODUCTION\nSECURE_PROXY_SSL_HEADER = ('HTTP_X_FORWARDED_PROTO', 'https')\nSECURE_REFERRER_POLICY = \"strict-origin-when-cross-origin\"\n\n# Protecci\u00f3n adicional contra ataques de aislamiento entre ventanas\nSECURE_CROSS_ORIGIN_OPENER_POLICY = \"same-origin\"\n\n# Evita que contenido externo se ejecute sin permisos expl\u00edcitos\nSECURE_CROSS_ORIGIN_EMBEDDER_POLICY = \"require-corp\"\n\n# Restringe qu\u00e9 or\u00edgenes pueden cargar recursos desde tu servidor\nSECURE_CROSS_ORIGIN_RESOURCE_POLICY = \"same-origin\"\n\n# Limita el tama\u00f1o m\u00e1ximo de subida\nDATA_UPLOAD_MAX_MEMORY_SIZE = 10 * 1024 * 1024  # 10 MB\n</code></pre>"},{"location":"proyecto/backend/nota_ventas/settings/#cors_allow_credentials","title":"CORS_ALLOW_CREDENTIALS","text":"<ul> <li>Prop\u00f3sito: Permite que las solicitudes entre dominios (cross-origin) incluyan credenciales como cookies o headers de autenticaci\u00f3n.</li> <li>Cu\u00e1ndo usarlo:<ul> <li>Cuando el frontend (ej: React/Vue) necesita enviar cookies/tokens JWT a un backend Django en otro dominio.</li> <li>Requiere que el frontend configure withCredentials: true en peticiones asinconas.</li> </ul> </li> <li>Advertencia: No habilitar esto si la API es p\u00fablica sin autenticaci\u00f3n</li> </ul>"},{"location":"proyecto/backend/nota_ventas/settings/#cors_expose_headers","title":"CORS_EXPOSE_HEADERS","text":"<ul> <li>Prop\u00f3sito: Define qu\u00e9 headers personalizados pueden ser accedidos por el frontend desde la respuesta del servidor.</li> <li>Ejemplo: X-CSRFToken es necesario para enviar el token CSRF en formularios o peticiones asincronas.</li> </ul>"},{"location":"proyecto/backend/nota_ventas/settings/#csrf_cookie_secure","title":"CSRF_COOKIE_SECURE","text":"<ul> <li>Prop\u00f3sito: Si es True, la cookie CSRF solo se env\u00eda sobre HTTPS (obligatorio en producci\u00f3n).</li> <li>Valor False: Usado en desarrollo con HTTP.</li> </ul>"},{"location":"proyecto/backend/nota_ventas/settings/#csrf_cookie_httponly","title":"CSRF_COOKIE_HTTPONLY","text":"<ul> <li>Prop\u00f3sito: Permite que JavaScript acceda a la cookie CSRF (necesario para frameworks como React).</li> <li>Seguridad: En producci\u00f3n, considerar True si no es necesario leerla desde JS.</li> </ul>"},{"location":"proyecto/backend/nota_ventas/settings/#csrf_cookie_samesite","title":"CSRF_COOKIE_SAMESITE","text":"<ul> <li>Prop\u00f3sito: Controla cu\u00e1ndo se env\u00eda la cookie CSRF en solicitudes cross-origin.</li> <li>'Lax' (recomendado): Env\u00eda la cookie en navegaci\u00f3n segura (ej: clicks a links).</li> <li>'Strict': Solo en mismas URLs.</li> <li>'None': Requiere Secure=True (para APIs accesibles desde m\u00faltiples dominios).</li> </ul>"},{"location":"proyecto/backend/nota_ventas/settings/#csrf_use_sessions","title":"CSRF_USE_SESSIONS","text":"<ul> <li>Prop\u00f3sito: Si es True, almacena el token CSRF en la sesi\u00f3n del usuario en lugar de una cookie.</li> <li>Valor False: Usa cookies (m\u00e1s com\u00fan).</li> </ul>"},{"location":"proyecto/backend/nota_ventas/settings/#csrf_trusted_origins","title":"CSRF_TRUSTED_ORIGINS","text":"<ul> <li>Prop\u00f3sito: Lista de dominios permitidos para enviar solicitudes CSRF seguras.</li> </ul>"},{"location":"proyecto/backend/nota_ventas/settings/#session_cookie_httponly","title":"SESSION_COOKIE_HTTPONLY","text":"<ul> <li>Prop\u00f3sito: Hace que la cookie de sesi\u00f3n solo sea accesible por el servidor y no pueda ser le\u00edda o modificada por JavaScript en el navegador.</li> </ul>"},{"location":"proyecto/backend/nota_ventas/settings/#session_cookie_secure","title":"SESSION_COOKIE_SECURE","text":"<ul> <li>Prop\u00f3sito: Similar a CSRF_COOKIE_SECURE, pero para la cookie de sesi\u00f3n.</li> <li>Producci\u00f3n: Debe ser True (HTTPS obligatorio).</li> </ul>"},{"location":"proyecto/backend/nota_ventas/settings/#session_cookie_samesite","title":"SESSION_COOKIE_SAMESITE","text":"<ul> <li>Prop\u00f3sito: Igual que CSRF_COOKIE_SAMESITE, aplicado a la cookie de sesi\u00f3n.</li> </ul>"},{"location":"proyecto/backend/nota_ventas/settings/#secure_content_type_nosniff","title":"SECURE_CONTENT_TYPE_NOSNIFF","text":"<ul> <li>Prop\u00f3sito: Evita que el navegador \"adivine\" el tipo de contenido (MIME sniffing), previniendo ataques como XSS.</li> </ul>"},{"location":"proyecto/backend/nota_ventas/settings/#secure_browser_xss_filter","title":"SECURE_BROWSER_XSS_FILTER","text":"<ul> <li>Prop\u00f3sito: Habilita el filtro XSS del navegador (protecci\u00f3n adicional contra inyecci\u00f3n de scripts).</li> </ul>"},{"location":"proyecto/backend/nota_ventas/settings/#x_frame_options","title":"X_FRAME_OPTIONS","text":"<ul> <li>Prop\u00f3sito: Impide que el sitio se embeda en un iframe (evita clickjacking).</li> <li>'DENY': Bloqueo total.</li> <li>'SAMEORIGIN': Permite iframes solo desde el mismo dominio.</li> </ul>"},{"location":"proyecto/backend/nota_ventas/settings/#authentication_backends","title":"AUTHENTICATION_BACKENDS","text":"<p>Es una configuraci\u00f3n de Django que define c\u00f3mo se autentican los usuarios. Por defecto, Django usa ModelBackend para verificar credenciales contra la base de datos. Aqu\u00ed se a\u00f1ade AxesStandaloneBackend para integrar funcionalidad de seguridad contra ataques de fuerza bruta.</p> <p>Axes se debe instalar y colocar en las App Instaladas</p> <pre><code>AUTHENTICATION_BACKENDS = [\n    'axes.backends.AxesStandaloneBackend',  \n    'django.contrib.auth.backends.ModelBackend',\n]\n</code></pre>"},{"location":"proyecto/backend/nota_ventas/settings/#axesbackendsaxesstandalonebackend","title":"axes.backends.AxesStandaloneBackend","text":"<ul> <li> <p>Prop\u00f3sito:</p> <ul> <li>Bloqueo inteligente de IPs/usuario tras m\u00faltiples intentos fallidos de login (protecci\u00f3n contra fuerza bruta).</li> <li>Registra intentos fallidos y aplica bloqueos temporales o permanentes.</li> </ul> </li> <li> <p>Caracter\u00edsticas:</p> <ul> <li>Se ejecuta antes que ModelBackend para interceptar ataques.</li> </ul> </li> <li> <p>Soporta:</p> <ul> <li>L\u00edmites personalizados de intentos.</li> <li>Bloqueo por IP, usuario, o combinaci\u00f3n.</li> <li>Mensajes personalizados al usuario bloqueado.</li> </ul> </li> </ul>"},{"location":"proyecto/backend/nota_ventas/settings/#djangocontribauthbackendsmodelbackend","title":"django.contrib.auth.backends.ModelBackend","text":"<ul> <li> <p>Prop\u00f3sito:</p> <ul> <li>Backend por defecto de Django.</li> <li>Autentica usuarios contra la base de datos (modelo User).</li> </ul> </li> <li> <p>Verifica:</p> <ul> <li>Nombre de usuario/email y contrase\u00f1a.</li> <li>Estado is_active del usuario.</li> </ul> </li> </ul>"},{"location":"proyecto/backend/nota_ventas/settings/#como-funciona-el-flujo-de-autenticacion","title":"\u00bfC\u00f3mo Funciona el Flujo de Autenticaci\u00f3n?","text":"<ul> <li> <p>Interceptaci\u00f3n:</p> <ul> <li>Cuando un usuario intenta loguearse, AxesStandaloneBackend verifica si la IP/usuario est\u00e1 bloqueada.</li> <li>Si hay bloqueo, rechaza el acceso inmediatamente.</li> </ul> </li> <li> <p>Verificaci\u00f3n est\u00e1ndar:</p> <ul> <li>Si no hay bloqueo, pasa la solicitud a ModelBackend para validar credenciales.</li> </ul> </li> <li> <p>Registro de intentos:</p> <ul> <li>Si el login falla, Axes registra el intento y cuenta hacia el l\u00edmite de bloqueo.</li> </ul> </li> </ul>"},{"location":"proyecto/backend/nota_ventas/settings/#axes_failure_limit","title":"AXES_FAILURE_LIMIT","text":"<ul> <li>Qu\u00e9 hace: Establece el n\u00famero m\u00e1ximo de intentos fallidos de inicio de sesi\u00f3n permitidos antes de bloquear al usuario/IP.</li> <li> <p>Valor por defecto: 5</p> </li> <li> <p>Importante:</p> <ul> <li>Cuando un usuario/IP alcanza este l\u00edmite, se activa el bloqueo.</li> <li>El contador se reinicia despu\u00e9s del tiempo definido en AXES_COOLOFF_TIME o con un inicio de sesi\u00f3n exitoso (si AXES_RESET_ON_SUCCESS=True).</li> </ul> </li> </ul>"},{"location":"proyecto/backend/nota_ventas/settings/#axes_cooloff_time","title":"AXES_COOLOFF_TIME","text":"<ul> <li>Qu\u00e9 hace: Define la duraci\u00f3n del bloqueo despu\u00e9s de alcanzar el l\u00edmite de intentos fallidos.</li> <li>Formatos aceptados:<ul> <li>N\u00famero entero: horas (ej: 1 = 1 hora)</li> <li>timedelta: para mayor precisi\u00f3n (ej: timedelta(minutes=30))</li> </ul> </li> <li>Recomendaci\u00f3n: Usar timedelta para configuraciones m\u00e1s precisas.</li> </ul>"},{"location":"proyecto/backend/nota_ventas/settings/#axes_lockout_parameters","title":"AXES_LOCKOUT_PARAMETERS","text":"<ul> <li>Qu\u00e9 hace: Determina los criterios para el bloqueo.</li> <li>Opciones:<ul> <li>ip_address: Bloquea solo por direcci\u00f3n IP.</li> <li>username: Bloquea solo por nombre de usuario.</li> <li>ip_address, username: Bloquea combinaci\u00f3n de IP y usuario (m\u00e1s seguro).</li> </ul> </li> <li>Ventaja: Bloquear por ambos par\u00e1metros previene que atacantes:<ul> <li>Usen la misma IP con diferentes usuarios</li> <li>O el mismo usuario desde diferentes IPs</li> </ul> </li> </ul>"},{"location":"proyecto/backend/nota_ventas/settings/#axes_reset_on_success","title":"AXES_RESET_ON_SUCCESS","text":"<ul> <li>Qu\u00e9 hace: Reinicia el contador de intentos fallidos despu\u00e9s de un inicio de sesi\u00f3n exitoso.</li> <li>Comportamiento:<ul> <li>True: El contador vuelve a cero tras un login correcto.</li> <li>False: Mantiene el historial de intentos fallidos.</li> </ul> </li> <li>Uso t\u00edpico: Habilitado (True) para no penalizar a usuarios leg\u00edtimos que eventualmente no aciertan su contrase\u00f1a.</li> </ul>"},{"location":"proyecto/backend/nota_ventas/settings/#axes_enabled","title":"AXES_ENABLED","text":"<ul> <li>Qu\u00e9 hace: Activa o desactiva completamente el sistema de protecci\u00f3n de axes.</li> <li>Cu\u00e1ndo desactivarlo:<ul> <li>Entornos de desarrollo/testing.</li> <li>Cuando se usan otros sistemas de protecci\u00f3n.</li> <li>Para diagn\u00f3stico de problemas de autenticaci\u00f3n.</li> </ul> </li> <li>Precauci\u00f3n: Nunca desactivar en producci\u00f3n sin tener alternativa de protecci\u00f3n.</li> </ul>"},{"location":"proyecto/backend/nota_ventas/settings/#secure_ssl_redirect","title":"SECURE_SSL_REDIRECT","text":"<p>Esta opci\u00f3n fuerza que todas las solicitudes HTTP sean redirigidas a HTTPS. Solo se activa si IS_PRODUCTION es True.</p> <ul> <li>Asegura que los usuarios usen una conexi\u00f3n segura cifrada.</li> <li>Evita exponer cookies, tokens o datos en texto plano.</li> <li>Mejora la puntuaci\u00f3n en herramientas como Lighthouse o SSL Labs.</li> </ul>"},{"location":"proyecto/backend/nota_ventas/settings/#secure_proxy_ssl_header","title":"SECURE_PROXY_SSL_HEADER","text":"<p>Cuando la app est\u00e1 detr\u00e1s de un proxy inverso (como Railway, Heroku, Nginx, Cloudflare, etc.), Django no puede saber directamente si la conexi\u00f3n original del usuario fue segura (HTTPS), porque las solicitudes que recibe internamente pueden venir como HTTP.</p> <p>Este header le dice a Django:</p> <ul> <li>\u201cConf\u00eda en el valor del encabezado HTTP_X_FORWARDED_PROTO enviado por el proxy para determinar si la conexi\u00f3n fue HTTPS.\u201d</li> </ul> <p>Railway env\u00eda este encabezado autom\u00e1ticamente.</p>"},{"location":"proyecto/backend/nota_ventas/settings/#secure_referrer_policy","title":"SECURE_REFERRER_POLICY","text":"<p>Controla como envia la cabezera HTTP Referer cuando un usuario navega de el sitio propio a otro dominio. Cada vez que se hace click en un enlace, el navegador envia:</p> <p>Referer: https://tusitio.com/pagina/secreta</p> <p>Esto le dice al servidor de destino desde donde viene el click. Al tenerlo en strict-origin-when-cross-origin, si el destino esta dentro del mismo dominio, se envia la URL completa. Al ser de un dominio diferente se envia el origen (scheme + host + puerto). De esta forma se evita fugas de informaci\u00f3n, se tiene mayor privacidad y no rompe enlaces internos.</p>"},{"location":"proyecto/backend/nota_ventas/settings/#secure_cross_origin_opener_policy","title":"SECURE_CROSS_ORIGIN_OPENER_POLICY","text":"<p>Evita que p\u00e1ginas abiertas desde el sitio (o que lo abren) compartan el mismo contexto de navegaci\u00f3n. Protege contra ataques como tabnabbing y aisla mejor la ejecuci\u00f3n entre ventanas o pesta\u00f1as.</p>"},{"location":"proyecto/backend/nota_ventas/settings/#secure_cross_origin_embedder_policy","title":"SECURE_CROSS_ORIGIN_EMBEDDER_POLICY","text":"<p>Impide que el sitio cargue recursos de otros or\u00edgenes si no declaran permisos expl\u00edcitos (CORP/CORS). Aumenta la seguridad en APIs modernas como SharedArrayBuffer y previene ejecuci\u00f3n de contenido no confiable.</p>"},{"location":"proyecto/backend/nota_ventas/settings/#secure_cross_origin_resource_policy","title":"SECURE_CROSS_ORIGIN_RESOURCE_POLICY","text":"<p>Restringe qui\u00e9n puede cargar recursos que provienen del servidor. Con same-origin, solo el propio dominio puede usar las im\u00e1genes, scripts o recursos, evitando hotlinking y consumo indebido.</p>"},{"location":"proyecto/backend/nota_ventas/settings/#data_upload_max_memory_size","title":"DATA_UPLOAD_MAX_MEMORY_SIZE","text":"<p>Establece un l\u00edmite al tama\u00f1o m\u00e1ximo de datos que el backend aceptar\u00e1 en memoria durante una subida. Previene abusos de uploads enormes que pueden causar consumo excesivo de RAM y ataques DoS simples.</p>"},{"location":"proyecto/backend/nota_ventas/settings/#logging","title":"LOGGING","text":"<pre><code># Configuracion del logger\nif IS_PRODUCTION:\n    LOGGING = {\n        'version': 1,\n        'disable_existing_loggers': False,\n        'handlers': {\n            'file': {\n                'level': 'WARNING',\n                'class': 'logging.FileHandler',\n                'filename': os.path.join(BASE_DIR, 'django.log'),\n            },\n        },\n        'loggers': {\n            'django': {\n                'handlers': ['file'],\n                'level': 'WARNING',\n                'propagate': True,\n            },\n        },\n    }\n</code></pre> <p>Este bloque configura el sistema de logging de Django para que, en producci\u00f3n, registre mensajes de advertencia y error en un archivo llamado django.log.</p> <p>if IS_PRODUCTION: Solo activa esta configuraci\u00f3n en entornos productivos. As\u00ed, en desarrollo se puede usar logs por consola sin interferencias.</p> <p>'version': 1 Indica que est\u00e1 usando la versi\u00f3n 1 del sistema de logging de Python, que es la que usa Django.</p> <p>'disable_existing_loggers': False Permite que los loggers existentes sigan funcionando, en lugar de desactivarlos.</p> <p>'handlers': { ... } Define c\u00f3mo y d\u00f3nde se almacenan los logs. En este caso crea un manejador de logs que:</p> <ul> <li>Guarda los mensajes con nivel WARNING o superior (ERROR, CRITICAL).</li> <li>Usa un archivo llamado django.log, ubicado en el directorio base del proyecto (BASE_DIR).</li> <li>Utiliza el manejador de archivos est\u00e1ndar de Python.</li> </ul> <p>'loggers': { 'django': ... } Define los loggers que Django usar\u00e1. Aqu\u00ed:</p> <ul> <li>El logger 'django' (el n\u00facleo del framework) usar\u00e1 el handler 'file'.</li> <li>Su nivel m\u00ednimo ser\u00e1 'WARNING'.</li> <li>propagate: True permite que los logs se pasen tambi\u00e9n a otros loggers padres si existen.</li> </ul> <p>Cuando la app est\u00e9 corriendo en producci\u00f3n y ocurra, por ejemplo, un Http404, un error de base de datos o un fallo en vistas, se registrar\u00e1 una l\u00ednea como:</p> <pre><code>WARNING 2025-07-24 15:00:00,456 django.request Internal Server Error: /api/endpoint\nTraceback (most recent call last):\n...\n</code></pre> <ul> <li>Permite auditar errores sin necesidad de revisar logs del servidor directamente.</li> <li>\u00datil para debuggear producci\u00f3n cuando no se tiene consola activa (como en Railway).</li> <li>Compatible con herramientas de monitoreo como Sentry, si se quiere mejorar la gesti\u00f3n de errores m\u00e1s adelante.</li> </ul>"},{"location":"proyecto/backend/nota_ventas/settings/#configuraciones-de-archivos-y-cloudflare","title":"CONFIGURACIONES DE ARCHIVOS Y CLOUDFLARE","text":""},{"location":"proyecto/backend/nota_ventas/settings/#media_root","title":"MEDIA_ROOT","text":"<p>Define la carpeta donde Django almacenar\u00e1 los archivos subidos por los usuarios (im\u00e1genes, PDFs, etc.).</p> <pre><code>if IS_PRODUCTION:\n    MEDIA_ROOT = Path(\"/app/media\")\nelse:\n    MEDIA_ROOT = BASE_DIR / \"media\"\n</code></pre> <ul> <li>En producci\u00f3n, se fija a /app/media, una ruta estable dentro del contenedor.</li> <li>En desarrollo, usa la carpeta media/ dentro del proyecto.</li> </ul> <p>Esto separa claramente los archivos locales de los archivos en el despliegue.</p>"},{"location":"proyecto/backend/nota_ventas/settings/#media_url","title":"MEDIA_URL","text":"<p>Es la URL base desde la cual los archivos multimedia ser\u00e1n servidos.</p> <pre><code>MEDIA_URL = \"/media/\"\n</code></pre> <p>Ejemplo: una imagen subida podr\u00eda quedar accesible en /media/imagen.jpg</p>"},{"location":"proyecto/backend/nota_ventas/settings/#cloudflare","title":"CLOUDFLARE","text":"<p>Estas variables habilitan la integraci\u00f3n con un almacenamiento S3-compatible (Cloudflare R2, MinIO, AWS S3, etc.). Django las usa cuando, como en este caso, el proyecto emplea un storage backend basado en S3.</p> <pre><code>AWS_ACCESS_KEY_ID = os.getenv(\"AWS_ACCESS_KEY_ID\")\nAWS_SECRET_ACCESS_KEY = os.getenv(\"AWS_SECRET_ACCESS_KEY\")\nAWS_STORAGE_BUCKET_NAME = os.getenv(\"AWS_STORAGE_BUCKET_NAME\")\nAWS_S3_ENDPOINT_URL = os.getenv(\"AWS_S3_ENDPOINT_URL\")\n\nAWS_S3_REGION_NAME = \"auto\"\nAWS_S3_SIGNATURE_VERSION = \"s3v4\"\nAWS_DEFAULT_ACL = 'private'\nAWS_S3_FILE_OVERWRITE = False\n\nAWS_S3_OBJECT_PARAMETERS = {\n    \"ContentDisposition\": \"inline\",\n    \"CacheControl\": \"max-age=86400\",\n}\n</code></pre>"},{"location":"proyecto/backend/nota_ventas/settings/#aws_access_key_id-aws_secret_access_key","title":"AWS_ACCESS_KEY_ID / AWS_SECRET_ACCESS_KEY","text":"<p>Credenciales que usa Django para autenticar las operaciones en el bucket S3 (subir, leer, borrar archivos).</p> <p>Estas credenciales:</p> <ul> <li>Nunca deben estar en el c\u00f3digo.</li> <li>Se obtienen desde variables de entorno.</li> </ul>"},{"location":"proyecto/backend/nota_ventas/settings/#aws_storage_bucket_name","title":"AWS_STORAGE_BUCKET_NAME","text":"<p>Nombre del bucket de R2/S3 donde se guardar\u00e1n los archivos.</p>"},{"location":"proyecto/backend/nota_ventas/settings/#aws_s3_endpoint_url","title":"AWS_S3_ENDPOINT_URL","text":"<p>URL espec\u00edfica del endpoint de Cloudflare R2 o del proveedor S3. Ejemplo t\u00edpico en R2:</p> <pre><code>https://&lt;accountid&gt;.r2.cloudflarestorage.com\n</code></pre>"},{"location":"proyecto/backend/nota_ventas/settings/#aws_s3_region_name","title":"AWS_S3_REGION_NAME","text":"<p>R2 no usa regiones tradicionales, por eso se establece en \"auto\".</p>"},{"location":"proyecto/backend/nota_ventas/settings/#aws_s3_signature_version","title":"AWS_S3_SIGNATURE_VERSION","text":"<p>Especifica el m\u00e9todo de firma para autenticar peticiones. s3v4 es el est\u00e1ndar seguro y moderno recomendado.</p>"},{"location":"proyecto/backend/nota_ventas/settings/#aws_default_acl","title":"AWS_DEFAULT_ACL","text":"<p>Hace que todos los archivos subidos sean privados por defecto, evitando que queden expuestos p\u00fablicamente a Internet.</p>"},{"location":"proyecto/backend/nota_ventas/settings/#aws_s3_file_overwrite","title":"AWS_S3_FILE_OVERWRITE","text":"<p>Evita que un archivo con el mismo nombre sobrescriba a otro previamente subido. Django generar\u00e1 un nombre \u00fanico autom\u00e1ticamente.</p>"},{"location":"proyecto/backend/nota_ventas/settings/#aws_s3_object_parameters","title":"AWS_S3_OBJECT_PARAMETERS","text":"<p>Par\u00e1metros aplicados a cada archivo cuando se almacena:</p> <ul> <li> <p>ContentDisposition: \"inline\" Permite visualizar archivos directamente en el navegador (PDFs, im\u00e1genes), en vez de forzar descarga.</p> </li> <li> <p>CacheControl: \"max-age=86400\" Indica un cach\u00e9 de 24 horas para mejorar performance en CDN y navegadores.</p> </li> </ul>"},{"location":"proyecto/backend/nota_ventas/settings/#permissions_policy","title":"PERMISSIONS_POLICY","text":"<p>Controla el acceso a APIs sensibles del navegador, siguiendo el est\u00e1ndar moderno de Permissions Policy (antes Feature Policy).</p> <pre><code>PERMISSIONS_POLICY = {\n    \"geolocation\": [],\n    \"camera\": [],\n    \"microphone\": [],\n}\n</code></pre> <p>Esto indica:</p> <ul> <li>Bloquea completamente el uso de geolocalizaci\u00f3n, c\u00e1mara y micr\u00f3fono.</li> <li>Ning\u00fan sitio (incluyendo el mismo dominio) puede usar esas APIs.</li> <li>Reduce superficie de ataque y mejora privacidad.</li> </ul>"},{"location":"proyecto/backend/nota_ventas/settings/#csp","title":"CSP","text":"<pre><code>CONTENT_SECURITY_POLICY = {\n    \"DIRECTIVES\": {\n        \"default-src\": [\"'self'\"],\n        \"script-src\": [\"'self'\"],\n        \"style-src\": [\"'self'\", \"'unsafe-inline'\"],\n        \"img-src\": [\"'self'\", \"data:\", AWS_S3_ENDPOINT_URL],\n        \"connect-src\": [\"'self'\", AWS_S3_ENDPOINT_URL],\n        \"frame-ancestors\": [\"'none'\"],\n    }\n}\n</code></pre>"},{"location":"proyecto/backend/nota_ventas/settings/#content_security_policy","title":"CONTENT_SECURITY_POLICY","text":"<p>Define qu\u00e9 contenido puede cargarse en el sitio. Es una de las protecciones m\u00e1s fuertes contra ataques XSS.</p>"},{"location":"proyecto/backend/nota_ventas/settings/#default-src-self","title":"default-src: 'self'","text":"<p>Solo carga contenido desde el mismo dominio por defecto.</p>"},{"location":"proyecto/backend/nota_ventas/settings/#script-src-self","title":"script-src: 'self'","text":"<ul> <li>Solo permite ejecutar scripts servidos desde el propio servidor.</li> <li>Bloquea scripts externos (salvo que se agreguen expl\u00edcitamente).</li> </ul>"},{"location":"proyecto/backend/nota_ventas/settings/#style-src-self-unsafe-inline","title":"style-src: 'self', 'unsafe-inline'","text":"<ul> <li>Permite estilos locales.</li> <li>'unsafe-inline' se incluye para permitir estilos inline (temporales o necesarios para librer\u00edas como MUI).Si en el futuro se elimina, se aumenta mucho la seguridad, pero es necesario en este proyecto</li> </ul>"},{"location":"proyecto/backend/nota_ventas/settings/#img-src-self-data-aws_s3_endpoint_url","title":"img-src: 'self', data:, AWS_S3_ENDPOINT_URL","text":"<ul> <li>Permite im\u00e1genes locales</li> <li>Im\u00e1genes embebidas en base64 (data:)</li> <li>Y las servidas desde R2/S3.</li> </ul> <p>connect-src: 'self', AWS_S3_ENDPOINT_URL</p> <ul> <li>Controla las URLs a las que el frontend puede hacer fetch/axios.</li> <li>Permite solo llamadas al mismo dominio y al bucket S3.</li> </ul>"},{"location":"proyecto/backend/nota_ventas/settings/#frame-ancestors-none","title":"frame-ancestors: 'none'","text":"<p>Evita que el sitio sea incrustado en iframes de otros sitios (clickjacking mitigation).</p>"},{"location":"proyecto/backend/nota_ventas/settings/#seguridad-dependiendo-de-desarrollo-o-produccion","title":"SEGURIDAD DEPENDIENDO DE DESARROLLO O PRODUCCI\u00d3N","text":"<pre><code>if not IS_PRODUCTION:\n    CSRF_COOKIE_SAMESITE = 'Lax'\n    SESSION_COOKIE_SAMESITE = 'Lax'\n    CSRF_COOKIE_SECURE = False\n    SESSION_COOKIE_SECURE = False\n</code></pre> <p>Esto logra:</p> <ul> <li>Cookies accesibles durante desarrollo sin HTTPS.</li> <li>Evita problemas al probar peticiones AJAX o formularios locales.</li> <li>Mantiene cierta seguridad con SameSite='Lax'.</li> <li>En producci\u00f3n, estas opciones se vuelven estrictas y seguras autom\u00e1ticamente.</li> </ul> <pre><code>if IS_PRODUCTION:\n    SECURE_HSTS_SECONDS = 31536000  # 1 a\u00f1o\n    SECURE_HSTS_INCLUDE_SUBDOMAINS = True\n    SECURE_HSTS_PRELOAD = True\n</code></pre>"},{"location":"proyecto/backend/nota_ventas/settings/#secure_hsts_seconds","title":"SECURE_HSTS_SECONDS","text":"<p>Fuerza a los navegadores a usar siempre HTTPS durante 1 a\u00f1o para el dominio.</p>"},{"location":"proyecto/backend/nota_ventas/settings/#secure_hsts_include_subdomains","title":"SECURE_HSTS_INCLUDE_SUBDOMAINS","text":"<p>Aplica la pol\u00edtica SSL estricta tambi\u00e9n a subdominios.</p>"},{"location":"proyecto/backend/nota_ventas/settings/#secure_hsts_preload","title":"SECURE_HSTS_PRELOAD","text":"<p>Solicita que el dominio sea incluido en la lista HSTS Preload usada por Chrome, Firefox, Safari y Edge, haciendo imposible acceder v\u00eda HTTP incluso la primera vez.</p>"},{"location":"proyecto/backend/nota_ventas/urls/","title":"Archivo <code>urls.py</code>","text":"<p>Este archivo define la configuraci\u00f3n principal de rutas (<code>URLs</code>) del proyecto. Se encarga de conectar las rutas entrantes con las vistas correspondientes.</p>"},{"location":"proyecto/backend/nota_ventas/urls/#contenido-del-archivo","title":"Contenido del archivo","text":"<pre><code>from django.contrib import admin\nfrom django.urls import path, include\n\nurlpatterns = [\n    path('admin/', admin.site.urls),\n\n    # Autenticaci\u00f3n \n    path('api/v1/token/', include('nota_app.auth_urls')),\n\n    # Version de API\n    path('api/v1/', include('nota_app.urls')),\n]\n\nif settings.DEBUG:\n    urlpatterns += static(settings.MEDIA_URL, document_root=settings.MEDIA_ROOT)\n</code></pre>"},{"location":"proyecto/backend/nota_ventas/urls/#explicacion","title":"Explicaci\u00f3n","text":"<ul> <li> <p>from django.contrib import admin: Importa la vista de administraci\u00f3n de Django.</p> </li> <li> <p>from django.urls import path, include: Importa funciones para definir rutas (path) y para incluir configuraciones de URL de otras aplicaciones (include).</p> </li> <li> <p>urlpatterns += static(settings.MEDIA_URL, document_root=settings.MEDIA_ROOT): En desarrollo se agrega esta ruta para servir archivos media, en producci\u00f3n esta linea no corre (DEGUG = False)</p> </li> </ul>"},{"location":"proyecto/backend/nota_ventas/urls/#lista-de-urlpatterns","title":"Lista de urlpatterns","text":"<ul> <li> <p>admin/: Ruta al panel de administraci\u00f3n de Django.</p> </li> <li> <p>api/v1/: Incluye las rutas definidas en nota_app.urls, lo que permite modularizar las URLs por aplicaci\u00f3n.</p> </li> <li> <p>api/v1/token/: Incluye URLs relacionadas con autenticaci\u00f3n desde auth_urls.py. Contiene generaci\u00f3n de tokens JWT (login), refresh de tokens y verificaci\u00f3n de tokens</p> </li> </ul>"},{"location":"proyecto/backend/nota_ventas/urls/#buenas-practicas","title":"Buenas pr\u00e1cticas","text":"<ul> <li>Prefijar las APIs con /api/v1/ es \u00fatil para versionar la API desde el inicio.</li> <li>Las URLs de autenticaci\u00f3n est\u00e1n separadas (auth_urls.py).</li> <li>Las URLs principales de la app est\u00e1n en su propio archivo (nota_app/urls.py).</li> <li>api/v1/token/ maneja tokens para autenticaci\u00f3n</li> <li>Jerarqu\u00eda l\u00f3gica (api \u2192 v1 \u2192 recurso).</li> </ul>"},{"location":"proyecto/backend/nota_ventas/urls/#include","title":"include()","text":"<p>La funci\u00f3n include() de Django (importada desde django.urls) permite \"incluir\" otras configuraciones de URLs desde aplicaciones o m\u00f3dulos externos. Su prop\u00f3sito es:</p> <ol> <li> <p>Modularizar las URLs:</p> <ul> <li> <p>Divide las rutas del proyecto en archivos separados (por app) para mantener el c\u00f3digo organizado.</p> </li> <li> <p>Ejemplo: Las URLs de la app est\u00e1n definidas en su propio nota_app/urls.py, no en el archivo principal.</p> </li> </ul> </li> <li> <p>Anidar rutas bajo un prefijo com\u00fan:</p> <ul> <li>Todas las URLs de la app incluida se agrupan bajo una ruta base (ej: /api/v1/).</li> </ul> </li> <li> <p>Estructura:</p> <ul> <li> <p>Cuando un usuario visita una URL que comienza con api/v1/, Django delega el procesamiento a las rutas definidas en nota_appp/urls.py.</p> </li> <li> <p>Ejemplo: Si nota_app/urls.py tiene una ruta path('nota/', ...), la URL final ser\u00e1 api/v1/nota/</p> </li> </ul> </li> <li> <p>Ventajas:</p> <ul> <li>Escalabilidad: Puedes a\u00f1adir m\u00e1s apps sin saturar el archivo principal.</li> <li>Reusabilidad: La app nota_app podr\u00eda usarse en otro proyecto sin modificar sus URLs internas.</li> <li>Mantenci\u00f3n: sin include() se tendr\u00edan que definir todas las urls en el archivo principal, lo que generar\u00eda un archivo muy grande y podr\u00eda crear acoplamiento entre el proyecto y la app</li> </ul> </li> </ol>"},{"location":"proyecto/backend/nota_ventas/urls/#flujo-de-una-peticion-con-include","title":"Flujo de una petici\u00f3n con include()","text":"<ol> <li> <p>El usuario visita: https://midominio.com/api/v1/nota/</p> </li> <li> <p>Django:</p> <ul> <li> <p>Revisa urlpatterns principal y encuentra que api/v1/ delega a nota_app.urls.</p> </li> <li> <p>Elimina la parte coincidente (api/v1/) y pasa el resto (nota/) a nota_app/urls.py.</p> </li> </ul> </li> <li> <p>nota_app/urls.py resuelve la ruta restante y llama a la vista correspondiente.</p> </li> </ol>"},{"location":"proyecto/backend/nota_ventas/wsgi/","title":"Archivo <code>wsgi.py</code>","text":"<p>Este archivo configura la interfaz WSGI (Web Server Gateway Interface) para el proyecto</p>"},{"location":"proyecto/backend/nota_ventas/wsgi/#proposito","title":"Prop\u00f3sito","text":"<p>Permite que Django se comunique con servidores WSGI (como Gunicorn, uWSGI o el servidor de desarrollo de Django). Es fundamental para el despliegue en producci\u00f3n de aplicaciones web tradicionales basadas en solicitudes HTTP s\u00edncronas.</p>"},{"location":"proyecto/backend/nota_ventas/wsgi/#contenido-del-archivo","title":"Contenido del archivo","text":"<pre><code>import os\nfrom whitenoise import WhiteNoise\nfrom django.core.wsgi import get_wsgi_application\n\nos.environ.setdefault('DJANGO_SETTINGS_MODULE', 'nota_ventas.settings')\n\napplication = get_wsgi_application()\n\nSTATIC_ROOT = os.path.join(os.path.dirname(os.path.dirname(__file__)), 'staticfiles')\napplication = WhiteNoise(application, root=STATIC_ROOT)\n</code></pre>"},{"location":"proyecto/backend/nota_ventas/wsgi/#explicacion-linea-por-linea","title":"Explicaci\u00f3n l\u00ednea por l\u00ednea","text":"<ul> <li> <p>from whitenoise import WhiteNoise: Integra WhiteNoise, una herramienta que permite a Django servir archivos est\u00e1ticos directamente en producci\u00f3n, sin depender de servidores externos como Nginx.</p> </li> <li> <p>from django.core.wsgi import get_wsgi_application: Importa la funci\u00f3n que genera una instancia WSGI lista para ser utilizada por un servidor compatible.</p> </li> <li> <p>os.environ.setdefault('DJANGO_SETTINGS_MODULE', 'nota_ventas.settings'): Define la variable de entorno DJANGO_SETTINGS_MODULE, que Django usa para ubicar la configuraci\u00f3n del proyecto. Solo la establece si no est\u00e1 previamente definida.</p> </li> <li> <p>application = get_wsgi_application(): Crea la instancia WSGI que ser\u00e1 utilizada por el servidor para manejar las solicitudes.</p> </li> <li> <p>STATIC_ROOT = os.path.join(os.path.dirname(os.path.dirname(file)), 'staticfiles'): Define la ruta absoluta a la carpeta staticfiles, donde Django recopila todos los archivos est\u00e1ticos despu\u00e9s de ejecutar collectstatic. En este caso, calcula la ruta tomando dos niveles arriba desde el archivo actual. Esto es necesario para que el admin de django en produccion se vea con el css.</p> </li> <li> <p>application = WhiteNoise(application, root=STATIC_ROOT): Envuelve la aplicaci\u00f3n Django con WhiteNoise. Esto le permite a Django servir archivos est\u00e1ticos desde STATIC_ROOT directamente, sin necesidad de un servidor web adicional. Recomendado especialmente para plataformas como Railway, que no ofrecen Nginx por defecto.</p> </li> </ul>"},{"location":"proyecto/backend/nota_ventas/wsgi/#cuando-modificar-este-archivo","title":"Cu\u00e1ndo modificar este archivo","text":"<p>Normalmente no es necesario modificarlo. Se podr\u00eda hacer si:</p> <ul> <li>Usas un sistema de configuraci\u00f3n avanzada con m\u00faltiples entornos (settings.dev, settings.prod, etc.).</li> <li>Necesitas envolver la aplicaci\u00f3n con middlewares personalizados en el entorno WSGI.</li> <li>En este caso se uso Whitenoise, que no es parte del c\u00f3digo original</li> </ul>"},{"location":"proyecto/frontend/separado/","title":"index.html","text":""},{"location":"proyecto/frontend/separado/#proposito-general","title":"Prop\u00f3sito general","text":"<p>Este archivo es el punto de entrada HTML de la aplicaci\u00f3n frontend.</p> <p>Su funci\u00f3n principal es:</p> <ul> <li>Definir la estructura base del documento HTML</li> <li>Proveer el contenedor donde React monta la aplicaci\u00f3n</li> <li>Cargar el archivo principal de JavaScript (<code>main.jsx</code>)</li> <li>Configurar metadatos b\u00e1sicos y recursos globales (favicon, fuentes, viewport)</li> </ul> <p>En aplicaciones React con Vite, este archivo no contiene l\u00f3gica de negocio, sino que act\u00faa como un shell m\u00ednimo para la app.</p>"},{"location":"proyecto/frontend/separado/#declaracion-del-tipo-de-documento","title":"Declaraci\u00f3n del tipo de documento","text":"<pre><code>&lt;!doctype html&gt;\n</code></pre> <p>Indica que el documento utiliza HTML5, asegurando compatibilidad con navegadores modernos y est\u00e1ndares actuales.</p>"},{"location":"proyecto/frontend/separado/#etiqueta-html","title":"Etiqueta <code>&lt;html&gt;</code>","text":"<pre><code>&lt;html lang=\"en\"&gt;\n</code></pre> <ul> <li>Define el idioma principal del documento como ingl\u00e9s</li> <li>Es relevante para accesibilidad, lectores de pantalla y SEO</li> </ul> <p>Si la aplicaci\u00f3n es completamente en espa\u00f1ol, se puede cambiar a <code>lang=\"es\"</code>.</p>"},{"location":"proyecto/frontend/separado/#seccion-head","title":"Secci\u00f3n <code>&lt;head&gt;</code>","text":"<p>Contiene metadatos y recursos globales del sitio.</p>"},{"location":"proyecto/frontend/separado/#codificacion-de-caracteres","title":"Codificaci\u00f3n de caracteres","text":"<pre><code>&lt;meta charset=\"UTF-8\" /&gt;\n</code></pre> <p>Permite el uso correcto de caracteres especiales como acentos y s\u00edmbolos.</p>"},{"location":"proyecto/frontend/separado/#favicon","title":"Favicon","text":"<pre><code>&lt;link rel=\"icon\" type=\"image\" href=\"Logo_JJ.png\" /&gt;\n</code></pre> <ul> <li>\u00cdcono mostrado en la pesta\u00f1a del navegador</li> <li>Mejora la identidad visual de la aplicaci\u00f3n</li> </ul>"},{"location":"proyecto/frontend/separado/#viewport","title":"Viewport","text":"<pre><code>&lt;meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\" /&gt;\n</code></pre> <p>Habilita el comportamiento responsivo y el correcto escalado en dispositivos m\u00f3viles.</p>"},{"location":"proyecto/frontend/separado/#titulo-del-documento","title":"T\u00edtulo del documento","text":"<pre><code>&lt;title&gt;Pedidos de Notas&lt;/title&gt;\n</code></pre> <p>Texto visible en la pesta\u00f1a del navegador y en marcadores.</p>"},{"location":"proyecto/frontend/separado/#seccion-body","title":"Secci\u00f3n <code>&lt;body&gt;</code>","text":""},{"location":"proyecto/frontend/separado/#contenedor-raiz-de-react","title":"Contenedor ra\u00edz de React","text":"<pre><code>&lt;div id=\"root\"&gt;&lt;/div&gt;\n</code></pre> <ul> <li>Punto de montaje de toda la aplicaci\u00f3n React</li> <li>Debe coincidir con el <code>getElementById</code> usado en <code>main.jsx</code></li> </ul>"},{"location":"proyecto/frontend/separado/#carga-del-entry-point","title":"Carga del entry point","text":"<pre><code>&lt;script type=\"module\" src=\"/src/main.jsx\"&gt;&lt;/script&gt;\n</code></pre> <ul> <li>Carga el archivo principal de la aplicaci\u00f3n</li> <li>Usa ES Modules</li> <li>Desde aqu\u00ed se inicializa React, Redux, Router y providers globales</li> </ul>"},{"location":"proyecto/frontend/separado/#fuentes-externas","title":"Fuentes externas","text":""},{"location":"proyecto/frontend/separado/#inter","title":"Inter","text":"<pre><code>&lt;link href=\"https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&amp;display=swap\" rel=\"stylesheet\"&gt;\n</code></pre> <p>Fuente utilizada para textos generales y UI.</p>"},{"location":"proyecto/frontend/separado/#optimizacion-de-carga","title":"Optimizaci\u00f3n de carga","text":"<pre><code>&lt;link rel=\"preconnect\" href=\"https://fonts.googleapis.com\"&gt;\n&lt;link rel=\"preconnect\" href=\"https://fonts.gstatic.com\" crossorigin&gt;\n</code></pre> <p>Reduce latencia al cargar fuentes externas.</p>"},{"location":"proyecto/frontend/separado/#saira","title":"Saira","text":"<pre><code>&lt;link href=\"https://fonts.googleapis.com/css2?family=Saira:ital,wght@0,100..900;1,100..900&amp;display=swap\" rel=\"stylesheet\"&gt;\n</code></pre> <p>Fuente personalizada usada en el theme global (<code>themeJJ</code>).</p>"},{"location":"proyecto/frontend/separado/#rol-del-archivo-en-la-arquitectura","title":"Rol del archivo en la arquitectura","text":"<p>Este archivo:</p> <ul> <li>No contiene l\u00f3gica de negocio</li> <li>No depende directamente de React</li> <li>Permanece est\u00e1tico</li> <li>Sirve como base para el montaje de la aplicaci\u00f3n</li> </ul> <p>Es fundamental para el arranque, la identidad visual y la compatibilidad del frontend.</p>"},{"location":"proyecto/frontend/separado/eslint.config/","title":"eslint.config.js","text":""},{"location":"proyecto/frontend/separado/eslint.config/#proposito-del-archivo","title":"Prop\u00f3sito del archivo","text":"<p>Este archivo define la configuraci\u00f3n de ESLint para el proyecto frontend basado en React. Su objetivo principal es establecer reglas de an\u00e1lisis est\u00e1tico de c\u00f3digo que permitan mantener consistencia, calidad y buenas pr\u00e1cticas durante el desarrollo, especialmente en aplicaciones modernas con React Hooks y Fast Refresh.</p>"},{"location":"proyecto/frontend/separado/eslint.config/#estructura-general","title":"Estructura general","text":"<p>El archivo exporta un arreglo de configuraciones, lo que corresponde al formato moderno de ESLint (Flat Config). Esto permite definir m\u00faltiples bloques de configuraci\u00f3n de forma m\u00e1s clara y modular.</p> <pre><code>export default [\n  { ignores: ['dist'] },\n  { /* configuraci\u00f3n principal */ }\n]\n</code></pre> <ul> <li>El primer bloque define rutas o carpetas que ESLint debe ignorar.</li> <li>El segundo bloque contiene la configuraci\u00f3n efectiva que se aplica a los archivos JavaScript y JSX del proyecto.</li> </ul>"},{"location":"proyecto/frontend/separado/eslint.config/#exclusion-de-carpetas","title":"Exclusi\u00f3n de carpetas","text":"<pre><code>{ ignores: ['dist'] }\n</code></pre> <ul> <li>Evita que ESLint analice el directorio <code>dist</code>, el cual normalmente contiene archivos generados autom\u00e1ticamente durante el build.</li> <li>Previene falsos positivos y reduce el tiempo de an\u00e1lisis.</li> </ul>"},{"location":"proyecto/frontend/separado/eslint.config/#alcance-de-archivos","title":"Alcance de archivos","text":"<pre><code>files: ['**/*.{js,jsx}'],\n</code></pre> <ul> <li>Limita la aplicaci\u00f3n de esta configuraci\u00f3n a archivos <code>.js</code> y <code>.jsx</code>.</li> <li>Asegura que el linting solo se ejecute sobre c\u00f3digo fuente relevante del frontend.</li> </ul>"},{"location":"proyecto/frontend/separado/eslint.config/#opciones-de-lenguaje","title":"Opciones de lenguaje","text":"<pre><code>languageOptions: {\n  ecmaVersion: 2020,\n  globals: globals.browser,\n  parserOptions: {\n    ecmaVersion: 'latest',\n    ecmaFeatures: { jsx: true },\n    sourceType: 'module',\n  },\n},\n</code></pre> <ul> <li>ecmaVersion: Permite el uso de caracter\u00edsticas modernas de JavaScript.</li> <li>globals.browser: Declara variables globales del navegador (<code>window</code>, <code>document</code>, etc.) como v\u00e1lidas.</li> <li>jsx: Habilita la sintaxis JSX propia de React.</li> <li>sourceType: module: Indica que el c\u00f3digo utiliza ES Modules (<code>import</code> / <code>export</code>).</li> </ul>"},{"location":"proyecto/frontend/separado/eslint.config/#plugins-utilizados","title":"Plugins utilizados","text":"<pre><code>plugins: {\n  'react-hooks': reactHooks,\n  'react-refresh': reactRefresh,\n},\n</code></pre> <ul> <li>react-hooks: Garantiza el uso correcto de Hooks (<code>useEffect</code>, <code>useState</code>, etc.).</li> <li>react-refresh: Ayuda a mantener compatibilidad con Fast Refresh, evitando patrones que rompan la recarga en caliente.</li> </ul>"},{"location":"proyecto/frontend/separado/eslint.config/#reglas-base","title":"Reglas base","text":"<pre><code>...js.configs.recommended.rules,\n...reactHooks.configs.recommended.rules,\n</code></pre> <ul> <li>Se heredan las reglas recomendadas por ESLint para JavaScript est\u00e1ndar.</li> <li>Se agregan las reglas oficiales recomendadas para React Hooks.</li> </ul> <p>Esto establece una base s\u00f3lida sin necesidad de definir manualmente cada regla.</p>"},{"location":"proyecto/frontend/separado/eslint.config/#reglas-personalizadas","title":"Reglas personalizadas","text":""},{"location":"proyecto/frontend/separado/eslint.config/#variables-no-utilizadas","title":"Variables no utilizadas","text":"<pre><code>'no-unused-vars': ['error', { varsIgnorePattern: '^[A-Z_]' }],\n</code></pre> <ul> <li>Marca como error las variables no utilizadas.</li> <li> <p>Excluye constantes o identificadores en may\u00fasculas, com\u00fanmente usados para:</p> </li> <li> <p>Enumeraciones</p> </li> <li>Configuraciones</li> <li>Constantes globales</li> </ul>"},{"location":"proyecto/frontend/separado/eslint.config/#react-fast-refresh","title":"React Fast Refresh","text":"<pre><code>'react-refresh/only-export-components': [\n  'warn',\n  { allowConstantExport: true },\n],\n</code></pre> <ul> <li>Emite una advertencia si un archivo exporta algo que no sea un componente React.</li> <li>Mejora la estabilidad del Fast Refresh durante el desarrollo.</li> <li>Permite exportar constantes sin romper la recarga en caliente.</li> </ul>"},{"location":"proyecto/frontend/separado/eslint.config/#beneficios-de-esta-configuracion","title":"Beneficios de esta configuraci\u00f3n","text":"<ul> <li>Refuerza buenas pr\u00e1cticas en React y Hooks.</li> <li>Reduce errores comunes en tiempo de desarrollo.</li> <li>Mejora la experiencia de desarrollo con Fast Refresh.</li> <li>Mantiene el c\u00f3digo consistente y predecible en equipos de trabajo.</li> </ul>"},{"location":"proyecto/frontend/separado/eslint.config/#rol-dentro-de-la-arquitectura","title":"Rol dentro de la arquitectura","text":"<p>Este archivo act\u00faa como una pieza de control de calidad transversal, aplic\u00e1ndose a todo el c\u00f3digo fuente del frontend. No afecta el runtime de la aplicaci\u00f3n, pero es clave para:</p> <ul> <li>Mantenibilidad</li> <li>Escalabilidad</li> <li>Onboarding de nuevos desarrolladores</li> <li>Cumplimiento de est\u00e1ndares t\u00e9cnicos</li> </ul>"},{"location":"proyecto/frontend/separado/vercel/","title":"vercel.json","text":"<p>Este archivo define la configuraci\u00f3n de despliegue para la aplicaci\u00f3n en la plataforma Vercel. Su funci\u00f3n principal es controlar el comportamiento del enrutamiento cuando se accede a distintas rutas de la aplicaci\u00f3n desde el navegador.</p>"},{"location":"proyecto/frontend/separado/vercel/#contenido-del-archivo","title":"Contenido del archivo","text":"<pre><code>{\n  \"rewrites\": [\n    { \"source\": \"/(.*)\", \"destination\": \"/\" }\n  ]\n}\n</code></pre>"},{"location":"proyecto/frontend/separado/vercel/#descripcion-tecnica","title":"Descripci\u00f3n t\u00e9cnica","text":"<ul> <li> <p>rewrites: Permite redirigir internamente las solicitudes entrantes sin modificar la URL visible para el usuario.</p> </li> <li> <p>source: \"/(.*)\"</p> </li> <li> <p>Captura cualquier ruta solicitada en la aplicaci\u00f3n.</p> </li> <li> <p>Incluye rutas directas, rutas anidadas y recargas manuales del navegador.</p> </li> <li> <p>destination: \"/\"</p> </li> <li> <p>Redirige todas las solicitudes al archivo ra\u00edz de la aplicaci\u00f3n.</p> </li> <li>Generalmente corresponde al punto de entrada del frontend (por ejemplo, una aplicaci\u00f3n React con React Router).</li> </ul>"},{"location":"proyecto/frontend/separado/vercel/#proposito-dentro-de-la-aplicacion","title":"Prop\u00f3sito dentro de la aplicaci\u00f3n","text":"<p>Esta configuraci\u00f3n es fundamental para aplicaciones Single Page Application (SPA) que utilizan enrutamiento del lado del cliente.</p> <p>Permite que:</p> <ul> <li>Las rutas manejadas por React Router funcionen correctamente al refrescar la p\u00e1gina.</li> <li>El acceso directo a URLs como <code>/login</code>, <code>/notas</code>, <code>/usuarios</code>, etc., no genere errores 404 en producci\u00f3n.</li> <li>Vercel siempre entregue el mismo punto de entrada para que el enrutador del frontend determine qu\u00e9 vista renderizar.</li> </ul>"},{"location":"proyecto/frontend/separado/vercel/#impacto-en-produccion","title":"Impacto en producci\u00f3n","text":"<ul> <li>Evita errores de navegaci\u00f3n al recargar la p\u00e1gina.</li> <li>Garantiza compatibilidad total con rutas protegidas y p\u00fablicas.</li> <li>Centraliza el control de rutas exclusivamente en el frontend.</li> </ul>"},{"location":"proyecto/frontend/separado/vercel/#consideraciones","title":"Consideraciones","text":"<ul> <li>Este rewrite no afecta llamadas a APIs externas.</li> <li>En proyectos con backend separado, las rutas de API deben manejarse fuera de esta regla o mediante configuraciones adicionales.</li> </ul>"},{"location":"proyecto/frontend/separado/vercel/#resumen","title":"Resumen","text":"<p>El archivo <code>vercel.json</code> asegura que el enrutamiento de la aplicaci\u00f3n funcione correctamente en producci\u00f3n, delegando el control de las rutas al frontend y evitando errores al acceder directamente a URLs internas.</p>"},{"location":"proyecto/frontend/separado/vite.config/","title":"vite.config.js","text":""},{"location":"proyecto/frontend/separado/vite.config/#proposito-general","title":"Prop\u00f3sito general","text":"<p>Este archivo define la configuraci\u00f3n principal de Vite, el bundler y servidor de desarrollo utilizado en el proyecto. Centraliza las reglas relacionadas con el entorno de desarrollo, el proceso de build y la integraci\u00f3n con React.</p> <p>Su correcta configuraci\u00f3n garantiza un arranque r\u00e1pido en desarrollo, una compilaci\u00f3n optimizada para producci\u00f3n y compatibilidad con el ecosistema moderno de React.</p>"},{"location":"proyecto/frontend/separado/vite.config/#importaciones","title":"Importaciones","text":"<pre><code>import { defineConfig } from 'vite'\nimport react from '@vitejs/plugin-react-swc'\n</code></pre> <ul> <li>defineConfig: Funci\u00f3n helper provista por Vite que permite definir la configuraci\u00f3n con autocompletado y validaci\u00f3n de tipos.</li> <li> <p>@vitejs/plugin-react-swc: Plugin oficial para React que utiliza SWC como compilador.</p> </li> <li> <p>Mejora significativamente los tiempos de compilaci\u00f3n y recarga.</p> </li> <li>Soporta JSX, Fast Refresh y transformaciones modernas.</li> </ul>"},{"location":"proyecto/frontend/separado/vite.config/#exportacion-de-la-configuracion","title":"Exportaci\u00f3n de la configuraci\u00f3n","text":"<pre><code>export default defineConfig({\n  plugins: [react()],\n  server: {\n    port: 5173,\n  },\n  build: {\n    outDir: 'dist',\n  },\n})\n</code></pre> <p>La configuraci\u00f3n se exporta como un \u00fanico objeto, dividido en secciones claras.</p>"},{"location":"proyecto/frontend/separado/vite.config/#plugins","title":"Plugins","text":"<pre><code>plugins: [react()]\n</code></pre> <ul> <li>Registra el plugin de React dentro del pipeline de Vite.</li> <li> <p>Habilita:</p> </li> <li> <p>Transformaci\u00f3n de JSX.</p> </li> <li>Fast Refresh en desarrollo.</li> <li>Integraci\u00f3n correcta con herramientas de debugging.</li> </ul> <p>El uso de SWC permite una experiencia m\u00e1s r\u00e1pida en comparaci\u00f3n con Babel.</p>"},{"location":"proyecto/frontend/separado/vite.config/#configuracion-del-servidor-de-desarrollo","title":"Configuraci\u00f3n del servidor de desarrollo","text":"<pre><code>server: {\n  port: 5173,\n}\n</code></pre> <ul> <li>Define el puerto en el que se ejecuta el servidor de desarrollo.</li> <li>5173 es el puerto por defecto recomendado por Vite.</li> <li>Facilita consistencia entre entornos locales y documentaci\u00f3n interna.</li> </ul>"},{"location":"proyecto/frontend/separado/vite.config/#configuracion-de-build","title":"Configuraci\u00f3n de build","text":"<pre><code>build: {\n  outDir: 'dist',\n}\n</code></pre> <ul> <li>outDir especifica el directorio donde se generar\u00e1n los archivos compilados.</li> <li> <p>El valor <code>dist</code> es el est\u00e1ndar esperado por:</p> </li> <li> <p>Servicios de hosting (Vercel, Netlify, servidores est\u00e1ticos).</p> </li> <li>Pipelines de CI/CD.</li> </ul> <p>Esta configuraci\u00f3n asegura que el proyecto pueda desplegarse sin ajustes adicionales.</p>"},{"location":"proyecto/frontend/separado/vite.config/#resumen","title":"Resumen","text":"<p>Este archivo cumple un rol fundamental al:</p> <ul> <li>Integrar React de forma eficiente con Vite.</li> <li>Definir un entorno de desarrollo r\u00e1pido y predecible.</li> <li>Preparar el proyecto para despliegues en producci\u00f3n compatibles con hosting est\u00e1tico.</li> </ul>"},{"location":"proyecto/frontend/src/app/","title":"App.jsx","text":""},{"location":"proyecto/frontend/src/app/#proposito-del-archivo","title":"Prop\u00f3sito del archivo","text":"<p>Este archivo define el componente ra\u00edz de la aplicaci\u00f3n. Su responsabilidad principal es actuar como un contenedor neutro que delega completamente el renderizado de la interfaz a React Router, mediante el uso del componente <code>Outlet</code>.</p> <p>No contiene l\u00f3gica de negocio, estado ni presentaci\u00f3n visual. Su dise\u00f1o responde a una arquitectura basada en layouts y rutas anidadas.</p>"},{"location":"proyecto/frontend/src/app/#importaciones","title":"Importaciones","text":"<pre><code>import { Outlet } from 'react-router-dom';\n</code></pre> <ul> <li><code>Outlet</code> es un componente provisto por React Router.</li> <li>Su funci\u00f3n es renderizar din\u00e1micamente el componente correspondiente a la ruta hija activa.</li> <li>Permite separar la definici\u00f3n de rutas de la estructura visual de la aplicaci\u00f3n.</li> </ul>"},{"location":"proyecto/frontend/src/app/#definicion-del-componente","title":"Definici\u00f3n del componente","text":"<pre><code>function App() {\n  return (\n      &lt;Outlet /&gt;\n  )\n}\n</code></pre>"},{"location":"proyecto/frontend/src/app/#analisis-del-codigo","title":"An\u00e1lisis del c\u00f3digo","text":"<ul> <li><code>App</code> se define como un componente funcional puro.</li> <li> <p>No recibe <code>props</code> ni utiliza hooks, lo que indica que:</p> </li> <li> <p>No maneja estado</p> </li> <li>No controla efectos secundarios</li> <li>No impone estructura visual</li> </ul> <p>Esto es intencional y correcto para un componente ra\u00edz.</p>"},{"location":"proyecto/frontend/src/app/#uso-de-outlet","title":"Uso de <code>&lt;Outlet /&gt;</code>","text":"<p><code>Outlet</code> funciona como un marcador de posici\u00f3n donde React Router inyecta el componente asociado a la ruta actual.</p> <p>Ejemplo conceptual:</p> <pre><code>/\n\u251c\u2500\u2500 login        \u2192 AuthLayout \u2192 LoginPage\n\u251c\u2500\u2500 /            \u2192 AppLayout  \u2192 Dashboard\n\u2502   \u251c\u2500\u2500 notas    \u2192 NotasPage\n\u2502   \u2514\u2500\u2500 facturas \u2192 FacturasPage\n</code></pre> <p>En este esquema:</p> <ul> <li><code>App</code> no decide qu\u00e9 se muestra</li> <li>React Router decide qu\u00e9 componente renderizar dentro del <code>Outlet</code></li> </ul>"},{"location":"proyecto/frontend/src/app/#rol-dentro-de-la-arquitectura","title":"Rol dentro de la arquitectura","text":"<p>Este archivo cumple un rol clave dentro de una arquitectura moderna basada en:</p> <ul> <li>Layouts anidados</li> <li> <p>Separaci\u00f3n clara entre:</p> </li> <li> <p>Enrutamiento</p> </li> <li>Layouts</li> <li>Vistas</li> </ul> <p><code>App</code> act\u00faa como:</p> <ul> <li>Punto de entrada del \u00e1rbol de componentes</li> <li>Contenedor ra\u00edz del sistema de rutas</li> <li>Base sobre la cual se montan los distintos layouts (<code>AuthLayout</code>, <code>AppLayout</code>, etc.)</li> </ul>"},{"location":"proyecto/frontend/src/app/#ventajas-de-este-enfoque","title":"Ventajas de este enfoque","text":"<ul> <li>Alta escalabilidad del sistema de rutas</li> <li>C\u00f3digo limpio y predecible</li> <li>Facilidad para agregar nuevos layouts</li> <li>Evita l\u00f3gica innecesaria en el componente ra\u00edz</li> <li>Compatible con code splitting y lazy loading</li> </ul>"},{"location":"proyecto/frontend/src/app/#buenas-practicas-reflejadas","title":"Buenas pr\u00e1cticas reflejadas","text":"<ul> <li>Componente ra\u00edz minimalista</li> <li>Uso correcto de React Router v6+</li> <li>Delegaci\u00f3n total del renderizado a la configuraci\u00f3n de rutas</li> <li>Evita acoplar UI o l\u00f3gica global innecesaria</li> </ul>"},{"location":"proyecto/frontend/src/app/#resumen","title":"Resumen","text":"<p>Este archivo define un componente ra\u00edz intencionalmente simple, cuyo \u00fanico prop\u00f3sito es permitir que React Router gestione el renderizado de la aplicaci\u00f3n mediante rutas anidadas. Es una implementaci\u00f3n correcta, limpia y alineada con buenas pr\u00e1cticas para aplicaciones React de mediana y gran escala.</p>"},{"location":"proyecto/frontend/src/indexcss/","title":"index.css","text":""},{"location":"proyecto/frontend/src/indexcss/#proposito-del-archivo","title":"Prop\u00f3sito del archivo","text":"<p>Este archivo define estilos CSS globales que aseguran un comportamiento correcto del layout principal de la aplicaci\u00f3n y establecen las dimensiones necesarias para componentes que dependen expl\u00edcitamente del tama\u00f1o del contenedor, como los mapas renderizados con Leaflet.</p> <p>Su objetivo principal es:</p> <ul> <li>Garantizar que la aplicaci\u00f3n pueda ocupar el 100% del viewport.</li> <li>Evitar problemas de renderizado relacionados con alturas colapsadas.</li> <li>Asegurar que los mapas se visualicen correctamente dentro de la interfaz.</li> </ul>"},{"location":"proyecto/frontend/src/indexcss/#codigo","title":"C\u00f3digo","text":"<pre><code>html, body, #root {\n  height: 100%;\n  margin: 0;\n  padding: 0;\n}\n\n.leaflet-container {\n  height: 500px;\n  width: 100%;\n}\n</code></pre>"},{"location":"proyecto/frontend/src/indexcss/#explicacion-detallada","title":"Explicaci\u00f3n detallada","text":""},{"location":"proyecto/frontend/src/indexcss/#1-selector-html-body-root","title":"1. Selector <code>html, body, #root</code>","text":"<pre><code>html, body, #root {\n  height: 100%;\n  margin: 0;\n  padding: 0;\n}\n</code></pre>"},{"location":"proyecto/frontend/src/indexcss/#funcion","title":"Funci\u00f3n","text":"<p>Este bloque establece la base estructural del layout de la aplicaci\u00f3n React.</p>"},{"location":"proyecto/frontend/src/indexcss/#detalle-de-cada-propiedad","title":"Detalle de cada propiedad","text":"<ul> <li> <p><code>height: 100%</code>   Permite que el \u00e1rbol completo de la aplicaci\u00f3n pueda calcular alturas relativas correctamente. Esto es fundamental cuando se utilizan:</p> </li> <li> <p>Layouts flexibles</p> </li> <li>Componentes con <code>height: 100vh</code> o <code>flexGrow</code></li> <li> <p>Sidebars, AppBars o contenedores de pantalla completa</p> </li> <li> <p><code>margin: 0</code> y <code>padding: 0</code>   Elimina los m\u00e1rgenes y rellenos por defecto del navegador, evitando:</p> </li> <li> <p>Espacios no deseados alrededor de la aplicaci\u00f3n</p> </li> <li>Scrollbars innecesarios</li> <li>Desalineaciones visuales</li> </ul>"},{"location":"proyecto/frontend/src/indexcss/#importancia-en-aplicaciones-react","title":"Importancia en aplicaciones React","text":"<p>En aplicaciones montadas sobre un \u00fanico nodo (<code>#root</code>), este ajuste es imprescindible para que los layouts basados en Flexbox o Grid funcionen correctamente.</p>"},{"location":"proyecto/frontend/src/indexcss/#2-selector-leaflet-container","title":"2. Selector <code>.leaflet-container</code>","text":"<pre><code>.leaflet-container {\n  height: 500px;\n  width: 100%;\n}\n</code></pre>"},{"location":"proyecto/frontend/src/indexcss/#funcion_1","title":"Funci\u00f3n","text":"<p>Define expl\u00edcitamente el tama\u00f1o del contenedor donde se renderizan los mapas de Leaflet.</p>"},{"location":"proyecto/frontend/src/indexcss/#por-que-es-necesario","title":"Por qu\u00e9 es necesario","text":"<p>Leaflet no renderiza correctamente un mapa si su contenedor no tiene una altura definida. Sin este estilo:</p> <ul> <li>El mapa puede no mostrarse</li> <li>Puede aparecer colapsado con altura 0</li> <li>Puede generar errores visuales dif\u00edciles de depurar</li> </ul>"},{"location":"proyecto/frontend/src/indexcss/#detalle-de-las-propiedades","title":"Detalle de las propiedades","text":"<ul> <li> <p><code>height: 500px</code>   Establece una altura fija que garantiza la visualizaci\u00f3n del mapa. Este valor puede ajustarse seg\u00fan el contexto del layout (pantalla completa, modal, formulario, etc.).</p> </li> <li> <p><code>width: 100%</code>   Permite que el mapa se adapte horizontalmente al contenedor padre, manteniendo un dise\u00f1o responsivo.</p> </li> </ul>"},{"location":"proyecto/frontend/src/indexcss/#buenas-practicas-asociadas","title":"Buenas pr\u00e1cticas asociadas","text":"<ul> <li>Centralizar estos estilos en un archivo global evita duplicaci\u00f3n y errores visuales.</li> <li>Si se requiere mayor flexibilidad, la altura del contenedor puede manejarse din\u00e1micamente mediante clases adicionales o estilos inline.</li> <li>Este archivo debe cargarse una sola vez al inicio de la aplicaci\u00f3n.</li> </ul>"},{"location":"proyecto/frontend/src/indexcss/#resumen","title":"Resumen","text":"<p>Este archivo:</p> <ul> <li>Establece una base s\u00f3lida para el layout global de la aplicaci\u00f3n.</li> <li>Previene errores comunes de renderizado en React.</li> <li>Garantiza el correcto funcionamiento de mapas Leaflet.</li> <li>Aporta consistencia visual y estructural en toda la aplicaci\u00f3n.</li> </ul>"},{"location":"proyecto/frontend/src/main/","title":"main.jsx","text":""},{"location":"proyecto/frontend/src/main/#proposito-del-archivo","title":"Prop\u00f3sito del archivo","text":"<p>Este archivo representa el punto de entrada principal de la aplicaci\u00f3n React. Su responsabilidad es inicializar el \u00e1rbol de renderizado y componer todos los providers globales necesarios para el funcionamiento transversal de la aplicaci\u00f3n.</p> <p>Aqu\u00ed se integran y configuran los pilares de la arquitectura:</p> <ul> <li>Renderizado React</li> <li>Enrutamiento</li> <li>Estado global (Redux)</li> <li>Sistema de notificaciones</li> <li>Internacionalizaci\u00f3n de fechas</li> <li>Tema visual</li> <li>Manejo de CSRF</li> </ul> <p>No contiene l\u00f3gica de negocio ni UI propia; su funci\u00f3n es orquestar la infraestructura base.</p>"},{"location":"proyecto/frontend/src/main/#importaciones-clave","title":"Importaciones clave","text":"<pre><code>import { StrictMode } from 'react';\nimport { createRoot } from 'react-dom/client';\n</code></pre> <ul> <li><code>StrictMode</code>: habilita validaciones adicionales en desarrollo para detectar efectos secundarios, renderizados duplicados y APIs obsoletas.</li> <li><code>createRoot</code>: API moderna de React 18 para renderizado concurrente.</li> </ul> <pre><code>import { RouterProvider } from 'react-router-dom';\nimport { Provider } from 'react-redux';\n</code></pre> <ul> <li><code>RouterProvider</code>: conecta la aplicaci\u00f3n con el sistema de rutas definido externamente.</li> <li><code>Provider</code>: expone el store de Redux a toda la aplicaci\u00f3n.</li> </ul> <pre><code>import { SnackbarProvider } from 'notistack';\n</code></pre> <ul> <li>Proveedor global para la gesti\u00f3n de notificaciones tipo toast.</li> </ul> <pre><code>import { LocalizationProvider } from '@mui/x-date-pickers';\nimport { AdapterDateFns } from '@mui/x-date-pickers/AdapterDateFns';\nimport { es } from 'date-fns/locale';\n</code></pre> <ul> <li>Proporcionan soporte de fechas localizado (idioma espa\u00f1ol) para todos los DatePickers de MUI.</li> </ul>"},{"location":"proyecto/frontend/src/main/#configuracion-del-router","title":"Configuraci\u00f3n del router","text":"<pre><code>const router = getRoutes();\n</code></pre> <ul> <li>Obtiene la configuraci\u00f3n completa de rutas desde un m\u00f3dulo dedicado.</li> <li>Centraliza la definici\u00f3n de rutas, layouts y protecciones de navegaci\u00f3n.</li> </ul>"},{"location":"proyecto/frontend/src/main/#estructura-del-arbol-de-renderizado","title":"Estructura del \u00e1rbol de renderizado","text":"<pre><code>createRoot(document.getElementById('root')).render(\n  &lt;StrictMode&gt;\n    &lt;Provider store={store}&gt;\n      &lt;SnackbarProvider ...&gt;\n        &lt;LocalizationProvider ...&gt;\n          &lt;AppTheme&gt;\n            &lt;CSRFLoader /&gt;\n            &lt;RouterProvider router={router} /&gt;\n          &lt;/AppTheme&gt;\n        &lt;/LocalizationProvider&gt;\n      &lt;/SnackbarProvider&gt;\n    &lt;/Provider&gt;\n  &lt;/StrictMode&gt;\n);\n</code></pre>"},{"location":"proyecto/frontend/src/main/#1-strictmode","title":"1. StrictMode","text":"<ul> <li>Envuelve toda la aplicaci\u00f3n.</li> <li>Solo afecta al entorno de desarrollo.</li> </ul>"},{"location":"proyecto/frontend/src/main/#2-redux-provider","title":"2. Redux Provider","text":"<ul> <li>Inyecta el <code>store</code> global.</li> <li>Permite el uso de <code>useSelector</code> y <code>useDispatch</code> en cualquier componente.</li> </ul>"},{"location":"proyecto/frontend/src/main/#3-snackbarprovider","title":"3. SnackbarProvider","text":"<p>Configuraci\u00f3n:</p> <ul> <li><code>maxSnack</code>: l\u00edmite de notificaciones simult\u00e1neas.</li> <li><code>autoHideDuration</code>: duraci\u00f3n autom\u00e1tica.</li> <li><code>anchorOrigin</code>: posici\u00f3n en pantalla.</li> </ul> <p>Este proveedor permite mostrar mensajes de \u00e9xito, error o advertencia desde cualquier punto de la aplicaci\u00f3n.</p>"},{"location":"proyecto/frontend/src/main/#4-localizationprovider","title":"4. LocalizationProvider","text":"<ul> <li>Define <code>date-fns</code> como motor de fechas.</li> <li>Establece el idioma espa\u00f1ol para formatos y textos.</li> <li>Afecta globalmente a todos los componentes de fecha.</li> </ul>"},{"location":"proyecto/frontend/src/main/#5-apptheme","title":"5. AppTheme","text":"<ul> <li>Aplica el tema personalizado de MUI.</li> <li>Centraliza colores, tipograf\u00edas y estilos base.</li> </ul>"},{"location":"proyecto/frontend/src/main/#6-csrfloader","title":"6. CSRFLoader","text":"<ul> <li>Componente responsable de inicializar o validar el token CSRF.</li> <li>Garantiza que las peticiones protegidas puedan ejecutarse correctamente desde el inicio.</li> </ul>"},{"location":"proyecto/frontend/src/main/#7-routerprovider","title":"7. RouterProvider","text":"<ul> <li>Renderiza la aplicaci\u00f3n en funci\u00f3n de la ruta actual.</li> <li>Conecta layouts, p\u00e1ginas y rutas anidadas.</li> </ul>"},{"location":"proyecto/frontend/src/main/#responsabilidad-arquitectonica","title":"Responsabilidad arquitect\u00f3nica","text":"<p>Este archivo:</p> <ul> <li>Define el orden correcto de inicializaci\u00f3n de los proveedores.</li> <li>Garantiza consistencia global en estado, tema, fechas y notificaciones.</li> <li>Mantiene separada la infraestructura de la l\u00f3gica de negocio.</li> </ul> <p>Cualquier cambio transversal (tema, idioma, estado global, routing) debe integrarse en este punto.</p>"},{"location":"proyecto/frontend/src/main/#buenas-practicas-reflejadas","title":"Buenas pr\u00e1cticas reflejadas","text":"<ul> <li>Uso de React 18 (<code>createRoot</code>).</li> <li>Separaci\u00f3n clara entre configuraci\u00f3n y l\u00f3gica de negocio.</li> <li>Providers encapsulados y jerarquizados correctamente.</li> <li>Preparado para escalabilidad y mantenimiento a largo plazo.</li> </ul>"},{"location":"proyecto/frontend/src/main/#conclusion","title":"Conclusi\u00f3n","text":"<p>Este archivo act\u00faa como el bootstrap de la aplicaci\u00f3n. Su dise\u00f1o limpio y declarativo permite entender r\u00e1pidamente c\u00f3mo se compone el entorno global y facilita la incorporaci\u00f3n de nuevas capas transversales sin afectar el resto del sistema.</p>"},{"location":"proyecto/frontend/src/store/","title":"store.js","text":""},{"location":"proyecto/frontend/src/store/#proposito-del-archivo","title":"Prop\u00f3sito del archivo","text":"<p>Este archivo define y configura el store global de Redux utilizando Redux Toolkit. El store es el punto central donde se mantiene el estado de la aplicaci\u00f3n y desde el cual los componentes acceden y modifican dicho estado de forma predecible.</p> <p>En este caso, el store gestiona el estado de autenticaci\u00f3n y establece una configuraci\u00f3n personalizada del middleware para evitar advertencias innecesarias durante el desarrollo.</p>"},{"location":"proyecto/frontend/src/store/#importaciones","title":"Importaciones","text":"<pre><code>import { configureStore } from '@reduxjs/toolkit';\nimport authReducer from './auth/authSlice';\n</code></pre> <ul> <li> <p><code>configureStore</code>: funci\u00f3n provista por Redux Toolkit que simplifica la creaci\u00f3n del store, integrando autom\u00e1ticamente buenas pr\u00e1cticas como:</p> </li> <li> <p>Redux DevTools</p> </li> <li>Middleware <code>redux-thunk</code></li> <li> <p>Configuraci\u00f3n segura por defecto</p> </li> <li> <p><code>authReducer</code>: reducer encargado de manejar todo el estado relacionado con autenticaci\u00f3n (usuario, loading, errores, sesi\u00f3n).</p> </li> </ul>"},{"location":"proyecto/frontend/src/store/#creacion-del-store","title":"Creaci\u00f3n del store","text":"<pre><code>const store = configureStore({\n  reducer: {\n    auth: authReducer,\n  },\n</code></pre>"},{"location":"proyecto/frontend/src/store/#estructura-del-estado-global","title":"Estructura del estado global","text":"<p>La propiedad <code>reducer</code> define la forma del estado global. En este caso:</p> <pre><code>state = {\n  auth: {\n    user,\n    loading,\n    error,\n    isAuthenticated\n  }\n}\n</code></pre> <p>Cada clave del objeto (<code>auth</code>) representa un slice del estado y queda accesible desde los componentes mediante <code>useSelector</code>.</p>"},{"location":"proyecto/frontend/src/store/#configuracion-del-middleware","title":"Configuraci\u00f3n del middleware","text":"<pre><code>middleware: (getDefaultMiddleware) =&gt;\n  getDefaultMiddleware({\n    serializableCheck: {\n      ignoredPaths: ['meta.config.transformRequest'],\n    },\n  }),\n</code></pre>"},{"location":"proyecto/frontend/src/store/#que-hace-getdefaultmiddleware","title":"\u00bfQu\u00e9 hace <code>getDefaultMiddleware</code>?","text":"<p>Redux Toolkit incluye por defecto una serie de middlewares, entre ellos:</p> <ul> <li><code>redux-thunk</code> para l\u00f3gica as\u00edncrona</li> <li><code>serializableStateInvariantMiddleware</code> para advertir sobre datos no serializables</li> </ul>"},{"location":"proyecto/frontend/src/store/#ajuste-del-serializablecheck","title":"Ajuste del <code>serializableCheck</code>","text":"<ul> <li><code>serializableCheck</code> verifica que el estado y las acciones sean serializables.</li> <li>En aplicaciones que usan librer\u00edas externas (como Axios), pueden existir propiedades internas no serializables.</li> </ul> <pre><code>ignoredPaths: ['meta.config.transformRequest']\n</code></pre> <p>Esta configuraci\u00f3n indica a Redux que ignore esa ruta espec\u00edfica, evitando warnings innecesarios sin comprometer la integridad del estado.</p>"},{"location":"proyecto/frontend/src/store/#exportacion-del-store","title":"Exportaci\u00f3n del store","text":"<pre><code>export default store;\n</code></pre> <p>El store se exporta para ser utilizado en el punto de entrada de la aplicaci\u00f3n, normalmente envolviendo la app con:</p> <pre><code>&lt;Provider store={store}&gt;\n  &lt;App /&gt;\n&lt;/Provider&gt;\n</code></pre> <p>Esto permite que cualquier componente acceda al estado global y despache acciones.</p>"},{"location":"proyecto/frontend/src/store/#beneficios-de-esta-configuracion","title":"Beneficios de esta configuraci\u00f3n","text":"<ul> <li>Centralizaci\u00f3n del estado global</li> <li>Integraci\u00f3n autom\u00e1tica con Redux DevTools</li> <li>Manejo claro y escalable de slices</li> <li>Configuraci\u00f3n segura del middleware</li> <li>Preparado para crecer con nuevos reducers</li> </ul>"},{"location":"proyecto/frontend/src/store/#observacion-final","title":"Observaci\u00f3n final","text":"<p>Este archivo act\u00faa como la base de la arquitectura de estado de la aplicaci\u00f3n. Cualquier nuevo m\u00f3dulo que requiera estado global debe integrarse aqu\u00ed mediante un nuevo reducer, manteniendo una estructura clara y mantenible.</p>"},{"location":"proyecto/frontend/src/assets/assets/","title":"\ud83d\udcc1 Assets","text":"<p>La carpeta assets agrupa todos los recursos est\u00e1ticos utilizados por el proyecto. Estos archivos no contienen l\u00f3gica de negocio, pero son esenciales para la presentaci\u00f3n visual, la experiencia de usuario y la configuraci\u00f3n estructural basada en datos.</p> <p>Su correcta organizaci\u00f3n permite desacoplar la interfaz del c\u00f3digo funcional, mejorar la mantenibilidad y facilitar cambios visuales sin impactar la l\u00f3gica de la aplicaci\u00f3n.</p>"},{"location":"proyecto/frontend/src/assets/assets/#objetivos-de-la-carpeta-assets","title":"\ud83c\udfaf Objetivos de la carpeta assets","text":"<ul> <li>Centralizar recursos reutilizables.</li> <li>Evitar duplicaci\u00f3n de archivos est\u00e1ticos.</li> <li>Mantener el c\u00f3digo limpio y enfocado en l\u00f3gica.</li> <li>Facilitar cambios visuales sin modificar componentes.</li> <li>Permitir versionado y control de recursos gr\u00e1ficos y datos.</li> </ul>"},{"location":"proyecto/frontend/src/assets/assets/#estructura-general","title":"\ud83d\udcc2 Estructura General","text":"<pre><code>assets/\n\u251c\u2500\u2500 icons/\n\u2502   \u2514\u2500\u2500 *.svg | *.png\n\u251c\u2500\u2500 images/\n\u2502   \u2514\u2500\u2500 *.png | *.jpg | *.webp\n\u251c\u2500\u2500 maps/\n\u2502   \u2514\u2500\u2500 *.json\n</code></pre> <p>Cada subcarpeta tiene una responsabilidad clara y bien definida.</p>"},{"location":"proyecto/frontend/src/assets/assets/#images","title":"\ud83d\uddbc\ufe0f images/","text":""},{"location":"proyecto/frontend/src/assets/assets/#proposito","title":"\ud83d\udccc Prop\u00f3sito","text":"<p>Contiene im\u00e1genes utilizadas en la interfaz del usuario, como:</p> <ul> <li>Logos de la aplicaci\u00f3n</li> <li>Im\u00e1genes decorativas o de fondo</li> <li>Recursos visuales para pantallas espec\u00edficas</li> </ul> <p>Estas im\u00e1genes se consideran est\u00e1ticas y no cambian din\u00e1micamente durante la ejecuci\u00f3n.</p>"},{"location":"proyecto/frontend/src/assets/assets/#logica-de-uso","title":"\ud83e\udde0 L\u00f3gica de uso","text":"<ul> <li>Se importan directamente en componentes React.</li> <li>El bundler (Vite / Webpack) se encarga de optimizar y versionar los archivos.</li> <li>No contienen l\u00f3gica ni metadatos asociados.</li> </ul> <pre><code>import logo from '@/assets/images/logo.png';\n\n&lt;img src={logo} alt=\"Logo\" /&gt;;\n</code></pre>"},{"location":"proyecto/frontend/src/assets/assets/#buenas-practicas","title":"\u2705 Buenas pr\u00e1cticas","text":"<ul> <li>Usar nombres descriptivos y consistentes.</li> <li>Preferir formatos optimizados (<code>webp</code>, <code>svg</code>).</li> <li>Evitar im\u00e1genes innecesariamente grandes.</li> </ul>"},{"location":"proyecto/frontend/src/assets/assets/#icons","title":"\ud83c\udfa8 icons/","text":""},{"location":"proyecto/frontend/src/assets/assets/#proposito_1","title":"\ud83d\udccc Prop\u00f3sito","text":"<p>Almacena \u00edconos personalizados del proyecto que no provienen de librer\u00edas externas (por ejemplo, \u00edconos propios que complementan MUI Icons).</p> <p>Se utilizan para:</p> <ul> <li>Botones de acci\u00f3n</li> <li>Indicadores visuales</li> <li>Elementos decorativos espec\u00edficos del dominio</li> </ul>"},{"location":"proyecto/frontend/src/assets/assets/#logica-de-uso_1","title":"\ud83e\udde0 L\u00f3gica de uso","text":"<ul> <li>Se importan como recursos SVG o im\u00e1genes.</li> <li>Permiten independencia visual frente a librer\u00edas externas.</li> <li>Facilitan la personalizaci\u00f3n visual del sistema.</li> </ul> <pre><code>import EditIcon from '@/assets/icons/edit.svg';\n\n&lt;img src={EditIcon} alt=\"Editar\" /&gt;;\n</code></pre>"},{"location":"proyecto/frontend/src/assets/assets/#por-que-no-mezclar-con-mui-icons","title":"\ud83d\udd0d \u00bfPor qu\u00e9 no mezclar con MUI Icons?","text":"<ul> <li>MUI Icons cubre \u00edconos gen\u00e9ricos.</li> <li>Los \u00edconos en assets representan branding o dominio espec\u00edfico.</li> <li>Mantiene separaci\u00f3n clara entre dependencias externas y recursos propios.</li> </ul>"},{"location":"proyecto/frontend/src/assets/assets/#maps-json","title":"\ud83d\uddfa\ufe0f maps/ (JSON)","text":""},{"location":"proyecto/frontend/src/assets/assets/#proposito_2","title":"\ud83d\udccc Prop\u00f3sito","text":"<p>Contiene archivos JSON que representan mapas de datos est\u00e1ticos utilizados por la aplicaci\u00f3n. Estos archivos funcionan como configuraci\u00f3n estructural, no como datos din\u00e1micos provenientes de una API.</p> <p>Ejemplos de uso:</p> <ul> <li>Mapeos de c\u00f3digos a etiquetas</li> <li>Configuraci\u00f3n de columnas (DataGrid)</li> <li>Relaciones clave \u2192 valor</li> <li>Cat\u00e1logos est\u00e1ticos</li> </ul>"},{"location":"proyecto/frontend/src/assets/assets/#logica-detras-del-uso-de-json","title":"\ud83e\udde0 L\u00f3gica detr\u00e1s del uso de JSON","text":"<ul> <li>El JSON act\u00faa como una fuente de verdad est\u00e1tica.</li> <li>Permite modificar comportamientos sin tocar c\u00f3digo.</li> <li>Facilita lectura, versionado y revisi\u00f3n.</li> <li>Evita hardcodear estructuras en componentes.</li> </ul> <pre><code>{\n  \"A\": \"Activo\",\n  \"I\": \"Inactivo\"\n}\n</code></pre> <pre><code>import estadosMap from '@/assets/maps/estados.json';\n\nconst label = estadosMap[estadoCodigo];\n</code></pre>"},{"location":"proyecto/frontend/src/assets/assets/#relacion-con-la-arquitectura-del-proyecto","title":"\ud83e\udde9 Relaci\u00f3n con la Arquitectura del Proyecto","text":"<ul> <li>assets no depende de ning\u00fan m\u00f3dulo.</li> <li> <p>Es consumido por:</p> </li> <li> <p>Componentes UI</p> </li> <li>Layouts</li> <li>Configuraci\u00f3n visual</li> <li>No debe importar c\u00f3digo JS/TS.</li> </ul> <p>Esto garantiza una arquitectura unidireccional y limpia.</p>"},{"location":"proyecto/frontend/src/assets/assets/#que-no-debe-ir-en-assets","title":"\u26a0\ufe0f Qu\u00e9 NO debe ir en assets","text":"<ul> <li>L\u00f3gica de negocio</li> <li>Funciones JS</li> <li>Hooks personalizados</li> <li>Datos din\u00e1micos (API)</li> </ul> <p>Si un archivo requiere l\u00f3gica o mutaci\u00f3n, no pertenece a assets.</p>"},{"location":"proyecto/frontend/src/assets/assets/#beneficios-de-esta-separacion","title":"\u2705 Beneficios de esta separaci\u00f3n","text":"<ul> <li>C\u00f3digo m\u00e1s limpio y legible</li> <li>Escalabilidad del proyecto</li> <li>Cambios visuales sin riesgo funcional</li> <li>Mejor colaboraci\u00f3n en equipo</li> <li>Arquitectura alineada a buenas pr\u00e1cticas frontend</li> </ul>"},{"location":"proyecto/frontend/src/assets/assets/#conclusion","title":"\ud83d\udccc Conclusi\u00f3n","text":"<p>La carpeta assets act\u00faa como el repositorio central de recursos est\u00e1ticos del proyecto. Su uso correcto mejora la mantenibilidad, reduce acoplamiento y refuerza una arquitectura frontend profesional y escalable.</p>"},{"location":"proyecto/frontend/src/auth/authSlice/","title":"authSlice.js","text":""},{"location":"proyecto/frontend/src/auth/authSlice/#proposito-del-archivo","title":"Prop\u00f3sito del archivo","text":"<p>Este archivo define el slice de autenticaci\u00f3n de la aplicaci\u00f3n utilizando Redux Toolkit. Centraliza el estado relacionado con la sesi\u00f3n del usuario, el ciclo de vida de la autenticaci\u00f3n y la gesti\u00f3n de errores asociados a procesos de login, obtenci\u00f3n del usuario autenticado y cierre de sesi\u00f3n.</p> <p>Su objetivo principal es ofrecer una fuente \u00fanica de verdad para el estado de autenticaci\u00f3n, desacoplando la l\u00f3gica de negocio del manejo de estado de los componentes de UI.</p>"},{"location":"proyecto/frontend/src/auth/authSlice/#estado-inicial-initialstate","title":"Estado inicial (<code>initialState</code>)","text":"<pre><code>const initialState = {\n  user: null,\n  loading: false,\n  error: null,\n  isAuthenticated: false,\n};\n</code></pre> <p>Cada propiedad cumple un rol espec\u00edfico:</p> <ul> <li>user: almacena la informaci\u00f3n del usuario autenticado. Es <code>null</code> cuando no existe sesi\u00f3n v\u00e1lida.</li> <li>loading: indica si existe una operaci\u00f3n de autenticaci\u00f3n en curso (login, fetch user).</li> <li>error: contiene el mensaje de error resultante de operaciones fallidas.</li> <li>isAuthenticated: bandera expl\u00edcita que indica si la sesi\u00f3n es v\u00e1lida.</li> </ul> <p>La separaci\u00f3n entre <code>user</code> e <code>isAuthenticated</code> permite manejar estados intermedios (por ejemplo, sesi\u00f3n v\u00e1lida pero usuario a\u00fan no cargado).</p>"},{"location":"proyecto/frontend/src/auth/authSlice/#creacion-del-slice-createslice","title":"Creaci\u00f3n del slice (<code>createSlice</code>)","text":"<pre><code>const authSlice = createSlice({\n  name: 'auth',\n  initialState,\n  reducers: { ... },\n  extraReducers: (builder) =&gt; { ... }\n});\n</code></pre> <p>Redux Toolkit permite definir en un solo lugar:</p> <ul> <li>Nombre del slice</li> <li>Estado inicial</li> <li>Reducers s\u00edncronos</li> <li>Manejo de acciones as\u00edncronas (thunks)</li> </ul> <p>Esto reduce el boilerplate y mejora la legibilidad del flujo de estado.</p>"},{"location":"proyecto/frontend/src/auth/authSlice/#reducers-sincronos","title":"Reducers s\u00edncronos","text":""},{"location":"proyecto/frontend/src/auth/authSlice/#clearerror","title":"<code>clearError</code>","text":"<pre><code>clearError: (state) =&gt; {\n  state.error = null;\n}\n</code></pre> <p>Restablece el estado de error. Se utiliza normalmente cuando se desea limpiar mensajes de error antes de un nuevo intento de autenticaci\u00f3n o al cambiar de vista.</p>"},{"location":"proyecto/frontend/src/auth/authSlice/#clearstore","title":"<code>clearStore</code>","text":"<pre><code>clearStore: () =&gt; initialState,\n</code></pre> <p>Restablece completamente el estado del slice a su valor inicial. Es \u00fatil en escenarios como:</p> <ul> <li>Limpieza global del store</li> <li>Logout forzado</li> <li>Reinicio de la aplicaci\u00f3n</li> </ul> <p>Al devolver directamente <code>initialState</code>, se garantiza que no queden residuos de estado previo.</p>"},{"location":"proyecto/frontend/src/auth/authSlice/#manejo-de-acciones-asincronas-extrareducers","title":"Manejo de acciones as\u00edncronas (<code>extraReducers</code>)","text":"<p>Este bloque gestiona el ciclo de vida de los thunks de autenticaci\u00f3n definidos externamente.</p> <pre><code>import { login, fetchUserThunk, logout } from './authThunk';\n</code></pre> <p>Cada thunk genera autom\u00e1ticamente tres estados: <code>pending</code>, <code>fulfilled</code> y <code>rejected</code>.</p>"},{"location":"proyecto/frontend/src/auth/authSlice/#login","title":"Login","text":""},{"location":"proyecto/frontend/src/auth/authSlice/#loginpending","title":"<code>login.pending</code>","text":"<pre><code>state.loading = true;\nstate.error = null;\n</code></pre> <p>Indica que el proceso de autenticaci\u00f3n ha comenzado. Se limpia cualquier error previo para evitar inconsistencias visuales.</p>"},{"location":"proyecto/frontend/src/auth/authSlice/#loginfulfilled","title":"<code>login.fulfilled</code>","text":"<pre><code>state.loading = false;\nstate.isAuthenticated = true;\n</code></pre> <p>Marca la sesi\u00f3n como autenticada. En este punto a\u00fan no se asigna el usuario, ya que normalmente este se obtiene mediante un thunk separado.</p>"},{"location":"proyecto/frontend/src/auth/authSlice/#loginrejected","title":"<code>login.rejected</code>","text":"<pre><code>state.loading = false;\nstate.error = action.payload?.detail || 'Error desconocido';\n</code></pre> <p>Finaliza el estado de carga y almacena el mensaje de error. Se prioriza el mensaje entregado por el backend, con un fallback gen\u00e9rico.</p>"},{"location":"proyecto/frontend/src/auth/authSlice/#obtencion-del-usuario-autenticado-fetchuserthunk","title":"Obtenci\u00f3n del usuario autenticado (<code>fetchUserThunk</code>)","text":""},{"location":"proyecto/frontend/src/auth/authSlice/#fetchuserthunkpending","title":"<code>fetchUserThunk.pending</code>","text":"<pre><code>state.loading = true;\n</code></pre> <p>Indica que se est\u00e1 validando o recuperando la sesi\u00f3n actual.</p>"},{"location":"proyecto/frontend/src/auth/authSlice/#fetchuserthunkfulfilled","title":"<code>fetchUserThunk.fulfilled</code>","text":"<pre><code>state.loading = false;\nstate.user = action.payload;\nstate.isAuthenticated = true;\n</code></pre> <p>Actualiza el estado con la informaci\u00f3n del usuario y confirma que la sesi\u00f3n es v\u00e1lida.</p>"},{"location":"proyecto/frontend/src/auth/authSlice/#fetchuserthunkrejected","title":"<code>fetchUserThunk.rejected</code>","text":"<pre><code>state.loading = false;\nstate.isAuthenticated = false;\nstate.user = null;\n</code></pre> <p>Se ejecuta cuando el token no es v\u00e1lido o la sesi\u00f3n ha expirado. El estado vuelve a una condici\u00f3n no autenticada.</p>"},{"location":"proyecto/frontend/src/auth/authSlice/#logout","title":"Logout","text":""},{"location":"proyecto/frontend/src/auth/authSlice/#logoutfulfilled","title":"<code>logout.fulfilled</code>","text":"<pre><code>state.user = null;\nstate.isAuthenticated = false;\n</code></pre> <p>Elimina la informaci\u00f3n del usuario y marca la sesi\u00f3n como cerrada. El estado de carga no se utiliza aqu\u00ed porque el efecto principal es inmediato en el frontend.</p>"},{"location":"proyecto/frontend/src/auth/authSlice/#acciones-exportadas","title":"Acciones exportadas","text":"<pre><code>export const { clearError, clearStore } = authSlice.actions;\n</code></pre> <p>Estas acciones pueden ser utilizadas directamente desde componentes o middlewares para controlar el estado sin depender de thunks.</p>"},{"location":"proyecto/frontend/src/auth/authSlice/#reducer-exportado","title":"Reducer exportado","text":"<pre><code>export default authSlice.reducer;\n</code></pre> <p>El reducer es el punto de integraci\u00f3n con el store global de Redux.</p>"},{"location":"proyecto/frontend/src/auth/authSlice/#resumen-tecnico","title":"Resumen t\u00e9cnico","text":"<p>Este slice:</p> <ul> <li>Centraliza el estado de autenticaci\u00f3n</li> <li>Maneja de forma expl\u00edcita estados de carga, error y sesi\u00f3n</li> <li>Se integra limpiamente con thunks as\u00edncronos</li> <li>Evita l\u00f3gica de autenticaci\u00f3n dispersa en los componentes</li> </ul>"},{"location":"proyecto/frontend/src/auth/authThunk/","title":"authThunks.js","text":"<p>Este archivo concentra toda la l\u00f3gica as\u00edncrona de autenticaci\u00f3n de la aplicaci\u00f3n utilizando <code>createAsyncThunk</code> de Redux Toolkit. Su objetivo principal es comunicarse con la API, manejar errores de forma controlada y exponer resultados claros al <code>authSlice</code>, manteniendo una separaci\u00f3n estricta entre l\u00f3gica de red y manejo de estado.</p>"},{"location":"proyecto/frontend/src/auth/authThunk/#importaciones","title":"Importaciones","text":"<pre><code>import { createAsyncThunk } from '@reduxjs/toolkit';\nimport { api } from '../utils/api';\n</code></pre> <ul> <li><code>createAsyncThunk</code>: utilidad de Redux Toolkit que simplifica la creaci\u00f3n de acciones as\u00edncronas y genera autom\u00e1ticamente los estados <code>pending</code>, <code>fulfilled</code> y <code>rejected</code>.</li> <li><code>api</code>: instancia centralizada (normalmente Axios) encargada de la configuraci\u00f3n base de las peticiones HTTP (baseURL, headers, interceptores, tokens, etc.).</li> </ul>"},{"location":"proyecto/frontend/src/auth/authThunk/#thunk-login","title":"Thunk: <code>login</code>","text":"<pre><code>export const login = createAsyncThunk(\n  'auth/login',\n  async (credentials, thunkAPI) =&gt; {\n    try {\n      const res = await api.post('/token/', credentials);\n      return res.data.message;\n    } catch (error) {\n      const message = error.response?.data?.detail || 'Error de login';\n      return thunkAPI.rejectWithValue({ detail: message });\n    }\n  }\n);\n</code></pre>"},{"location":"proyecto/frontend/src/auth/authThunk/#responsabilidad","title":"Responsabilidad","text":"<p>Gestionar el proceso de autenticaci\u00f3n enviando las credenciales al backend y reportar el resultado al store.</p>"},{"location":"proyecto/frontend/src/auth/authThunk/#flujo-de-ejecucion","title":"Flujo de ejecuci\u00f3n","text":"<ol> <li> <p>Entrada de datos <code>credentials</code> contiene las credenciales del usuario (por ejemplo, <code>username</code> y <code>password</code>).</p> </li> <li> <p>Solicitud HTTP    Se realiza un <code>POST</code> al endpoint <code>/token/</code>, que valida las credenciales.</p> </li> <li> <p>Resultado exitoso</p> </li> </ol> <pre><code>return res.data.message;\n</code></pre> <p>El valor retornado ser\u00e1 recibido por el reducer en el caso <code>fulfilled</code>.</p> <ol> <li>Manejo de error</li> </ol> <pre><code>return thunkAPI.rejectWithValue({ detail: message });\n</code></pre> <ul> <li>Permite propagar un error controlado.</li> <li>Evita lanzar excepciones no manejadas.</li> <li>Facilita mostrar mensajes de error coherentes en la UI.</li> </ul>"},{"location":"proyecto/frontend/src/auth/authThunk/#thunk-fetchuserthunk","title":"Thunk: <code>fetchUserThunk</code>","text":"<pre><code>export const fetchUserThunk = createAsyncThunk(\n  'auth/fetchUserThunk',\n  async (_, thunkAPI) =&gt; {\n\n    if (window.location.pathname === '/login') {\n      return;\n    }\n\n    try {\n      const res = await api.get('/usuario/actual/');\n      return res.data;\n    } catch (error) {\n      console.error(error);\n      return thunkAPI.rejectWithValue({ detail: 'Usuario no autenticado' });\n    }\n  }\n);\n</code></pre>"},{"location":"proyecto/frontend/src/auth/authThunk/#responsabilidad_1","title":"Responsabilidad","text":"<p>Obtener la informaci\u00f3n del usuario actualmente autenticado y sincronizarla con el estado global.</p>"},{"location":"proyecto/frontend/src/auth/authThunk/#flujo-de-ejecucion_1","title":"Flujo de ejecuci\u00f3n","text":"<ol> <li>Condici\u00f3n preventiva</li> </ol> <pre><code>if (window.location.pathname === '/login') return;\n</code></pre> <p>Evita realizar la llamada cuando el usuario se encuentra en la pantalla de login.</p> <ol> <li> <p>Solicitud protegida    Se consulta el endpoint <code>/usuario/actual/</code>, el cual depende de un token o sesi\u00f3n v\u00e1lida.</p> </li> <li> <p>Resultado exitoso</p> </li> </ol> <pre><code>return res.data;\n</code></pre> <p>La informaci\u00f3n del usuario se almacena posteriormente en <code>state.user</code>.</p> <ol> <li>Error de autenticaci\u00f3n</li> </ol> <pre><code>rejectWithValue({ detail: 'Usuario no autenticado' })\n</code></pre> <p>Permite al slice limpiar el estado de sesi\u00f3n.</p>"},{"location":"proyecto/frontend/src/auth/authThunk/#thunk-logout","title":"Thunk: <code>logout</code>","text":"<pre><code>export const logout = createAsyncThunk(\n  'auth/logout',\n  async (_, thunkAPI) =&gt; {\n    try {\n      await api.post('/usuario/logout/');\n      return true;\n    } catch (error) {\n      console.error(error);\n      return thunkAPI.rejectWithValue({ detail: 'Error al cerrar sesi\u00f3n' });\n    }\n  }\n);\n</code></pre>"},{"location":"proyecto/frontend/src/auth/authThunk/#responsabilidad_2","title":"Responsabilidad","text":"<p>Cerrar la sesi\u00f3n del usuario tanto a nivel de backend como de estado global.</p>"},{"location":"proyecto/frontend/src/auth/authThunk/#flujo-de-ejecucion_2","title":"Flujo de ejecuci\u00f3n","text":"<ol> <li> <p>Solicitud de cierre de sesi\u00f3n    Se env\u00eda un <code>POST</code> al endpoint <code>/usuario/logout/</code>.</p> </li> <li> <p>Resultado exitoso</p> </li> </ol> <pre><code>return true;\n</code></pre> <p>El valor no es relevante; el reducer solo necesita saber que la acci\u00f3n se complet\u00f3 correctamente.</p> <ol> <li>Error    Se propaga un error controlado mediante <code>rejectWithValue</code>.</li> </ol>"},{"location":"proyecto/frontend/src/auth/authThunk/#integracion-con-authslice","title":"Integraci\u00f3n con <code>authSlice</code>","text":"<p>Estos thunks est\u00e1n dise\u00f1ados para ser consumidos por el <code>authSlice</code> mediante <code>extraReducers</code>, permitiendo:</p> <ul> <li>Control centralizado del estado de autenticaci\u00f3n</li> <li>Manejo consistente de estados <code>loading</code>, <code>error</code> e <code>isAuthenticated</code></li> <li>Separaci\u00f3n clara entre l\u00f3gica as\u00edncrona y reducers</li> </ul>"},{"location":"proyecto/frontend/src/auth/authThunk/#conclusion","title":"Conclusi\u00f3n","text":"<p>Este archivo act\u00faa como la capa de orquestaci\u00f3n de autenticaci\u00f3n, garantizando:</p> <ul> <li>C\u00f3digo predecible y mantenible</li> <li>Manejo de errores uniforme</li> <li>Escalabilidad del sistema de autenticaci\u00f3n</li> </ul>"},{"location":"proyecto/frontend/src/components/common/actionButton/","title":"components/common","text":"<p>La carpeta components/common contiene componentes reutilizables, desacoplados del dominio, dise\u00f1ados para encapsular patrones frecuentes de interacci\u00f3n, UI y efectos colaterales.</p> <p>A diferencia de las p\u00e1ginas o componentes de negocio, estos archivos se enfocan en c\u00f3mo se ejecuta una acci\u00f3n o se interact\u00faa con el usuario, no en qu\u00e9 se est\u00e1 haciendo a nivel funcional.</p>"},{"location":"proyecto/frontend/src/components/common/actionButton/#rol-arquitectonico","title":"Rol Arquitect\u00f3nico","text":"<ul> <li>Abstraer patrones repetidos</li> <li>Centralizar l\u00f3gica transversal</li> <li>Reducir complejidad en p\u00e1ginas</li> <li>Mantener consistencia visual y de comportamiento</li> </ul> <p>Estos componentes suelen ser usados por pages, layouts o formularios, pero no dependen de ellos.</p>"},{"location":"proyecto/frontend/src/components/common/actionButton/#actionbutton","title":"ActionButton","text":""},{"location":"proyecto/frontend/src/components/common/actionButton/#que-es","title":"Qu\u00e9 es","text":"<p><code>ActionButton</code> es un bot\u00f3n gen\u00e9rico para ejecutar acciones as\u00edncronas, incorporando autom\u00e1ticamente:</p> <ul> <li>Estado de carga</li> <li>Manejo de errores</li> <li>Feedback visual</li> <li>Comportamiento responsive</li> </ul> <p>El componente no conoce la l\u00f3gica de negocio: solo ejecuta una funci\u00f3n y maneja su ciclo de vida.</p>"},{"location":"proyecto/frontend/src/components/common/actionButton/#props-del-componente","title":"Props del componente","text":"<pre><code>action        // Funci\u00f3n async que ejecuta la acci\u00f3n\nlabel         // Texto del bot\u00f3n\nonSuccess     // Callback opcional tras \u00e9xito\nicon          // \u00cdcono MUI\nvariant       // Variante del bot\u00f3n\ncolor         // Color del bot\u00f3n\nfullWidth     // Ocupa todo el ancho\nsx            // Estilos adicionales\ntooltip       // Texto para tooltip en m\u00f3vil\n</code></pre>"},{"location":"proyecto/frontend/src/components/common/actionButton/#analisis-del-codigo-paso-a-paso","title":"An\u00e1lisis del C\u00f3digo Paso a Paso","text":""},{"location":"proyecto/frontend/src/components/common/actionButton/#1-estado-de-carga","title":"1\ufe0f\u20e3 Estado de carga","text":"<pre><code>const [loading, setLoading] = useState(false);\n</code></pre> <ul> <li>Controla si la acci\u00f3n est\u00e1 en curso</li> <li> <p>Se usa para:</p> </li> <li> <p>Deshabilitar el bot\u00f3n</p> </li> <li>Mostrar spinner</li> <li>Evitar m\u00faltiples ejecuciones</li> </ul>"},{"location":"proyecto/frontend/src/components/common/actionButton/#2-integracion-con-snackbar","title":"2\ufe0f\u20e3 Integraci\u00f3n con Snackbar","text":"<pre><code>const { enqueueSnackbar } = useSnackbar();\n</code></pre> <ul> <li>Permite mostrar errores globales</li> <li>Evita que cada p\u00e1gina implemente su propio manejo de errores</li> </ul>"},{"location":"proyecto/frontend/src/components/common/actionButton/#3-deteccion-de-dispositivo","title":"3\ufe0f\u20e3 Detecci\u00f3n de dispositivo","text":"<pre><code>const isMobile = useMediaQuery(theme.breakpoints.down('md'));\n</code></pre> <ul> <li>Determina si el usuario est\u00e1 en m\u00f3vil</li> <li> <p>Modifica:</p> </li> <li> <p>Tama\u00f1o</p> </li> <li>Padding</li> <li>Texto visible</li> </ul>"},{"location":"proyecto/frontend/src/components/common/actionButton/#4-ejecucion-de-la-accion","title":"4\ufe0f\u20e3 Ejecuci\u00f3n de la acci\u00f3n","text":"<pre><code>const handleClick = async () =&gt; {\n  setLoading(true);\n  try {\n    await action();\n    if (onSuccess) onSuccess();\n  } catch (error) {\n    enqueueSnackbar(error?.message || error || 'Ha ocurrido un error', {\n      variant: 'error',\n    });\n  } finally {\n    setLoading(false);\n  }\n};\n</code></pre> <p>Flujo completo:</p> <ol> <li>Activa loading</li> <li>Ejecuta la acci\u00f3n</li> <li>Maneja \u00e9xito opcional</li> <li>Captura error</li> <li>Limpia estado</li> </ol>"},{"location":"proyecto/frontend/src/components/common/actionButton/#5-renderizado-condicional","title":"5\ufe0f\u20e3 Renderizado condicional","text":"<pre><code>{loading ? &lt;CircularProgress /&gt; : !isMobile &amp;&amp; label}\n</code></pre> <ul> <li>Si est\u00e1 cargando \u2192 spinner</li> <li>En m\u00f3vil \u2192 solo \u00edcono</li> <li>En desktop \u2192 \u00edcono + texto</li> </ul>"},{"location":"proyecto/frontend/src/components/common/actionButton/#6-tooltip-en-movil","title":"6\ufe0f\u20e3 Tooltip en m\u00f3vil","text":"<pre><code>return isMobile &amp;&amp; label ? (\n  &lt;Tooltip title={tooltip || label}&gt;\n    &lt;span&gt;{button}&lt;/span&gt;\n  &lt;/Tooltip&gt;\n) : button;\n</code></pre> <ul> <li>Mantiene accesibilidad</li> <li>Evita saturar la UI</li> </ul>"},{"location":"proyecto/frontend/src/components/common/actionButton/#conclusion","title":"\ud83d\udccc Conclusi\u00f3n","text":"<p>Los componentes en components/common encapsulan patrones t\u00e9cnicos complejos en piezas simples, reutilizables y declarativas.</p> <p>Esto permite:</p> <ul> <li>P\u00e1ginas m\u00e1s limpias</li> <li>Menos bugs repetidos</li> <li>Mejor experiencia de usuario</li> <li>Arquitectura frontend profesional</li> </ul>"},{"location":"proyecto/frontend/src/components/common/comunaAutoComplete/","title":"ComunaAutoComplete.jsx","text":""},{"location":"proyecto/frontend/src/components/common/comunaAutoComplete/#comunaautocomplete","title":"ComunaAutocomplete","text":""},{"location":"proyecto/frontend/src/components/common/comunaAutoComplete/#que-es","title":"Qu\u00e9 es","text":"<p>Un <code>Autocomplete</code> optimizado para buscar comunas desde un JSON est\u00e1tico, con foco en:</p> <ul> <li>Rendimiento</li> <li>UX tolerante</li> <li>Reutilizaci\u00f3n</li> </ul>"},{"location":"proyecto/frontend/src/components/common/comunaAutoComplete/#analisis-del-codigo","title":"An\u00e1lisis del C\u00f3digo","text":""},{"location":"proyecto/frontend/src/components/common/comunaAutoComplete/#1-estado-interno","title":"1\ufe0f\u20e3 Estado interno","text":"<pre><code>const [filteredOptions, setFilteredOptions] = useState([]);\nconst [inputValue, setInputValue] = useState(value || '');\n</code></pre> <ul> <li><code>filteredOptions</code>: opciones visibles</li> <li><code>inputValue</code>: texto escrito por el usuario</li> </ul>"},{"location":"proyecto/frontend/src/components/common/comunaAutoComplete/#2-normalizacion-de-texto","title":"2\ufe0f\u20e3 Normalizaci\u00f3n de texto","text":"<pre><code>const normalizeText = (str) =&gt;\n  str.normalize('NFD').replace(/[\\u0300-\\u036f]/g, '').toLowerCase();\n</code></pre> <p>Permite:</p> <ul> <li>Ignorar acentos</li> <li>B\u00fasqueda m\u00e1s flexible</li> </ul>"},{"location":"proyecto/frontend/src/components/common/comunaAutoComplete/#3-filtrado-controlado","title":"3\ufe0f\u20e3 Filtrado controlado","text":"<pre><code>const matches = comunasData\n  .filter((comuna) =&gt; normalizeText(comuna.nombre).includes(normalizedQuery))\n  .slice(0, 10)\n  .map((item) =&gt; ({ label: item.nombre, full: item }));\n</code></pre> <ul> <li>Limita resultados</li> <li>Evita render excesivo</li> <li>Mejora performance</li> </ul>"},{"location":"proyecto/frontend/src/components/common/comunaAutoComplete/#4-debounce","title":"4\ufe0f\u20e3 Debounce","text":"<pre><code>const debouncedFilter = useMemo(() =&gt; debounce(filterComunas, 300), []);\n</code></pre> <ul> <li>Evita ejecutar l\u00f3gica en cada tecla</li> <li>Reduce renders</li> </ul>"},{"location":"proyecto/frontend/src/components/common/comunaAutoComplete/#5-sincronizacion-externa","title":"5\ufe0f\u20e3 Sincronizaci\u00f3n externa","text":"<pre><code>useEffect(() =&gt; {\n  setInputValue(value || '');\n}, [value]);\n</code></pre> <p>Permite:</p> <ul> <li>Control desde formularios</li> <li>Integraci\u00f3n con React Hook Form</li> </ul>"},{"location":"proyecto/frontend/src/components/common/confirmDialog/","title":"ConfirmDialog.jsx","text":""},{"location":"proyecto/frontend/src/components/common/confirmDialog/#confirmdialog","title":"ConfirmDialog","text":""},{"location":"proyecto/frontend/src/components/common/confirmDialog/#que-es","title":"Qu\u00e9 es","text":"<p>Modal gen\u00e9rico de confirmaci\u00f3n para acciones cr\u00edticas.</p>"},{"location":"proyecto/frontend/src/components/common/confirmDialog/#analisis-del-codigo","title":"An\u00e1lisis del C\u00f3digo","text":"<pre><code>const ConfirmDialog = ({ open, title, content, onClose, onConfirm }) =&gt; (\n</code></pre> <ul> <li>Totalmente controlado por el padre</li> <li>No mantiene estado interno</li> </ul>"},{"location":"proyecto/frontend/src/components/common/confirmDialog/#ux-de-confirmacion","title":"UX de confirmaci\u00f3n","text":"<pre><code>&lt;WarningAmberIcon color=\"warning\" /&gt;\n</code></pre> <ul> <li>Refuerza visualmente el riesgo</li> </ul> <pre><code>&lt;Button variant=\"outlined\"&gt;Cancelar&lt;/Button&gt;\n&lt;Button variant=\"contained\" color=\"error\"&gt;Confirmar&lt;/Button&gt;\n</code></pre> <ul> <li>Botones sem\u00e1nticos</li> <li>Prevenci\u00f3n de errores del usuario</li> </ul>"},{"location":"proyecto/frontend/src/components/common/csrfLoader/","title":"CSRFLoader.jsx","text":""},{"location":"proyecto/frontend/src/components/common/csrfLoader/#csrfloader","title":"CSRFLoader","text":""},{"location":"proyecto/frontend/src/components/common/csrfLoader/#que-es","title":"Qu\u00e9 es","text":"<p>Componente no visual que ejecuta un efecto colateral al montarse.</p>"},{"location":"proyecto/frontend/src/components/common/csrfLoader/#analisis-del-codigo","title":"An\u00e1lisis del C\u00f3digo","text":"<pre><code>useEffect(() =&gt; {\n  api.get('/csrf/');\n}, []);\n</code></pre> <ul> <li>Se ejecuta una sola vez</li> <li>Inicializa cookies CSRF</li> <li>Prepara Axios para requests posteriores</li> </ul> <pre><code>return null;\n</code></pre> <ul> <li>No renderiza UI</li> <li>Se usa como inicializador</li> </ul>"},{"location":"proyecto/frontend/src/components/common/customToolbar/","title":"CustomToolbar.jsx","text":""},{"location":"proyecto/frontend/src/components/common/customToolbar/#que-es","title":"Qu\u00e9 es","text":"<p><code>CustomToolBar</code> es una barra de herramientas personalizada para MUI DataGrid, dise\u00f1ada para:</p> <ul> <li>Integrar b\u00fasqueda r\u00e1pida (QuickFilter)</li> <li>Adaptarse a pantallas peque\u00f1as</li> <li>Proveer una acci\u00f3n de exportaci\u00f3n</li> <li>Mantener una UX consistente entre desktop y m\u00f3vil</li> </ul> <p>No gestiona datos directamente: solo orquesta controles de UI.</p>"},{"location":"proyecto/frontend/src/components/common/customToolbar/#responsabilidad","title":"Responsabilidad","text":"<ul> <li>Renderizar controles del DataGrid</li> <li>Delegar acciones (exportar, filtrar)</li> <li>Adaptar comportamiento seg\u00fan tama\u00f1o de pantalla</li> </ul>"},{"location":"proyecto/frontend/src/components/common/customToolbar/#analisis-del-codigo-paso-a-paso","title":"An\u00e1lisis del c\u00f3digo paso a paso","text":""},{"location":"proyecto/frontend/src/components/common/customToolbar/#importaciones-desde-datagrid","title":"Importaciones desde DataGrid","text":"<pre><code>import {\n  Toolbar,\n  QuickFilter,\n  QuickFilterControl,\n  QuickFilterClear,\n  ToolbarButton,\n  QuickFilterTrigger,\n} from \"@mui/x-data-grid\";\n</code></pre> <p>Estos elementos permiten extender la toolbar oficial sin romper la integraci\u00f3n con DataGrid.</p> <ul> <li><code>QuickFilter</code>: contenedor l\u00f3gico</li> <li><code>QuickFilterControl</code>: input controlado</li> <li><code>QuickFilterTrigger</code>: bot\u00f3n para expandir en m\u00f3vil</li> </ul>"},{"location":"proyecto/frontend/src/components/common/customToolbar/#deteccion-de-tamano-de-pantalla","title":"Detecci\u00f3n de tama\u00f1o de pantalla","text":"<pre><code>const isSmallScreen = useMediaQuery(theme.breakpoints.down('sm'));\n</code></pre> <p>Este flag gobierna m\u00faltiples decisiones:</p> <ul> <li>Mostrar u ocultar el trigger</li> <li>Expandir o colapsar el input</li> <li>Mostrar texto del bot\u00f3n Exportar</li> </ul>"},{"location":"proyecto/frontend/src/components/common/customToolbar/#styled-components-internos","title":"Styled components internos","text":"<pre><code>const StyledQuickFilter = styled(QuickFilter)({ ... });\n</code></pre> <p>Se usan <code>styled</code> locales para:</p> <ul> <li>Evitar estilos globales</li> <li>Controlar animaciones</li> <li>Acoplar estilos al estado interno</li> </ul>"},{"location":"proyecto/frontend/src/components/common/customToolbar/#control-de-expansion","title":"Control de expansi\u00f3n","text":"<pre><code>opacity: ownerState.expanded ? 0 : 1;\npointerEvents: ownerState.expanded ? 'none' : 'auto';\n</code></pre> <p>Aqu\u00ed se logra el efecto:</p> <ol> <li>El bot\u00f3n desaparece</li> <li>El input aparece</li> <li>Ambos ocupan la misma grilla</li> </ol> <p>Esto evita reflow y mantiene estabilidad visual.</p>"},{"location":"proyecto/frontend/src/components/common/customToolbar/#input-controlado-por-datagrid","title":"Input controlado por DataGrid","text":"<pre><code>&lt;QuickFilterControl render={({ ref, ...controlProps }, state) =&gt; (...)} /&gt;\n</code></pre> <p>El input:</p> <ul> <li>No maneja estado propio</li> <li>Usa el estado interno del DataGrid</li> <li>Se sincroniza autom\u00e1ticamente con el grid</li> </ul>"},{"location":"proyecto/frontend/src/components/common/customToolbar/#limpieza-del-filtro","title":"Limpieza del filtro","text":"<pre><code>&lt;QuickFilterClear&gt;\n</code></pre> <ul> <li>Solo aparece si hay valor</li> <li>Resetea el filtro del grid</li> <li>No requiere l\u00f3gica adicional</li> </ul>"},{"location":"proyecto/frontend/src/components/common/customToolbar/#accion-de-exportacion","title":"Acci\u00f3n de exportaci\u00f3n","text":"<pre><code>&lt;Button onClick={onExport}&gt;\n</code></pre> <ul> <li><code>onExport</code> se recibe como prop</li> <li>La toolbar no conoce el formato ni l\u00f3gica</li> <li>Mantiene separaci\u00f3n de responsabilidades</li> </ul>"},{"location":"proyecto/frontend/src/components/common/dropZone/","title":"DropZone.jsx","text":""},{"location":"proyecto/frontend/src/components/common/dropZone/#que-es","title":"Qu\u00e9 es","text":"<p><code>DropZone</code> es un componente reutilizable para carga de archivos, soportando:</p> <ul> <li>Drag &amp; Drop</li> <li>Selecci\u00f3n manual</li> <li>Filtros por extensi\u00f3n</li> <li>Estado de carga</li> </ul>"},{"location":"proyecto/frontend/src/components/common/dropZone/#estado-interno","title":"Estado interno","text":"<pre><code>const [isDragging, setIsDragging] = useState(false);\n</code></pre> <p>Este estado controla:</p> <ul> <li>Estilos visuales</li> <li>Feedback inmediato al usuario</li> </ul>"},{"location":"proyecto/frontend/src/components/common/dropZone/#manejo-de-eventos-drag-drop","title":"Manejo de eventos Drag &amp; Drop","text":""},{"location":"proyecto/frontend/src/components/common/dropZone/#1-drag-over","title":"1. Drag over","text":"<pre><code>e.preventDefault();\nsetIsDragging(true);\n</code></pre> <p>Evita el comportamiento por defecto del navegador y activa el estado visual.</p>"},{"location":"proyecto/frontend/src/components/common/dropZone/#2-drop","title":"2. Drop","text":"<pre><code>const files = Array.from(e.dataTransfer.files).filter(...);\n</code></pre> <p>L\u00f3gica clave:</p> <ol> <li>Convierte <code>FileList</code> a array</li> <li>Filtra por extensiones permitidas</li> <li>Delegaci\u00f3n a <code>onFilesDrop</code></li> </ol>"},{"location":"proyecto/frontend/src/components/common/dropZone/#seleccion-manual-de-archivos","title":"Selecci\u00f3n manual de archivos","text":"<pre><code>const input = document.createElement('input');\n</code></pre> <p>Este patr\u00f3n permite:</p> <ul> <li>Evitar inputs visibles</li> <li>Mantener una UI limpia</li> <li>Soportar m\u00faltiples archivos</li> </ul>"},{"location":"proyecto/frontend/src/components/common/dropZone/#estado-de-carga","title":"Estado de carga","text":"<pre><code>{loading &amp;&amp; &lt;Box&gt;...&lt;/Box&gt;}\n</code></pre> <ul> <li>Overlay bloqueante</li> <li>Evita interacciones</li> <li>Feedback claro al usuario</li> </ul>"},{"location":"proyecto/frontend/src/components/common/globalLoader/","title":"GlobalLoader.jsx","text":""},{"location":"proyecto/frontend/src/components/common/globalLoader/#que-es","title":"Qu\u00e9 es","text":"<p><code>GlobalLoader</code> es un componente de bloqueo global de UI, usado cuando la aplicaci\u00f3n no puede renderizar contenido a\u00fan.</p> <p>Ejemplo t\u00edpico:</p> <ul> <li>Carga inicial de usuario</li> <li>Validaci\u00f3n de sesi\u00f3n</li> </ul>"},{"location":"proyecto/frontend/src/components/common/globalLoader/#diseno-del-componente","title":"Dise\u00f1o del componente","text":"<pre><code>&lt;Fade in={true}&gt;\n</code></pre> <ul> <li>Animaci\u00f3n suave</li> <li>Evita parpadeos</li> <li>Mejora percepci\u00f3n de carga</li> </ul>"},{"location":"proyecto/frontend/src/components/common/globalLoader/#contenedor-principal","title":"Contenedor principal","text":"<pre><code>height: '100vh'\ndisplay: 'flex'\n</code></pre> <p>Garantiza:</p> <ul> <li>Centrado vertical y horizontal</li> <li>Bloqueo completo de la pantalla</li> </ul>"},{"location":"proyecto/frontend/src/components/common/globalLoader/#loader-visual","title":"Loader visual","text":"<pre><code>&lt;CircularProgress /&gt;\n</code></pre> <ul> <li>Indicador est\u00e1ndar</li> <li>No distrae</li> <li>Claramente reconocible</li> </ul>"},{"location":"proyecto/frontend/src/components/common/globalLoader/#mensaje-informativo","title":"Mensaje informativo","text":"<pre><code>&lt;Typography&gt;\n  Cargando datos de usuario...\n&lt;/Typography&gt;\n</code></pre> <p>Reduce incertidumbre del usuario explicando qu\u00e9 est\u00e1 ocurriendo.</p>"},{"location":"proyecto/frontend/src/components/common/pickingLoad/","title":"PickingLoad.jsx","text":""},{"location":"proyecto/frontend/src/components/common/pickingLoad/#que-es","title":"\u00bfQu\u00e9 es?","text":"<p><code>PickingLoad</code> es un componente contenedor encargado de gestionar la carga de archivos Excel hacia el backend. Act\u00faa como capa intermedia entre la interfaz de usuario (<code>DropZone</code>) y la API, centralizando la l\u00f3gica de env\u00edo, manejo de errores y feedback visual.</p> <p>No renderiza UI propia compleja, sino que orquesta estados y efectos secundarios asociados a la subida del archivo.</p>"},{"location":"proyecto/frontend/src/components/common/pickingLoad/#responsabilidades-principales","title":"Responsabilidades principales","text":"<ol> <li>Controlar el estado de carga (<code>loading</code>).</li> <li>Recibir archivos desde el componente <code>DropZone</code>.</li> <li>Preparar y enviar los archivos al backend usando <code>FormData</code>.</li> <li>Manejar respuestas exitosas y errores.</li> <li>Informar el resultado al usuario mediante notificaciones.</li> </ol>"},{"location":"proyecto/frontend/src/components/common/pickingLoad/#dependencias-clave","title":"Dependencias clave","text":"<ol> <li> <p><code>useState</code></p> </li> <li> <p>Maneja el estado de carga del proceso.</p> </li> <li> <p><code>api</code></p> </li> <li> <p>Cliente HTTP centralizado (Axios) configurado previamente.</p> </li> <li> <p><code>notistack</code></p> </li> <li> <p>Proporciona feedback no intrusivo al usuario.</p> </li> <li> <p><code>DropZone</code></p> </li> <li> <p>Componente visual responsable de la interacci\u00f3n con archivos.</p> </li> </ol>"},{"location":"proyecto/frontend/src/components/common/pickingLoad/#logica-interna","title":"L\u00f3gica interna","text":""},{"location":"proyecto/frontend/src/components/common/pickingLoad/#estado-local","title":"Estado local","text":"<pre><code>const [loading, setLoading] = useState(false);\n</code></pre> <ul> <li>Controla si hay una subida en curso.</li> <li>Se utiliza para bloquear interacciones y mostrar indicadores visuales.</li> </ul>"},{"location":"proyecto/frontend/src/components/common/pickingLoad/#manejo-de-archivos","title":"Manejo de archivos","text":"<pre><code>const handleFilesDrop = async (files) =&gt; {\n</code></pre> <p>Este m\u00e9todo es el punto de entrada principal del componente.</p> <p>Flujo:</p> <ol> <li> <p>Validaci\u00f3n defensiva</p> </li> <li> <p>Si no hay archivos, se aborta la ejecuci\u00f3n.</p> </li> <li> <p>Selecci\u00f3n del primer archivo</p> </li> <li> <p>Se asume una carga de un solo archivo.</p> </li> <li> <p>Construcci\u00f3n de <code>FormData</code></p> </li> </ol> <pre><code>const formData = new FormData();\nformData.append(\"file\", file);\n</code></pre> <ul> <li>Permite enviar archivos binarios correctamente al backend.</li> </ul>"},{"location":"proyecto/frontend/src/components/common/pickingLoad/#envio-a-la-api","title":"Env\u00edo a la API","text":"<pre><code>const res = await api.post(\n  'notas_productos/upload_excel/',\n  formData,\n  { headers: { 'Content-Type': 'multipart/form-data' } }\n);\n</code></pre> <p>Aspectos importantes:</p> <ol> <li>Uso expl\u00edcito de <code>multipart/form-data</code>.</li> <li>Endpoint desacoplado del componente visual.</li> <li>Uso de <code>await</code> para control secuencial del flujo.</li> </ol>"},{"location":"proyecto/frontend/src/components/common/pickingLoad/#manejo-de-estados-y-errores","title":"Manejo de estados y errores","text":"<ul> <li> <p><code>try</code></p> </li> <li> <p>Activa el estado de carga.</p> </li> <li>Env\u00eda el archivo.</li> <li> <p>Muestra notificaci\u00f3n de \u00e9xito.</p> </li> <li> <p><code>catch</code></p> </li> <li> <p>Extrae mensajes de error del backend si existen.</p> </li> <li> <p>Fallback a errores gen\u00e9ricos.</p> </li> <li> <p><code>finally</code></p> </li> <li> <p>Garantiza la desactivaci\u00f3n del estado de carga.</p> </li> </ul>"},{"location":"proyecto/frontend/src/components/common/pickingLoad/#renderizado","title":"Renderizado","text":"<pre><code>&lt;DropZone\n  onFilesDrop={handleFilesDrop}\n  accept=\".xls,.xlsx\"\n  loading={loading}\n/&gt;\n</code></pre> <ul> <li>Se delega completamente la UI al componente <code>DropZone</code>.</li> <li><code>PickingLoad</code> se mantiene como componente l\u00f3gico.</li> </ul>"},{"location":"proyecto/frontend/src/components/common/searchSelect/","title":"SearchSelect.jsx","text":""},{"location":"proyecto/frontend/src/components/common/searchSelect/#que-es","title":"\u00bfQu\u00e9 es?","text":"<p><code>SearchSelect</code> es un componente reutilizable que implementa un campo de b\u00fasqueda con autocompletado remoto, integrado con React Hook Form y MUI Autocomplete.</p> <p>Est\u00e1 dise\u00f1ado para trabajar con endpoints din\u00e1micos y grandes vol\u00famenes de datos, evitando cargar listas completas en memoria.</p>"},{"location":"proyecto/frontend/src/components/common/searchSelect/#responsabilidades-principales","title":"Responsabilidades principales","text":"<ol> <li>Sincronizar el input con React Hook Form.</li> <li>Consultar datos remotos seg\u00fan el texto ingresado.</li> <li>Aplicar debounce para optimizar llamadas HTTP.</li> <li>Renderizar sugerencias din\u00e1micas.</li> <li>Exponer callbacks al seleccionar una opci\u00f3n.</li> </ol>"},{"location":"proyecto/frontend/src/components/common/searchSelect/#props-del-componente","title":"Props del componente","text":"<ol> <li> <p><code>name</code></p> </li> <li> <p>Nombre del campo en React Hook Form.</p> </li> <li> <p><code>control</code></p> </li> <li> <p>Objeto <code>control</code> del formulario.</p> </li> <li> <p><code>label</code></p> </li> <li> <p>Etiqueta visual del input.</p> </li> <li> <p><code>endpoint</code></p> </li> <li> <p>Ruta de la API para b\u00fasqueda.</p> </li> <li> <p><code>getOptionLabel</code></p> </li> <li> <p>Funci\u00f3n que define c\u00f3mo se muestra cada opci\u00f3n.</p> </li> <li> <p><code>onSelect</code></p> </li> <li> <p>Callback opcional al seleccionar un elemento.</p> </li> <li> <p><code>debounceTime</code></p> </li> <li> <p>Tiempo de espera antes de ejecutar la b\u00fasqueda.</p> </li> </ol>"},{"location":"proyecto/frontend/src/components/common/searchSelect/#estado-local","title":"Estado local","text":"<pre><code>const [options, setOptions] = useState([]);\n</code></pre> <ul> <li>Almacena las opciones obtenidas desde la API.</li> <li>Se actualiza din\u00e1micamente seg\u00fan el texto ingresado.</li> </ul>"},{"location":"proyecto/frontend/src/components/common/searchSelect/#logica-de-busqueda","title":"L\u00f3gica de b\u00fasqueda","text":""},{"location":"proyecto/frontend/src/components/common/searchSelect/#funcion-de-consulta","title":"Funci\u00f3n de consulta","text":"<pre><code>const fetchOptions = async (texto) =&gt; {\n</code></pre> <p>Flujo:</p> <ol> <li> <p>Validaci\u00f3n de texto vac\u00edo</p> </li> <li> <p>Limpia las opciones si no hay input.</p> </li> <li> <p>Llamada al backend</p> </li> <li> <p>Env\u00eda el texto como par\u00e1metro <code>q</code>.</p> </li> <li> <p>Actualizaci\u00f3n de opciones</p> </li> <li> <p>Se asume que el backend devuelve un array.</p> </li> </ol>"},{"location":"proyecto/frontend/src/components/common/searchSelect/#debounce-memoizado","title":"Debounce memoizado","text":"<pre><code>const debouncedFetch = useMemo(\n  () =&gt; debounce(fetchOptions, debounceTime),\n  [endpoint, debounceTime]\n);\n</code></pre> <p>Motivaciones:</p> <ol> <li>Evitar llamadas HTTP en cada pulsaci\u00f3n.</li> <li>Mantener estabilidad entre renders.</li> <li>Permitir reutilizaci\u00f3n con distintos endpoints.</li> </ol>"},{"location":"proyecto/frontend/src/components/common/searchSelect/#integracion-con-react-hook-form","title":"Integraci\u00f3n con React Hook Form","text":"<pre><code>&lt;Controller\n  name={name}\n  control={control}\n  render={({ field, fieldState }) =&gt; (\n</code></pre> <ul> <li><code>Controller</code> act\u00faa como puente entre RHF y MUI.</li> <li>Permite manejar inputs no controlados internamente.</li> </ul>"},{"location":"proyecto/frontend/src/components/common/searchSelect/#configuracion-del-autocomplete","title":"Configuraci\u00f3n del Autocomplete","text":"<p>Aspectos clave:</p> <ol> <li> <p><code>freeSolo</code></p> </li> <li> <p>Permite escribir valores que no est\u00e9n en la lista.</p> </li> <li> <p><code>value={null}</code></p> </li> <li> <p>No se almacenan objetos completos en el formulario.</p> </li> <li> <p><code>inputValue={field.value}</code></p> </li> <li> <p>El formulario controla \u00fanicamente el texto.</p> </li> </ol>"},{"location":"proyecto/frontend/src/components/common/searchSelect/#manejo-de-eventos","title":"Manejo de eventos","text":""},{"location":"proyecto/frontend/src/components/common/searchSelect/#cambio-de-texto","title":"Cambio de texto","text":"<pre><code>onInputChange={(e, newInputValue) =&gt; {\n  field.onChange(newInputValue);\n  debouncedFetch(newInputValue);\n}}\n</code></pre> <ul> <li>Sincroniza el input con RHF.</li> <li>Ejecuta la b\u00fasqueda remota con debounce.</li> </ul>"},{"location":"proyecto/frontend/src/components/common/searchSelect/#seleccion-de-opcion","title":"Selecci\u00f3n de opci\u00f3n","text":"<pre><code>onChange={(e, value) =&gt; {\n</code></pre> <p>Flujo:</p> <ol> <li>Extrae el texto visible usando <code>getOptionLabel</code>.</li> <li>Actualiza el formulario con un string.</li> <li>Ejecuta <code>onSelect</code> si est\u00e1 definido.</li> </ol>"},{"location":"proyecto/frontend/src/components/common/searchSelect/#renderizado-del-input","title":"Renderizado del input","text":"<pre><code>&lt;TextField\n  {...params}\n  label={label}\n  error={!!fieldState.error}\n  helperText={fieldState.error?.message}\n/&gt;\n</code></pre> <ul> <li>Manejo completo de errores desde RHF.</li> <li>Componente completamente reutilizable.</li> </ul>"},{"location":"proyecto/frontend/src/components/dashboard/dashboard/","title":"Dashboard.jsx","text":""},{"location":"proyecto/frontend/src/components/dashboard/dashboard/#que-es-este-archivo","title":"\u00bfQu\u00e9 es este archivo?","text":"<p>Este archivo define el componente Dashboard, que corresponde a la vista principal de an\u00e1lisis y resumen del sistema. Su responsabilidad es consultar datos agregados al backend, procesarlos y presentarlos de forma visual mediante gr\u00e1ficos, m\u00e9tricas y un mapa geogr\u00e1fico.</p> <p>El componente act\u00faa como un orquestador de datos y visualizaci\u00f3n, integrando:</p> <ol> <li>Consumo de API</li> <li>Manejo de filtros por fecha</li> <li>Transformaci\u00f3n de datos crudos</li> <li>Renderizado condicional (loading / error / vac\u00edo)</li> <li>Gr\u00e1ficos (PieChart y BarChart)</li> <li>Visualizaci\u00f3n geogr\u00e1fica por comuna</li> </ol>"},{"location":"proyecto/frontend/src/components/dashboard/dashboard/#dependencias-principales","title":"Dependencias principales","text":""},{"location":"proyecto/frontend/src/components/dashboard/dashboard/#react","title":"React","text":"<ul> <li><code>useState</code>: manejo de estados locales (datos, loading, errores, fechas)</li> <li><code>useEffect</code>: ejecuci\u00f3n autom\u00e1tica de la carga inicial</li> <li><code>useCallback</code>: memoizaci\u00f3n de funciones para evitar renders innecesarios</li> </ul>"},{"location":"proyecto/frontend/src/components/dashboard/dashboard/#mui","title":"MUI","text":"<ul> <li>Componentes de layout y UI (<code>Grid</code>, <code>Paper</code>, <code>Typography</code>, <code>Box</code>, etc.)</li> <li><code>useTheme</code>: acceso a la paleta y estilos globales</li> </ul>"},{"location":"proyecto/frontend/src/components/dashboard/dashboard/#mui-x-charts","title":"MUI X Charts","text":"<ul> <li><code>PieChart</code>: distribuci\u00f3n de notas por estado</li> <li><code>BarChart</code>: evoluci\u00f3n de notas por d\u00eda</li> </ul>"},{"location":"proyecto/frontend/src/components/dashboard/dashboard/#utilidades","title":"Utilidades","text":"<ul> <li><code>date-fns</code>: manejo y formato de fechas</li> <li><code>notistack</code>: feedback visual al usuario</li> <li><code>api</code>: cliente HTTP centralizado (Axios)</li> <li><code>normalizarNombre</code>: estandarizaci\u00f3n de nombres de comunas</li> </ul>"},{"location":"proyecto/frontend/src/components/dashboard/dashboard/#estados-del-componente","title":"Estados del componente","text":"<pre><code>const [data, setData] = useState(null);\nconst [loading, setLoading] = useState(true);\nconst [error, setError] = useState(null);\n</code></pre> <ul> <li><code>data</code>: respuesta completa del backend</li> <li><code>loading</code>: controla spinners y bloqueos visuales</li> <li><code>error</code>: mensaje de error legible para el usuario</li> </ul>"},{"location":"proyecto/frontend/src/components/dashboard/dashboard/#estados-de-fechas","title":"Estados de fechas","text":"<pre><code>const [fechaInicio, setFechaInicio] = useState(subDays(new Date(), 1));\nconst [fechaFin, setFechaFin] = useState(addDays(new Date(), 7));\n</code></pre> <p>Se inicializan con un rango razonable por defecto:</p> <ul> <li>Desde ayer</li> <li>Hasta una semana adelante</li> </ul> <p>Esto permite mostrar informaci\u00f3n \u00fatil apenas se carga el dashboard.</p>"},{"location":"proyecto/frontend/src/components/dashboard/dashboard/#estados-derivados","title":"Estados derivados","text":"<pre><code>const [notasPorDiaSemana, setNotasPorDiaSemana] = useState([]);\nconst [dataDespachos, setDataDespachos] = useState([]);\n</code></pre> <p>Estos estados no vienen listos desde la API, sino que se construyen a partir de la respuesta:</p> <ul> <li><code>notasPorDiaSemana</code>: datos listos para el gr\u00e1fico de barras</li> <li><code>dataDespachos</code>: datos normalizados para el mapa</li> </ul>"},{"location":"proyecto/frontend/src/components/dashboard/dashboard/#preparacion-de-datos-para-graficos","title":"Preparaci\u00f3n de datos para gr\u00e1ficos","text":""},{"location":"proyecto/frontend/src/components/dashboard/dashboard/#datos-del-grafico-de-torta","title":"Datos del gr\u00e1fico de torta","text":"<pre><code>const pieData = data?.notas?.por_estado?.map((item, index) =&gt; ({\n  id: item.despacho_retira,\n  value: item.total,\n  label: item.despacho_retira,\n  color: colores[index % 2],\n})) ?? [];\n</code></pre> <p>L\u00f3gica:</p> <ol> <li>Se accede de forma segura a <code>data.notas.por_estado</code></li> <li>Se transforma cada item al formato requerido por <code>PieChart</code></li> <li>Se asignan colores alternados</li> <li>Si no hay datos, se retorna un arreglo vac\u00edo</li> </ol> <p>Esto evita errores de render cuando el backend no devuelve informaci\u00f3n.</p>"},{"location":"proyecto/frontend/src/components/dashboard/dashboard/#funcion-principal-de-carga-de-datos","title":"Funci\u00f3n principal de carga de datos","text":"<pre><code>const fetchData = useCallback(async (inicio, fin) =&gt; { ... }, []);\n</code></pre>"},{"location":"proyecto/frontend/src/components/dashboard/dashboard/#responsabilidades","title":"Responsabilidades","text":"<ol> <li>Activar estado de carga</li> <li>Consultar el endpoint <code>/dashboard/resumen/</code></li> <li>Enviar fechas formateadas al backend</li> <li>Procesar y normalizar la respuesta</li> <li>Manejar errores</li> <li>Finalizar el loading</li> </ol>"},{"location":"proyecto/frontend/src/components/dashboard/dashboard/#llamada-a-la-api","title":"Llamada a la API","text":"<pre><code>const response = await api.get('/dashboard/resumen/', {\n  params: {\n    fecha_inicio: format(inicio, 'yyyy-MM-dd'),\n    fecha_fin: format(fin, 'yyyy-MM-dd')\n  }\n});\n</code></pre> <p>Se env\u00edan fechas en formato est\u00e1ndar para evitar problemas de parsing en backend.</p>"},{"location":"proyecto/frontend/src/components/dashboard/dashboard/#transformacion-de-datos","title":"Transformaci\u00f3n de datos","text":""},{"location":"proyecto/frontend/src/components/dashboard/dashboard/#datos-para-el-mapa","title":"Datos para el mapa","text":"<pre><code>setDataDespachos(\n  (response.data.comunas?.resumen || [])\n    .map(item =&gt; ({\n      comuna: normalizarNombre(item.cliente__comuna),\n      despacho_retira: item.despacho_retira,\n      total: item.total,\n    }))\n    .filter(item =&gt; item.despacho_retira === 'DESPACHO')\n);\n</code></pre> <p>Decisiones clave:</p> <ol> <li>Se normaliza el nombre de la comuna para que coincida con el GeoJSON</li> <li>Se filtran solo los registros de tipo <code>DESPACHO</code></li> <li>Se entrega al mapa una estructura consistente</li> </ol>"},{"location":"proyecto/frontend/src/components/dashboard/dashboard/#datos-para-el-grafico-de-barras","title":"Datos para el gr\u00e1fico de barras","text":"<pre><code>const datosNotas = [];\nresponse.data.notas.por_dia.forEach(item =&gt; {\n  const parsed = parse(item.day, 'yyyy-MM-dd', new Date());\n  datosNotas.push({\n    fecha: format(parsed, 'dd/MM'),\n    fechaRaw: item.day,\n    total: item.total\n  });\n});\n</code></pre> <p>Aqu\u00ed:</p> <ol> <li>Se parsea la fecha recibida como string</li> <li>Se formatea para visualizaci\u00f3n</li> <li>Se conserva el valor original si se necesita luego</li> </ol>"},{"location":"proyecto/frontend/src/components/dashboard/dashboard/#manejo-de-errores","title":"Manejo de errores","text":"<pre><code>catch (err) {\n  let errorMessage = 'Error al cargar datos';\n  if (err.response?.data?.error) {\n    errorMessage = err.response.data.error;\n  }\n  setError(errorMessage);\n}\n</code></pre> <p>Se prioriza:</p> <ol> <li>Mensaje del backend</li> <li>C\u00f3digo HTTP</li> <li>Error gen\u00e9rico</li> </ol> <p>Esto mejora la experiencia del usuario y el diagn\u00f3stico.</p>"},{"location":"proyecto/frontend/src/components/dashboard/dashboard/#filtro-por-fechas","title":"Filtro por fechas","text":"<pre><code>const handleFilterSubmit = (e, inicio, fin) =&gt; { ... }\n</code></pre> <p>L\u00f3gica:</p> <ol> <li>Previene submit por defecto</li> <li>Valida rango de fechas</li> <li>Muestra advertencia si es inv\u00e1lido</li> <li>Actualiza estados</li> <li>Reejecuta <code>fetchData</code></li> </ol> <p>Esto desacopla el componente de filtro del dashboard.</p>"},{"location":"proyecto/frontend/src/components/dashboard/dashboard/#renderizado-condicional","title":"Renderizado condicional","text":"<p>Antes de renderizar el contenido principal:</p> <ul> <li>Si est\u00e1 cargando y no hay datos \u2192 spinner</li> <li>Si hay error \u2192 mensaje</li> </ul> <p>Esto evita pantallas rotas o inconsistentes.</p>"},{"location":"proyecto/frontend/src/components/dashboard/dashboard/#secciones-visuales","title":"Secciones visuales","text":""},{"location":"proyecto/frontend/src/components/dashboard/dashboard/#1-resumen-total-grafico-de-torta","title":"1. Resumen total + gr\u00e1fico de torta","text":"<ul> <li>Total de notas</li> <li>Rango de fechas activo</li> <li>Distribuci\u00f3n por estado</li> </ul>"},{"location":"proyecto/frontend/src/components/dashboard/dashboard/#2-grafico-de-barras","title":"2. Gr\u00e1fico de barras","text":"<ul> <li>Evoluci\u00f3n diaria de notas</li> <li>Resalta el d\u00eda actual</li> <li>Escala ajustada a enteros</li> </ul>"},{"location":"proyecto/frontend/src/components/dashboard/dashboard/#3-espacio-extensible","title":"3. Espacio extensible","text":"<ul> <li>Contenedor preparado para futuras m\u00e9tricas</li> </ul>"},{"location":"proyecto/frontend/src/components/dashboard/dashboard/#4-mapa-de-despachos","title":"4. Mapa de despachos","text":"<ul> <li>Usa GeoJSON de la RM</li> <li>Pinta comunas seg\u00fan volumen de despachos</li> <li>Se alimenta con datos normalizados</li> </ul>"},{"location":"proyecto/frontend/src/components/dashboard/dashboard/#conclusion","title":"Conclusi\u00f3n","text":"<p>Este componente:</p> <ol> <li>Centraliza la l\u00f3gica de consulta del dashboard</li> <li>Separa claramente datos, visualizaci\u00f3n y filtros</li> <li>Maneja errores y estados intermedios</li> <li>Est\u00e1 preparado para escalar con nuevas m\u00e9tricas</li> </ol> <p>Es un ejemplo de componente contenedor que coordina m\u00faltiples subcomponentes sin acoplarse a su implementaci\u00f3n interna.</p>"},{"location":"proyecto/frontend/src/components/dashboard/filterComponent/","title":"FilterComponent.jsx","text":""},{"location":"proyecto/frontend/src/components/dashboard/filterComponent/#que-es-este-componente","title":"\u00bfQu\u00e9 es este componente?","text":"<p><code>FilterComponent</code> es un componente presentacional y de control de filtros de fecha que se utiliza para seleccionar un rango temporal (fecha inicio y fecha fin) y notificar ese rango a un componente padre (por ejemplo, el Dashboard).</p> <p>No realiza llamadas a API ni contiene l\u00f3gica de negocio. Su responsabilidad es gestionar estado temporal de UI, validar interacci\u00f3n b\u00e1sica del usuario y delegar la acci\u00f3n final al padre.</p>"},{"location":"proyecto/frontend/src/components/dashboard/filterComponent/#responsabilidades-principales","title":"Responsabilidades principales","text":"<ol> <li>Mostrar dos selectores de fecha (inicio y fin).</li> <li>Mantener un estado temporal independiente del estado global del Dashboard.</li> <li>Sincronizarse con cambios externos de fechas.</li> <li>Ejecutar el callback <code>handleFilterSubmit</code> al enviar el formulario.</li> <li>Reflejar el estado de carga (loading) en la UI.</li> </ol>"},{"location":"proyecto/frontend/src/components/dashboard/filterComponent/#uso-de-memo","title":"Uso de <code>memo</code>","text":"<p>El componente est\u00e1 envuelto en <code>memo</code>:</p> <pre><code>const FilterComponent = memo((props) =&gt; { ... })\n</code></pre>"},{"location":"proyecto/frontend/src/components/dashboard/filterComponent/#por-que","title":"\u00bfPor qu\u00e9?","text":"<ul> <li>Evita renders innecesarios cuando las props no cambian.</li> <li>Es especialmente \u00fatil en dashboards donde hay m\u00faltiples gr\u00e1ficos y renders costosos.</li> <li>El componente solo se vuelve a renderizar si cambian las fechas o <code>loading</code>.</li> </ul>"},{"location":"proyecto/frontend/src/components/dashboard/filterComponent/#estados-internos","title":"Estados internos","text":"<pre><code>const [tempFechaInicio, setTempFechaInicio] = useState(initialFechaInicio);\nconst [tempFechaFin, setTempFechaFin] = useState(initialFechaFin);\n</code></pre>"},{"location":"proyecto/frontend/src/components/dashboard/filterComponent/#por-que-usar-estado-temporal","title":"\u00bfPor qu\u00e9 usar estado temporal?","text":"<ul> <li>Permite que el usuario cambie fechas sin disparar inmediatamente el filtro.</li> <li>El filtro solo se aplica al presionar el bot\u00f3n \"Aplicar\".</li> <li>Mejora la experiencia de usuario y evita llamadas innecesarias a la API.</li> </ul>"},{"location":"proyecto/frontend/src/components/dashboard/filterComponent/#sincronizacion-con-props-externas","title":"Sincronizaci\u00f3n con props externas","text":"<pre><code>useEffect(() =&gt; {\n  setTempFechaInicio(initialFechaInicio);\n  setTempFechaFin(initialFechaFin);\n}, [initialFechaInicio, initialFechaFin]);\n</code></pre>"},{"location":"proyecto/frontend/src/components/dashboard/filterComponent/#logica","title":"L\u00f3gica","text":"<ul> <li>Si el Dashboard actualiza las fechas (por ejemplo, reset global), el filtro se sincroniza.</li> <li>Evita estados inconsistentes entre padre e hijo.</li> </ul>"},{"location":"proyecto/frontend/src/components/dashboard/filterComponent/#manejo-del-submit","title":"Manejo del submit","text":"<pre><code>const handleSubmit = (e) =&gt; {\n  e.preventDefault();\n  handleFilterSubmit(e, tempFechaInicio, tempFechaFin);\n};\n</code></pre>"},{"location":"proyecto/frontend/src/components/dashboard/filterComponent/#claves","title":"Claves","text":"<ul> <li>El formulario previene el comportamiento por defecto.</li> <li>Delegaci\u00f3n total de la validaci\u00f3n de negocio al componente padre.</li> <li>Mantiene este componente simple y reutilizable.</li> </ul>"},{"location":"proyecto/frontend/src/components/dashboard/filterComponent/#configuracion-comun-de-datepicker","title":"Configuraci\u00f3n com\u00fan de DatePicker","text":"<pre><code>const commonDatePickerProps = {\n  format: \"dd/MM/yyyy\",\n  slotProps: {\n    textField: {\n      size: \"small\",\n      sx: textFieldStyles,\n    },\n  },\n};\n</code></pre>"},{"location":"proyecto/frontend/src/components/dashboard/filterComponent/#ventajas","title":"Ventajas","text":"<ul> <li>Evita duplicaci\u00f3n de c\u00f3digo.</li> <li>Mantiene consistencia visual.</li> <li>Facilita cambios futuros (formato, tama\u00f1o, estilos).</li> </ul>"},{"location":"proyecto/frontend/src/components/dashboard/filterComponent/#renderizado-y-ux","title":"Renderizado y UX","text":"<ul> <li>Usa <code>Paper</code> como contenedor visual.</li> <li>Layout horizontal con <code>Stack</code>.</li> <li>Bot\u00f3n deshabilitado mientras <code>loading</code> es <code>true</code>.</li> <li>Indicador visual (<code>CircularProgress</code>) cuando se est\u00e1 cargando.</li> </ul>"},{"location":"proyecto/frontend/src/components/dashboard/mapaDespachos/","title":"MapaDespachos.jsx","text":""},{"location":"proyecto/frontend/src/components/dashboard/mapaDespachos/#que-es-este-componente","title":"Qu\u00e9 es este componente?","text":"<p><code>MapaDespachos</code> es un componente de visualizaci\u00f3n geogr\u00e1fica que muestra la distribuci\u00f3n de despachos por comuna utilizando un mapa interactivo basado en Leaflet.</p> <p>Su funci\u00f3n es transformar datos agregados en una representaci\u00f3n visual clara y exploratoria.</p>"},{"location":"proyecto/frontend/src/components/dashboard/mapaDespachos/#responsabilidades-principales","title":"Responsabilidades principales","text":"<ol> <li>Recibir datos de despachos ya procesados.</li> <li>Relacionar datos con geometr\u00eda geogr\u00e1fica (GeoJSON).</li> <li>Aplicar reglas de color seg\u00fan volumen.</li> <li>Mostrar tooltips informativos.</li> <li>Renderizar una leyenda y ranking Top 5.</li> </ol>"},{"location":"proyecto/frontend/src/components/dashboard/mapaDespachos/#normalizacion-y-matching-de-datos","title":"Normalizaci\u00f3n y matching de datos","text":""},{"location":"proyecto/frontend/src/components/dashboard/mapaDespachos/#mapa-de-nombres","title":"Mapa de nombres","text":"<pre><code>const nombresComunas = {};\ngeoData.features.forEach(feature =&gt; {\n  nombresComunas[feature.properties.Comuna_Normalizada] = feature.properties.Comuna;\n});\n</code></pre>"},{"location":"proyecto/frontend/src/components/dashboard/mapaDespachos/#objetivo","title":"Objetivo","text":"<ul> <li>Evitar errores por diferencias de acentos o may\u00fasculas.</li> <li>Permitir matching confiable entre datos del backend y el GeoJSON.</li> </ul>"},{"location":"proyecto/frontend/src/components/dashboard/mapaDespachos/#enriquecimiento-de-datos","title":"Enriquecimiento de datos","text":"<pre><code>const dataEnriquecida = dataDespachos.map(item =&gt; ({\n  ...item,\n  nombreOriginal: nombresComunas[item.comuna] || item.comuna\n}));\n</code></pre>"},{"location":"proyecto/frontend/src/components/dashboard/mapaDespachos/#por-que-se-hace","title":"Por qu\u00e9 se hace","text":"<ul> <li>El backend usa nombres normalizados.</li> <li>La UI necesita nombres legibles para el usuario.</li> </ul>"},{"location":"proyecto/frontend/src/components/dashboard/mapaDespachos/#top-5-comunas","title":"Top 5 comunas","text":"<pre><code>const topComunas = [...dataEnriquecida]\n  .sort((a, b) =&gt; b.total - a.total)\n  .slice(0, 5);\n</code></pre>"},{"location":"proyecto/frontend/src/components/dashboard/mapaDespachos/#logica","title":"L\u00f3gica","text":"<ol> <li>Se clona el array para no mutar props.</li> <li>Se ordena por volumen descendente.</li> <li>Se limita a las 5 comunas m\u00e1s relevantes.</li> </ol>"},{"location":"proyecto/frontend/src/components/dashboard/mapaDespachos/#mapa-de-despachos","title":"Mapa de despachos","text":"<pre><code>const mapaDespachos = dataDespachos.reduce((acc, item) =&gt; {\n  acc[item.comuna] = item.total;\n  return acc;\n}, {});\n</code></pre>"},{"location":"proyecto/frontend/src/components/dashboard/mapaDespachos/#ventaja","title":"Ventaja","text":"<ul> <li>Acceso O(1) al total por comuna.</li> <li>Simplifica el c\u00e1lculo de estilos por feature.</li> </ul>"},{"location":"proyecto/frontend/src/components/dashboard/mapaDespachos/#sistema-de-colores","title":"Sistema de colores","text":"<pre><code>const getColor = (cantidad) =&gt; { ... };\n</code></pre>"},{"location":"proyecto/frontend/src/components/dashboard/mapaDespachos/#diseno","title":"Dise\u00f1o","text":"<ul> <li>Escala progresiva basada en volumen.</li> <li>Permite lectura r\u00e1pida de densidad.</li> <li>Separaci\u00f3n clara entre comunas con y sin despachos.</li> </ul>"},{"location":"proyecto/frontend/src/components/dashboard/mapaDespachos/#estilado-del-geojson","title":"Estilado del GeoJSON","text":"<pre><code>const style = (feature) =&gt; {\n  const cantidad = mapaDespachos[feature.properties.Comuna_Normalizada] || 0;\n  return {\n    fillColor: getColor(cantidad),\n    weight: 1,\n    color: 'white',\n    fillOpacity: 0.7\n  };\n};\n</code></pre>"},{"location":"proyecto/frontend/src/components/dashboard/mapaDespachos/#que-ocurre-aqui","title":"Qu\u00e9 ocurre aqu\u00ed","text":"<ul> <li>Leaflet llama esta funci\u00f3n por cada comuna.</li> <li>El color depende del volumen de despachos.</li> <li>No hay l\u00f3gica de estado, solo c\u00e1lculo puro.</li> </ul>"},{"location":"proyecto/frontend/src/components/dashboard/mapaDespachos/#tooltips-por-feature","title":"Tooltips por feature","text":"<pre><code>layer.bindTooltip(`${comunaOriginal}: ${cantidad} despacho(s)`);\n</code></pre>"},{"location":"proyecto/frontend/src/components/dashboard/mapaDespachos/#objetivo_1","title":"Objetivo","text":"<ul> <li>Informaci\u00f3n inmediata al pasar el cursor.</li> <li>No sobrecargar la UI con labels permanentes.</li> </ul>"},{"location":"proyecto/frontend/src/components/dashboard/mapaDespachos/#renderizado-del-mapa","title":"Renderizado del mapa","text":"<ul> <li><code>MapContainer</code> inicializa el mapa.</li> <li><code>TileLayer</code> usa OpenStreetMap.</li> <li><code>GeoJSON</code> dibuja las comunas.</li> <li><code>key</code> forzado para refrescar estilos cuando cambian datos.</li> </ul>"},{"location":"proyecto/frontend/src/components/dashboard/mapaDespachos/#diseno-general","title":"Dise\u00f1o general","text":"<ul> <li>La leyenda es flotante y no interfiere con el mapa.</li> <li>Separaci\u00f3n clara entre visualizaci\u00f3n y datos.</li> <li>El componente es reutilizable para otros mapas cambiando el GeoJSON.</li> </ul>"},{"location":"proyecto/frontend/src/components/dataGrids/facturasDataGrid/","title":"FacturasDataGrid.jsx","text":""},{"location":"proyecto/frontend/src/components/dataGrids/facturasDataGrid/#proposito-del-componente","title":"Prop\u00f3sito del componente","text":"<p><code>FacturasDataGrid</code> es un componente de alto nivel encargado de gestionar facturas en PDF dentro de una grilla (<code>DataGrid</code>). Sus responsabilidades principales son:</p> <ul> <li>Listar facturas seg\u00fan su estado</li> <li>Subir nuevos PDFs con metadatos</li> <li>Visualizar y descargar facturas</li> <li>Marcar facturas como pagadas</li> <li>Eliminar facturas</li> <li>Exportar la informaci\u00f3n a Excel</li> </ul> <p>El componente combina l\u00f3gica de UI, comunicaci\u00f3n con API, gesti\u00f3n de archivos y control de estado.</p>"},{"location":"proyecto/frontend/src/components/dataGrids/facturasDataGrid/#funcion-auxiliar-formatearfacturas","title":"Funci\u00f3n auxiliar: <code>formatearFacturas</code>","text":"<pre><code>const formatearFacturas = (pdf) =&gt; ({ ... })\n</code></pre>"},{"location":"proyecto/frontend/src/components/dataGrids/facturasDataGrid/#objetivo","title":"Objetivo","text":"<p>Normaliza y adapta los datos crudos del backend para que sean consumidos f\u00e1cilmente por el <code>DataGrid</code>.</p>"},{"location":"proyecto/frontend/src/components/dataGrids/facturasDataGrid/#transformaciones-clave","title":"Transformaciones clave","text":"<ul> <li>Fechas (<code>created_at</code>, <code>updated_at</code>) se convierten a formato <code>dd/MM/yyyy</code></li> <li>Tama\u00f1o del archivo se transforma de bytes a MB</li> <li>Textos (<code>empresa</code>, <code>observacion</code>) se normalizan a may\u00fasculas</li> <li>Se definen URLs de visualizaci\u00f3n y descarga con fallback</li> </ul> <p>Esto evita l\u00f3gica repetida en las columnas del grid y centraliza el formateo.</p>"},{"location":"proyecto/frontend/src/components/dataGrids/facturasDataGrid/#estado-del-componente","title":"Estado del componente","text":"<pre><code>const [facturas, setfacturas]\nconst [loading, setLoading]\nconst [uploading, setUploading]\nconst [confirmOpen, setConfirmOpen]\nconst [confirmOpenPagar, setConfirmOpenPagar]\nconst [metadataModalOpen, setMetadataModalOpen]\nconst [currentFile, setCurrentFile]\nconst [currentMetadata, setCurrentMetadata]\nconst [pdfSeleccionado, setPdfSeleccionado]\n</code></pre>"},{"location":"proyecto/frontend/src/components/dataGrids/facturasDataGrid/#descripcion","title":"Descripci\u00f3n","text":"<ul> <li><code>facturas</code>: filas mostradas en el DataGrid</li> <li><code>loading</code>: estado de carga inicial</li> <li><code>uploading</code>: controla el DropZone</li> <li><code>confirmOpen</code>: confirmaci\u00f3n de eliminaci\u00f3n</li> <li><code>confirmOpenPagar</code>: confirmaci\u00f3n de pago</li> <li><code>metadataModalOpen</code>: modal para editar metadatos del PDF</li> <li><code>currentFile</code>: archivo PDF actual</li> <li><code>currentMetadata</code>: metadata extra\u00edda del PDF</li> <li><code>pdfSeleccionado</code>: fila seleccionada para acciones</li> </ul>"},{"location":"proyecto/frontend/src/components/dataGrids/facturasDataGrid/#obtencion-de-datos-fetchfacturas","title":"Obtenci\u00f3n de datos: <code>fetchFacturas</code>","text":"<pre><code>const fetchFacturas = useCallback(async () =&gt; { ... })\n</code></pre>"},{"location":"proyecto/frontend/src/components/dataGrids/facturasDataGrid/#flujo","title":"Flujo","text":"<ol> <li>Solicita todas las facturas al endpoint <code>/facturas/</code></li> <li>Filtra por <code>estado</code></li> <li>Aplica <code>formatearFacturas</code></li> <li>Actualiza el estado del componente</li> </ol> <p>Se usa <code>useCallback</code> para evitar recrear la funci\u00f3n innecesariamente.</p>"},{"location":"proyecto/frontend/src/components/dataGrids/facturasDataGrid/#subida-de-archivos-pdf","title":"Subida de archivos PDF","text":""},{"location":"proyecto/frontend/src/components/dataGrids/facturasDataGrid/#handlefilesdrop","title":"<code>handleFilesDrop</code>","text":"<ul> <li>Recibe archivos desde <code>DropZone</code></li> <li>Extrae metadata del PDF usando <code>usePDFMetadata</code></li> <li>Guarda el archivo y metadata temporalmente</li> <li>Abre el modal de confirmaci\u00f3n</li> </ul> <p>Solo procesa un archivo a la vez.</p>"},{"location":"proyecto/frontend/src/components/dataGrids/facturasDataGrid/#normalizacion-del-nombre-de-archivo","title":"Normalizaci\u00f3n del nombre de archivo","text":"<pre><code>const normalizeFileName = (file) =&gt; { ... }\n</code></pre> <p>Evita problemas comunes:</p> <ul> <li>Espacios</li> <li>Caracteres especiales</li> <li>Nombres inconsistentes</li> </ul> <p>Esto es clave para compatibilidad con sistemas de archivos y backend.</p>"},{"location":"proyecto/frontend/src/components/dataGrids/facturasDataGrid/#guardado-final-del-pdf-handlesavemetadata","title":"Guardado final del PDF: <code>handleSaveMetadata</code>","text":"<ul> <li>Crea un <code>FormData</code></li> <li>Adjunta archivo + metadata</li> <li>POST a <code>/facturas/</code></li> <li>Refresca la grilla</li> </ul> <p>La responsabilidad de validaci\u00f3n queda delegada al backend.</p>"},{"location":"proyecto/frontend/src/components/dataGrids/facturasDataGrid/#acciones-sobre-facturas","title":"Acciones sobre facturas","text":""},{"location":"proyecto/frontend/src/components/dataGrids/facturasDataGrid/#ver-factura","title":"Ver factura","text":"<pre><code>window.open(pdf.signed_url)\n</code></pre> <p>Abre el PDF en una nueva pesta\u00f1a usando una URL segura.</p>"},{"location":"proyecto/frontend/src/components/dataGrids/facturasDataGrid/#descargar-factura","title":"Descargar factura","text":"<p>Se crea din\u00e1micamente un <code>&lt;a&gt;</code> para forzar descarga con nombre personalizado.</p>"},{"location":"proyecto/frontend/src/components/dataGrids/facturasDataGrid/#eliminar-factura","title":"Eliminar factura","text":"<ul> <li>Abre <code>ConfirmDialog</code></li> <li>Ejecuta DELETE <code>/facturas/{id}/</code></li> <li>Refresca la grilla</li> </ul>"},{"location":"proyecto/frontend/src/components/dataGrids/facturasDataGrid/#marcar-como-pagada","title":"Marcar como pagada","text":"<ul> <li>PATCH <code>/facturas/{id}/</code></li> <li>Cambia estado a <code>PAGADO</code></li> <li>Refresca la grilla</li> </ul>"},{"location":"proyecto/frontend/src/components/dataGrids/facturasDataGrid/#exportacion-a-excel","title":"Exportaci\u00f3n a Excel","text":"<pre><code>exportExcel(columnsToExport, facturas, exportNombre)\n</code></pre> <ul> <li>Se excluyen columnas marcadas con <code>disableExport</code></li> <li>Se reutiliza l\u00f3gica com\u00fan del proyecto</li> </ul>"},{"location":"proyecto/frontend/src/components/dataGrids/facturasDataGrid/#definicion-de-columnas","title":"Definici\u00f3n de columnas","text":"<p>Las columnas del <code>DataGrid</code>:</p> <ul> <li>Separan claramente datos de acciones</li> <li>Usan <code>renderCell</code> para controlar layout y comportamiento</li> <li>Excluyen columnas de acci\u00f3n del export</li> </ul> <p>Esto mantiene la grilla flexible y reutilizable.</p>"},{"location":"proyecto/frontend/src/components/dataGrids/facturasDataGrid/#renderizado-condicional","title":"Renderizado condicional","text":"<ul> <li>Loader global mientras se cargan datos</li> <li><code>DropZone</code> bloqueado durante subida o extracci\u00f3n</li> <li>Modales controlados por estado local</li> </ul>"},{"location":"proyecto/frontend/src/components/dataGrids/facturasDataGrid/#componentes-externos-utilizados","title":"Componentes externos utilizados","text":"<ul> <li><code>DropZone</code>: carga de archivos</li> <li><code>ConfirmDialog</code>: confirmaciones cr\u00edticas</li> <li><code>PDFMetadataModal</code>: edici\u00f3n de metadata</li> <li><code>CustomToolBar</code>: exportaci\u00f3n y acciones globales</li> </ul> <p>El componente act\u00faa como orquestador, no como due\u00f1o de toda la l\u00f3gica.</p>"},{"location":"proyecto/frontend/src/components/dataGrids/facturasDataGrid/#decisiones-tecnicas-destacadas","title":"Decisiones t\u00e9cnicas destacadas","text":"<ul> <li>Separaci\u00f3n clara entre formateo de datos y renderizado</li> <li>Uso consistente de <code>useCallback</code> y <code>useEffect</code></li> <li>Manejo expl\u00edcito de estados de confirmaci\u00f3n</li> <li>Evita l\u00f3gica compleja dentro del JSX</li> </ul>"},{"location":"proyecto/frontend/src/components/dataGrids/facturasDataGrid/#resumen","title":"Resumen","text":"<p><code>FacturasDataGrid</code> es un componente robusto, bien estructurado y alineado con buenas pr\u00e1cticas de React:</p> <ul> <li>C\u00f3digo predecible</li> <li>L\u00f3gica desacoplada</li> <li>F\u00e1cil de extender</li> <li>Preparado para entornos reales de negocio</li> </ul>"},{"location":"proyecto/frontend/src/components/dataGrids/historicoSabados/","title":"HistoricoSabados.jsx","text":"<p>Este componente muestra el hist\u00f3rico de s\u00e1bados trabajados del personal, agrupado por mes, con posibilidad de expandir/colapsar cada mes para ver el detalle por persona.</p>"},{"location":"proyecto/frontend/src/components/dataGrids/historicoSabados/#1-imports-y-dependencias","title":"1\ufe0f\u20e3 Imports y dependencias","text":"<pre><code>import { useState, useEffect } from 'react';\n</code></pre> <ul> <li> <p>Hooks b\u00e1sicos de React:</p> </li> <li> <p><code>useState</code>: manejar estados locales</p> </li> <li><code>useEffect</code>: ejecutar l\u00f3gica al montar el componente</li> </ul> <pre><code>import { Box, Typography, Table, TableBody, TableCell, TableContainer,\nTableHead, TableRow, Paper, IconButton, Collapse, CircularProgress } from '@mui/material';\n</code></pre> <ul> <li> <p>Componentes de Material UI:</p> </li> <li> <p><code>Table*</code>: estructura tabular</p> </li> <li><code>Collapse</code>: mostrar/ocultar contenido animado</li> <li><code>CircularProgress</code>: loader</li> </ul> <pre><code>import { format, eachMonthOfInterval, subMonths } from 'date-fns';\nimport { es } from 'date-fns/locale';\n</code></pre> <ul> <li> <p><code>date-fns</code>:</p> </li> <li> <p>generar meses</p> </li> <li>formatear fechas</li> <li>localizaci\u00f3n en espa\u00f1ol</li> </ul> <pre><code>import { api } from '../../utils/api';\nimport { useSnackbar } from 'notistack';\n</code></pre> <ul> <li><code>api</code>: cliente HTTP centralizado</li> <li><code>useSnackbar</code>: feedback visual de errores</li> </ul> <pre><code>import KeyboardArrowDownIcon from '@mui/icons-material/KeyboardArrowDown';\nimport KeyboardArrowUpIcon from '@mui/icons-material/KeyboardArrowUp';\n</code></pre> <ul> <li>\u00cdconos para indicar expansi\u00f3n / colapso</li> </ul>"},{"location":"proyecto/frontend/src/components/dataGrids/historicoSabados/#2-estados-del-componente","title":"2\ufe0f\u20e3 Estados del componente","text":"<pre><code>const [historico, setHistorico] = useState([]);\n</code></pre> <ul> <li>Guarda el hist\u00f3rico completo recibido desde el backend</li> </ul> <pre><code>const [loading, setLoading] = useState(true);\n</code></pre> <ul> <li>Controla el estado de carga inicial</li> </ul> <pre><code>const [expandedMonths, setExpandedMonths] = useState({});\n</code></pre> <ul> <li>Objeto que indica qu\u00e9 meses est\u00e1n desplegados</li> <li>Ejemplo:</li> </ul> <pre><code>{ \"2025-01\": true, \"2025-02\": false }\n</code></pre>"},{"location":"proyecto/frontend/src/components/dataGrids/historicoSabados/#3-calculo-de-los-ultimos-6-meses","title":"3\ufe0f\u20e3 C\u00e1lculo de los \u00faltimos 6 meses","text":"<pre><code>const meses = eachMonthOfInterval({\n  start: subMonths(new Date(), 6),\n  end: new Date()\n}).reverse();\n</code></pre> <ul> <li>Genera una lista de meses desde hace 6 meses hasta hoy</li> <li><code>reverse()</code> para mostrar del m\u00e1s reciente al m\u00e1s antiguo</li> </ul>"},{"location":"proyecto/frontend/src/components/dataGrids/historicoSabados/#4-expansion-colapso-de-meses","title":"4\ufe0f\u20e3 Expansi\u00f3n / colapso de meses","text":"<pre><code>const toggleMonth = (mes) =&gt; {\n  setExpandedMonths(prev =&gt; ({\n    ...prev,\n    [mes]: !prev[mes]\n  }));\n};\n</code></pre> <ul> <li>Alterna el estado expandido de un mes espec\u00edfico</li> <li>Usa el mes (<code>yyyy-MM</code>) como clave</li> </ul>"},{"location":"proyecto/frontend/src/components/dataGrids/historicoSabados/#5-carga-de-datos-useeffect","title":"5\ufe0f\u20e3 Carga de datos (useEffect)","text":"<pre><code>useEffect(() =&gt; {\n  const fetchHistorico = async () =&gt; {\n    try {\n      setLoading(true);\n      const response = await api.get('/personal/historico-sabados/');\n</code></pre> <ul> <li>Llama al backend para obtener el hist\u00f3rico</li> </ul> <pre><code>const data = response.data.map(item =&gt; ({\n  ...item,\n  sabados: Array.isArray(item.sabados) ? item.sabados : []\n}));\n</code></pre> <ul> <li>Normaliza los datos</li> <li>Garantiza que <code>sabados</code> siempre sea un array</li> </ul> <pre><code>setHistorico(data);\n</code></pre> <ul> <li>Guarda los datos ya normalizados</li> </ul> <pre><code>} catch (error) {\n  enqueueSnackbar('Error al cargar hist\u00f3rico', { variant: 'error' });\n} finally {\n  setLoading(false);\n}\n</code></pre> <ul> <li>Manejo de errores y fin de carga</li> </ul>"},{"location":"proyecto/frontend/src/components/dataGrids/historicoSabados/#6-loader-de-carga","title":"6\ufe0f\u20e3 Loader de carga","text":"<pre><code>if (loading) {\n  return (\n    &lt;Box display=\"flex\" justifyContent=\"center\" mt={30}&gt;\n      &lt;CircularProgress /&gt;\n    &lt;/Box&gt;\n  );\n}\n</code></pre> <ul> <li>Evita renderizar la vista principal mientras no hay datos</li> </ul>"},{"location":"proyecto/frontend/src/components/dataGrids/historicoSabados/#7-render-principal","title":"7\ufe0f\u20e3 Render principal","text":""},{"location":"proyecto/frontend/src/components/dataGrids/historicoSabados/#titulo","title":"T\u00edtulo","text":"<pre><code>&lt;Typography variant=\"h5\"&gt;Hist\u00f3rico de S\u00e1bados Trabajados&lt;/Typography&gt;\n</code></pre>"},{"location":"proyecto/frontend/src/components/dataGrids/historicoSabados/#8-render-por-cada-mes","title":"8\ufe0f\u20e3 Render por cada mes","text":"<pre><code>{meses.map(mes =&gt; {\n  const mesKey = format(mes, 'yyyy-MM');\n  const mesLabel = format(mes, 'MMMM yyyy', { locale: es });\n</code></pre> <ul> <li><code>mesKey</code>: clave t\u00e9cnica</li> <li><code>mesLabel</code>: texto visible al usuario</li> </ul> <pre><code>const mesData = historico.filter(item =&gt; item.mes === mesKey);\n</code></pre> <ul> <li>Filtra las personas que pertenecen a ese mes</li> </ul>"},{"location":"proyecto/frontend/src/components/dataGrids/historicoSabados/#9-cabecera-del-mes-clickeable","title":"9\ufe0f\u20e3 Cabecera del mes (clickeable)","text":"<pre><code>&lt;Box onClick={() =&gt; toggleMonth(mesKey)}&gt;\n</code></pre> <ul> <li>Permite expandir / colapsar el mes</li> </ul> <pre><code>{expandedMonths[mesKey] ? &lt;KeyboardArrowUpIcon /&gt; : &lt;KeyboardArrowDownIcon /&gt;}\n</code></pre> <ul> <li>\u00cdcono din\u00e1mico seg\u00fan estado</li> </ul> <pre><code>&lt;Typography&gt;{mesData.length} personas&lt;/Typography&gt;\n</code></pre> <ul> <li>Muestra cu\u00e1ntas personas trabajaron ese mes</li> </ul>"},{"location":"proyecto/frontend/src/components/dataGrids/historicoSabados/#tabla-desplegable","title":"\ud83d\udd1f Tabla desplegable","text":"<pre><code>&lt;Collapse in={expandedMonths[mesKey]} unmountOnExit&gt;\n</code></pre> <ul> <li>Solo se renderiza cuando el mes est\u00e1 expandido</li> </ul>"},{"location":"proyecto/frontend/src/components/dataGrids/historicoSabados/#cabecera","title":"Cabecera","text":"<ul> <li>Nombre</li> <li>S\u00e1bados trabajados</li> <li>Total</li> </ul>"},{"location":"proyecto/frontend/src/components/dataGrids/historicoSabados/#filas","title":"Filas","text":"<pre><code>{mesData.map(item =&gt; (\n  &lt;TableRow&gt;\n    &lt;TableCell&gt;{item.nombre} {item.apellido}&lt;/TableCell&gt;\n    &lt;TableCell&gt;{item.sabados.join(', ')}&lt;/TableCell&gt;\n    &lt;TableCell&gt;{item.sabados.length}&lt;/TableCell&gt;\n  &lt;/TableRow&gt;\n))}\n</code></pre> <ul> <li>Lista los s\u00e1bados trabajados y su total por persona</li> </ul>"},{"location":"proyecto/frontend/src/components/dataGrids/historicoSabados/#11-resumen-funcional","title":"11\ufe0f\u20e3 Resumen funcional","text":"<p>Este componente:</p> <ul> <li>Carga el hist\u00f3rico de s\u00e1bados desde el backend</li> <li>Agrupa la informaci\u00f3n por mes</li> <li>Permite expandir cada mes</li> <li>Muestra detalle por persona</li> <li>Maneja errores y estados de carga</li> </ul> <p>Es una vista 100% de lectura, pensada para consulta y auditor\u00eda.</p>"},{"location":"proyecto/frontend/src/components/dataGrids/historicoSabados/#12-posibles-mejoras-futuras","title":"12\ufe0f\u20e3 Posibles mejoras futuras","text":"<ul> <li>Memoizaci\u00f3n del filtrado por mes (<code>useMemo</code>)</li> <li>Paginaci\u00f3n si el hist\u00f3rico crece</li> <li>Exportaci\u00f3n a Excel / PDF</li> <li>Separar l\u00f3gica en un hook (<code>useHistoricoSabados</code>)</li> </ul>"},{"location":"proyecto/frontend/src/components/dataGrids/notasDataGrid/","title":"NotasDataGrid.jsx","text":""},{"location":"proyecto/frontend/src/components/dataGrids/notasDataGrid/#proposito-del-componente","title":"Prop\u00f3sito del componente","text":"<p><code>NotasDataGrid</code> es un componente de presentaci\u00f3n y gesti\u00f3n de datos que utiliza MUI DataGrid para mostrar, editar, exportar y eliminar notas de venta. Est\u00e1 dise\u00f1ado como una vista central de trabajo, donde el usuario puede revisar informaci\u00f3n estructurada, interactuar con registros individuales y ejecutar acciones controladas seg\u00fan su rol.</p> <p>El componente no se limita a renderizar una tabla: orquesta la carga de datos, la transformaci\u00f3n de fechas, la gesti\u00f3n de permisos, la apertura de modales y la confirmaci\u00f3n de acciones destructivas.</p>"},{"location":"proyecto/frontend/src/components/dataGrids/notasDataGrid/#responsabilidades-principales","title":"Responsabilidades principales","text":"<ul> <li>Obtener notas desde la API</li> <li>Filtrar notas seg\u00fan estado</li> <li>Normalizar y formatear datos para el DataGrid</li> <li>Controlar permisos de eliminaci\u00f3n seg\u00fan grupo de usuario</li> <li>Abrir modal de edici\u00f3n con datos preparados</li> <li>Confirmar y ejecutar eliminaci\u00f3n de notas</li> <li>Exportar datos visibles a Excel</li> </ul>"},{"location":"proyecto/frontend/src/components/dataGrids/notasDataGrid/#funcion-utilitaria-formatearnota","title":"Funci\u00f3n utilitaria <code>formatearNota</code>","text":"<p>Antes de que los datos lleguen al DataGrid, cada nota se transforma mediante esta funci\u00f3n.</p>"},{"location":"proyecto/frontend/src/components/dataGrids/notasDataGrid/#objetivos","title":"Objetivos","text":"<ul> <li>Mantener una copia de la fecha original (<code>fecha_despacho_original</code>)</li> <li>Convertir fechas ISO a formatos legibles</li> <li>Separar fecha y hora para columnas independientes</li> <li>Asegurar consistencia de tipos (evitar <code>null</code> o valores no string)</li> </ul>"},{"location":"proyecto/frontend/src/components/dataGrids/notasDataGrid/#ventajas","title":"Ventajas","text":"<ul> <li>El DataGrid recibe datos listos para mostrar</li> <li>Se evita l\u00f3gica de formateo en las columnas</li> <li>Facilita reutilizaci\u00f3n de los datos en modales y exportaci\u00f3n</li> </ul>"},{"location":"proyecto/frontend/src/components/dataGrids/notasDataGrid/#estados-del-componente","title":"Estados del componente","text":"<ul> <li><code>notas</code>: lista de notas formateadas</li> <li><code>loading</code>: controla el estado de carga inicial</li> <li><code>modalOpen</code>: visibilidad del modal de edici\u00f3n</li> <li><code>notaSeleccionada</code>: nota activa para edici\u00f3n</li> <li><code>deletingId</code>: indica qu\u00e9 fila est\u00e1 siendo eliminada</li> <li><code>confirmOpen</code>: controla el di\u00e1logo de confirmaci\u00f3n</li> <li><code>notaToDelete</code>: referencia de la nota a eliminar</li> </ul> <p>Cada estado tiene una \u00fanica responsabilidad, evitando estados acoplados o ambiguos.</p>"},{"location":"proyecto/frontend/src/components/dataGrids/notasDataGrid/#carga-de-datos-fetchnotas","title":"Carga de datos (<code>fetchNotas</code>)","text":"<p>Se utiliza <code>useCallback</code> para evitar recrear la funci\u00f3n en cada render.</p>"},{"location":"proyecto/frontend/src/components/dataGrids/notasDataGrid/#flujo","title":"Flujo","text":"<ol> <li>Se solicita la lista completa de notas a la API</li> <li>Se filtran por <code>estado_solicitud</code></li> <li>Se transforman con <code>formatearNota</code></li> <li>Se actualiza el estado <code>notas</code></li> </ol> <p>El <code>finally</code> asegura que el estado <code>loading</code> se desactive incluso ante errores.</p>"},{"location":"proyecto/frontend/src/components/dataGrids/notasDataGrid/#control-de-permisos","title":"Control de permisos","text":"<pre><code>const esVentas = userGroups?.includes('Ventas');\n</code></pre> <p>Este flag define si el usuario pertenece al grupo Ventas.</p> <ul> <li>Usuarios de Ventas: no pueden eliminar</li> <li>Otros usuarios: ven la columna de eliminaci\u00f3n</li> </ul> <p>La l\u00f3gica se resuelve a nivel de columnas, no en la UI condicional, lo que mantiene el DataGrid coherente.</p>"},{"location":"proyecto/frontend/src/components/dataGrids/notasDataGrid/#definicion-de-columnas","title":"Definici\u00f3n de columnas","text":""},{"location":"proyecto/frontend/src/components/dataGrids/notasDataGrid/#columnas-base","title":"Columnas base","text":"<p>Incluyen informaci\u00f3n comercial, log\u00edstica y de auditor\u00eda:</p> <ul> <li>Cliente</li> <li>Fechas</li> <li>Contacto</li> <li>Estado</li> <li>Usuario creador/modificador</li> </ul>"},{"location":"proyecto/frontend/src/components/dataGrids/notasDataGrid/#columna-de-eliminacion","title":"Columna de eliminaci\u00f3n","text":"<ul> <li>No exportable</li> <li>No sortable</li> <li>Detiene propagaci\u00f3n del evento para evitar abrir el modal</li> <li>Muestra estado de carga individual por fila</li> </ul> <p>La columna solo se agrega si el usuario tiene permisos.</p>"},{"location":"proyecto/frontend/src/components/dataGrids/notasDataGrid/#interaccion-con-filas","title":"Interacci\u00f3n con filas","text":""},{"location":"proyecto/frontend/src/components/dataGrids/notasDataGrid/#doble-clic","title":"Doble clic","text":"<p>Abre el modal de edici\u00f3n y transforma la nota al formato esperado por el formulario.</p> <p>Se renombran campos y se normalizan valores como tel\u00e9fono y fechas.</p>"},{"location":"proyecto/frontend/src/components/dataGrids/notasDataGrid/#eliminacion-de-notas","title":"Eliminaci\u00f3n de notas","text":"<p>La eliminaci\u00f3n sigue un flujo seguro:</p> <ol> <li>Solicitud de eliminaci\u00f3n</li> <li>Apertura de di\u00e1logo de confirmaci\u00f3n</li> <li>Llamada a la API</li> <li>Actualizaci\u00f3n optimista del estado</li> <li>Manejo de errores</li> </ol> <p>Esto evita p\u00e9rdidas accidentales de informaci\u00f3n.</p>"},{"location":"proyecto/frontend/src/components/dataGrids/notasDataGrid/#exportacion-a-excel","title":"Exportaci\u00f3n a Excel","text":"<p>La exportaci\u00f3n:</p> <ul> <li>Respeta columnas visibles</li> <li>Excluye columnas no exportables</li> <li>Utiliza el mismo set de datos mostrado</li> </ul> <p>Esto garantiza consistencia entre UI y archivo exportado.</p>"},{"location":"proyecto/frontend/src/components/dataGrids/notasDataGrid/#datagrid-configuracion-clave","title":"DataGrid: configuraci\u00f3n clave","text":"<ul> <li><code>getRowId</code>: asegura claves estables</li> <li><code>density=\"compact\"</code>: optimiza uso de espacio</li> <li><code>CustomToolbar</code>: centraliza acciones</li> <li><code>localeText</code>: traducci\u00f3n al espa\u00f1ol</li> <li><code>initialState</code>: orden y visibilidad inicial</li> </ul> <p>La configuraci\u00f3n est\u00e1 pensada para uso intensivo y grandes vol\u00famenes de datos.</p>"},{"location":"proyecto/frontend/src/components/dataGrids/notasDataGrid/#componentes-auxiliares","title":"Componentes auxiliares","text":"<ul> <li><code>EditNotaModal</code>: edici\u00f3n controlada de notas</li> <li><code>ConfirmDialog</code>: confirmaci\u00f3n de acciones destructivas</li> <li><code>CustomToolBar</code>: acciones globales del grid</li> </ul> <p>Estos componentes desacoplan responsabilidades y mejoran mantenibilidad.</p>"},{"location":"proyecto/frontend/src/components/dataGrids/notasDataGrid/#consideraciones-de-diseno","title":"Consideraciones de dise\u00f1o","text":"<ul> <li>Separaci\u00f3n clara entre datos, UI y acciones</li> <li>C\u00f3digo preparado para escalabilidad</li> <li>Pensado para entornos productivos reales</li> <li>Compatible con mantenimiento por terceros</li> </ul> <p>Este componente act\u00faa como una pieza central del m\u00f3dulo de gesti\u00f3n de notas, priorizando robustez, claridad y control de errores.</p>"},{"location":"proyecto/frontend/src/components/dataGrids/sabadoMesGrid/","title":"SabadoMesGrid.jsx","text":""},{"location":"proyecto/frontend/src/components/dataGrids/sabadoMesGrid/#proposito-del-componente","title":"Prop\u00f3sito del componente","text":"<p>Este componente renderiza una grilla mensual de s\u00e1bados trabajados por personal, permitiendo:</p> <ul> <li>Visualizar todos los s\u00e1bados de un mes</li> <li>Marcar o desmarcar asistencia por persona</li> <li>Guardar los cambios en backend</li> <li>Exportar la informaci\u00f3n a Excel</li> <li>Navegar al hist\u00f3rico</li> <li>Cambiar el mes visualizado</li> </ul> <p>Es un componente stateful, con fuerte interacci\u00f3n con backend y generaci\u00f3n din\u00e1mica de columnas.</p>"},{"location":"proyecto/frontend/src/components/dataGrids/sabadoMesGrid/#imports-y-dependencias","title":"Imports y dependencias","text":""},{"location":"proyecto/frontend/src/components/dataGrids/sabadoMesGrid/#react-y-estado","title":"React y estado","text":"<ul> <li><code>useState</code>: manejo de estado local (mes, datos, loading, cambios)</li> <li><code>useEffect</code>: carga inicial de datos</li> <li><code>useCallback</code>: memoizaci\u00f3n de la funci\u00f3n de carga</li> </ul>"},{"location":"proyecto/frontend/src/components/dataGrids/sabadoMesGrid/#ui-y-datagrid","title":"UI y DataGrid","text":"<ul> <li><code>DataGrid</code>: tabla principal</li> <li><code>Box</code>, <code>Checkbox</code>, <code>Button</code>, <code>CircularProgress</code>: layout y controles</li> </ul>"},{"location":"proyecto/frontend/src/components/dataGrids/sabadoMesGrid/#fechas","title":"Fechas","text":"<p>Se usa <code>date-fns</code> para:</p> <ul> <li>Calcular los s\u00e1bados del mes</li> <li>Formatear fechas</li> <li>Localizaci\u00f3n en espa\u00f1ol</li> </ul>"},{"location":"proyecto/frontend/src/components/dataGrids/sabadoMesGrid/#utilidades-propias","title":"Utilidades propias","text":"<ul> <li><code>dataGridEs</code>: textos del DataGrid en espa\u00f1ol</li> <li><code>CustomToolBar</code>: toolbar con exportaci\u00f3n</li> <li><code>exportExcel</code>: exportar datos</li> <li><code>api</code>: cliente HTTP</li> </ul>"},{"location":"proyecto/frontend/src/components/dataGrids/sabadoMesGrid/#funcion-getsaturdaysofmonth","title":"Funci\u00f3n getSaturdaysOfMonth","text":"<pre><code>function getSaturdaysOfMonth(date) {\n</code></pre>"},{"location":"proyecto/frontend/src/components/dataGrids/sabadoMesGrid/#que-hace","title":"Qu\u00e9 hace","text":"<p>Recibe una fecha cualquiera y devuelve todas las fechas de s\u00e1bado del mes, en formato <code>yyyy-MM-dd</code>.</p>"},{"location":"proyecto/frontend/src/components/dataGrids/sabadoMesGrid/#flujo-interno","title":"Flujo interno","text":"<ol> <li>Genera todos los d\u00edas del mes</li> <li>Filtra solo los d\u00edas cuyo <code>getDay()</code> es <code>6</code> (s\u00e1bado)</li> <li>Devuelve un arreglo de strings</li> </ol> <p>Esto permite generar columnas din\u00e1micas seg\u00fan el mes seleccionado.</p>"},{"location":"proyecto/frontend/src/components/dataGrids/sabadoMesGrid/#estados-del-componente","title":"Estados del componente","text":"<pre><code>const [mes, setMes] = useState(new Date());\nconst [personal, setPersonal] = useState([]);\nconst [originalData, setOriginalData] = useState([]);\nconst [loading, setLoading] = useState(true);\nconst [hasChanges, setHasChanges] = useState(false);\n</code></pre>"},{"location":"proyecto/frontend/src/components/dataGrids/sabadoMesGrid/#responsabilidad-de-cada-estado","title":"Responsabilidad de cada estado","text":"<ul> <li><code>mes</code>: mes actualmente seleccionado</li> <li><code>personal</code>: datos editables que se muestran en la grilla</li> <li><code>originalData</code>: copia de respaldo para revertir cambios</li> <li><code>loading</code>: estado global de carga / guardado</li> <li><code>hasChanges</code>: controla si el bot\u00f3n guardar est\u00e1 habilitado</li> </ul>"},{"location":"proyecto/frontend/src/components/dataGrids/sabadoMesGrid/#calculo-de-sabados","title":"C\u00e1lculo de s\u00e1bados","text":"<pre><code>const saturdays = getSaturdaysOfMonth(mes)\n</code></pre> <p>Cada vez que cambia el mes, se recalculan los s\u00e1bados y, por consecuencia, las columnas.</p>"},{"location":"proyecto/frontend/src/components/dataGrids/sabadoMesGrid/#fetchdata-carga-principal","title":"fetchData (carga principal)","text":"<p>Esta es la funci\u00f3n m\u00e1s importante del componente.</p>"},{"location":"proyecto/frontend/src/components/dataGrids/sabadoMesGrid/#que-hace_1","title":"Qu\u00e9 hace","text":"<ol> <li>Obtiene el listado de personal</li> <li> <p>Para cada persona:</p> </li> <li> <p>Consulta sus s\u00e1bados trabajados</p> </li> <li>Genera un objeto con flags por fecha</li> <li>Construye filas listas para el DataGrid</li> </ol>"},{"location":"proyecto/frontend/src/components/dataGrids/sabadoMesGrid/#estructura-resultante-por-persona","title":"Estructura resultante por persona","text":"<pre><code>{\n  id_personal: 1,\n  nombre_completo: \"Juan P\u00e9rez\",\n  \"2024-09-07\": true,\n  \"2024-09-14\": false\n}\n</code></pre> <p>Esto permite que cada s\u00e1bado sea una columna editable.</p>"},{"location":"proyecto/frontend/src/components/dataGrids/sabadoMesGrid/#manejo-de-errores","title":"Manejo de errores","text":"<ul> <li>Si falla un s\u00e1bado individual, se inicializa en <code>false</code></li> <li>Si falla todo, se muestra snackbar de error</li> </ul>"},{"location":"proyecto/frontend/src/components/dataGrids/sabadoMesGrid/#useeffect-inicial","title":"useEffect inicial","text":"<pre><code>useEffect(() =&gt; {\n  fetchData();\n}, []);\n</code></pre> <p>Carga los datos solo una vez al montar el componente.</p>"},{"location":"proyecto/frontend/src/components/dataGrids/sabadoMesGrid/#handlecheckboxchange","title":"handleCheckboxChange","text":"<pre><code>const handleCheckboxChange = (id, date, checked) =&gt; {\n</code></pre>"},{"location":"proyecto/frontend/src/components/dataGrids/sabadoMesGrid/#que-hace_2","title":"Qu\u00e9 hace","text":"<ul> <li>Actualiza el valor del checkbox en el estado local</li> <li>Marca que existen cambios pendientes</li> </ul> <p>No guarda nada en backend a\u00fan.</p>"},{"location":"proyecto/frontend/src/components/dataGrids/sabadoMesGrid/#handlesavechanges","title":"handleSaveChanges","text":""},{"location":"proyecto/frontend/src/components/dataGrids/sabadoMesGrid/#flujo-completo","title":"Flujo completo","text":"<ol> <li>Recorre todo el personal</li> <li> <p>Para cada persona:</p> </li> <li> <p>Obtiene los s\u00e1bados marcados</p> </li> <li>Env\u00eda la lista completa al backend</li> <li>Recarga los datos</li> <li>Muestra feedback al usuario</li> </ol>"},{"location":"proyecto/frontend/src/components/dataGrids/sabadoMesGrid/#decision-clave","title":"Decisi\u00f3n clave","text":"<p>Se env\u00eda la lista completa de s\u00e1bados, no solo diferencias.</p> <p>Esto simplifica la l\u00f3gica del backend y evita inconsistencias.</p>"},{"location":"proyecto/frontend/src/components/dataGrids/sabadoMesGrid/#en-caso-de-error","title":"En caso de error","text":"<ul> <li>Se muestra mensaje</li> <li>Se revierte el estado local usando <code>originalData</code></li> </ul>"},{"location":"proyecto/frontend/src/components/dataGrids/sabadoMesGrid/#columnas-del-datagrid","title":"Columnas del DataGrid","text":""},{"location":"proyecto/frontend/src/components/dataGrids/sabadoMesGrid/#columna-fija","title":"Columna fija","text":"<pre><code>{\n  field: 'nombre_completo',\n  headerName: 'Nombre'\n}\n</code></pre>"},{"location":"proyecto/frontend/src/components/dataGrids/sabadoMesGrid/#columnas-dinamicas-por-sabado","title":"Columnas din\u00e1micas por s\u00e1bado","text":"<p>Se generan usando <code>map</code> sobre <code>saturdays</code>.</p> <p>Cada columna:</p> <ul> <li>Usa la fecha como <code>field</code></li> <li>Muestra el d\u00eda y mes formateado</li> <li>Renderiza un <code>Checkbox</code></li> </ul> <p>El checkbox actualiza el estado local al cambiar.</p>"},{"location":"proyecto/frontend/src/components/dataGrids/sabadoMesGrid/#exportacion-a-excel","title":"Exportaci\u00f3n a Excel","text":"<pre><code>const onExport = () =&gt; {\n</code></pre>"},{"location":"proyecto/frontend/src/components/dataGrids/sabadoMesGrid/#que-hace_3","title":"Qu\u00e9 hace","text":"<ul> <li>Convierte <code>true / false</code> en <code>X / ''</code></li> <li>Reutiliza las mismas columnas del DataGrid</li> <li>Exporta usando <code>exportExcel</code></li> </ul>"},{"location":"proyecto/frontend/src/components/dataGrids/sabadoMesGrid/#render-condicional-por-loading","title":"Render condicional por loading","text":"<p>Mientras <code>loading</code> es <code>true</code>, se muestra solo un spinner centrado.</p>"},{"location":"proyecto/frontend/src/components/dataGrids/sabadoMesGrid/#render-principal","title":"Render principal","text":""},{"location":"proyecto/frontend/src/components/dataGrids/sabadoMesGrid/#datagrid","title":"DataGrid","text":"<p>Configuraci\u00f3n relevante:</p> <ul> <li><code>getRowId</code>: usa <code>id_personal</code></li> <li><code>hideFooter</code>: sin paginaci\u00f3n</li> <li><code>disableColumnMenu</code>: grilla simple</li> <li><code>CustomToolBar</code>: exportaci\u00f3n</li> <li><code>sorting</code> inicial por nombre</li> </ul>"},{"location":"proyecto/frontend/src/components/dataGrids/sabadoMesGrid/#barra-inferior","title":"Barra inferior","text":"<p>Contiene:</p> <ul> <li>Navegaci\u00f3n a hist\u00f3rico</li> <li>Selector de mes</li> <li>Bot\u00f3n guardar cambios</li> </ul> <p>El bot\u00f3n guardar solo se habilita si hay cambios.</p>"},{"location":"proyecto/frontend/src/components/dataGrids/sabadoMesGrid/#resumen-arquitectonico","title":"Resumen arquitect\u00f3nico","text":"<p>Este componente:</p> <ul> <li>Genera columnas din\u00e1micas basadas en fechas</li> <li>Mantiene estado editable desacoplado del backend</li> <li>Implementa control de cambios y rollback</li> <li>Centraliza l\u00f3gica compleja sin delegarla a la grilla</li> </ul> <p>Es un muy buen ejemplo de DataGrid avanzado con backend real.</p>"},{"location":"proyecto/frontend/src/components/forms/loginForm/","title":"LoginForm.jsx","text":""},{"location":"proyecto/frontend/src/components/forms/loginForm/#proposito-del-componente","title":"Prop\u00f3sito del componente","text":"<p><code>LoginForm</code> implementa el formulario de autenticaci\u00f3n del sistema. Su responsabilidad es:</p> <ul> <li>Capturar credenciales de usuario (username y password)</li> <li>Validar y gestionar el formulario usando React Hook Form (mediante un hook personalizado)</li> <li>Ejecutar el login contra la API</li> <li>Manejar estado visual (loading, mostrar/ocultar contrase\u00f1a)</li> <li>Persistir opcionalmente el username usando <code>localStorage</code></li> </ul> <p>El componente est\u00e1 enfocado exclusivamente en UI + orquestaci\u00f3n, delegando la l\u00f3gica de validaci\u00f3n al hook <code>useLoginForm</code>.</p>"},{"location":"proyecto/frontend/src/components/forms/loginForm/#imports-y-dependencias","title":"Imports y dependencias","text":""},{"location":"proyecto/frontend/src/components/forms/loginForm/#react","title":"React","text":"<ul> <li><code>useState</code>: controla estados locales (mostrar contrase\u00f1a, recordar usuario)</li> <li><code>useEffect</code>: inicializa el formulario con datos guardados en localStorage</li> </ul>"},{"location":"proyecto/frontend/src/components/forms/loginForm/#mui","title":"MUI","text":"<p>Se utilizan componentes de MUI para estructura y estilo:</p> <ul> <li>Contenedores: <code>Box</code>, <code>Stack</code></li> <li>Inputs: <code>TextField</code>, <code>Checkbox</code></li> <li>Interacci\u00f3n: <code>Button</code>, <code>IconButton</code></li> <li>Utilidades visuales: <code>InputAdornment</code>, <code>Typography</code></li> <li>Responsive: <code>useTheme</code>, <code>useMediaQuery</code></li> </ul> <p>Los \u00edconos (<code>Person</code>, <code>Lock</code>, <code>Visibility</code>, <code>VisibilityOff</code>) se usan \u00fanicamente como adornos visuales de los inputs.</p>"},{"location":"proyecto/frontend/src/components/forms/loginForm/#formularios","title":"Formularios","text":"<ul> <li><code>FormProvider</code> de React Hook Form permite compartir el contexto del formulario con todos los campos sin pasar props manualmente.</li> <li><code>useLoginForm</code> encapsula la configuraci\u00f3n del formulario (register, onSubmit, validaciones).</li> </ul>"},{"location":"proyecto/frontend/src/components/forms/loginForm/#infraestructura","title":"Infraestructura","text":"<ul> <li><code>api</code>: instancia de Axios configurada para comunicarse con el backend</li> <li><code>useSnackbar</code>: muestra mensajes de error al usuario</li> </ul>"},{"location":"proyecto/frontend/src/components/forms/loginForm/#estados-locales","title":"Estados locales","text":"<pre><code>const [showPassword, setShowPassword] = useState(false);\nconst [rememberMe, setRememberMe] = useState(false);\n</code></pre>"},{"location":"proyecto/frontend/src/components/forms/loginForm/#showpassword","title":"<code>showPassword</code>","text":"<ul> <li>Controla si el campo password se renderiza como <code>text</code> o <code>password</code>.</li> <li>Solo afecta a la UI, no al valor enviado.</li> </ul>"},{"location":"proyecto/frontend/src/components/forms/loginForm/#rememberme","title":"<code>rememberMe</code>","text":"<ul> <li>Indica si el username debe persistirse en <code>localStorage</code>.</li> <li>Se sincroniza manualmente con el checkbox.</li> </ul>"},{"location":"proyecto/frontend/src/components/forms/loginForm/#responsive-behavior","title":"Responsive behavior","text":"<pre><code>const theme = useTheme();\nconst isSmallScreen = useMediaQuery(theme.breakpoints.down('sm'));\n</code></pre> <ul> <li>Permite ajustar el ancho del formulario seg\u00fan el tama\u00f1o de pantalla.</li> <li>La l\u00f3gica responsive se mantiene simple y declarativa.</li> </ul>"},{"location":"proyecto/frontend/src/components/forms/loginForm/#inicializacion-del-formulario","title":"Inicializaci\u00f3n del formulario","text":"<pre><code>const form = useLoginForm(async (data) =&gt; { ... });\n</code></pre>"},{"location":"proyecto/frontend/src/components/forms/loginForm/#responsabilidad-del-callback","title":"Responsabilidad del callback","text":"<p>El callback pasado al hook se ejecuta cuando el formulario es v\u00e1lido y se env\u00eda:</p> <ol> <li>Maneja la persistencia del username seg\u00fan <code>rememberMe</code></li> <li>Realiza la petici\u00f3n de login</li> <li>Redirige al home en caso de \u00e9xito</li> <li>Maneja errores y feedback visual</li> </ol>"},{"location":"proyecto/frontend/src/components/forms/loginForm/#flujo-interno","title":"Flujo interno","text":"<pre><code>Submit \u2192 useLoginForm \u2192 callback\n                       \u251c\u2500 localStorage\n                       \u251c\u2500 POST /token/\n                       \u2514\u2500 redirect o snackbar error\n</code></pre> <p>El componente no maneja validaciones directamente.</p>"},{"location":"proyecto/frontend/src/components/forms/loginForm/#manejo-de-login","title":"Manejo de login","text":"<pre><code>await api.post('/token/', data);\nwindow.location.replace('/');\n</code></pre> <ul> <li>Se usa <code>replace</code> en lugar de <code>navigate</code> para evitar volver al login con el bot\u00f3n atr\u00e1s.</li> <li>El manejo de tokens queda fuera de este componente (responsabilidad del backend o interceptor).</li> </ul> <p>Errores:</p> <pre><code>const msg = error.response?.data?.detail || 'Error al iniciar sesi\u00f3n';\n</code></pre> <ul> <li>Se prioriza el mensaje entregado por el backend.</li> </ul>"},{"location":"proyecto/frontend/src/components/forms/loginForm/#mostrar-ocultar-contrasena","title":"Mostrar / ocultar contrase\u00f1a","text":"<pre><code>const togglePasswordVisibility = () =&gt; setShowPassword(prev =&gt; !prev);\n</code></pre> <ul> <li>Funci\u00f3n simple y pura.</li> <li>Se conecta directamente al <code>IconButton</code> del input.</li> </ul>"},{"location":"proyecto/frontend/src/components/forms/loginForm/#persistencia-del-username","title":"Persistencia del username","text":"<pre><code>useEffect(() =&gt; {\n  const savedUsername = localStorage.getItem('rememberedUsername');\n  if (savedUsername) {\n    form.setValue('username', savedUsername);\n    setRememberMe(true);\n  }\n}, []);\n</code></pre>"},{"location":"proyecto/frontend/src/components/forms/loginForm/#logica","title":"L\u00f3gica","text":"<ul> <li>Solo se ejecuta una vez al montar el componente.</li> <li> <p>Sincroniza:</p> </li> <li> <p>estado del checkbox</p> </li> <li>valor del formulario</li> </ul> <p>Esto evita que el formulario tenga l\u00f3gica duplicada.</p>"},{"location":"proyecto/frontend/src/components/forms/loginForm/#estructura-del-formulario","title":"Estructura del formulario","text":""},{"location":"proyecto/frontend/src/components/forms/loginForm/#formprovider","title":"<code>FormProvider</code>","text":"<p>Envuelve el formulario para que todos los campos accedan a:</p> <ul> <li><code>register</code></li> <li><code>errors</code></li> <li><code>formState</code></li> </ul> <p>Sin prop drilling.</p>"},{"location":"proyecto/frontend/src/components/forms/loginForm/#campo-username","title":"Campo Username","text":"<pre><code>&lt;TextField {...form.register('username')} /&gt;\n</code></pre> <ul> <li>El input queda completamente controlado por React Hook Form.</li> <li><code>error</code> y <code>helperText</code> dependen del estado de validaci\u00f3n.</li> <li>Se desactiva autocorrect y autocomplete por consistencia.</li> </ul>"},{"location":"proyecto/frontend/src/components/forms/loginForm/#campo-password","title":"Campo Password","text":"<p>Caracter\u00edsticas:</p> <ul> <li>Tipo din\u00e1mico (<code>text</code> / <code>password</code>)</li> <li>\u00cdcono de mostrar/ocultar</li> <li>Sin autocomplete</li> </ul> <pre><code>type={showPassword ? 'text' : 'password'}\n</code></pre> <p>Toda la l\u00f3gica visual est\u00e1 desacoplada del valor real del input.</p>"},{"location":"proyecto/frontend/src/components/forms/loginForm/#checkbox-recordarme","title":"Checkbox \"Recordarme\"","text":"<pre><code>onChange={(e) =&gt; {\n  const checked = e.target.checked;\n  setRememberMe(checked);\n  if (!checked) {\n    localStorage.removeItem('rememberedUsername');\n  }\n}}\n</code></pre> <ul> <li>Mantiene sincron\u00eda expl\u00edcita entre UI y almacenamiento.</li> <li>Evita estados intermedios inconsistentes.</li> </ul>"},{"location":"proyecto/frontend/src/components/forms/loginForm/#boton-de-envio","title":"Bot\u00f3n de env\u00edo","text":"<pre><code>disabled={form.formState.isSubmitting}\n</code></pre> <ul> <li>Evita m\u00faltiples env\u00edos simult\u00e1neos.</li> <li>El texto del bot\u00f3n refleja el estado del submit.</li> </ul>"},{"location":"proyecto/frontend/src/components/forms/loginForm/#resumen-de-responsabilidades","title":"Resumen de responsabilidades","text":"Capa Responsabilidad UI Renderizar inputs y layout Estado local UI (password, remember) Formulario Validaci\u00f3n y submit (hook) API Login Feedback Snackbar"},{"location":"proyecto/frontend/src/components/forms/loginForm/#observaciones-tecnicas","title":"Observaciones t\u00e9cnicas","text":"<ul> <li>Correcta separaci\u00f3n de responsabilidades</li> <li>Buen uso de React Hook Form</li> <li>Componente f\u00e1cil de testear</li> <li>Bajo acoplamiento con la l\u00f3gica de negocio</li> </ul>"},{"location":"proyecto/frontend/src/components/forms/loginForm/#posibles-mejoras","title":"Posibles mejoras","text":"<ul> <li>Extraer l\u00f3gica de <code>rememberMe</code> a un hook</li> <li>Manejar loading global de autenticaci\u00f3n</li> <li>Tipar el formulario con TypeScript</li> <li>Manejar errores por c\u00f3digo HTTP</li> </ul>"},{"location":"proyecto/frontend/src/components/forms/mPrimasForm/","title":"MPrimasForm.jsx","text":""},{"location":"proyecto/frontend/src/components/forms/mPrimasForm/#1-proposito-del-componente","title":"1. Prop\u00f3sito del componente","text":"<p><code>MPrimasForm</code> es un formulario React encargado de crear pedidos de materias primas (insumos). El componente permite:</p> <ul> <li>Buscar y validar proveedores por RUT</li> <li>Buscar y validar productos por c\u00f3digo</li> <li>Autocompletar datos relacionados</li> <li>Validar informaci\u00f3n antes del env\u00edo</li> <li>Crear el pedido mediante la API</li> </ul> <p>Est\u00e1 construido sobre React Hook Form, MUI, MUI X Pickers y Axios, siguiendo el mismo patr\u00f3n de formularios del proyecto.</p>"},{"location":"proyecto/frontend/src/components/forms/mPrimasForm/#2-dependencias-principales","title":"2. Dependencias principales","text":"<pre><code>useSnackbar            // Feedback visual al usuario\nusePrimasForm          // Hook de RHF con validaciones\napi                    // Cliente Axios centralizado\nformatearRut           // Normalizaci\u00f3n de RUT chileno\ndate-fns               // Manejo de fechas\nMUI + Pickers          // UI\nSearchSelect           // Autocomplete con b\u00fasqueda remota\n</code></pre> <p>Cada dependencia cumple una funci\u00f3n clara y separada, evitando l\u00f3gica duplicada dentro del componente.</p>"},{"location":"proyecto/frontend/src/components/forms/mPrimasForm/#3-estructura-general-del-componente","title":"3. Estructura general del componente","text":"<pre><code>const MPrimasForm = () =&gt; {\n  helpers\n  form = usePrimasForm(onSubmit)\n  handlers\n  return JSX\n}\n</code></pre> <p>El archivo mantiene una estructura lineal:</p> <ol> <li>Hooks y helpers</li> <li>L\u00f3gica de submit</li> <li>Handlers de eventos</li> <li>Render JSX</li> </ol>"},{"location":"proyecto/frontend/src/components/forms/mPrimasForm/#4-helper-transformacion-a-mayusculas","title":"4. Helper: transformaci\u00f3n a may\u00fasculas","text":"<pre><code>const transformMayus = (obj, excluir = []) =&gt; {\n  const nuevoObj = { ...obj };\n  for (const key in nuevoObj) {\n    if (typeof nuevoObj[key] === 'string' &amp;&amp; !excluir.includes(key)) {\n      nuevoObj[key] = nuevoObj[key].toUpperCase();\n    }\n  }\n  return nuevoObj;\n};\n</code></pre>"},{"location":"proyecto/frontend/src/components/forms/mPrimasForm/#funcion","title":"Funci\u00f3n","text":"<ul> <li>Normaliza strings antes de enviarlos al backend</li> <li>Permite excluir campos sensibles (ej: correos)</li> <li>Centraliza una regla de negocio frecuente</li> </ul>"},{"location":"proyecto/frontend/src/components/forms/mPrimasForm/#5-inicializacion-del-formulario","title":"5. Inicializaci\u00f3n del formulario","text":"<pre><code>const form = usePrimasForm(async (data) =&gt; { ... })\n</code></pre> <p><code>usePrimasForm</code> encapsula:</p> <ul> <li><code>useForm</code></li> <li>esquema de validaci\u00f3n (Yup o similar)</li> <li><code>onSubmit</code></li> </ul> <p>Esto mantiene el componente liviano y enfocado solo en flujo.</p>"},{"location":"proyecto/frontend/src/components/forms/mPrimasForm/#6-flujo-de-envio-del-formulario","title":"6. Flujo de env\u00edo del formulario","text":""},{"location":"proyecto/frontend/src/components/forms/mPrimasForm/#61-busqueda-de-proveedor-opcional","title":"6.1 B\u00fasqueda de proveedor (opcional)","text":"<pre><code>if (data.rut_proveedor) {\n  const { data: provData } = await api.get('/proveedores/por-rut/', { ... })\n}\n</code></pre> <ul> <li>El proveedor no es obligatorio</li> <li>Si no existe, se notifica pero no se bloquea el flujo</li> </ul>"},{"location":"proyecto/frontend/src/components/forms/mPrimasForm/#62-busqueda-de-producto-obligatoria","title":"6.2 B\u00fasqueda de producto (obligatoria)","text":"<pre><code>const { data: prodData } = await api.get('/productos/por-codigo/', { ... })\n</code></pre> <ul> <li>Si el producto no existe, el flujo se interrumpe</li> <li>No se permite crear pedidos sin producto v\u00e1lido</li> </ul>"},{"location":"proyecto/frontend/src/components/forms/mPrimasForm/#63-construccion-del-payload","title":"6.3 Construcci\u00f3n del payload","text":"<pre><code>const payload = {\n  id_proveedor,\n  id_producto,\n  cantidad,\n  unidad_medida,\n  fecha_entrega,\n  observacion,\n};\n</code></pre> <p>Se env\u00eda \u00fanicamente la informaci\u00f3n necesaria, manteniendo desacoplado el backend del formulario.</p>"},{"location":"proyecto/frontend/src/components/forms/mPrimasForm/#64-envio-a-la-api","title":"6.4 Env\u00edo a la API","text":"<pre><code>await api.post('/pedido_materias_primas/', transformMayus(payload));\n</code></pre> <ul> <li>Normalizaci\u00f3n previa</li> <li>Manejo de errores HTTP</li> <li>Feedback visual</li> </ul>"},{"location":"proyecto/frontend/src/components/forms/mPrimasForm/#7-handlers-de-campos","title":"7. Handlers de campos","text":""},{"location":"proyecto/frontend/src/components/forms/mPrimasForm/#71-rut-del-proveedor","title":"7.1 RUT del proveedor","text":"<pre><code>const handleChangeRut = (e) =&gt; {\n  const formattedValue = formatearRut(e.target.value);\n  form.setValue('rut_proveedor', formattedValue);\n};\n</code></pre> <ul> <li>Formatea en tiempo real</li> <li>Mantiene el valor siempre v\u00e1lido</li> </ul> <pre><code>const handleBlurRut = async (e) =&gt; { ... }\n</code></pre> <ul> <li>Busca proveedor al perder foco</li> <li>Autocompleta raz\u00f3n social e ID</li> <li>Limpia campos si no existe</li> </ul>"},{"location":"proyecto/frontend/src/components/forms/mPrimasForm/#72-codigo-de-producto","title":"7.2 C\u00f3digo de producto","text":"<pre><code>const handleBlurProducto = async (e) =&gt; { ... }\n</code></pre> <ul> <li> <p>Autocompleta:</p> </li> <li> <p>nombre</p> </li> <li>unidad de medida</li> <li>ID interno</li> </ul>"},{"location":"proyecto/frontend/src/components/forms/mPrimasForm/#8-integracion-con-searchselect","title":"8. Integraci\u00f3n con SearchSelect","text":"<pre><code>&lt;SearchSelect\n  name=\"razon_social\"\n  endpoint=\"/pedido_materias_primas/buscar-proveedores\"\n/&gt;\n</code></pre> <ul> <li>Permite b\u00fasqueda remota con debounce</li> <li>Sincroniza valores adicionales al seleccionar</li> <li>Reutilizable en otros formularios</li> </ul>"},{"location":"proyecto/frontend/src/components/forms/mPrimasForm/#9-manejo-de-fechas","title":"9. Manejo de fechas","text":"<pre><code>&lt;DatePicker\n  value={parseISO(form.watch('fecha_entrega'))}\n  onChange={(date) =&gt; form.setValue('fecha_entrega', format(date, 'yyyy-MM-dd'))}\n/&gt;\n</code></pre> <ul> <li>El formulario almacena strings ISO</li> <li>El picker trabaja con <code>Date</code></li> <li>Conversi\u00f3n expl\u00edcita y validada</li> </ul>"},{"location":"proyecto/frontend/src/components/forms/mPrimasForm/#10-envio-del-formulario","title":"10. Env\u00edo del formulario","text":"<pre><code>const handleSubmitPrima = (e) =&gt; {\n  e.preventDefault();\n  form.onSubmit();\n};\n</code></pre> <p>Separar el submit permite:</p> <ul> <li>l\u00f3gica previa</li> <li>extensiones futuras</li> <li>mejor legibilidad</li> </ul>"},{"location":"proyecto/frontend/src/components/forms/mPrimasForm/#11-render-jsx","title":"11. Render JSX","text":"<ul> <li><code>FormProvider</code> comparte el contexto del formulario</li> <li><code>Controller</code> se usa para inputs complejos</li> <li><code>Grid + Stack</code> organizan el layout</li> <li>El bot\u00f3n refleja el estado <code>isSubmitting</code></li> </ul>"},{"location":"proyecto/frontend/src/components/forms/mPrimasForm/#12-decisiones-tecnicas","title":"12. Decisiones t\u00e9cnicas","text":"<ul> <li>RHF para performance y control</li> <li>API desacoplada</li> <li>Autocompletado progresivo</li> <li>Normalizaci\u00f3n centralizada</li> <li>Componentes reutilizables</li> </ul>"},{"location":"proyecto/frontend/src/components/forms/mPrimasForm/#13-resultado","title":"13. Resultado","text":"<p>Este componente implementa un flujo robusto y escalable para pedidos de insumos, manteniendo:</p> <ul> <li>buena UX</li> <li>reglas de negocio claras</li> <li>c\u00f3digo mantenible</li> </ul>"},{"location":"proyecto/frontend/src/components/forms/notaForm/","title":"NotaForm.jsx","text":""},{"location":"proyecto/frontend/src/components/forms/notaForm/#proposito","title":"Prop\u00f3sito","text":"<p><code>NotaForm</code> es un formulario encargado de la creaci\u00f3n de Notas de Venta, incorporando validaciones de negocio, gesti\u00f3n autom\u00e1tica de clientes y confirmaci\u00f3n de actualizaci\u00f3n de datos cuando corresponde.</p>"},{"location":"proyecto/frontend/src/components/forms/notaForm/#responsabilidades-principales","title":"Responsabilidades principales","text":"<ul> <li>Crear una Nota de Venta</li> <li>Validar unicidad del n\u00famero de nota</li> <li>Buscar clientes por RUT</li> <li>Crear clientes autom\u00e1ticamente si no existen</li> <li>Detectar modificaciones en datos de cliente existentes</li> <li>Solicitar confirmaci\u00f3n antes de actualizar un cliente</li> <li>Manejar fechas y horarios de despacho</li> <li>Mostrar notificaciones de \u00e9xito y error</li> </ul>"},{"location":"proyecto/frontend/src/components/forms/notaForm/#dependencias","title":"Dependencias","text":"<ul> <li>React Hook Form</li> <li>Material UI</li> <li>notistack</li> <li>Axios (api)</li> <li>date-fns</li> <li>Hooks y componentes internos del proyecto</li> </ul>"},{"location":"proyecto/frontend/src/components/forms/notaForm/#estado-interno","title":"Estado interno","text":"<ul> <li><code>openEditDialog</code>: controla el di\u00e1logo de confirmaci\u00f3n de actualizaci\u00f3n de cliente</li> <li><code>clienteOriginal</code>: almacena los datos originales del cliente para comparaci\u00f3n</li> </ul>"},{"location":"proyecto/frontend/src/components/forms/notaForm/#normalizacion-de-datos","title":"Normalizaci\u00f3n de datos","text":""},{"location":"proyecto/frontend/src/components/forms/notaForm/#transformmayus","title":"<code>transformMayus</code>","text":"<p>Convierte a may\u00fasculas todos los strings de un objeto, excepto los campos excluidos.</p> <p>Se utiliza para garantizar consistencia en los datos enviados al backend, respetando campos sensibles como el correo.</p>"},{"location":"proyecto/frontend/src/components/forms/notaForm/#inicializacion-del-formulario","title":"Inicializaci\u00f3n del formulario","text":"<p>El formulario se inicializa mediante el hook <code>useNotaForm</code>, el cual recibe una funci\u00f3n <code>onSubmit</code> personalizada con toda la l\u00f3gica de validaci\u00f3n y persistencia.</p> <p>Flujo general:</p> <ol> <li>Validar que el n\u00famero de nota no exista</li> <li>Buscar cliente por RUT</li> <li>Crear cliente si no existe</li> <li>Crear la nota</li> </ol>"},{"location":"proyecto/frontend/src/components/forms/notaForm/#validacion-de-numero-de-nota","title":"Validaci\u00f3n de n\u00famero de nota","text":"<p>Antes de crear una nota, se consulta al backend para verificar si el n\u00famero ya existe.</p> <p>Si existe:</p> <ul> <li>Se inyecta un error manual en el formulario</li> <li>Se cancela el proceso de creaci\u00f3n</li> </ul>"},{"location":"proyecto/frontend/src/components/forms/notaForm/#gestion-automatica-del-cliente","title":"Gesti\u00f3n autom\u00e1tica del cliente","text":""},{"location":"proyecto/frontend/src/components/forms/notaForm/#busqueda-por-rut","title":"B\u00fasqueda por RUT","text":"<p>Cuando se pierde el foco del campo RUT:</p> <ul> <li>Se consulta el cliente</li> <li>Si existe, se autocompletan los campos</li> <li>Se almacenan los valores originales para comparaci\u00f3n</li> </ul> <p>Si el cliente no existe:</p> <ul> <li>Se construye un payload con los datos ingresados</li> <li>Se crea autom\u00e1ticamente en la base de datos</li> </ul>"},{"location":"proyecto/frontend/src/components/forms/notaForm/#creacion-de-la-nota","title":"Creaci\u00f3n de la nota","text":"<p>Una vez validados los datos:</p> <ul> <li>Se construye un payload reducido</li> <li>Se normalizan los valores</li> <li>Se env\u00eda la solicitud al endpoint de creaci\u00f3n</li> </ul> <p>Tras \u00e9xito:</p> <ul> <li>Se notifica al usuario</li> <li>Se reinician campos clave del formulario</li> </ul>"},{"location":"proyecto/frontend/src/components/forms/notaForm/#manejo-del-rut","title":"Manejo del RUT","text":"<ul> <li>El RUT se formatea en tiempo real mientras se escribe</li> <li>Al perder el foco se valida contra el backend</li> <li>Se reutiliza el mismo campo para creaci\u00f3n o edici\u00f3n</li> </ul>"},{"location":"proyecto/frontend/src/components/forms/notaForm/#deteccion-de-cambios-en-cliente","title":"Detecci\u00f3n de cambios en cliente","text":"<p>Mediante <code>useMemo</code> se comparan los valores actuales del formulario con los datos originales del cliente.</p> <p>Esto permite:</p> <ul> <li>Detectar qu\u00e9 campos fueron modificados</li> <li>Decidir si se debe mostrar el di\u00e1logo de confirmaci\u00f3n</li> </ul>"},{"location":"proyecto/frontend/src/components/forms/notaForm/#submit-condicionado","title":"Submit condicionado","text":"<p>Al enviar el formulario:</p> <ul> <li>Si hay campos de cliente modificados, se muestra un di\u00e1logo</li> <li>Si no hay cambios, se ejecuta el submit directamente</li> </ul>"},{"location":"proyecto/frontend/src/components/forms/notaForm/#actualizacion-del-cliente","title":"Actualizaci\u00f3n del cliente","text":"<p>Si el usuario confirma:</p> <ul> <li>Se env\u00eda una solicitud PATCH al backend</li> <li>Se actualiza el cliente</li> <li>Se contin\u00faa autom\u00e1ticamente con la creaci\u00f3n de la nota</li> </ul>"},{"location":"proyecto/frontend/src/components/forms/notaForm/#renderizado-del-formulario","title":"Renderizado del formulario","text":"<p>El formulario utiliza:</p> <ul> <li><code>FormProvider</code> para compartir contexto</li> <li><code>Controller</code> para inputs controlados</li> <li>Componentes MUI para layout y UX</li> <li>DatePicker y TimePicker con validaci\u00f3n</li> </ul> <p>Todos los campos:</p> <ul> <li>Est\u00e1n validados</li> <li>Manejan errores visuales</li> <li>Est\u00e1n integrados al estado global del formulario</li> </ul>"},{"location":"proyecto/frontend/src/components/forms/notaForm/#dialogo-de-confirmacion","title":"Di\u00e1logo de confirmaci\u00f3n","text":"<p>El di\u00e1logo:</p> <ul> <li>Enumera los campos modificados</li> <li>Permite continuar sin actualizar</li> <li>O confirmar la actualizaci\u00f3n del cliente</li> </ul>"},{"location":"proyecto/frontend/src/components/forms/notaForm/#conclusion","title":"Conclusi\u00f3n","text":"<p><code>NotaForm</code> centraliza l\u00f3gica cr\u00edtica del negocio, priorizando:</p> <ul> <li>Integridad de datos</li> <li>Automatizaci\u00f3n de procesos</li> <li>Experiencia de usuario clara</li> <li>C\u00f3digo mantenible y escalable</li> </ul> <p>Es un componente clave dentro del flujo de ventas del proyecto.</p>"},{"location":"proyecto/frontend/src/components/forms/pickingForm/","title":"PickingForm.jsx","text":""},{"location":"proyecto/frontend/src/components/forms/pickingForm/#1-proposito-general-del-componente","title":"1. Prop\u00f3sito general del componente","text":"<p>El componente <code>PickingForm</code> implementa un formulario completo para registrar productos asociados a una nota de venta (o sin nota), permitiendo:</p> <ul> <li>Buscar una nota y cargar autom\u00e1ticamente datos del cliente</li> <li>Agregar m\u00faltiples productos a una vista previa local</li> <li>Validar reglas de negocio complejas (nota vs local)</li> <li>Enviar los productos al backend uno a uno, manejando errores parciales</li> </ul> <p>Este enfoque evita perder todo el formulario si un producto falla y mejora la experiencia del usuario.</p>"},{"location":"proyecto/frontend/src/components/forms/pickingForm/#2-dependencias-y-librerias-clave","title":"2. Dependencias y librer\u00edas clave","text":""},{"location":"proyecto/frontend/src/components/forms/pickingForm/#formularios-y-validacion","title":"Formularios y validaci\u00f3n","text":"<ul> <li><code>react-hook-form</code>: manejo del estado del formulario</li> <li><code>yup</code> + <code>@hookform/resolvers/yup</code>: validaci\u00f3n declarativa</li> </ul>"},{"location":"proyecto/frontend/src/components/forms/pickingForm/#ui","title":"UI","text":"<ul> <li><code>@mui/material</code>: layout, inputs y tabla</li> <li><code>@mui/icons-material</code>: iconos de acci\u00f3n</li> </ul>"},{"location":"proyecto/frontend/src/components/forms/pickingForm/#utilidades","title":"Utilidades","text":"<ul> <li><code>api</code>: cliente HTTP centralizado</li> <li><code>notistack</code>: notificaciones</li> <li><code>date-fns</code>: parseo y formateo de fechas</li> </ul>"},{"location":"proyecto/frontend/src/components/forms/pickingForm/#3-esquema-de-validacion-schema","title":"3. Esquema de validaci\u00f3n (<code>schema</code>)","text":"<p>El schema recibe <code>productosAgregados</code> como par\u00e1metro, lo que permite validar en funci\u00f3n del estado actual.</p>"},{"location":"proyecto/frontend/src/components/forms/pickingForm/#reglas-importantes","title":"Reglas importantes","text":"<ul> <li> <p><code>cantidad</code></p> </li> <li> <p>Debe ser n\u00famero entero positivo</p> </li> <li> <p>Se transforma <code>'' \u2192 null</code> para evitar errores</p> </li> <li> <p><code>tipo</code> (Local)</p> </li> <li> <p>Obligatorio solo si no hay nota</p> </li> <li> <p>Si no hay nota:</p> <ul> <li>Todos los productos agregados deben tener tipo</li> <li>O el formulario debe tener tipo seleccionado</li> </ul> </li> </ul> <p>Esto se logra con un <code>test</code> personalizado de Yup que inspecciona:</p> <ul> <li>El valor actual</li> <li>Los valores hermanos (<code>nota</code>)</li> <li>El estado externo (<code>productosAgregados</code>)</li> </ul>"},{"location":"proyecto/frontend/src/components/forms/pickingForm/#4-helper-transformmayus","title":"4. Helper: <code>transformMayus</code>","text":"<pre><code>const transformMayus = (obj, excluir = []) =&gt; { ... }\n</code></pre>"},{"location":"proyecto/frontend/src/components/forms/pickingForm/#funcion","title":"Funci\u00f3n","text":"<ul> <li>Convierte a may\u00fasculas todos los strings del payload</li> <li>Permite excluir campos espec\u00edficos</li> </ul>"},{"location":"proyecto/frontend/src/components/forms/pickingForm/#motivo","title":"Motivo","text":"<ul> <li>Normalizar datos antes de enviarlos al backend</li> <li>Evitar inconsistencias (ej: observaciones, tipos)</li> </ul>"},{"location":"proyecto/frontend/src/components/forms/pickingForm/#5-estado-local-del-componente","title":"5. Estado local del componente","text":"<pre><code>const [loading, setLoading]\nconst [productosAgregados, setProductosAgregados]\nconst [notaValida, setNotaValida]\n</code></pre> <ul> <li><code>loading</code>: deshabilita el submit</li> <li><code>productosAgregados</code>: vista previa local (tabla)</li> <li><code>notaValida</code>: controla si se permite guardar</li> </ul> <p>Este estado no depende del formulario, sino del flujo del negocio.</p>"},{"location":"proyecto/frontend/src/components/forms/pickingForm/#6-inicializacion-del-formulario-useform","title":"6. Inicializaci\u00f3n del formulario (<code>useForm</code>)","text":"<ul> <li>Usa <code>yupResolver(schema(productosAgregados))</code></li> <li><code>mode: onTouched</code> \u2192 errores aparecen al interactuar</li> <li><code>defaultValues</code> expl\u00edcitos para evitar <code>undefined</code></li> </ul> <p>Esto asegura consistencia incluso tras resets parciales.</p>"},{"location":"proyecto/frontend/src/components/forms/pickingForm/#7-handler-handleblurnota","title":"7. Handler <code>handleBlurNota</code>","text":""},{"location":"proyecto/frontend/src/components/forms/pickingForm/#flujo","title":"Flujo","text":"<ol> <li>El usuario sale del input <code>nota</code></li> <li> <p>Si est\u00e1 vac\u00edo:</p> </li> <li> <p>Limpia datos del cliente</p> </li> <li>Marca la nota como v\u00e1lida</li> <li> <p>Si hay valor:</p> </li> <li> <p>Consulta al backend <code>/nota/cliente_por_nota/</code></p> </li> <li> <p>Carga:</p> <ul> <li>Cliente</li> <li>Fecha despacho (formateada)</li> <li>Tipo despacho</li> <li><code>nota_id</code></li> </ul> </li> </ol>"},{"location":"proyecto/frontend/src/components/forms/pickingForm/#manejo-de-error","title":"Manejo de error","text":"<ul> <li> <p>Si no existe la nota:</p> </li> <li> <p>Limpia campos</p> </li> <li>Muestra snackbar</li> <li>Marca <code>notaValida = false</code></li> </ul>"},{"location":"proyecto/frontend/src/components/forms/pickingForm/#8-agregar-producto-handleagregarproducto","title":"8. Agregar producto (<code>handleAgregarProducto</code>)","text":"<p>Este m\u00e9todo NO env\u00eda datos al backend, solo actualiza la vista previa.</p>"},{"location":"proyecto/frontend/src/components/forms/pickingForm/#validaciones-manuales","title":"Validaciones manuales","text":"<ul> <li>Producto v\u00e1lido seleccionado desde el buscador</li> <li>Cantidad ingresada</li> <li>Si no hay nota \u2192 tipo obligatorio</li> </ul>"},{"location":"proyecto/frontend/src/components/forms/pickingForm/#accion","title":"Acci\u00f3n","text":"<ul> <li>Construye un objeto normalizado</li> <li>Lo agrega a <code>productosAgregados</code></li> <li>Limpia solo los campos relacionados al producto</li> </ul> <p>Esto permite agregar m\u00faltiples productos sin perder la nota o el cliente.</p>"},{"location":"proyecto/frontend/src/components/forms/pickingForm/#9-eliminacion-de-producto","title":"9. Eliminaci\u00f3n de producto","text":"<pre><code>handleEliminarProducto(index)\n</code></pre> <ul> <li>Elimina por \u00edndice</li> <li>No afecta el formulario ni el backend</li> </ul>"},{"location":"proyecto/frontend/src/components/forms/pickingForm/#10-envio-final-onsubmit","title":"10. Env\u00edo final (<code>onSubmit</code>)","text":""},{"location":"proyecto/frontend/src/components/forms/pickingForm/#paso-a-paso","title":"Paso a paso","text":"<ol> <li>Verifica <code>notaValida</code></li> <li>Si hay un producto escrito pero no agregado \u2192 lo agrega</li> <li>Verifica que exista al menos un producto</li> <li> <p>Si no hay nota:</p> </li> <li> <p>Todos los productos deben tener tipo</p> </li> </ol>"},{"location":"proyecto/frontend/src/components/forms/pickingForm/#11-envio-al-backend-loop-controlado","title":"11. Env\u00edo al backend (loop controlado)","text":"<p>Cada producto se env\u00eda individualmente:</p> <pre><code>for (const producto of productosAEnviar) {\n  await api.post(...)\n}\n</code></pre>"},{"location":"proyecto/frontend/src/components/forms/pickingForm/#ventajas","title":"Ventajas","text":"<ul> <li>Permite errores parciales</li> <li>No bloquea todo el pedido</li> </ul>"},{"location":"proyecto/frontend/src/components/forms/pickingForm/#manejo-de-resultados","title":"Manejo de resultados","text":"<ul> <li><code>guardadosExitosamente</code></li> <li><code>fallidos</code></li> </ul> <p>Se muestran snackbars resumidos y luego:</p> <ul> <li>Se mantienen en la tabla solo los fallidos</li> </ul>"},{"location":"proyecto/frontend/src/components/forms/pickingForm/#12-limpieza-final","title":"12. Limpieza final","text":"<ul> <li>Limpia solo los campos de producto</li> <li>Mantiene nota y cliente</li> <li><code>loading</code> vuelve a <code>false</code></li> </ul>"},{"location":"proyecto/frontend/src/components/forms/pickingForm/#13-renderizado-del-jsx","title":"13. Renderizado del JSX","text":""},{"location":"proyecto/frontend/src/components/forms/pickingForm/#estructura-visual","title":"Estructura visual","text":"<ul> <li>Layout en dos columnas</li> <li>Izquierda: entrada de nota y productos</li> <li>Derecha: datos del cliente</li> <li>Tabla condicional de vista previa</li> <li>Bot\u00f3n de guardado final</li> </ul>"},{"location":"proyecto/frontend/src/components/forms/pickingForm/#puntos-clave","title":"Puntos clave","text":"<ul> <li>Uso de <code>Controller</code> para inputs controlados</li> <li><code>SearchSelect</code> desacopla la b\u00fasqueda de productos</li> <li>Bot\u00f3n <code>+</code> incrustado en el input de cantidad</li> </ul>"},{"location":"proyecto/frontend/src/components/forms/pickingForm/#14-decisiones-de-diseno-importantes","title":"14. Decisiones de dise\u00f1o importantes","text":"<ul> <li>Vista previa local antes de persistir</li> <li>Validaciones duplicadas (Yup + l\u00f3gica) por reglas complejas</li> <li>Env\u00edo por producto para tolerancia a fallos</li> <li>Normalizaci\u00f3n de datos previa al POST</li> </ul>"},{"location":"proyecto/frontend/src/components/forms/pickingForm/#15-posibles-mejoras-futuras","title":"15. Posibles mejoras futuras","text":"<ul> <li>Extraer l\u00f3gica a un hook (<code>usePickingForm</code>)</li> <li>Memoizar schema para grandes listas</li> <li>Reemplazar \u00edndice por ID temporal en la tabla</li> <li>Mostrar spinner por producto al guardar</li> </ul>"},{"location":"proyecto/frontend/src/components/modal/editNotaModal/","title":"EditNotaModal.jsx","text":""},{"location":"proyecto/frontend/src/components/modal/editNotaModal/#para-que-sirve-este-componente","title":"\u00bfPara qu\u00e9 sirve este componente?","text":"<p><code>EditNotaModal</code> es un modal de edici\u00f3n de una Nota de Venta que permite:</p> <ol> <li>Editar datos generales de la nota</li> <li>Editar datos del cliente asociados a la nota</li> <li>Detectar autom\u00e1ticamente si se modificaron datos del cliente</li> <li>Preguntar al usuario si desea actualizar tambi\u00e9n al cliente</li> <li>Guardar los cambios de forma segura usando la API</li> </ol>"},{"location":"proyecto/frontend/src/components/modal/editNotaModal/#imports-y-dependencias","title":"Imports y dependencias","text":""},{"location":"proyecto/frontend/src/components/modal/editNotaModal/#ui-material-ui","title":"UI (Material UI)","text":"<p>Se utilizan componentes de MUI para construir el modal y los formularios:</p> <ul> <li><code>Dialog</code>, <code>DialogContent</code>, <code>DialogActions</code>: estructura del modal</li> <li><code>TextField</code>, <code>Select</code>, <code>MenuItem</code>: campos de formulario</li> <li><code>FormControl</code>, <code>FormHelperText</code>: manejo de errores</li> <li><code>Stack</code>, <code>Box</code>, <code>Typography</code>: layout y texto</li> </ul>"},{"location":"proyecto/frontend/src/components/modal/editNotaModal/#formularios-y-validacion","title":"Formularios y validaci\u00f3n","text":"<pre><code>import { useForm, FormProvider, Controller } from 'react-hook-form';\nimport { yupResolver } from '@hookform/resolvers/yup';\nimport * as yup from 'yup';\n</code></pre> <ul> <li>React Hook Form maneja el estado del formulario</li> <li>Yup define las reglas de validaci\u00f3n</li> <li><code>Controller</code> se usa para componentes controlados (DatePicker, Select, Autocomplete)</li> </ul>"},{"location":"proyecto/frontend/src/components/modal/editNotaModal/#fechas-y-horas","title":"Fechas y horas","text":"<pre><code>import { DatePicker, TimePicker } from '@mui/x-date-pickers';\nimport { parse, format, isValid } from 'date-fns';\n</code></pre> <p>Permiten convertir correctamente fechas y horas entre:</p> <ul> <li><code>Date</code></li> <li>string (<code>HH:mm</code>)</li> <li>formato visual (<code>dd/MM/yyyy</code>)</li> </ul>"},{"location":"proyecto/frontend/src/components/modal/editNotaModal/#esquema-de-validacion-yup","title":"Esquema de validaci\u00f3n (Yup)","text":"<pre><code>const schema = yup.object().shape({\n  num_nota: yup.number().required('N\u00famero de nota requerido'),\n  razon_social: yup.string().required('Nombre del cliente requerido'),\n  fecha_despacho: yup\n    .date()\n    .required('Fecha de despacho requerida')\n    .typeError('Fecha inv\u00e1lida'),\n  telefono: yup\n    .string()\n    .matches(/^[1-9]\\d{8}$/, 'Debe tener 9 d\u00edgitos')\n    .required('Tel\u00e9fono requerido'),\n  despacho_retira: yup.string().required('Debe elegir despacho o retira'),\n  estado_solicitud: yup\n    .string()\n    .oneOf(['SOLICITADO', 'NO SOLICITADO'])\n    .required('Estado obligatorio'),\n});\n</code></pre>"},{"location":"proyecto/frontend/src/components/modal/editNotaModal/#logica-clave","title":"L\u00f3gica clave","text":"<ul> <li><code>typeError</code> evita errores silenciosos con fechas inv\u00e1lidas</li> <li><code>matches</code> valida tel\u00e9fonos chilenos</li> <li><code>oneOf</code> restringe valores permitidos</li> </ul>"},{"location":"proyecto/frontend/src/components/modal/editNotaModal/#inicializacion-del-formulario","title":"Inicializaci\u00f3n del formulario","text":"<pre><code>const methods = useForm({\n  resolver: yupResolver(schema),\n  mode: 'onTouched',\n  defaultValues: {}\n});\n</code></pre> <ul> <li>La validaci\u00f3n ocurre al tocar campos</li> <li>Los valores se cargan din\u00e1micamente con <code>reset()</code></li> </ul>"},{"location":"proyecto/frontend/src/components/modal/editNotaModal/#estados-locales","title":"Estados locales","text":"<pre><code>const [loading, setLoading] = useState(false);\nconst [clienteOriginal, setClienteOriginal] = useState(null);\nconst [confirmarActualizacion, setConfirmarActualizacion] = useState(false);\n</code></pre> Estado Funci\u00f3n <code>loading</code> Bloquea botones durante guardado <code>clienteOriginal</code> Snapshot para detectar cambios <code>confirmarActualizacion</code> Controla el modal de confirmaci\u00f3n"},{"location":"proyecto/frontend/src/components/modal/editNotaModal/#carga-de-datos-al-abrir-el-modal","title":"Carga de datos al abrir el modal","text":"<pre><code>useEffect(() =&gt; {\n  if (nota) {\n    setClienteOriginal({ ... });\n    reset({ ...nota });\n  }\n}, [nota]);\n</code></pre>"},{"location":"proyecto/frontend/src/components/modal/editNotaModal/#que-hace-este-efecto","title":"Qu\u00e9 hace este efecto","text":"<ul> <li>Guarda los datos originales del cliente</li> <li>Normaliza tel\u00e9fono (sin +56)</li> <li>Convierte fechas string \u2192 <code>Date</code></li> <li>Rellena el formulario completo</li> </ul>"},{"location":"proyecto/frontend/src/components/modal/editNotaModal/#deteccion-de-campos-editados","title":"Detecci\u00f3n de campos editados","text":"<pre><code>const camposEditados = useMemo(() =&gt; {\n  if (!clienteOriginal) return [];\n  return campos.filter(c =&gt; actuales[c] !== clienteOriginal[c]);\n}, [...]);\n</code></pre>"},{"location":"proyecto/frontend/src/components/modal/editNotaModal/#por-que-es-importante","title":"\u00bfPor qu\u00e9 es importante?","text":"<ul> <li>Evita actualizar el cliente sin necesidad</li> <li>Permite mostrar exactamente qu\u00e9 cambi\u00f3</li> <li>Mejora la UX y reduce errores</li> </ul>"},{"location":"proyecto/frontend/src/components/modal/editNotaModal/#flujo-de-envio-del-formulario","title":"Flujo de env\u00edo del formulario","text":""},{"location":"proyecto/frontend/src/components/modal/editNotaModal/#1-submit-principal","title":"1\ufe0f\u20e3 Submit principal","text":"<pre><code>const onSubmit = async (data) =&gt; {\n  if (camposEditados.length &gt; 0) {\n    setConfirmarActualizacion(true);\n  } else {\n    guardarNota(data);\n  }\n};\n</code></pre> Escenario Acci\u00f3n Cliente modificado Preguntar Solo nota Guardar directo"},{"location":"proyecto/frontend/src/components/modal/editNotaModal/#2-guardar-solo-la-nota","title":"2\ufe0f\u20e3 Guardar solo la nota","text":"<pre><code>await api.put(`/nota/${nota.id_nota}/`, payload);\n</code></pre> <ul> <li>Normaliza tel\u00e9fono</li> <li>Convierte fecha a ISO</li> <li>Cierra modal al finalizar</li> </ul>"},{"location":"proyecto/frontend/src/components/modal/editNotaModal/#3-actualizar-cliente-nota","title":"3\ufe0f\u20e3 Actualizar cliente + nota","text":"<pre><code>await api.patch('/cliente/por-rut/', clientePayload);\nawait guardarNota(data);\n</code></pre> <p>Primero actualiza cliente, luego la nota.</p>"},{"location":"proyecto/frontend/src/components/modal/editNotaModal/#modal-de-confirmacion","title":"Modal de confirmaci\u00f3n","text":"<p>Este modal aparece solo si se modificaron datos del cliente:</p> <ul> <li>Muestra los campos editados en rojo</li> <li>Permite decidir si actualizar o no</li> </ul> <p>Esto protege la base de datos de cambios accidentales.</p>"},{"location":"proyecto/frontend/src/components/modal/editNotaModal/#conclusion","title":"Conclusi\u00f3n","text":"<p>Este componente:</p> <ul> <li>Aplica correctamente React Hook Form + Yup</li> <li>Tiene una l\u00f3gica clara y mantenible</li> <li>Maneja fechas y horas de forma segura</li> <li>Implementa una excelente experiencia de usuario</li> <li>Est\u00e1 listo para escalar o reutilizarse</li> </ul>"},{"location":"proyecto/frontend/src/components/modal/materiasPrimasModal/","title":"MateriasPrimasModal.jsx","text":""},{"location":"proyecto/frontend/src/components/modal/materiasPrimasModal/#1-proposito-del-componente","title":"1. Prop\u00f3sito del componente","text":"<p><code>MateriasPrimasModal</code> es un modal de edici\u00f3n que permite actualizar un pedido existente de materias primas. Su funci\u00f3n principal es:</p> <ul> <li>Mostrar los datos actuales de un pedido</li> <li>Permitir modificar proveedor, producto, cantidad, fechas y observaciones</li> <li>Validar los datos antes de enviarlos</li> <li>Persistir los cambios mediante una llamada <code>PATCH</code> al backend</li> </ul> <p>El componente no crea pedidos nuevos, solo edita uno existente identificado por <code>pedido.id_pedido</code>.</p>"},{"location":"proyecto/frontend/src/components/modal/materiasPrimasModal/#2-props-que-recibe","title":"2. Props que recibe","text":"<pre><code>const MateriasPrimasModal = ({ open, onClose, pedido, onUpdated })\n</code></pre> <ul> <li><code>open</code> (boolean): controla si el modal est\u00e1 visible</li> <li><code>onClose</code> (function): cierra el modal</li> <li><code>pedido</code> (object): pedido a editar (datos actuales)</li> <li><code>onUpdated</code> (function): callback para refrescar la vista padre luego de guardar</li> </ul>"},{"location":"proyecto/frontend/src/components/modal/materiasPrimasModal/#3-validacion-con-yup","title":"3. Validaci\u00f3n con Yup","text":"<pre><code>const schema = yup.object().shape({\n  producto: yup.string().required(\"Selecciona un producto\"),\n  cantidad: yup.number()\n    .typeError(\"Debe ser un n\u00famero\")\n    .positive(\"Debe ser mayor a 0\")\n    .required(\"Campo obligatorio\"),\n  observacion: yup.string().nullable(),\n});\n</code></pre> <p>Reglas clave:</p> <ul> <li>El producto es obligatorio</li> <li>La cantidad debe ser un n\u00famero positivo</li> <li>La observaci\u00f3n es opcional</li> </ul> <p>El schema se conecta al formulario mediante <code>yupResolver</code>.</p>"},{"location":"proyecto/frontend/src/components/modal/materiasPrimasModal/#4-inicializacion-del-formulario","title":"4. Inicializaci\u00f3n del formulario","text":"<pre><code>const { control, handleSubmit, reset, setValue, formState } = useForm({\n  resolver: yupResolver(schema),\n  defaultValues: { ... }\n});\n</code></pre> <p>Campos relevantes:</p> <ul> <li>Datos del proveedor (<code>rut_proveedor</code>, <code>nombre_proveedor</code>)</li> <li>Datos del producto (<code>producto</code>, <code>id_producto</code>, <code>unidad_medida</code>)</li> <li>Informaci\u00f3n del pedido (<code>cantidad</code>, <code>fecha_entrega</code>, <code>observacion</code>)</li> </ul>"},{"location":"proyecto/frontend/src/components/modal/materiasPrimasModal/#5-funcion-transformmayus","title":"5. Funci\u00f3n transformMayus","text":"<pre><code>const transformMayus = (obj, excluir = []) =&gt; { ... }\n</code></pre> <p>Responsabilidad:</p> <ul> <li>Convierte todos los strings a may\u00fasculas</li> <li>Permite excluir campos espec\u00edficos (ej. correos)</li> </ul> <p>Se aplica justo antes de enviar datos al backend para mantener consistencia.</p>"},{"location":"proyecto/frontend/src/components/modal/materiasPrimasModal/#6-carga-de-datos-al-abrir-el-modal","title":"6. Carga de datos al abrir el modal","text":"<pre><code>useEffect(() =&gt; {\n  const fechaEntrega = pedido.fecha_entrega\n    ? parse(pedido.fecha_entrega, 'dd/MM/yyyy', new Date())\n    : null;\n\n  reset({ ... });\n}, [pedido, reset]);\n</code></pre> <p>Qu\u00e9 hace:</p> <ul> <li>Cada vez que cambia <code>pedido</code>, el formulario se reinicializa</li> <li>Convierte la fecha desde string a <code>Date</code></li> <li>Precarga todos los campos visibles</li> </ul> <p>Esto asegura que si se edita otro pedido, el formulario se actualiza correctamente.</p>"},{"location":"proyecto/frontend/src/components/modal/materiasPrimasModal/#7-manejo-del-rut-del-proveedor","title":"7. Manejo del RUT del proveedor","text":""},{"location":"proyecto/frontend/src/components/modal/materiasPrimasModal/#formateo-en-tiempo-real","title":"Formateo en tiempo real","text":"<pre><code>const handleChangeRut = (e) =&gt; {\n  const formattedValue = formatearRut(e.target.value);\n  setValue('rut_proveedor', formattedValue, { shouldValidate: true });\n};\n</code></pre> <ul> <li>Aplica formato chileno al RUT mientras se escribe</li> <li>Mantiene validaci\u00f3n activa</li> </ul>"},{"location":"proyecto/frontend/src/components/modal/materiasPrimasModal/#busqueda-al-perder-foco","title":"B\u00fasqueda al perder foco","text":"<pre><code>const handleBlurRut = async (e) =&gt; { ... }\n</code></pre> <p>Flujo:</p> <ol> <li>Si el campo est\u00e1 vac\u00edo, no hace nada</li> <li>Consulta el backend por RUT</li> <li>Si existe, completa raz\u00f3n social e ID</li> <li>Si no existe, limpia campos y muestra advertencia</li> </ol>"},{"location":"proyecto/frontend/src/components/modal/materiasPrimasModal/#8-seleccion-de-proveedor-y-producto","title":"8. Selecci\u00f3n de proveedor y producto","text":"<p>Se usa el componente reutilizable <code>SearchSelect</code>.</p>"},{"location":"proyecto/frontend/src/components/modal/materiasPrimasModal/#proveedor","title":"Proveedor","text":"<ul> <li>Endpoint: <code>/pedido_materias_primas/buscar-proveedores</code></li> <li> <p>Al seleccionar:</p> </li> <li> <p>Se setea <code>rut_proveedor</code></p> </li> <li>Se setea <code>id_proveedor</code></li> </ul>"},{"location":"proyecto/frontend/src/components/modal/materiasPrimasModal/#producto","title":"Producto","text":"<ul> <li>Endpoint: <code>/pedido_materias_primas/buscar-productos</code></li> <li> <p>Al seleccionar:</p> </li> <li> <p>Se setea <code>id_producto</code></p> </li> <li>Se setea <code>unidad_medida</code></li> </ul> <p>Esto evita errores manuales y asegura consistencia con la base de datos.</p>"},{"location":"proyecto/frontend/src/components/modal/materiasPrimasModal/#9-envio-del-formulario-onsubmit","title":"9. Env\u00edo del formulario (onSubmit)","text":"<pre><code>const onSubmit = async (data) =&gt; { ... }\n</code></pre> <p>Pasos:</p> <ol> <li>Verifica que exista <code>pedido.id_pedido</code></li> <li>Construye el payload con los campos editables</li> <li>Convierte strings a may\u00fasculas</li> <li>Llama a <code>PATCH /pedido_materias_primas/:id</code></li> <li>Muestra feedback visual</li> <li>Ejecuta <code>onUpdated()</code></li> <li>Cierra el modal</li> </ol> <p>En caso de error:</p> <ul> <li>Muestra mensaje de error</li> <li>Mantiene el modal abierto</li> </ul>"},{"location":"proyecto/frontend/src/components/modal/materiasPrimasModal/#10-estado-de-guardado","title":"10. Estado de guardado","text":"<pre><code>const [saving, setSaving] = useState(false);\n</code></pre> <p>Se utiliza para:</p> <ul> <li>Deshabilitar botones</li> <li>Evitar m\u00faltiples env\u00edos</li> <li>Mostrar estado \"Guardando...\"</li> </ul>"},{"location":"proyecto/frontend/src/components/modal/materiasPrimasModal/#11-render-del-modal","title":"11. Render del modal","text":"<p>Estructura general:</p> <ul> <li><code>Dialog</code>: contenedor principal</li> <li><code>DialogTitle</code>: t\u00edtulo del modal</li> <li><code>DialogContent</code>: formulario</li> <li><code>DialogActions</code>: botones finales</li> </ul> <p>El formulario est\u00e1 dividido con <code>Grid</code> para una distribuci\u00f3n clara y responsive.</p>"},{"location":"proyecto/frontend/src/components/modal/materiasPrimasModal/#12-flujo-completo-del-usuario","title":"12. Flujo completo del usuario","text":"<ol> <li>Usuario abre modal</li> <li>Se cargan los datos del pedido</li> <li>Modifica proveedor / producto / cantidad / fecha</li> <li>Presiona Guardar</li> <li>Se validan los datos</li> <li>Se actualiza el pedido en backend</li> <li>Se refresca la vista principal</li> <li>Se cierra el modal</li> </ol>"},{"location":"proyecto/frontend/src/components/modal/materiasPrimasModal/#13-buenas-practicas-aplicadas","title":"13. Buenas pr\u00e1cticas aplicadas","text":"<ul> <li>Separaci\u00f3n clara de responsabilidades</li> <li>Validaciones declarativas con Yup</li> <li>Control de estado de carga</li> <li>Reutilizaci\u00f3n de componentes (<code>SearchSelect</code>)</li> <li>Manejo defensivo de errores</li> <li>Formularios controlados con <code>react-hook-form</code></li> </ul>"},{"location":"proyecto/frontend/src/components/modal/materiasPrimasModal/#14-conclusion","title":"14. Conclusi\u00f3n","text":"<p>Este componente est\u00e1 correctamente dise\u00f1ado para edici\u00f3n segura de pedidos de materias primas. Es consistente con el resto del proyecto y sigue un patr\u00f3n reutilizable para futuros modales de edici\u00f3n.</p>"},{"location":"proyecto/frontend/src/components/modal/pdfMetadataModal/","title":"PDFMetadataModal.jsx","text":""},{"location":"proyecto/frontend/src/components/modal/pdfMetadataModal/#1-proposito-del-componente","title":"1. Prop\u00f3sito del componente","text":"<p><code>PDFMetadataModal</code> es un modal reutilizable que permite ingresar y editar metadatos asociados a un archivo PDF antes de guardarlo o subirlo al sistema.</p> <p>Se utiliza t\u00edpicamente en flujos donde el usuario carga un PDF y necesita asociar informaci\u00f3n adicional como t\u00edtulo, empresa/proveedor y observaciones.</p>"},{"location":"proyecto/frontend/src/components/modal/pdfMetadataModal/#2-props-del-componente","title":"2. Props del componente","text":"<p>El componente recibe varias props para hacerlo flexible y reutilizable:</p> <ul> <li><code>open</code> (boolean): controla si el modal est\u00e1 visible.</li> <li><code>onClose</code> (function): funci\u00f3n que se ejecuta al cerrar el modal.</li> <li><code>metadata</code> (object): informaci\u00f3n del archivo PDF (nombre, tama\u00f1o, p\u00e1ginas, etc.).</li> <li><code>onSave</code> (function): callback que recibe los datos del formulario al enviar.</li> <li><code>title</code> (string, opcional): t\u00edtulo del modal.</li> <li><code>saveButtonText</code> (string, opcional): texto del bot\u00f3n de guardar.</li> <li><code>cancelButtonText</code> (string, opcional): texto del bot\u00f3n de cancelar.</li> </ul> <p>Esto permite reutilizar el mismo modal en distintos contextos sin duplicar l\u00f3gica.</p>"},{"location":"proyecto/frontend/src/components/modal/pdfMetadataModal/#3-manejo-del-formulario-con-react-hook-form","title":"3. Manejo del formulario con react-hook-form","text":"<p>El formulario se gestiona con <code>react-hook-form</code>, lo que permite:</p> <ul> <li>Controlar el estado del formulario</li> <li>Manejar validaciones</li> <li>Evitar estados locales innecesarios</li> </ul> <pre><code>const { control, handleSubmit, reset, setValue, formState: { isSubmitting } } = useForm({\n  defaultValues: {\n    title: '',\n    empresa: '',\n    observacion: ''\n  }\n});\n</code></pre> <p>Los valores iniciales se definen vac\u00edos y luego se cargan din\u00e1micamente si existe metadata.</p>"},{"location":"proyecto/frontend/src/components/modal/pdfMetadataModal/#4-carga-de-datos-iniciales-useeffect","title":"4. Carga de datos iniciales (useEffect)","text":"<p>Cuando el modal se abre y existe <code>metadata</code>, se rellenan autom\u00e1ticamente los campos:</p> <ul> <li>El t\u00edtulo se obtiene desde <code>metadata.title</code></li> <li>Si no existe, se usa el nombre del archivo sin <code>.pdf</code></li> <li>Empresa y observaci\u00f3n se cargan si est\u00e1n disponibles</li> </ul> <pre><code>useEffect(() =&gt; {\n  if (metadata) {\n    reset({\n      title: metadata.title || metadata.fileName?.replace('.pdf', '') || '',\n      empresa: metadata.empresa || '',\n      observacion: metadata.observacion || ''\n    });\n  }\n}, [metadata, reset]);\n</code></pre> <p>Esto evita que el usuario tenga que completar informaci\u00f3n que ya existe.</p>"},{"location":"proyecto/frontend/src/components/modal/pdfMetadataModal/#5-visualizacion-de-informacion-del-pdf","title":"5. Visualizaci\u00f3n de informaci\u00f3n del PDF","text":"<p>Si el objeto <code>metadata</code> contiene informaci\u00f3n del archivo, se muestra un bloque informativo:</p> <ul> <li>Nombre del archivo</li> <li>Tama\u00f1o</li> <li>Cantidad de p\u00e1ginas</li> </ul> <p>Esto se presenta mediante un <code>Alert</code> informativo, sin afectar el formulario.</p>"},{"location":"proyecto/frontend/src/components/modal/pdfMetadataModal/#6-campo-titulo","title":"6. Campo T\u00edtulo","text":"<p>El campo T\u00edtulo es obligatorio y se controla con <code>Controller</code>:</p> <pre><code>&lt;Controller\n  name=\"title\"\n  control={control}\n  rules={{ required: 'El t\u00edtulo es requerido' }}\n  render={({ field, fieldState }) =&gt; (\n    &lt;TextField\n      {...field}\n      fullWidth\n      label=\"T\u00edtulo *\"\n      error={!!fieldState.error}\n      helperText={fieldState.error?.message}\n      required\n    /&gt;\n  )}\n/&gt;\n</code></pre> <p>La validaci\u00f3n se maneja directamente desde <code>react-hook-form</code>.</p>"},{"location":"proyecto/frontend/src/components/modal/pdfMetadataModal/#7-campo-empresa-con-searchselect","title":"7. Campo Empresa con SearchSelect","text":"<p>Para seleccionar la empresa o proveedor se utiliza el componente reutilizable <code>SearchSelect</code>.</p> <p>Caracter\u00edsticas:</p> <ul> <li>Consulta un endpoint remoto</li> <li>Permite buscar por texto</li> <li>Devuelve un objeto completo al seleccionar</li> </ul> <pre><code>&lt;SearchSelect\n  name=\"empresa\"\n  control={control}\n  label=\"Empresa / Proveedor\"\n  endpoint=\"/pedido_materias_primas/buscar-proveedores\"\n  getOptionLabel={(option) =&gt; {\n    if (typeof option === 'string') return option;\n    return option.razon_social || option.nombre || '';\n  }}\n  onSelect={handleEmpresaSelect}\n/&gt;\n</code></pre> <p>Cuando se selecciona una empresa, se guarda autom\u00e1ticamente la raz\u00f3n social en el formulario.</p>"},{"location":"proyecto/frontend/src/components/modal/pdfMetadataModal/#8-campo-observacion","title":"8. Campo Observaci\u00f3n","text":"<p>Campo opcional de texto libre para agregar notas adicionales al documento PDF.</p> <ul> <li>No es obligatorio</li> <li>Permite m\u00faltiples l\u00edneas</li> <li>No tiene validaciones especiales</li> </ul>"},{"location":"proyecto/frontend/src/components/modal/pdfMetadataModal/#9-envio-del-formulario","title":"9. Env\u00edo del formulario","text":"<p>El formulario se env\u00eda usando <code>handleSubmit</code>:</p> <pre><code>const onSubmit = (data) =&gt; {\n  if (onSave) {\n    onSave(data);\n  }\n};\n</code></pre> <p>El componente no decide qu\u00e9 hacer con los datos, solo los entrega al padre.</p>"},{"location":"proyecto/frontend/src/components/modal/pdfMetadataModal/#10-cierre-del-modal","title":"10. Cierre del modal","text":"<p>Al cerrar el modal:</p> <ul> <li>Se resetea el formulario</li> <li>Se ejecuta <code>onClose</code> si existe</li> </ul> <p>Esto asegura que al volver a abrir el modal no queden datos residuales.</p>"},{"location":"proyecto/frontend/src/components/modal/pdfMetadataModal/#11-comportamiento-del-boton-guardar","title":"11. Comportamiento del bot\u00f3n Guardar","text":"<p>El bot\u00f3n de guardar:</p> <ul> <li>Usa el atributo <code>form</code> para enviar el formulario desde fuera</li> <li>Se deshabilita autom\u00e1ticamente mientras <code>isSubmitting</code> es <code>true</code></li> <li>Cambia el texto seg\u00fan el estado</li> </ul> <p>Esto evita env\u00edos duplicados.</p>"},{"location":"proyecto/frontend/src/components/modal/pdfMetadataModal/#12-resumen","title":"12. Resumen","text":"<p>Este componente:</p> <ul> <li>Es reutilizable y desacoplado</li> <li>Centraliza la l\u00f3gica del formulario</li> <li>Muestra informaci\u00f3n relevante del PDF</li> <li>Delega la persistencia al componente padre</li> </ul>"},{"location":"proyecto/frontend/src/components/ui/navBar/","title":"navBar.jsx","text":""},{"location":"proyecto/frontend/src/components/ui/navBar/#proposito-del-componente","title":"Prop\u00f3sito del componente","text":"<p><code>Navbar</code> es el componente responsable de renderizar la barra de navegaci\u00f3n superior de la aplicaci\u00f3n. Su funci\u00f3n principal es:</p> <ul> <li>Mostrar la identidad visual de la aplicaci\u00f3n.</li> <li>Gestionar el bot\u00f3n de apertura/cierre del men\u00fa lateral en pantallas m\u00f3viles.</li> <li>Mostrar informaci\u00f3n b\u00e1sica del usuario autenticado.</li> <li>Proveer una acci\u00f3n clara de cierre de sesi\u00f3n.</li> </ul> <p>Est\u00e1 dise\u00f1ado para ser responsivo, integrarse con Redux para el estado de autenticaci\u00f3n y utilizar Material UI como sistema visual.</p>"},{"location":"proyecto/frontend/src/components/ui/navBar/#props","title":"Props","text":"<pre><code>Navbar({\n  mobileOpen: boolean,\n  onMenuClick: () =&gt; void\n})\n</code></pre>"},{"location":"proyecto/frontend/src/components/ui/navBar/#mobileopen","title":"<code>mobileOpen</code>","text":"<p>Indica si el men\u00fa lateral est\u00e1 actualmente abierto en vista m\u00f3vil. Se utiliza para alternar el icono entre men\u00fa y cierre.</p>"},{"location":"proyecto/frontend/src/components/ui/navBar/#onmenuclick","title":"<code>onMenuClick</code>","text":"<p>Funci\u00f3n callback que se ejecuta al presionar el bot\u00f3n de men\u00fa en dispositivos m\u00f3viles.</p>"},{"location":"proyecto/frontend/src/components/ui/navBar/#dependencias-principales","title":"Dependencias principales","text":"<ul> <li>Material UI: <code>AppBar</code>, <code>Toolbar</code>, <code>Avatar</code>, <code>Tooltip</code>, <code>IconButton</code>, etc.</li> <li>Redux Toolkit: acceso al usuario autenticado y acci\u00f3n de logout.</li> <li>ActionButton: componente reutilizable para ejecutar acciones con feedback.</li> </ul>"},{"location":"proyecto/frontend/src/components/ui/navBar/#acceso-al-estado-global","title":"Acceso al estado global","text":"<pre><code>const user = useSelector(state =&gt; state.auth.user);\n</code></pre> <p>El componente obtiene el usuario autenticado desde el slice <code>auth</code>. Esto permite:</p> <ul> <li>Mostrar el nombre y apellido del usuario.</li> <li>Construir las iniciales para el avatar.</li> <li>Controlar si se renderiza o no la secci\u00f3n de usuario.</li> </ul>"},{"location":"proyecto/frontend/src/components/ui/navBar/#logica-de-responsividad","title":"L\u00f3gica de responsividad","text":"<pre><code>const isMobile = useMediaQuery(theme.breakpoints.down('md'));\n</code></pre> <ul> <li>En pantallas menores a <code>md</code>, se muestra el bot\u00f3n de men\u00fa lateral.</li> <li>En pantallas grandes, el bot\u00f3n no se renderiza.</li> <li>El dise\u00f1o del bot\u00f3n de logout se compacta en m\u00f3vil.</li> </ul>"},{"location":"proyecto/frontend/src/components/ui/navBar/#funcion-getinitials","title":"Funci\u00f3n <code>getInitials</code>","text":"<pre><code>const getInitials = (nombre, apellido) =&gt; {\n  if (!nombre) return '?';\n  const primeraLetraNombre = nombre.substring(0, 1).toUpperCase();\n  const primeraLetraApellido = apellido ? apellido.substring(0, 1).toUpperCase() : '';\n  return `${primeraLetraNombre}${primeraLetraApellido}`;\n};\n</code></pre> <p>Responsable de generar las iniciales que se muestran dentro del <code>Avatar</code>.</p> <ul> <li>Maneja casos donde no existe apellido.</li> <li>Incluye una validaci\u00f3n defensiva cuando no hay nombre.</li> </ul>"},{"location":"proyecto/frontend/src/components/ui/navBar/#estructura-visual","title":"Estructura visual","text":""},{"location":"proyecto/frontend/src/components/ui/navBar/#appbar","title":"AppBar","text":"<pre><code>&lt;AppBar position=\"fixed\" sx={{ zIndex: theme.zIndex.drawer + 1 }} /&gt;\n</code></pre> <ul> <li>Se posiciona fijo en la parte superior.</li> <li>Se asegura que quede por encima del men\u00fa lateral.</li> <li>Utiliza un gradiente como fondo para reforzar la identidad visual.</li> </ul>"},{"location":"proyecto/frontend/src/components/ui/navBar/#boton-de-menu-movil","title":"Bot\u00f3n de men\u00fa m\u00f3vil","text":"<p>Renderizado solo cuando <code>isMobile</code> es <code>true</code>:</p> <ul> <li>Alterna entre icono de abrir y cerrar seg\u00fan <code>mobileOpen</code>.</li> <li>Ejecuta <code>onMenuClick</code> al hacer click.</li> </ul>"},{"location":"proyecto/frontend/src/components/ui/navBar/#identidad-de-la-aplicacion","title":"Identidad de la aplicaci\u00f3n","text":"<pre><code>&lt;Link href=\"/\"&gt;JJ DETERGENTES&lt;/Link&gt;\n</code></pre> <ul> <li>Funciona como acceso r\u00e1pido al inicio.</li> <li>No utiliza subrayado.</li> <li>Mantiene tipograf\u00eda y color consistentes con el AppBar.</li> </ul>"},{"location":"proyecto/frontend/src/components/ui/navBar/#informacion-del-usuario","title":"Informaci\u00f3n del usuario","text":"<pre><code>{user?.nombre &amp;&amp; (\n  &lt;Tooltip&gt;\n    &lt;Avatar&gt;{getInitials(user.nombre, user.apellido)}&lt;/Avatar&gt;\n  &lt;/Tooltip&gt;\n)}\n</code></pre> <ul> <li>Solo se renderiza si existe un usuario autenticado.</li> <li>El <code>Tooltip</code> muestra el nombre completo.</li> <li>El <code>Avatar</code> utiliza las iniciales calculadas din\u00e1micamente.</li> </ul>"},{"location":"proyecto/frontend/src/components/ui/navBar/#boton-de-cierre-de-sesion","title":"Bot\u00f3n de cierre de sesi\u00f3n","text":"<pre><code>&lt;ActionButton\n  action={() =&gt; dispatch(logout()).unwrap()}\n  onSuccess={() =&gt; window.location.href = '/login'}\n/&gt;\n</code></pre> <p>Caracter\u00edsticas clave:</p> <ul> <li>Ejecuta el thunk <code>logout</code> de Redux.</li> <li>Usa <code>unwrap()</code> para manejar correctamente promesas.</li> <li>Redirige al login tras una salida exitosa.</li> <li>Ajusta estilos din\u00e1micamente seg\u00fan si es m\u00f3vil o escritorio.</li> </ul>"},{"location":"proyecto/frontend/src/components/ui/navBar/#consideraciones-importantes","title":"Consideraciones importantes","text":"<ul> <li>El componente no maneja navegaci\u00f3n interna compleja, solo acciones de alto nivel.</li> <li>Depende de que el estado <code>auth.user</code> est\u00e9 correctamente inicializado.</li> <li>El redireccionamiento post-logout se realiza de forma expl\u00edcita usando <code>window.location</code>.</li> </ul>"},{"location":"proyecto/frontend/src/components/ui/navBar/#rol-dentro-del-proyecto","title":"Rol dentro del proyecto","text":"<p><code>Navbar</code> act\u00faa como un componente layout-level, com\u00fan a m\u00faltiples vistas, y concentra:</p> <ul> <li>Identidad visual</li> <li>Control del men\u00fa</li> <li>Contexto del usuario</li> <li>Acci\u00f3n global de cierre de sesi\u00f3n</li> </ul>"},{"location":"proyecto/frontend/src/components/ui/sideBar/","title":"sideBar.jsx","text":""},{"location":"proyecto/frontend/src/components/ui/sideBar/#proposito-del-archivo","title":"Prop\u00f3sito del archivo","text":"<p>Este archivo define la barra lateral de navegaci\u00f3n de la aplicaci\u00f3n. Su funci\u00f3n principal es mostrar el men\u00fa principal, organizar las rutas por secciones desplegables y adaptar su comportamiento seg\u00fan el tama\u00f1o de pantalla y el rol del usuario.</p> <p>El archivo contiene dos componentes principales:</p> <ul> <li><code>SidebarContent</code>: renderiza el contenido del men\u00fa (items y submen\u00fas).</li> <li><code>Sidebar</code>: envuelve el contenido dentro de un <code>Drawer</code> de MUI y maneja la versi\u00f3n m\u00f3vil y escritorio.</li> </ul>"},{"location":"proyecto/frontend/src/components/ui/sideBar/#dependencias-principales","title":"Dependencias principales","text":"<ul> <li>Material UI: componentes visuales (<code>Drawer</code>, <code>List</code>, <code>Collapse</code>, etc.) y helpers de responsividad.</li> <li>React Router: <code>NavLink</code> para navegaci\u00f3n activa.</li> <li>Redux: obtenci\u00f3n del usuario y sus grupos para control de permisos.</li> <li>date-fns: obtenci\u00f3n del a\u00f1o actual para el footer.</li> <li>Assets locales: im\u00e1genes PNG utilizadas como iconos del men\u00fa.</li> </ul>"},{"location":"proyecto/frontend/src/components/ui/sideBar/#constantes","title":"Constantes","text":"<pre><code>const drawerWidth = 180;\n</code></pre> <p>Define el ancho fijo del sidebar tanto en versi\u00f3n m\u00f3vil como escritorio.</p>"},{"location":"proyecto/frontend/src/components/ui/sideBar/#componente-sidebarcontent","title":"Componente: SidebarContent","text":""},{"location":"proyecto/frontend/src/components/ui/sideBar/#responsabilidad","title":"Responsabilidad","text":"<p>Renderiza la lista de opciones del men\u00fa, incluyendo:</p> <ul> <li>Secciones colapsables</li> <li>Enlaces de navegaci\u00f3n</li> <li>Renderizado condicional seg\u00fan rol</li> </ul>"},{"location":"proyecto/frontend/src/components/ui/sideBar/#estado-local","title":"Estado local","text":"<pre><code>const [openNotas, setOpenNotas] = useState(false);\nconst [openFacturas, setOpenFacturas] = useState(false);\nconst [openMaterias, setOpenMaterias] = useState(false);\nconst [openPicking, setOpenPicking] = useState(false);\n</code></pre> <p>Cada estado controla la apertura/cierre de un submen\u00fa.</p>"},{"location":"proyecto/frontend/src/components/ui/sideBar/#control-de-permisos","title":"Control de permisos","text":"<pre><code>const grupo = useSelector((state) =&gt; state.auth.user?.groups || []);\nconst adminGroup = grupo.some((g) =&gt; g.includes('Admin'));\n</code></pre> <ul> <li>Se obtiene el grupo del usuario desde Redux.</li> <li>Solo los usuarios con rol Admin pueden ver Facturas, Insumos, Picking y S\u00e1bados.</li> </ul>"},{"location":"proyecto/frontend/src/components/ui/sideBar/#estructura-del-menu","title":"Estructura del men\u00fa","text":""},{"location":"proyecto/frontend/src/components/ui/sideBar/#menu-notas","title":"Men\u00fa Notas","text":"<p>Siempre visible.</p> <ul> <li>Nueva Nota</li> <li>Lista de Notas</li> <li>Hist\u00f3rico de Notas</li> </ul> <p>Se maneja mediante un <code>Collapse</code> controlado por <code>openNotas</code>.</p>"},{"location":"proyecto/frontend/src/components/ui/sideBar/#menu-facturas-solo-admin","title":"Men\u00fa Facturas (solo admin)","text":"<p>Incluye:</p> <ul> <li>Lista de Facturas</li> <li>Facturas Pagadas</li> </ul>"},{"location":"proyecto/frontend/src/components/ui/sideBar/#menu-insumos-materias-primas","title":"Men\u00fa Insumos (Materias Primas)","text":"<p>Incluye:</p> <ul> <li>Pedir Insumos</li> <li>Lista de Insumos</li> <li>Hist\u00f3rico de Insumos</li> </ul>"},{"location":"proyecto/frontend/src/components/ui/sideBar/#menu-picking","title":"Men\u00fa Picking","text":"<p>Incluye:</p> <ul> <li>Nuevo Pedido</li> <li>Lista de Pedidos</li> <li>Hist\u00f3rico de Pedidos</li> </ul>"},{"location":"proyecto/frontend/src/components/ui/sideBar/#acceso-directo-sabados","title":"Acceso directo S\u00e1bados","text":"<p>No es colapsable. Solo visible para administradores.</p>"},{"location":"proyecto/frontend/src/components/ui/sideBar/#navegacion","title":"Navegaci\u00f3n","text":"<p>Cada opci\u00f3n utiliza <code>NavLink</code>:</p> <pre><code>&lt;ListItemButton component={NavLink} to=\"/ruta\" /&gt;\n</code></pre> <p>Esto permite:</p> <ul> <li>Navegaci\u00f3n SPA</li> <li>Estilos autom\u00e1ticos para la ruta activa</li> <li>Cierre autom\u00e1tico del drawer en m\u00f3vil mediante <code>onClick</code></li> </ul>"},{"location":"proyecto/frontend/src/components/ui/sideBar/#componente-sidebar","title":"Componente: Sidebar","text":""},{"location":"proyecto/frontend/src/components/ui/sideBar/#responsabilidad_1","title":"Responsabilidad","text":"<p>Define el tipo de <code>Drawer</code> a utilizar seg\u00fan el tama\u00f1o de pantalla.</p>"},{"location":"proyecto/frontend/src/components/ui/sideBar/#deteccion-de-tamano-de-pantalla","title":"Detecci\u00f3n de tama\u00f1o de pantalla","text":"<pre><code>const isMobile = useMediaQuery(theme.breakpoints.down('md'));\n</code></pre> <ul> <li><code>true</code>: pantallas peque\u00f1as (m\u00f3vil/tablet)</li> <li><code>false</code>: pantallas grandes (desktop)</li> </ul>"},{"location":"proyecto/frontend/src/components/ui/sideBar/#sidebar-en-movil","title":"Sidebar en m\u00f3vil","text":"<pre><code>&lt;Drawer variant=\"temporary\" /&gt;\n</code></pre> <p>Caracter\u00edsticas:</p> <ul> <li>Se abre y cierra mediante <code>mobileOpen</code></li> <li>Se cierra al hacer click en una opci\u00f3n</li> <li>Mantiene el componente montado para mejor performance</li> </ul>"},{"location":"proyecto/frontend/src/components/ui/sideBar/#sidebar-en-escritorio","title":"Sidebar en escritorio","text":"<pre><code>&lt;Drawer variant=\"permanent\" /&gt;\n</code></pre> <p>Caracter\u00edsticas:</p> <ul> <li>Siempre visible</li> <li> <p>Contiene dos secciones:</p> </li> <li> <p>Contenido del men\u00fa</p> </li> <li>Footer fijo inferior</li> </ul>"},{"location":"proyecto/frontend/src/components/ui/sideBar/#footer","title":"Footer","text":"<pre><code>\u00a9 {getYear(new Date())} Gerardo Vallejos\n</code></pre> <ul> <li>A\u00f1o din\u00e1mico</li> <li>Texto informativo</li> <li>Solo visible en escritorio</li> </ul>"},{"location":"proyecto/frontend/src/components/ui/sideBar/#flujo-general-de-funcionamiento","title":"Flujo general de funcionamiento","text":"<ol> <li>El componente detecta si la pantalla es m\u00f3vil o escritorio.</li> <li>Renderiza el tipo de <code>Drawer</code> correspondiente.</li> <li><code>SidebarContent</code> renderiza el men\u00fa seg\u00fan el rol del usuario.</li> <li>Los submen\u00fas se expanden o colapsan mediante estado local.</li> <li>En m\u00f3vil, al seleccionar una opci\u00f3n, el drawer se cierra.</li> </ol>"},{"location":"proyecto/frontend/src/components/ui/sideBar/#beneficios-de-esta-implementacion","title":"Beneficios de esta implementaci\u00f3n","text":"<ul> <li>Navegaci\u00f3n clara y jer\u00e1rquica</li> <li>Control de permisos centralizado</li> <li>Dise\u00f1o responsive sin duplicar l\u00f3gica</li> <li>C\u00f3digo f\u00e1cil de extender (nuevos men\u00fas o roles)</li> </ul>"},{"location":"proyecto/frontend/src/components/ui/sideBar/#posibles-mejoras-futuras","title":"Posibles mejoras futuras","text":"<ul> <li>Reemplazar im\u00e1genes por SVG o iconos MUI</li> <li>Centralizar definici\u00f3n de rutas en una constante</li> <li>Convertir los submen\u00fas en una estructura de datos din\u00e1mica</li> <li>Animaciones personalizadas para <code>Collapse</code></li> </ul>"},{"location":"proyecto/frontend/src/hooks/useLoginForm/","title":"useLoginForm.js","text":""},{"location":"proyecto/frontend/src/hooks/useLoginForm/#archivo-useloginformjs","title":"Archivo: <code>useLoginForm.js</code>","text":"<p>Este archivo define un custom hook que encapsula toda la l\u00f3gica del formulario de login usando React Hook Form y Yup para validaciones.</p> <p>La idea principal es reutilizar y simplificar el manejo del formulario, manteniendo el componente visual limpio.</p>"},{"location":"proyecto/frontend/src/hooks/useLoginForm/#responsabilidad-del-archivo","title":"Responsabilidad del archivo","text":"<ul> <li>Definir el schema de validaci\u00f3n del login</li> <li>Inicializar <code>react-hook-form</code> con Yup</li> <li>Exponer una API simple para usar el formulario desde un componente</li> </ul> <p>Este hook no renderiza nada, solo maneja l\u00f3gica.</p>"},{"location":"proyecto/frontend/src/hooks/useLoginForm/#imports","title":"Imports","text":"<pre><code>import { useForm } from 'react-hook-form';\nimport { yupResolver } from '@hookform/resolvers/yup';\nimport * as yup from 'yup';\n</code></pre>"},{"location":"proyecto/frontend/src/hooks/useLoginForm/#por-que-estos-imports","title":"\u00bfPor qu\u00e9 estos imports?","text":"<ul> <li><code>useForm</code>: n\u00facleo de React Hook Form</li> <li><code>yupResolver</code>: conecta Yup con React Hook Form</li> <li><code>yup</code>: define reglas de validaci\u00f3n declarativas</li> </ul>"},{"location":"proyecto/frontend/src/hooks/useLoginForm/#schema-de-validacion","title":"Schema de validaci\u00f3n","text":"<pre><code>const schema = yup.object().shape({\n  username: yup.string().required('Nombre de usuario requerido'),\n  password: yup.string()\n    .min(6, 'M\u00ednimo 6 caracteres')\n    .required('Contrase\u00f1a requerida'),\n});\n</code></pre>"},{"location":"proyecto/frontend/src/hooks/useLoginForm/#que-valida-cada-campo","title":"Qu\u00e9 valida cada campo","text":"<ul> <li> <p>username</p> </li> <li> <p>Debe existir</p> </li> <li> <p>No permite vac\u00edo</p> </li> <li> <p>password</p> </li> <li> <p>Debe existir</p> </li> <li>Debe tener al menos 6 caracteres</li> </ul> <p>Los mensajes definidos aqu\u00ed se mostrar\u00e1n autom\u00e1ticamente en el formulario.</p>"},{"location":"proyecto/frontend/src/hooks/useLoginForm/#custom-hook-useloginform","title":"Custom hook: <code>useLoginForm</code>","text":"<pre><code>export const useLoginForm = (onSubmit) =&gt; {\n  const methods = useForm({\n    resolver: yupResolver(schema),\n    mode: 'onTouched',\n  });\n\n  return {\n    ...methods,\n    onSubmit: methods.handleSubmit(onSubmit),\n  };\n};\n</code></pre>"},{"location":"proyecto/frontend/src/hooks/useLoginForm/#parametro","title":"Par\u00e1metro","text":"<ul> <li><code>onSubmit</code>: funci\u00f3n que ejecuta la l\u00f3gica de login (API, Redux, etc.)</li> </ul> <p>Este hook no sabe qu\u00e9 hace el login, solo cu\u00e1ndo ejecutarlo.</p>"},{"location":"proyecto/frontend/src/hooks/useLoginForm/#configuracion-de-useform","title":"Configuraci\u00f3n de <code>useForm</code>","text":"<pre><code>useForm({\n  resolver: yupResolver(schema),\n  mode: 'onTouched',\n});\n</code></pre>"},{"location":"proyecto/frontend/src/hooks/useLoginForm/#que-significa-esto","title":"Qu\u00e9 significa esto","text":"<ul> <li> <p><code>resolver</code>:</p> </li> <li> <p>Usa Yup como motor de validaci\u00f3n</p> </li> <li> <p><code>mode: 'onTouched'</code>:</p> </li> <li> <p>Valida el campo cuando el usuario lo toca y sale de \u00e9l</p> </li> <li>Evita errores antes de interactuar</li> </ul>"},{"location":"proyecto/frontend/src/hooks/useLoginForm/#que-retorna-el-hook","title":"Qu\u00e9 retorna el hook","text":"<pre><code>return {\n  ...methods,\n  onSubmit: methods.handleSubmit(onSubmit),\n};\n</code></pre> <p>Incluye:</p> <ul> <li><code>register</code></li> <li><code>control</code></li> <li><code>formState</code> (errors, isSubmitting, etc.)</li> <li><code>reset</code>, <code>setValue</code>, etc.</li> <li><code>onSubmit</code> ya envuelto con validaci\u00f3n</li> </ul> <p>Esto permite usar el hook as\u00ed:</p> <pre><code>const { register, onSubmit, formState } = useLoginForm(login);\n</code></pre>"},{"location":"proyecto/frontend/src/hooks/useLoginForm/#beneficios-de-este-enfoque","title":"Beneficios de este enfoque","text":"<ul> <li>\ud83d\udd39 Separaci\u00f3n de l\u00f3gica y UI</li> <li>\ud83d\udd39 Validaciones centralizadas</li> <li>\ud83d\udd39 C\u00f3digo m\u00e1s limpio en el componente</li> <li>\ud83d\udd39 F\u00e1cil de testear</li> <li>\ud83d\udd39 Reutilizable</li> </ul>"},{"location":"proyecto/frontend/src/hooks/useLoginForm/#ejemplo-de-uso-resumen","title":"Ejemplo de uso (resumen)","text":"<pre><code>const Login = () =&gt; {\n  const { register, onSubmit, formState } = useLoginForm(handleLogin);\n\n  return (\n    &lt;form onSubmit={onSubmit}&gt;\n      &lt;input {...register('username')} /&gt;\n      &lt;input {...register('password')} type=\"password\" /&gt;\n      &lt;button type=\"submit\"&gt;Entrar&lt;/button&gt;\n    &lt;/form&gt;\n  );\n};\n</code></pre>"},{"location":"proyecto/frontend/src/hooks/useLoginForm/#conclusion","title":"Conclusi\u00f3n","text":"<p>Este archivo es un hook de infraestructura, ideal para:</p> <ul> <li>Formularios peque\u00f1os y claros</li> <li>Reutilizaci\u00f3n</li> <li>Mantener componentes presentacionales simples</li> </ul> <p>Si quieres, el siguiente paso puede ser:</p> <ul> <li>Extraer schemas comunes</li> <li>Unificar hooks de formularios</li> <li>Agregar tests o tipado con TypeScript</li> </ul>"},{"location":"proyecto/frontend/src/hooks/useNotaForm/","title":"Hook <code>useNotaForm</code>","text":""},{"location":"proyecto/frontend/src/hooks/useNotaForm/#descripcion-general","title":"Descripci\u00f3n general","text":"<p>El hook <code>useNotaForm</code> encapsula toda la l\u00f3gica de manejo de formularios y validaci\u00f3n asociada a la creaci\u00f3n o edici\u00f3n de una nota. Su objetivo principal es centralizar reglas de validaci\u00f3n, valores por defecto y transformaci\u00f3n de datos, desacoplando esta l\u00f3gica de los componentes visuales.</p> <p>Est\u00e1 construido sobre React Hook Form para el control del estado del formulario y Yup para la definici\u00f3n declarativa del esquema de validaci\u00f3n.</p>"},{"location":"proyecto/frontend/src/hooks/useNotaForm/#dependencias-tecnicas","title":"Dependencias t\u00e9cnicas","text":"<pre><code>import { useForm } from 'react-hook-form';\nimport { yupResolver } from '@hookform/resolvers/yup';\nimport * as yup from 'yup';\n</code></pre> <ul> <li>react-hook-form: gestiona el estado, validaci\u00f3n y ciclo de vida del formulario.</li> <li>@hookform/resolvers/yup: permite integrar Yup como motor de validaci\u00f3n.</li> <li>yup: define las reglas de validaci\u00f3n de forma declarativa y reutilizable.</li> </ul>"},{"location":"proyecto/frontend/src/hooks/useNotaForm/#esquema-de-validacion-schema","title":"Esquema de validaci\u00f3n (<code>schema</code>)","text":"<p>El esquema Yup define qu\u00e9 campos existen, qu\u00e9 tipo de datos aceptan y qu\u00e9 reglas deben cumplirse antes de permitir el env\u00edo del formulario.</p> <pre><code>const schema = yup.object().shape({\n  num_nota: yup.number()\n    .transform((value, originalValue) =&gt;\n      String(originalValue).trim() === '' ? undefined : value\n    )\n    .required('N\u00famero de nota requerido'),\n\n  razon_social: yup.string().required('Nombre del cliente requerido'),\n  rut_cliente: yup.string().required('Rut del cliente requerido'),\n\n  fecha_despacho: yup.date().required('Fecha de despacho requerida'),\n\n  contacto: yup.string().required('Nombre de contacto requerido'),\n\n  correo: yup\n    .string()\n    .email('Correo inv\u00e1lido')\n    .required('Correo requerido'),\n\n  direccion: yup.string().required('Direcci\u00f3n requerida'),\n  comuna: yup.string().required('Comuna requerida'),\n\n  telefono: yup\n    .string()\n    .matches(/^[1-9]\\d{8}$/, 'Tel\u00e9fono debe tener 9 d\u00edgitos')\n    .required('Tel\u00e9fono requerido'),\n\n  observacion: yup.string(),\n\n  despacho_retira: yup.string().required('Debe elegir entre despacho o retira'),\n\n  horario_desde: yup.string(),\n  horario_hasta: yup.string(),\n});\n</code></pre>"},{"location":"proyecto/frontend/src/hooks/useNotaForm/#puntos-clave-del-esquema","title":"Puntos clave del esquema","text":"<ul> <li> <p>Transformaci\u00f3n de <code>num_nota</code>   Se utiliza <code>transform</code> para evitar que un campo vac\u00edo (<code>''</code>) sea interpretado como <code>NaN</code>. Si el valor original est\u00e1 vac\u00edo, se convierte en <code>undefined</code>, permitiendo que la validaci\u00f3n <code>required</code> act\u00fae correctamente.</p> </li> <li> <p>Validaci\u00f3n de tel\u00e9fono   Se valida como string con una expresi\u00f3n regular que exige 9 d\u00edgitos, excluyendo el prefijo pa\u00eds, el cual se agrega posteriormente.</p> </li> <li> <p>Campos opcionales <code>observacion</code>, <code>horario_desde</code> y <code>horario_hasta</code> no son obligatorios, pero se incluyen para mantener un modelo de datos consistente.</p> </li> </ul>"},{"location":"proyecto/frontend/src/hooks/useNotaForm/#inicializacion-del-formulario","title":"Inicializaci\u00f3n del formulario","text":"<pre><code>const methods = useForm({\n  resolver: yupResolver(schema),\n  mode: 'onTouched',\n  defaultValues: {\n    num_nota: '',\n    rut_cliente: '',\n    razon_social: '',\n    direccion: '',\n    comuna: '',\n    telefono: '',\n    correo: '',\n    contacto: '',\n    observacion: '',\n    fecha_despacho: null,\n    horario_desde: '',\n    horario_hasta: '',\n    despacho_retira: ''\n  }\n});\n</code></pre>"},{"location":"proyecto/frontend/src/hooks/useNotaForm/#decisiones-de-implementacion","title":"Decisiones de implementaci\u00f3n","text":"<ul> <li> <p><code>resolver: yupResolver(schema)</code>   Vincula el esquema Yup al ciclo de validaci\u00f3n de React Hook Form.</p> </li> <li> <p><code>mode: 'onTouched'</code>   La validaci\u00f3n se ejecuta cuando el usuario interact\u00faa con un campo, evitando errores prematuros al cargar el formulario.</p> </li> <li> <p><code>defaultValues</code> expl\u00edcitos   Garantizan que todos los campos est\u00e9n controlados desde el primer render, evitando advertencias de inputs no controlados.</p> </li> </ul>"},{"location":"proyecto/frontend/src/hooks/useNotaForm/#manejo-del-submit-y-transformacion-de-datos","title":"Manejo del submit y transformaci\u00f3n de datos","text":"<pre><code>const handleSubmit = methods.handleSubmit((data) =&gt; {\n  const dataConPrefijo = {\n    ...data,\n    telefono: `+56${data.telefono}`,\n  };\n\n  onSubmit(dataConPrefijo);\n});\n</code></pre>"},{"location":"proyecto/frontend/src/hooks/useNotaForm/#logica-aplicada","title":"L\u00f3gica aplicada","text":"<ul> <li> <p>Separaci\u00f3n de responsabilidades   La validaci\u00f3n ocurre antes de esta funci\u00f3n. Aqu\u00ed solo se transforman los datos finales.</p> </li> <li> <p>Normalizaci\u00f3n del tel\u00e9fono   Se agrega el prefijo <code>+56</code> en el momento del env\u00edo, manteniendo el formulario desacoplado de reglas espec\u00edficas del backend.</p> </li> <li> <p>Delegaci\u00f3n del env\u00edo   El hook no realiza llamadas HTTP. La funci\u00f3n <code>onSubmit</code> es inyectada desde el componente consumidor, permitiendo reutilizaci\u00f3n y testing.</p> </li> </ul>"},{"location":"proyecto/frontend/src/hooks/useNotaForm/#api-publica-del-hook","title":"API p\u00fablica del hook","text":"<pre><code>return {\n  ...methods,\n  onSubmit: handleSubmit,\n};\n</code></pre> <p>El hook expone:</p> <ul> <li>Todas las utilidades de <code>react-hook-form</code> (<code>control</code>, <code>errors</code>, <code>watch</code>, etc.).</li> <li>Una funci\u00f3n <code>onSubmit</code> ya preparada, validada y con los datos transformados.</li> </ul>"},{"location":"proyecto/frontend/src/hooks/useNotaForm/#beneficios-del-enfoque","title":"Beneficios del enfoque","text":"<ul> <li>Centraliza reglas de negocio del formulario.</li> <li>Reduce complejidad en los componentes de UI.</li> <li>Facilita mantenimiento y cambios futuros en validaciones.</li> <li>Permite reutilizar el formulario en distintos flujos (crear / editar).</li> </ul>"},{"location":"proyecto/frontend/src/hooks/useNotaForm/#uso-esperado","title":"Uso esperado","text":"<p>Este hook est\u00e1 dise\u00f1ado para ser consumido por componentes de formulario que renderizan los inputs y delegan completamente la l\u00f3gica de validaci\u00f3n y env\u00edo a <code>useNotaForm</code>.</p>"},{"location":"proyecto/frontend/src/hooks/usePDFMetadata/","title":"usePDFMetadata.js","text":""},{"location":"proyecto/frontend/src/hooks/usePDFMetadata/#proposito-del-hook","title":"Prop\u00f3sito del hook","text":"<p><code>usePDFMetadata</code> es un custom hook de React dise\u00f1ado para encapsular la l\u00f3gica relacionada con la extracci\u00f3n inicial de metadatos de archivos PDF antes de su persistencia o procesamiento posterior. El hook abstrae tanto la generaci\u00f3n de metadatos b\u00e1sicos como el control del estado de carga asociado al proceso.</p> <p>Su objetivo principal es:</p> <ul> <li>Centralizar la l\u00f3gica de extracci\u00f3n de informaci\u00f3n del archivo.</li> <li>Proveer un estado claro de ejecuci\u00f3n (<code>extracting</code>) para control de UI.</li> <li>Mantener el componente consumidor desacoplado de detalles de implementaci\u00f3n.</li> </ul>"},{"location":"proyecto/frontend/src/hooks/usePDFMetadata/#estructura-general-del-codigo","title":"Estructura general del c\u00f3digo","text":"<pre><code>import { useState } from \"react\";\n\nconst usePDFMetadata = () =&gt; {\n  const [extracting, setExtracting] = useState(false);\n\n  const extractPDFMetadata = async (file) =&gt; {\n    setExtracting(true);\n    try {\n      const metadata = {\n        fileName: file.name,\n        fileSize: `${(file.size / (1024 * 1024)).toFixed(2)} MB`,\n        title: file.name.replace('.pdf', ''),\n      };\n\n      return metadata;\n    } catch (error) {\n      console.error(\"Error extrayendo metadatos:\", error);\n      throw error;\n    } finally {\n      setExtracting(false);\n    }\n  };\n\n  return { extractPDFMetadata, extracting };\n};\n\nexport default usePDFMetadata;\n</code></pre>"},{"location":"proyecto/frontend/src/hooks/usePDFMetadata/#analisis-detallado-del-codigo","title":"An\u00e1lisis detallado del c\u00f3digo","text":""},{"location":"proyecto/frontend/src/hooks/usePDFMetadata/#1-manejo-de-estado-interno","title":"1. Manejo de estado interno","text":"<pre><code>const [extracting, setExtracting] = useState(false);\n</code></pre> <p>Se utiliza un estado booleano para representar si el proceso de extracci\u00f3n se encuentra en ejecuci\u00f3n. Este estado cumple un rol clave en la interfaz de usuario:</p> <ul> <li>Permite deshabilitar botones mientras se procesa el archivo.</li> <li>Facilita la visualizaci\u00f3n de indicadores de carga.</li> <li>Evita ejecuciones concurrentes no deseadas.</li> </ul> <p>El estado se gestiona exclusivamente dentro del hook, manteniendo a los componentes consumidores libres de esta responsabilidad.</p>"},{"location":"proyecto/frontend/src/hooks/usePDFMetadata/#2-funcion-extractpdfmetadata","title":"2. Funci\u00f3n <code>extractPDFMetadata</code>","text":"<pre><code>const extractPDFMetadata = async (file) =&gt; {\n  setExtracting(true);\n</code></pre> <p>La funci\u00f3n principal del hook recibe un objeto <code>File</code>, normalmente proveniente de un <code>&lt;input type=\"file\" /&gt;</code>. Desde el inicio se establece el estado <code>extracting</code> en <code>true</code>, se\u00f1alando que el proceso ha comenzado.</p> <p>El uso de una funci\u00f3n <code>async</code> permite que el hook sea f\u00e1cilmente extendido en el futuro para:</p> <ul> <li>Lectura del contenido real del PDF.</li> <li>Integraci\u00f3n con librer\u00edas de parsing.</li> <li>Llamadas a servicios externos.</li> </ul>"},{"location":"proyecto/frontend/src/hooks/usePDFMetadata/#3-construccion-del-objeto-de-metadatos","title":"3. Construcci\u00f3n del objeto de metadatos","text":"<pre><code>const metadata = {\n  fileName: file.name,\n  fileSize: `${(file.size / (1024 * 1024)).toFixed(2)} MB`,\n  title: file.name.replace('.pdf', ''),\n};\n</code></pre> <p>En este bloque se genera un objeto plano con metadatos b\u00e1sicos:</p> <ul> <li>fileName: nombre original del archivo.</li> <li>fileSize: tama\u00f1o convertido a megabytes, formateado para presentaci\u00f3n.</li> <li>title: nombre del archivo sin la extensi\u00f3n <code>.pdf</code>, pensado para ser utilizado como valor inicial editable.</li> </ul> <p>La l\u00f3gica es deliberadamente simple y determin\u00edstica, asegurando que la funci\u00f3n sea r\u00e1pida y confiable.</p>"},{"location":"proyecto/frontend/src/hooks/usePDFMetadata/#4-manejo-de-errores","title":"4. Manejo de errores","text":"<pre><code>catch (error) {\n  console.error(\"Error extrayendo metadatos:\", error);\n  throw error;\n}\n</code></pre> <p>Aunque la implementaci\u00f3n actual no lanza errores de forma expl\u00edcita, el bloque <code>catch</code> cumple un rol preventivo:</p> <ul> <li>Permite capturar errores futuros si se agrega l\u00f3gica m\u00e1s compleja.</li> <li>Garantiza que los errores sean propagados al consumidor del hook.</li> <li>Facilita el debugging sin ocultar fallos silenciosamente.</li> </ul>"},{"location":"proyecto/frontend/src/hooks/usePDFMetadata/#5-finalizacion-del-proceso","title":"5. Finalizaci\u00f3n del proceso","text":"<pre><code>finally {\n  setExtracting(false);\n}\n</code></pre> <p>El uso de <code>finally</code> asegura que el estado <code>extracting</code> se restablezca correctamente, independientemente del resultado de la operaci\u00f3n. Esto es cr\u00edtico para mantener la consistencia visual y funcional de la interfaz.</p>"},{"location":"proyecto/frontend/src/hooks/usePDFMetadata/#api-expuesta-por-el-hook","title":"API expuesta por el hook","text":"<p>El hook retorna un objeto con dos propiedades:</p> <pre><code>{\n  extractPDFMetadata, // Funci\u00f3n asincr\u00f3nica para obtener metadatos\n  extracting          // Estado booleano del proceso\n}\n</code></pre> <p>Esta API permite una integraci\u00f3n clara y expl\u00edcita en componentes, evitando dependencias impl\u00edcitas o estados duplicados.</p>"},{"location":"proyecto/frontend/src/hooks/usePDFMetadata/#consideraciones-de-diseno","title":"Consideraciones de dise\u00f1o","text":"<ul> <li>El hook sigue el principio de single responsibility, limit\u00e1ndose exclusivamente a la extracci\u00f3n de metadatos.</li> <li>No depende de librer\u00edas externas, lo que reduce acoplamiento y complejidad.</li> <li>Est\u00e1 preparado para escalar sin modificar la interfaz p\u00fablica.</li> </ul>"},{"location":"proyecto/frontend/src/hooks/usePDFMetadata/#posibles-extensiones","title":"Posibles extensiones","text":"<ul> <li>Lectura de metadatos internos del PDF (autor, fecha, p\u00e1ginas).</li> <li>Validaci\u00f3n del tipo MIME del archivo.</li> <li>Normalizaci\u00f3n del t\u00edtulo (may\u00fasculas, reemplazo de caracteres).</li> <li>Integraci\u00f3n con validaciones previas a la carga.</li> </ul> <p>Este enfoque mantiene el hook como una pieza reutilizable, predecible y alineada con buenas pr\u00e1cticas de arquitectura en React.</p>"},{"location":"proyecto/frontend/src/layouts/appLayout/","title":"AppLayout.jsx","text":"<p>Este archivo define el layout principal de la aplicaci\u00f3n, encargado de orquestar la estructura visual base y la convivencia entre navegaci\u00f3n superior, men\u00fa lateral y contenido din\u00e1mico.</p>"},{"location":"proyecto/frontend/src/layouts/appLayout/#proposito-del-componente","title":"Prop\u00f3sito del componente","text":"<p><code>AppLayout</code> act\u00faa como contenedor ra\u00edz de las vistas protegidas o principales del sistema. Su responsabilidad es:</p> <ul> <li>Definir la estructura general de la interfaz.</li> <li>Integrar la barra de navegaci\u00f3n superior (<code>Navbar</code>).</li> <li>Integrar el men\u00fa lateral (<code>Sidebar</code>).</li> <li>Reservar el espacio donde React Router renderiza las rutas hijas mediante <code>Outlet</code>.</li> <li>Gestionar el comportamiento responsive del men\u00fa en dispositivos m\u00f3viles.</li> </ul> <p>Este componente no contiene l\u00f3gica de negocio ni estado global; su enfoque es puramente estructural y de layout.</p>"},{"location":"proyecto/frontend/src/layouts/appLayout/#dependencias-utilizadas","title":"Dependencias utilizadas","text":"<ul> <li> <p>@mui/material</p> </li> <li> <p><code>Box</code>: contenedor flexible basado en flexbox.</p> </li> <li> <p><code>Toolbar</code>: espaciador que replica la altura del AppBar.</p> </li> <li> <p>react-router-dom</p> </li> <li> <p><code>Outlet</code>: punto de renderizado de rutas anidadas.</p> </li> <li> <p>React</p> </li> <li> <p><code>useState</code>: manejo de estado local para el men\u00fa m\u00f3vil.</p> </li> <li> <p>Componentes internos</p> </li> <li> <p><code>Navbar</code>: barra superior de navegaci\u00f3n.</p> </li> <li><code>Sidebar</code>: men\u00fa lateral de la aplicaci\u00f3n.</li> </ul>"},{"location":"proyecto/frontend/src/layouts/appLayout/#estado-local","title":"Estado local","text":"<pre><code>const [mobileOpen, setMobileOpen] = useState(false);\n</code></pre> <ul> <li><code>mobileOpen</code>: controla si el men\u00fa lateral est\u00e1 abierto o cerrado en resoluciones m\u00f3viles.</li> <li>Este estado se comparte entre <code>Navbar</code> y <code>Sidebar</code> mediante props, permitiendo una sincronizaci\u00f3n consistente del comportamiento.</li> </ul>"},{"location":"proyecto/frontend/src/layouts/appLayout/#manejadores-de-eventos","title":"Manejadores de eventos","text":"<pre><code>const handleMenuToggle = () =&gt; setMobileOpen((prev) =&gt; !prev);\nconst handleMenuClose = () =&gt; setMobileOpen(false);\n</code></pre> <ul> <li> <p><code>handleMenuToggle</code></p> </li> <li> <p>Alterna el estado del men\u00fa m\u00f3vil.</p> </li> <li> <p>Se utiliza t\u00edpicamente desde el bot\u00f3n de men\u00fa en la barra superior.</p> </li> <li> <p><code>handleMenuClose</code></p> </li> <li> <p>Cierra expl\u00edcitamente el men\u00fa.</p> </li> <li>Se utiliza cuando el usuario selecciona una opci\u00f3n del <code>Sidebar</code> o interact\u00faa fuera de \u00e9l.</li> </ul> <p>Esta separaci\u00f3n evita ambig\u00fcedades y facilita el control del flujo de apertura/cierre.</p>"},{"location":"proyecto/frontend/src/layouts/appLayout/#estructura-del-render","title":"Estructura del render","text":"<pre><code>&lt;Box sx={{ display: 'flex' }}&gt;\n  &lt;Navbar mobileOpen={mobileOpen} onMenuClick={handleMenuToggle} /&gt;\n  &lt;Sidebar mobileOpen={mobileOpen} onClose={handleMenuClose} /&gt;\n\n  &lt;Box component=\"main\" sx={{ flexGrow: 1, p: 1 }}&gt;\n    &lt;Toolbar /&gt;\n    &lt;Outlet /&gt;\n  &lt;/Box&gt;\n&lt;/Box&gt;\n</code></pre>"},{"location":"proyecto/frontend/src/layouts/appLayout/#contenedor-raiz","title":"Contenedor ra\u00edz","text":"<ul> <li>Usa <code>display: flex</code> para permitir la convivencia horizontal del <code>Sidebar</code> y el contenido principal.</li> <li>Facilita una estructura adaptable a escritorio y m\u00f3vil.</li> </ul>"},{"location":"proyecto/frontend/src/layouts/appLayout/#navbar","title":"Navbar","text":"<ul> <li>Recibe el estado <code>mobileOpen</code> para reflejar visualmente el estado del men\u00fa.</li> <li>Dispara <code>onMenuClick</code> para alternar el men\u00fa en resoluciones peque\u00f1as.</li> </ul>"},{"location":"proyecto/frontend/src/layouts/appLayout/#sidebar","title":"Sidebar","text":"<ul> <li>Controlado completamente por el estado del layout.</li> <li> <p>Recibe:</p> </li> <li> <p><code>mobileOpen</code>: define si est\u00e1 visible.</p> </li> <li><code>onClose</code>: callback para cerrar el men\u00fa.</li> </ul> <p>Esto asegura que el <code>Sidebar</code> sea un componente controlado y predecible.</p>"},{"location":"proyecto/frontend/src/layouts/appLayout/#area-principal-main","title":"\u00c1rea principal (<code>main</code>)","text":"<ul> <li><code>flexGrow: 1</code> permite que el contenido ocupe todo el espacio restante.</li> <li> <p><code>Toolbar</code> se utiliza como separador vertical:</p> </li> <li> <p>Replica la altura del <code>AppBar</code>.</p> </li> <li>Evita que el contenido renderizado por <code>Outlet</code> quede oculto debajo de la barra superior.</li> </ul>"},{"location":"proyecto/frontend/src/layouts/appLayout/#outlet","title":"Outlet","text":"<ul> <li>Punto donde React Router renderiza las rutas hijas.</li> <li>Permite que este layout sea reutilizado para m\u00faltiples vistas sin duplicar estructura.</li> </ul>"},{"location":"proyecto/frontend/src/layouts/appLayout/#consideraciones-de-diseno","title":"Consideraciones de dise\u00f1o","text":"<ul> <li>El layout sigue una arquitectura de contenedor \u00fanico, donde el estado de navegaci\u00f3n se centraliza.</li> <li>Facilita el mantenimiento y la escalabilidad del sistema de navegaci\u00f3n.</li> <li> <p>Mantiene una clara separaci\u00f3n entre:</p> </li> <li> <p>Layout (estructura)</p> </li> <li>Navegaci\u00f3n (Navbar / Sidebar)</li> <li>Contenido (rutas)</li> </ul>"},{"location":"proyecto/frontend/src/layouts/appLayout/#buenas-practicas-aplicadas","title":"Buenas pr\u00e1cticas aplicadas","text":"<ul> <li>Estado m\u00ednimo y localizado.</li> <li>Componentes controlados mediante props.</li> <li>Uso correcto de <code>Outlet</code> para layouts anidados.</li> <li>Evita l\u00f3gica de negocio dentro del layout.</li> </ul>"},{"location":"proyecto/frontend/src/layouts/appLayout/#rol-dentro-de-la-arquitectura","title":"Rol dentro de la arquitectura","text":"<p><code>AppLayout</code> funciona como el esqueleto visual de la aplicaci\u00f3n. Todas las vistas principales dependen de este componente para garantizar una experiencia consistente, responsive y alineada con la navegaci\u00f3n global del sistema.</p>"},{"location":"proyecto/frontend/src/layouts/authLayout/","title":"AuthLayout.jsx","text":""},{"location":"proyecto/frontend/src/layouts/authLayout/#proposito-del-componente","title":"Prop\u00f3sito del componente","text":"<p><code>AuthLayout</code> es un layout estructural utilizado para envolver las vistas de autenticaci\u00f3n (por ejemplo: login, recuperaci\u00f3n de contrase\u00f1a, registro). Su responsabilidad es proveer un contenedor de pantalla completa y delegar el renderizado del contenido espec\u00edfico a React Router mediante <code>Outlet</code>.</p> <p>Este componente no contiene l\u00f3gica de negocio, estado local ni dependencias externas a la maquetaci\u00f3n. Su dise\u00f1o busca ser simple, reutilizable y desacoplado de las vistas hijas.</p>"},{"location":"proyecto/frontend/src/layouts/authLayout/#importaciones","title":"Importaciones","text":"<pre><code>import { Grid } from '@mui/material';\nimport { Outlet } from 'react-router-dom';\n</code></pre>"},{"location":"proyecto/frontend/src/layouts/authLayout/#detalle-de-dependencias","title":"Detalle de dependencias","text":"<ul> <li> <p><code>Grid</code> (MUI)   Se utiliza como contenedor principal para aprovechar el sistema de layout de Material UI y garantizar una correcta adaptaci\u00f3n al tama\u00f1o de la pantalla.</p> </li> <li> <p><code>Outlet</code> (React Router)   Permite renderizar din\u00e1micamente las rutas hijas asociadas a este layout, seg\u00fan la configuraci\u00f3n del router.</p> </li> </ul>"},{"location":"proyecto/frontend/src/layouts/authLayout/#definicion-del-componente","title":"Definici\u00f3n del componente","text":"<pre><code>const AuthLayout = () =&gt; {\n  return (\n    &lt;Grid container sx={{ height: '100vh', overflow: 'hidden' }}&gt;\n      &lt;Outlet /&gt;\n    &lt;/Grid&gt;\n  );\n};\n</code></pre>"},{"location":"proyecto/frontend/src/layouts/authLayout/#analisis-del-layout","title":"An\u00e1lisis del layout","text":"<ul> <li> <p><code>Grid container</code>   Declara el contenedor ra\u00edz como un grid de Material UI, habilitando un sistema de layout flexible y consistente.</p> </li> <li> <p><code>height: '100vh'</code>   Fuerza al layout a ocupar el 100% de la altura del viewport, condici\u00f3n habitual en pantallas de autenticaci\u00f3n para evitar scroll innecesario y centrar visualmente el contenido.</p> </li> <li> <p><code>overflow: 'hidden'</code>   Previene el scroll externo del layout. El control del overflow queda delegado a los componentes internos si fuese necesario.</p> </li> <li> <p><code>&lt;Outlet /&gt;</code>   Act\u00faa como punto de inserci\u00f3n para las vistas hijas (por ejemplo <code>LoginPage</code>, <code>ResetPasswordPage</code>, etc.), manteniendo el layout independiente del contenido.</p> </li> </ul>"},{"location":"proyecto/frontend/src/layouts/authLayout/#responsabilidades","title":"Responsabilidades","text":"<p>Este componente se encarga exclusivamente de:</p> <ul> <li>Definir un contenedor de pantalla completa para vistas de autenticaci\u00f3n.</li> <li>Servir como layout padre en la jerarqu\u00eda de rutas.</li> <li>Mantener una separaci\u00f3n clara entre estructura y contenido.</li> </ul> <p>No es responsabilidad de este componente:</p> <ul> <li>Manejar autenticaci\u00f3n o validaciones.</li> <li>Gestionar estado global o local.</li> <li>Renderizar elementos visuales espec\u00edficos (formularios, mensajes, botones).</li> </ul>"},{"location":"proyecto/frontend/src/layouts/authLayout/#uso-tipico-en-el-router","title":"Uso t\u00edpico en el router","text":"<p>Este layout se utiliza habitualmente de la siguiente forma:</p> <pre><code>{\n  path: '/login',\n  element: &lt;AuthLayout /&gt;,\n  children: [\n    { index: true, element: &lt;LoginPage /&gt; }\n  ]\n}\n</code></pre> <p>De esta manera, todas las rutas hijas heredan la estructura definida por <code>AuthLayout</code>.</p>"},{"location":"proyecto/frontend/src/layouts/authLayout/#beneficios-del-enfoque","title":"Beneficios del enfoque","text":"<ul> <li>Alta cohesi\u00f3n: el layout cumple una \u00fanica funci\u00f3n clara.</li> <li>Reutilizaci\u00f3n: puede extenderse f\u00e1cilmente a otras vistas de autenticaci\u00f3n.</li> <li>Mantenibilidad: cambios estructurales se realizan en un \u00fanico punto.</li> <li>Consistencia visual: todas las vistas de autenticaci\u00f3n comparten el mismo marco base.</li> </ul>"},{"location":"proyecto/frontend/src/layouts/authLayout/#conclusion","title":"Conclusi\u00f3n","text":"<p><code>AuthLayout</code> es un componente de infraestructura que proporciona una base s\u00f3lida y limpia para las vistas de autenticaci\u00f3n. Su simplicidad es intencional y favorece una arquitectura clara, escalable y alineada con buenas pr\u00e1cticas en aplicaciones React con React Router y Material UI.</p>"},{"location":"proyecto/frontend/src/pages/loginPage/","title":"LoginPage.jsx","text":""},{"location":"proyecto/frontend/src/pages/loginPage/#proposito-del-archivo","title":"Prop\u00f3sito del archivo","text":"<p>Este componente define la p\u00e1gina de autenticaci\u00f3n del sistema. Su responsabilidad principal es presentar el formulario de inicio de sesi\u00f3n y restablecer el estado global de autenticaci\u00f3n al ingresar a la ruta <code>/login</code>, garantizando una sesi\u00f3n limpia.</p>"},{"location":"proyecto/frontend/src/pages/loginPage/#importaciones-y-dependencias","title":"Importaciones y dependencias","text":"<pre><code>import { useEffect } from 'react';\nimport { useDispatch } from 'react-redux';\nimport { clearStore } from '../auth/authSlice';\n</code></pre> <ul> <li><code>useEffect</code>: ejecuta efectos secundarios al montar el componente.</li> <li><code>useDispatch</code>: permite despachar acciones a Redux.</li> <li><code>clearStore</code>: acci\u00f3n que restablece completamente el estado de autenticaci\u00f3n.</li> </ul> <pre><code>import { LoginForm } from '../components/forms/LoginForm';\n</code></pre> <ul> <li>Componente responsable del formulario y l\u00f3gica de login.</li> </ul> <pre><code>import { Grid, Box } from '@mui/material';\nimport jj_baner from '../assets/imagenes/jj_baner.jpg';\n</code></pre> <ul> <li>Componentes de layout de MUI para estructurar la vista.</li> <li>Imagen est\u00e1tica utilizada como banner visual.</li> </ul>"},{"location":"proyecto/frontend/src/pages/loginPage/#limpieza-del-estado-global","title":"Limpieza del estado global","text":"<pre><code>const dispatch = useDispatch();\n\nuseEffect(() =&gt; {\n  dispatch(clearStore());\n}, [dispatch]);\n</code></pre> <ul> <li>Al montar la p\u00e1gina, se ejecuta <code>clearStore()</code>.</li> <li> <p>Se eliminan:</p> </li> <li> <p>Usuario autenticado</p> </li> <li>Flags de sesi\u00f3n</li> <li>Errores residuales</li> <li>Esto previene inconsistencias al acceder nuevamente al login tras un logout o sesi\u00f3n expirada.</li> </ul>"},{"location":"proyecto/frontend/src/pages/loginPage/#estructura-de-layout","title":"Estructura de layout","text":"<pre><code>&lt;Grid container sx={{ height: '100vh', width: '100vw', overflow: 'hidden' }}&gt;\n</code></pre> <ul> <li>Contenedor principal a pantalla completa.</li> <li>Evita scroll innecesario.</li> </ul>"},{"location":"proyecto/frontend/src/pages/loginPage/#columna-del-formulario","title":"Columna del formulario","text":"<pre><code>&lt;Grid size={{ xs: 12, md: 6 }} container direction=\"column\" ...&gt;\n  &lt;LoginForm /&gt;\n&lt;/Grid&gt;\n</code></pre> <ul> <li> <p>Ocupa:</p> </li> <li> <p>100% del ancho en m\u00f3vil</p> </li> <li>50% del ancho en pantallas medianas o superiores</li> <li>Centra vertical y horizontalmente el formulario.</li> <li><code>LoginForm</code> encapsula toda la l\u00f3gica de validaci\u00f3n, env\u00edo y feedback.</li> </ul>"},{"location":"proyecto/frontend/src/pages/loginPage/#columna-visual-banner","title":"Columna visual (banner)","text":"<pre><code>&lt;Grid size={{ xs: false, md: 6 }} sx={{ display: { xs: 'none', md: 'block' } }}&gt;\n</code></pre> <ul> <li>Visible solo en escritorio.</li> <li>Mejora la experiencia visual sin afectar usabilidad en m\u00f3vil.</li> </ul> <pre><code>&lt;Box\n  sx={{\n    backgroundImage: `url(${jj_baner})`,\n    backgroundSize: 'cover',\n    backgroundPosition: 'center',\n    opacity: 0.8,\n  }}\n/&gt;\n</code></pre> <ul> <li>Imagen decorativa sin impacto funcional.</li> <li>Uso de <code>Box</code> evita im\u00e1genes <code>&lt;img&gt;</code> innecesarias y permite control total de estilos.</li> </ul>"},{"location":"proyecto/frontend/src/pages/loginPage/#responsabilidades-del-componente","title":"Responsabilidades del componente","text":"<ul> <li>Inicializar una sesi\u00f3n limpia</li> <li>Presentar la interfaz de login</li> <li> <p>Separar claramente:</p> </li> <li> <p>L\u00f3gica de autenticaci\u00f3n (<code>LoginForm</code>)</p> </li> <li>Layout visual (<code>LoginPage</code>)</li> </ul>"},{"location":"proyecto/frontend/src/pages/loginPage/#buenas-practicas-aplicadas","title":"Buenas pr\u00e1cticas aplicadas","text":"<ul> <li>Separaci\u00f3n de responsabilidades</li> <li>Uso correcto de <code>useEffect</code> para efectos de montaje</li> <li>Layout responsive con MUI Grid</li> <li>Manejo centralizado del estado con Redux</li> </ul>"},{"location":"proyecto/frontend/src/pages/loginPage/#rol-dentro-de-la-arquitectura","title":"Rol dentro de la arquitectura","text":"<p>Este componente act\u00faa como p\u00e1gina de entrada al sistema, sirviendo como punto de control inicial del flujo de autenticaci\u00f3n y garantizando consistencia del estado global antes de iniciar sesi\u00f3n.</p>"},{"location":"proyecto/frontend/src/pages/notasDataPage/","title":"NotasDataPage.jsx","text":""},{"location":"proyecto/frontend/src/pages/notasDataPage/#proposito","title":"Prop\u00f3sito","text":"<p>Este componente representa la p\u00e1gina de listado de notas de venta. Su responsabilidad principal es preparar el contexto necesario (fecha, permisos del usuario y estado de filtrado) y delegar completamente la visualizaci\u00f3n y l\u00f3gica de datos al componente <code>NotasDataGrid</code>.</p> <p>No contiene l\u00f3gica de presentaci\u00f3n compleja ni manejo directo de datos, siguiendo el principio de separaci\u00f3n de responsabilidades entre p\u00e1ginas y componentes reutilizables.</p>"},{"location":"proyecto/frontend/src/pages/notasDataPage/#analisis-del-codigo","title":"An\u00e1lisis del c\u00f3digo","text":"<pre><code>import { useSelector } from 'react-redux';\nimport { format } from 'date-fns';\nimport NotasDataGrid from '../components/dataGrids/NotasDataGrid';\n</code></pre> <ul> <li><code>useSelector</code>: permite acceder al estado global de Redux, espec\u00edficamente a la informaci\u00f3n del usuario autenticado.</li> <li><code>date-fns/format</code>: se utiliza para generar un string de fecha legible y consistente.</li> <li><code>NotasDataGrid</code>: componente encargado del renderizado de la grilla y la l\u00f3gica asociada a las notas.</li> </ul> <pre><code>const fechaActual = new Date();\nconst fecha = format(fechaActual, 'dd/MM/yyyy HH:mm:ss');\n</code></pre> <ul> <li>Se obtiene la fecha actual al momento de renderizar la p\u00e1gina.</li> <li>El formato incluye d\u00eda, mes, a\u00f1o y hora, lo que permite diferenciar exportaciones realizadas en distintos momentos.</li> </ul> <pre><code>const userGroups = useSelector(state =&gt; state.auth.user?.groups || []);\n</code></pre> <ul> <li>Se extraen los grupos del usuario desde el estado de autenticaci\u00f3n.</li> <li>Se utiliza un fallback a arreglo vac\u00edo para evitar errores en renderizados iniciales.</li> <li>Esta informaci\u00f3n permite que el <code>NotasDataGrid</code> aplique reglas de permisos o visibilidad seg\u00fan el rol del usuario.</li> </ul> <pre><code>&lt;NotasDataGrid\n  estado=\"NO SOLICITADO\"\n  nombre=\"Notas de Ventas\"\n  exportNombre={`Notas_de_Ventas_${fecha}`}\n  userGroups={userGroups}\n/&gt;\n</code></pre> <ul> <li><code>estado</code>: filtra las notas que se mostrar\u00e1n en la grilla.</li> <li><code>nombre</code>: t\u00edtulo descriptivo del m\u00f3dulo.</li> <li><code>exportNombre</code>: nombre din\u00e1mico utilizado al exportar datos (por ejemplo, a Excel).</li> <li><code>userGroups</code>: permite condicionar acciones o columnas seg\u00fan permisos.</li> </ul> <p>La p\u00e1gina act\u00faa \u00fanicamente como orquestadora de props, manteniendo el componente desacoplado y reutilizable.</p>"},{"location":"proyecto/frontend/src/pages/notasDataPage/#beneficios-del-enfoque","title":"Beneficios del enfoque","text":"<ul> <li>C\u00f3digo simple y f\u00e1cil de mantener.</li> <li>Reutilizaci\u00f3n del <code>NotasDataGrid</code> en otros contextos.</li> <li>Centralizaci\u00f3n de reglas de permisos en componentes especializados.</li> <li>P\u00e1ginas ligeras, alineadas con buenas pr\u00e1cticas de React Router.</li> </ul>"},{"location":"proyecto/frontend/src/pages/notasPage/","title":"NotasPage.jsx","text":""},{"location":"proyecto/frontend/src/pages/notasPage/#proposito","title":"Prop\u00f3sito","text":"<p>Este componente representa la p\u00e1gina de creaci\u00f3n o edici\u00f3n de una nota de venta. Su \u00fanica responsabilidad es renderizar el formulario principal encapsulado en <code>NotaForm</code>.</p> <p>No contiene l\u00f3gica adicional, lo que refuerza un dise\u00f1o limpio y predecible.</p>"},{"location":"proyecto/frontend/src/pages/notasPage/#analisis-del-codigo","title":"An\u00e1lisis del c\u00f3digo","text":"<pre><code>import { NotaForm } from \"../components/forms/NotaForm\"\n</code></pre> <ul> <li> <p>Se importa el formulario principal encargado de manejar:</p> </li> <li> <p>Estado del formulario</p> </li> <li>Validaciones</li> <li>Env\u00edo de datos</li> <li>Integraci\u00f3n con backend</li> </ul> <pre><code>const NotasPage = () =&gt; {\n  return (\n    &lt;&gt;\n      &lt;NotaForm /&gt;\n    &lt;/&gt;\n  )\n}\n</code></pre> <ul> <li>El fragmento no a\u00f1ade nodos innecesarios al DOM.</li> <li>Toda la complejidad queda encapsulada dentro del formulario.</li> <li>La p\u00e1gina cumple el rol de contenedor de ruta, no de l\u00f3gica.</li> </ul>"},{"location":"proyecto/frontend/src/pages/notasPage/#beneficios-del-enfoque","title":"Beneficios del enfoque","text":"<ul> <li>Alta cohesi\u00f3n: cada archivo cumple una \u00fanica funci\u00f3n.</li> <li>Facilita pruebas unitarias y mantenimiento.</li> <li>Permite reutilizar <code>NotaForm</code> en otros flujos (edici\u00f3n, duplicado, etc.).</li> <li>Mantiene las p\u00e1ginas alineadas con una arquitectura escalable.</li> </ul>"},{"location":"proyecto/frontend/src/routes/groupsRouter/","title":"Arquitectura de Rutas \u2013 GroupRouter","text":""},{"location":"proyecto/frontend/src/routes/groupsRouter/#proteccion-por-grupos-groupsrouter","title":"Protecci\u00f3n por Grupos \u2013 <code>GroupsRouter</code>","text":""},{"location":"proyecto/frontend/src/routes/groupsRouter/#proposito","title":"Prop\u00f3sito","text":"<p><code>GroupsRouter</code> implementa autorizaci\u00f3n por roles.</p> <p>A diferencia de los loaders:</p> <ul> <li>No valida sesi\u00f3n</li> <li>Valida permisos funcionales</li> </ul>"},{"location":"proyecto/frontend/src/routes/groupsRouter/#codigo","title":"C\u00f3digo","text":"<pre><code>const GroupsRouter = ({ children, group }) =&gt; {\n  const grupo = useSelector(\n    (state) =&gt; state.auth.user?.groups || []\n  );\n\n  const acceso = grupo.some((g) =&gt; g.includes(group));\n\n  return acceso ? children : &lt;HomePage /&gt;;\n};\n</code></pre>"},{"location":"proyecto/frontend/src/routes/groupsRouter/#logica-interna","title":"L\u00f3gica interna","text":"<ol> <li>Se obtiene el usuario desde Redux.</li> <li>Se extrae el arreglo de grupos.</li> <li>Se valida si alguno contiene el grupo requerido.</li> <li>Si tiene acceso \u2192 renderiza el contenido.</li> <li>Si no \u2192 redirige silenciosamente a Home.</li> </ol>"},{"location":"proyecto/frontend/src/routes/groupsRouter/#justificacion-de-diseno","title":"Justificaci\u00f3n de dise\u00f1o","text":"<ul> <li>Evita duplicar l\u00f3gica de permisos.</li> <li>Permite reutilizaci\u00f3n por ruta.</li> <li>Mantiene componentes desacoplados.</li> </ul>"},{"location":"proyecto/frontend/src/routes/loader/","title":"Arquitectura de Rutas \u2013 loader","text":""},{"location":"proyecto/frontend/src/routes/loader/#loaders-de-autenticacion-privateloader-y-publicloader","title":"Loaders de Autenticaci\u00f3n \u2013 <code>privateLoader</code> y <code>publicLoader</code>","text":""},{"location":"proyecto/frontend/src/routes/loader/#proposito","title":"Prop\u00f3sito","text":"<p>Los loaders se ejecutan antes del renderizado y permiten:</p> <ul> <li>Validar sesi\u00f3n</li> <li>Cargar datos globales</li> <li>Redirigir sin renderizar componentes</li> </ul> <p>Este enfoque evita:</p> <ul> <li>Parpadeos de UI</li> <li>Renderizado innecesario</li> <li>L\u00f3gica de auth en componentes</li> </ul>"},{"location":"proyecto/frontend/src/routes/loader/#privateloader","title":"<code>privateLoader</code>","text":"<pre><code>export const privateLoader = async () =&gt; {\n  const { user } = store.getState().auth;\n  if (user) return null;\n\n  try {\n    await store.dispatch(fetchUserThunk()).unwrap();\n    return null;\n  } catch {\n    throw new Response('Unauthorized', {\n      status: 302,\n      headers: { Location: '/login' },\n    });\n  }\n};\n</code></pre>"},{"location":"proyecto/frontend/src/routes/loader/#flujo-logico","title":"Flujo l\u00f3gico","text":"<ol> <li>Se revisa el estado global (<code>Redux</code>).</li> <li>Si el usuario ya existe \u2192 acceso inmediato.</li> <li> <p>Si no existe:</p> </li> <li> <p>Se intenta recuperar sesi\u00f3n (<code>fetchUserThunk</code>).</p> </li> <li>Si falla \u2192 redirecci\u00f3n a <code>/login</code>.</li> </ol> <p>Ventaja:</p> <ul> <li>La sesi\u00f3n se valida una sola vez por navegaci\u00f3n.</li> </ul>"},{"location":"proyecto/frontend/src/routes/loader/#publicloader","title":"<code>publicLoader</code>","text":"<pre><code>export const publicLoader = async () =&gt; {\n  const { user } = store.getState().auth;\n\n  if (user) {\n    throw new Response('Already Authenticated', {\n      status: 302,\n      headers: { Location: '/notas' },\n    });\n  }\n\n  try {\n    await store.dispatch(fetchUserThunk()).unwrap();\n    throw new Response('Already Authenticated', {\n      status: 302,\n      headers: { Location: '/notas' },\n    });\n  } catch {\n    return null;\n  }\n};\n</code></pre>"},{"location":"proyecto/frontend/src/routes/loader/#flujo-logico_1","title":"Flujo l\u00f3gico","text":"<ul> <li>Evita que usuarios autenticados accedan a <code>/login</code>.</li> <li>Reutiliza la misma l\u00f3gica de recuperaci\u00f3n de sesi\u00f3n.</li> </ul> <p>Resultado:</p> <ul> <li>UX limpia y consistente.</li> </ul>"},{"location":"proyecto/frontend/src/routes/routes/","title":"Arquitectura de Rutas \u2013 React Router","text":"<p>Este documento describe en detalle la arquitectura de ruteo del proyecto utilizando React Router v6+ (Data Router API). Se explican la l\u00f3gica, responsabilidades y flujo interno de cada archivo involucrado en la carpeta <code>routes</code>.</p> <p>El sistema de rutas est\u00e1 dividido conceptualmente en tres capas:</p> <ol> <li>Definici\u00f3n de rutas (router principal)</li> <li>Loaders de autenticaci\u00f3n (p\u00fablico / privado)</li> <li>Protecci\u00f3n por grupos (autorizaci\u00f3n)</li> </ol>"},{"location":"proyecto/frontend/src/routes/routes/#definicion-de-rutas-getroutes","title":"Definici\u00f3n de Rutas \u2013 <code>getRoutes</code>","text":""},{"location":"proyecto/frontend/src/routes/routes/#proposito","title":"Prop\u00f3sito","text":"<p>Este archivo define la estructura completa de navegaci\u00f3n de la aplicaci\u00f3n utilizando <code>createBrowserRouter</code>. Centraliza:</p> <ul> <li>Layouts principales</li> <li>Rutas p\u00fablicas y privadas</li> <li>Protecci\u00f3n por autenticaci\u00f3n</li> <li>Protecci\u00f3n por roles/grupos</li> </ul>"},{"location":"proyecto/frontend/src/routes/routes/#codigo","title":"C\u00f3digo","text":"<pre><code>export const getRoutes = () =&gt; createBrowserRouter([\n  {\n    element: &lt;AppLayout /&gt;,\n    loader: privateLoader,\n    children: [ /* rutas privadas */ ],\n  },\n  {\n    element: &lt;AuthLayout /&gt;,\n    loader: publicLoader,\n    children: [ /* rutas p\u00fablicas */ ],\n  },\n]);\n</code></pre>"},{"location":"proyecto/frontend/src/routes/routes/#concepto-clave-layouts-como-contenedores","title":"\ud83d\udd39 Concepto Clave: Layouts como contenedores","text":"<ul> <li> <p>AppLayout</p> </li> <li> <p>Contenedor de toda la aplicaci\u00f3n autenticada</p> </li> <li> <p>Incluye navbar, sidebar, footer, etc.</p> </li> <li> <p>AuthLayout</p> </li> <li> <p>Contenedor exclusivo para autenticaci\u00f3n</p> </li> <li>Evita renderizar UI privada</li> </ul> <p>Cada layout act\u00faa como un router outlet.</p>"},{"location":"proyecto/frontend/src/routes/routes/#rutas-privadas","title":"\ud83d\udd39 Rutas privadas","text":"<pre><code>{\n  element: &lt;AppLayout /&gt;,\n  loader: privateLoader,\n  children: [\n    { index: true, element: &lt;HomePage /&gt; },\n    { path: 'notas', element: &lt;NotasPage /&gt; },\n  ],\n}\n</code></pre> <p>L\u00f3gica:</p> <ol> <li>React Router ejecuta <code>privateLoader</code> antes de renderizar.</li> <li>Si el usuario est\u00e1 autenticado \u2192 se renderiza <code>AppLayout</code>.</li> <li>Si no lo est\u00e1 \u2192 redirecci\u00f3n autom\u00e1tica a <code>/login</code>.</li> </ol>"},{"location":"proyecto/frontend/src/routes/routes/#proteccion-por-grupos-roles","title":"\ud83d\udd39 Protecci\u00f3n por grupos (roles)","text":"<pre><code>{\n  path: 'materias-primas',\n  element: (\n    &lt;GroupsRouter group=\"Admin\"&gt;\n      &lt;MateriasPrimasPage /&gt;\n    &lt;/GroupsRouter&gt;\n  ),\n}\n</code></pre> <p>Este patr\u00f3n desacopla autenticaci\u00f3n de autorizaci\u00f3n:</p> <ul> <li>Loader \u2192 valida sesi\u00f3n</li> <li>GroupsRouter \u2192 valida permisos</li> </ul>"},{"location":"proyecto/frontend/src/routes/routes/#ruta-comodin","title":"\ud83d\udd39 Ruta comod\u00edn","text":"<pre><code>{ path: '*', element: &lt;HomePage /&gt; }\n</code></pre> <p>Garantiza que cualquier ruta inv\u00e1lida redirija a una p\u00e1gina v\u00e1lida.</p>"},{"location":"proyecto/frontend/src/routes/routes/#arquitectura-general","title":"\ud83e\udde0 Arquitectura General","text":"<pre><code>BrowserRouter\n \u251c\u2500\u2500 AuthLayout (publicLoader)\n \u2502    \u2514\u2500\u2500 Login\n \u2514\u2500\u2500 AppLayout (privateLoader)\n      \u251c\u2500\u2500 Rutas p\u00fablicas autenticadas\n      \u2514\u2500\u2500 Rutas protegidas por GroupsRouter\n</code></pre>"},{"location":"proyecto/frontend/src/routes/routes/#buenas-practicas-aplicadas","title":"Buenas Pr\u00e1cticas Aplicadas","text":"<ul> <li>Autenticaci\u00f3n fuera de componentes</li> <li>Autorizaci\u00f3n desacoplada</li> <li>Redux como fuente \u00fanica de sesi\u00f3n</li> <li>Layouts como frontera de seguridad</li> <li>Redirecciones previas al render</li> </ul> <p>\u2705 Esta arquitectura proporciona un sistema de navegaci\u00f3n seguro, escalable y mantenible, alineado con aplicaciones React empresariales.</p>"},{"location":"proyecto/frontend/src/theme/appTheme/","title":"AppTheme.jsx","text":""},{"location":"proyecto/frontend/src/theme/appTheme/#proposito","title":"Prop\u00f3sito","text":"<p>El componente <code>AppTheme</code> act\u00faa como un proveedor global de tema para la aplicaci\u00f3n. Su responsabilidad es encapsular toda la interfaz dentro de un <code>ThemeProvider</code> de Material UI, garantizando consistencia visual, tipogr\u00e1fica y de estilos base en todos los componentes.</p>"},{"location":"proyecto/frontend/src/theme/appTheme/#implementacion","title":"Implementaci\u00f3n","text":"<pre><code>const AppTheme = ({ children }) =&gt; {\n  return (\n    &lt;ThemeProvider theme={themeJJ}&gt;\n      &lt;CssBaseline /&gt;\n      {children}\n    &lt;/ThemeProvider&gt;\n  )\n}\n</code></pre> <ul> <li><code>ThemeProvider</code>: inyecta el objeto de tema personalizado (<code>themeJJ</code>) en el \u00e1rbol de componentes.</li> <li><code>CssBaseline</code>: normaliza estilos CSS entre navegadores y aplica valores base coherentes con el tema.</li> <li><code>children</code>: representa la aplicaci\u00f3n completa o sub\u00e1rboles que deben heredar el tema.</li> </ul> <p>Este componente suele utilizarse en el punto m\u00e1s alto de la aplicaci\u00f3n (por ejemplo, en <code>main.jsx</code> o <code>App.jsx</code>).</p>"},{"location":"proyecto/frontend/src/theme/theme/","title":"theme.js","text":""},{"location":"proyecto/frontend/src/theme/theme/#proposito","title":"Prop\u00f3sito","text":"<p><code>themeJJ</code> define el tema visual central de la aplicaci\u00f3n utilizando <code>createTheme</code> de Material UI. Centraliza decisiones de dise\u00f1o como colores, tipograf\u00eda, radios, y overrides de componentes, facilitando mantenimiento y escalabilidad.</p>"},{"location":"proyecto/frontend/src/theme/theme/#paleta-de-colores","title":"Paleta de colores","text":"<ul> <li>Modo: <code>light</code></li> <li>Primario / Secundario: tonos azules utilizados de forma consistente en botones, AppBar y acciones principales.</li> <li>Background: separaci\u00f3n clara entre fondo general (<code>default</code>) y superficies (<code>paper</code>).</li> <li>Estados: colores expl\u00edcitos para error, success, warning e info.</li> </ul> <p>Esta definici\u00f3n asegura coherencia visual y facilita cambios globales sin modificar componentes individuales.</p>"},{"location":"proyecto/frontend/src/theme/theme/#tipografia","title":"Tipograf\u00eda","text":"<ul> <li>Fuente base: combinaci\u00f3n de <code>Saira</code> con fuentes fallback est\u00e1ndar.</li> <li>Jerarqu\u00eda clara para encabezados (<code>h1</code>, <code>h2</code>, <code>h3</code>).</li> <li>Botones sin transformaci\u00f3n autom\u00e1tica de texto, priorizando legibilidad.</li> </ul>"},{"location":"proyecto/frontend/src/theme/theme/#shape","title":"Shape","text":"<ul> <li><code>borderRadius: 0</code> establece un estilo visual recto y sobrio en toda la aplicaci\u00f3n.</li> </ul>"},{"location":"proyecto/frontend/src/theme/theme/#overrides-de-componentes","title":"Overrides de componentes","text":"<ul> <li>MuiButton: padding consistente y bordes rectos.</li> <li>MuiTextField: valores por defecto estandarizados (<code>outlined</code>, <code>small</code>).</li> <li>MuiAppBar: color alineado con la paleta primaria.</li> <li>MuiPaper: eliminaci\u00f3n de bordes redondeados para coherencia visual.</li> </ul>"},{"location":"proyecto/frontend/src/theme/theme/#localizacion","title":"Localizaci\u00f3n","text":"<ul> <li>Se incorpora <code>esES</code> para adaptar componentes como DatePickers al idioma y formato regional.</li> </ul>"},{"location":"proyecto/frontend/src/theme/theme/#consideraciones-arquitectonicas","title":"Consideraciones arquitect\u00f3nicas","text":"<ul> <li>La separaci\u00f3n entre <code>AppTheme</code> y <code>themeJJ</code> desacopla la definici\u00f3n del tema de su aplicaci\u00f3n.</li> <li>Facilita testing, reutilizaci\u00f3n y futuras extensiones (por ejemplo, dark mode).</li> <li>Centraliza el dise\u00f1o como una capa transversal de la aplicaci\u00f3n.</li> </ul>"},{"location":"proyecto/frontend/src/utils/api/","title":"api.js","text":"<p>Este archivo define una instancia centralizada de Axios que encapsula la configuraci\u00f3n de comunicaci\u00f3n HTTP con el backend, incluyendo manejo de CSRF, refresh autom\u00e1tico de tokens y par\u00e1metros base de red.</p>"},{"location":"proyecto/frontend/src/utils/api/#proposito-del-archivo","title":"Prop\u00f3sito del archivo","text":"<p>El objetivo principal de este m\u00f3dulo es proporcionar un cliente HTTP \u00fanico y consistente para toda la aplicaci\u00f3n, evitando configuraciones duplicadas y centralizando la l\u00f3gica transversal relacionada con autenticaci\u00f3n y seguridad.</p>"},{"location":"proyecto/frontend/src/utils/api/#creacion-de-la-instancia-axios","title":"Creaci\u00f3n de la instancia Axios","text":"<pre><code>export const api = axios.create({\n  baseURL: import.meta.env.VITE_API_URL || 'http://localhost:8000/api/v1/',\n  withCredentials: true,\n  headers: {\n    'Content-Type': 'application/json',\n  },\n});\n</code></pre>"},{"location":"proyecto/frontend/src/utils/api/#explicacion","title":"Explicaci\u00f3n","text":"<ul> <li> <p><code>baseURL</code>:</p> </li> <li> <p>Define la URL base para todas las peticiones HTTP.</p> </li> <li>Prioriza la variable de entorno <code>VITE_API_URL</code>, lo que permite cambiar el backend seg\u00fan el entorno (desarrollo, staging, producci\u00f3n).</li> <li> <p>Incluye un fallback local para entornos de desarrollo.</p> </li> <li> <p><code>withCredentials: true</code>:</p> </li> <li> <p>Habilita el env\u00edo autom\u00e1tico de cookies en cada petici\u00f3n.</p> </li> <li> <p>Es fundamental para escenarios con autenticaci\u00f3n basada en cookies (por ejemplo, Django + CSRF).</p> </li> <li> <p><code>headers</code>:</p> </li> <li> <p>Establece el tipo de contenido por defecto como JSON para todas las solicitudes.</p> </li> </ul>"},{"location":"proyecto/frontend/src/utils/api/#lectura-del-token-csrf-desde-cookies","title":"Lectura del token CSRF desde cookies","text":"<pre><code>function getCookie(name) {\n  const match = document.cookie.match(new RegExp('(^| )' + name + '=([^;]+)'));\n  return match ? match[2] : null;\n}\n</code></pre>"},{"location":"proyecto/frontend/src/utils/api/#explicacion_1","title":"Explicaci\u00f3n","text":"<ul> <li>Funci\u00f3n utilitaria que obtiene el valor de una cookie espec\u00edfica.</li> <li>Se utiliza exclusivamente para recuperar el token CSRF (<code>csrftoken</code>).</li> <li>Evita dependencias externas y mantiene la l\u00f3gica expl\u00edcita.</li> </ul>"},{"location":"proyecto/frontend/src/utils/api/#interceptor-de-solicitudes-request-interceptor","title":"Interceptor de solicitudes (Request Interceptor)","text":"<pre><code>api.interceptors.request.use((config) =&gt; {\n  const csrfToken = getCookie('csrftoken');\n  if (\n    csrfToken &amp;&amp;\n    ['post', 'put', 'patch', 'delete'].includes(config.method?.toLowerCase())\n  ) {\n    config.headers['X-CSRFToken'] = csrfToken;\n  }\n  return config;\n});\n</code></pre>"},{"location":"proyecto/frontend/src/utils/api/#explicacion_2","title":"Explicaci\u00f3n","text":"<ul> <li>Se ejecuta antes de que cualquier request sea enviada al servidor.</li> <li> <p>L\u00f3gica clave:</p> </li> <li> <p>Solo agrega el header <code>X-CSRFToken</code> en m\u00e9todos considerados peligrosos (POST, PUT, PATCH, DELETE).</p> </li> <li>Evita enviar el token innecesariamente en peticiones GET.</li> </ul>"},{"location":"proyecto/frontend/src/utils/api/#beneficios","title":"Beneficios","text":"<ul> <li>Cumple autom\u00e1ticamente con los requerimientos de seguridad CSRF del backend.</li> <li>Elimina la necesidad de manejar el token manualmente en cada llamada a la API.</li> </ul>"},{"location":"proyecto/frontend/src/utils/api/#interceptor-de-respuestas-response-interceptor","title":"Interceptor de respuestas (Response Interceptor)","text":"<pre><code>api.interceptors.response.use(\n  response =&gt; response,\n  async error =&gt; {\n    const originalRequest = error.config;\n\n    if (window.location.pathname === '/login') {\n      return Promise.reject(error);\n    }\n\n    if (\n      error.response?.status === 401 &amp;&amp;\n      !originalRequest._retry &amp;&amp;\n      !originalRequest.url.includes('/token/refresh/')\n    ) {\n      originalRequest._retry = true;\n      try {\n        await api.post('/token/refresh/');\n        return api(originalRequest);\n      } catch (refreshError) {\n        console.error('Fallo el refresh', refreshError);\n      }\n    }\n\n    return Promise.reject(error);\n  }\n);\n</code></pre>"},{"location":"proyecto/frontend/src/utils/api/#explicacion-general","title":"Explicaci\u00f3n general","text":"<p>Este interceptor maneja de forma centralizada los errores de autenticaci\u00f3n y el refresh autom\u00e1tico de tokens.</p>"},{"location":"proyecto/frontend/src/utils/api/#flujo-detallado","title":"Flujo detallado","text":"<ol> <li> <p>Exclusi\u00f3n de la ruta <code>/login</code></p> </li> <li> <p>Si el usuario est\u00e1 en la pantalla de login, no se intenta ning\u00fan refresh.</p> </li> <li> <p>Detecci\u00f3n de error 401 (Unauthorized)</p> </li> <li> <p>Indica que el token de acceso es inv\u00e1lido o expir\u00f3.</p> </li> <li> <p>Control de reintentos</p> </li> <li> <p>La bandera <code>_retry</code> evita bucles infinitos de refresh.</p> </li> <li> <p>Refresh del token</p> </li> <li> <p>Se llama al endpoint <code>/token/refresh/</code>.</p> </li> <li> <p>Si el refresh es exitoso, se reintenta autom\u00e1ticamente la petici\u00f3n original.</p> </li> <li> <p>Manejo de fallo de refresh</p> </li> <li> <p>Si el refresh falla, el error se propaga para que la aplicaci\u00f3n lo gestione (por ejemplo, logout forzado).</p> </li> </ol>"},{"location":"proyecto/frontend/src/utils/api/#rol-dentro-de-la-arquitectura","title":"Rol dentro de la arquitectura","text":"<p>Este m\u00f3dulo act\u00faa como una capa de infraestructura:</p> <ul> <li>Centraliza la comunicaci\u00f3n HTTP.</li> <li>Abstrae detalles de autenticaci\u00f3n y seguridad.</li> <li>Simplifica los servicios, hooks y thunks que consumen la API.</li> </ul> <p>Cualquier parte de la aplicaci\u00f3n que importe <code>api</code> hereda autom\u00e1ticamente:</p> <ul> <li>Base URL correcta</li> <li>Manejo de cookies</li> <li>Protecci\u00f3n CSRF</li> <li>Refresh autom\u00e1tico de sesi\u00f3n</li> </ul>"},{"location":"proyecto/frontend/src/utils/api/#buenas-practicas-aplicadas","title":"Buenas pr\u00e1cticas aplicadas","text":"<ul> <li>Separaci\u00f3n de responsabilidades</li> <li>Configuraci\u00f3n \u00fanica y reutilizable</li> <li>Seguridad por defecto</li> <li>Manejo defensivo de errores</li> </ul> <p>Este enfoque reduce errores, mejora la mantenibilidad y garantiza un comportamiento consistente en toda la aplicaci\u00f3n.</p>"},{"location":"proyecto/frontend/src/utils/dataGridEs/","title":"dataGridEs.js","text":""},{"location":"proyecto/frontend/src/utils/dataGridEs/#proposito-del-archivo","title":"Prop\u00f3sito del archivo","text":"<p>Este archivo define un objeto de configuraci\u00f3n de localizaci\u00f3n (i18n) para MUI DataGrid, adaptando todos los textos visibles de la grilla al idioma espa\u00f1ol. Su objetivo es proporcionar una experiencia de usuario coherente, profesional y completamente localizada, evitando textos por defecto en ingl\u00e9s.</p> <p>El objeto <code>dataGridEs</code> se utiliza normalmente al configurar el componente DataGrid mediante la prop <code>localeText</code>.</p>"},{"location":"proyecto/frontend/src/utils/dataGridEs/#rol-dentro-de-la-arquitectura","title":"Rol dentro de la arquitectura","text":"<ul> <li>Centraliza todos los textos de la DataGrid en un \u00fanico m\u00f3dulo</li> <li>Facilita el mantenimiento y futuras modificaciones de idioma</li> <li>Evita duplicaci\u00f3n de textos en m\u00faltiples componentes</li> <li>Permite consistencia sem\u00e1ntica en toda la aplicaci\u00f3n</li> </ul> <p>Este archivo no contiene l\u00f3gica de negocio, \u00fanicamente configuraci\u00f3n declarativa.</p>"},{"location":"proyecto/frontend/src/utils/dataGridEs/#estructura-general-del-objeto","title":"Estructura general del objeto","text":"<p>El objeto <code>dataGridEs</code> est\u00e1 organizado por secciones funcionales del DataGrid:</p> <ul> <li>Estados generales</li> <li>Barra de herramientas (toolbar)</li> <li>Gesti\u00f3n de columnas</li> <li>Filtros</li> <li>Men\u00fas de columna</li> <li>Paginaci\u00f3n</li> <li>Selecci\u00f3n de filas</li> <li>Agrupaciones y jerarqu\u00edas</li> <li>Agregaciones</li> </ul> <p>Cada clave corresponde exactamente a la API p\u00fablica de <code>localeText</code> de MUI X.</p>"},{"location":"proyecto/frontend/src/utils/dataGridEs/#estados-generales","title":"Estados generales","text":"<pre><code>noRowsLabel: 'Sin filas',\nnoResultsOverlayLabel: 'Resultados no encontrados'\n</code></pre> <p>Definen los textos mostrados cuando:</p> <ul> <li>No existen filas cargadas</li> <li>Una b\u00fasqueda o filtro no retorna resultados</li> </ul>"},{"location":"proyecto/frontend/src/utils/dataGridEs/#barra-de-herramientas-toolbar","title":"Barra de herramientas (Toolbar)","text":"<p>Incluye traducciones para:</p> <ul> <li>Selector de densidad de filas</li> <li>Gesti\u00f3n de columnas visibles</li> <li>Panel de filtros</li> <li>Campo de b\u00fasqueda r\u00e1pida</li> <li>Exportaci\u00f3n de datos</li> </ul> <p>Ejemplo:</p> <pre><code>toolbarExportCSV: 'Descargar como CSV',\ntoolbarExportExcel: 'Descargar como Excel'\n</code></pre> <p>Esto asegura que todas las acciones de exportaci\u00f3n se presenten claramente en espa\u00f1ol.</p>"},{"location":"proyecto/frontend/src/utils/dataGridEs/#gestion-de-columnas","title":"Gesti\u00f3n de columnas","text":"<pre><code>columnsManagementSearchTitle: 'Buscar',\ncolumnsManagementShowHideAllText: 'Mostrar/Ocultar todas'\n</code></pre> <p>Controla los textos del panel que permite:</p> <ul> <li>Buscar columnas</li> <li>Mostrar u ocultar columnas</li> <li>Restablecer configuraciones</li> </ul>"},{"location":"proyecto/frontend/src/utils/dataGridEs/#sistema-de-filtros","title":"Sistema de filtros","text":"<p>Incluye:</p> <ul> <li>Etiquetas del panel de filtros</li> <li>Operadores l\u00f3gicos</li> <li>Operadores de comparaci\u00f3n</li> <li>Placeholders y mensajes auxiliares</li> </ul> <p>Ejemplo:</p> <pre><code>filterOperatorContains: 'contiene',\nfilterOperatorEquals: 'es igual'\n</code></pre> <p>Adem\u00e1s, se definen operadores din\u00e1micos mediante funciones que ajustan el texto seg\u00fan el contexto.</p>"},{"location":"proyecto/frontend/src/utils/dataGridEs/#filtros-en-encabezados-header-filters","title":"Filtros en encabezados (Header Filters)","text":"<pre><code>headerFilterOperatorContains: 'Contiene',\nheaderFilterOperatorBefore: 'Esta antes de'\n</code></pre> <p>Estos textos se utilizan cuando el filtrado se realiza directamente desde los encabezados de columna.</p>"},{"location":"proyecto/frontend/src/utils/dataGridEs/#menu-de-columnas","title":"Men\u00fa de columnas","text":"<pre><code>columnMenuSortAsc: 'Ordenar ASC',\ncolumnMenuHideColumn: 'Ocultar'\n</code></pre> <p>Define los textos del men\u00fa contextual de cada columna, garantizando claridad en acciones comunes como ordenamiento y visibilidad.</p>"},{"location":"proyecto/frontend/src/utils/dataGridEs/#seleccion-de-filas","title":"Selecci\u00f3n de filas","text":"<p>Incluye textos accesibles y descriptivos para:</p> <ul> <li>Seleccionar filas individuales</li> <li>Seleccionar todas las filas</li> <li>Mensajes de filas seleccionadas</li> </ul> <p>Ejemplo:</p> <pre><code>footerRowSelected: (count) =&gt; `${count} filas seleccionadas`\n</code></pre> <p>Se utilizan funciones para manejar correctamente singular y plural.</p>"},{"location":"proyecto/frontend/src/utils/dataGridEs/#paginacion","title":"Paginaci\u00f3n","text":"<pre><code>paginationRowsPerPage: 'Filas por p\u00e1gina:'\n</code></pre> <p>Y etiquetas accesibles para navegaci\u00f3n:</p> <pre><code>paginationItemAriaLabel: (type) =&gt; {\n  if (type === 'first') return 'Ir a la primera p\u00e1gina';\n}\n</code></pre> <p>Estas funciones mejoran accesibilidad y usabilidad.</p>"},{"location":"proyecto/frontend/src/utils/dataGridEs/#agrupaciones-y-jerarquias","title":"Agrupaciones y jerarqu\u00edas","text":"<p>Soporta:</p> <ul> <li>Agrupaci\u00f3n de columnas</li> <li>Tree Data</li> <li>Master / Detail</li> </ul> <p>Ejemplo:</p> <pre><code>groupColumn: (name) =&gt; `Agrupar por ${name}`\n</code></pre> <p>Permite textos din\u00e1micos basados en el nombre de la columna.</p>"},{"location":"proyecto/frontend/src/utils/dataGridEs/#agregaciones","title":"Agregaciones","text":"<pre><code>aggregationFunctionLabelSum: 'suma',\naggregationFunctionLabelAvg: 'promedio'\n</code></pre> <p>Traducciones de funciones de agregaci\u00f3n utilizadas en columnas num\u00e9ricas.</p>"},{"location":"proyecto/frontend/src/utils/dataGridEs/#exportacion-del-modulo","title":"Exportaci\u00f3n del m\u00f3dulo","text":"<pre><code>export default dataGridEs;\n</code></pre> <p>El objeto se exporta como configuraci\u00f3n reutilizable y puede ser importado en cualquier DataGrid de la aplicaci\u00f3n.</p>"},{"location":"proyecto/frontend/src/utils/dataGridEs/#buenas-practicas-aplicadas","title":"Buenas pr\u00e1cticas aplicadas","text":"<ul> <li>Uso exclusivo de claves soportadas por MUI DataGrid</li> <li>Funciones para pluralizaci\u00f3n y accesibilidad</li> <li>Separaci\u00f3n clara entre configuraci\u00f3n y l\u00f3gica</li> <li>Preparado para escalado o internacionalizaci\u00f3n futura</li> </ul>"},{"location":"proyecto/frontend/src/utils/dataGridEs/#uso-tipico","title":"Uso t\u00edpico","text":"<pre><code>&lt;DataGrid\n  rows={rows}\n  columns={columns}\n  localeText={dataGridEs}\n/&gt;\n</code></pre> <p>Este patr\u00f3n garantiza que toda la grilla se renderice completamente en espa\u00f1ol.</p>"},{"location":"proyecto/frontend/src/utils/exportExcel/","title":"exportExcel.js","text":"<p>Este archivo define una utilidad reutilizable para exportar datos a Excel (.xlsx) usando ExcelJS y file-saver. Est\u00e1 pensada para integrarse f\u00e1cilmente con MUI DataGrid, aprovechando su definici\u00f3n de columnas.</p>"},{"location":"proyecto/frontend/src/utils/exportExcel/#dependencias","title":"Dependencias","text":"<pre><code>import ExcelJS from 'exceljs';\nimport { saveAs } from 'file-saver';\n</code></pre> <ul> <li>ExcelJS: permite crear y manipular archivos Excel desde el navegador.</li> <li>file-saver: fuerza la descarga del archivo generado.</li> </ul>"},{"location":"proyecto/frontend/src/utils/exportExcel/#firma-de-la-funcion","title":"Firma de la funci\u00f3n","text":"<pre><code>export const exportExcel = async (columns, rows, fileName = 'datos.xlsx') =&gt; {\n</code></pre>"},{"location":"proyecto/frontend/src/utils/exportExcel/#parametros","title":"Par\u00e1metros","text":"Par\u00e1metro Tipo Descripci\u00f3n <code>columns</code> <code>Array</code> Columnas del DataGrid (con <code>field</code>, <code>headerName</code>, <code>valueFormatter</code>) <code>rows</code> <code>Array</code> Filas de datos a exportar <code>fileName</code> <code>string</code> Nombre del archivo Excel (opcional)"},{"location":"proyecto/frontend/src/utils/exportExcel/#creacion-del-workbook-y-worksheet","title":"Creaci\u00f3n del workbook y worksheet","text":"<pre><code>const workbook = new ExcelJS.Workbook();\nconst worksheet = workbook.addWorksheet('Datos');\n</code></pre> <ul> <li>Se crea un libro Excel</li> <li>Se agrega una hoja llamada \"Datos\"</li> </ul>"},{"location":"proyecto/frontend/src/utils/exportExcel/#encabezados","title":"\ud83c\udff7\ufe0f Encabezados","text":"<pre><code>const headers = columns.map(col =&gt; col.headerName);\nworksheet.addRow(headers);\n</code></pre> <ul> <li>Usa <code>headerName</code> de las columnas del DataGrid</li> <li>Garantiza que el Excel tenga los mismos t\u00edtulos visibles en la tabla</li> </ul>"},{"location":"proyecto/frontend/src/utils/exportExcel/#carga-de-filas","title":"Carga de filas","text":"<pre><code>rows.forEach((row) =&gt; {\n  const dataRow = columns.map((col) =&gt; {\n    const value = row[col.field];\n    if (col.valueFormatter) {\n      try {\n        return col.valueFormatter(value);\n      } catch {\n        return value;\n      }\n    }\n    return value;\n  });\n  worksheet.addRow(dataRow);\n});\n</code></pre>"},{"location":"proyecto/frontend/src/utils/exportExcel/#que-hace-aqui","title":"Qu\u00e9 hace aqu\u00ed","text":"<ul> <li>Recorre cada fila</li> <li> <p>Para cada columna:</p> </li> <li> <p>Extrae el valor usando <code>field</code></p> </li> <li>Aplica <code>valueFormatter</code> si existe (igual que en el DataGrid)</li> <li>Maneja errores para evitar romper la exportaci\u00f3n</li> </ul> <p>Resultado: el Excel respeta exactamente el formato que ve el usuario.</p>"},{"location":"proyecto/frontend/src/utils/exportExcel/#autoajuste-de-columnas","title":"Autoajuste de columnas","text":"<pre><code>worksheet.columns.forEach(column =&gt; {\n  let maxLength = 10;\n  column.eachCell({ includeEmpty: true }, cell =&gt; {\n    const length = cell.value ? cell.value.toString().length : 10;\n    if (length &gt; maxLength) {\n      maxLength = length;\n    }\n  });\n  column.width = maxLength + 2;\n});\n</code></pre> <ul> <li>Calcula el ancho m\u00e1ximo seg\u00fan el contenido</li> <li>Evita columnas cortadas o demasiado estrechas</li> <li>Mejora la legibilidad del Excel final</li> </ul>"},{"location":"proyecto/frontend/src/utils/exportExcel/#generacion-y-descarga","title":"Generaci\u00f3n y descarga","text":"<pre><code>const buffer = await workbook.xlsx.writeBuffer();\nconst blob = new Blob([buffer], {\n  type: 'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet'\n});\nsaveAs(blob, fileName);\n</code></pre> <ul> <li>Convierte el workbook a binario</li> <li>Crea un <code>Blob</code></li> <li>Dispara la descarga autom\u00e1tica del archivo</li> </ul>"},{"location":"proyecto/frontend/src/utils/exportExcel/#casos-de-uso-tipicos","title":"Casos de uso t\u00edpicos","text":"<ul> <li>Exportar DataGrid con filtros aplicados</li> <li>Reportes administrativos</li> <li>Descarga de ventas, notas, usuarios, inventario</li> </ul>"},{"location":"proyecto/frontend/src/utils/exportExcel/#ejemplo-de-uso","title":"Ejemplo de uso","text":"<pre><code>exportExcel(columns, rows, 'Notas_de_Ventas.xlsx');\n</code></pre>"},{"location":"proyecto/frontend/src/utils/exportExcel/#ventajas-de-esta-implementacion","title":"Ventajas de esta implementaci\u00f3n","text":"<ul> <li>Totalmente desacoplada del DataGrid</li> <li>Respeta <code>valueFormatter</code></li> <li>Reutilizable en cualquier m\u00f3dulo</li> <li>No depende del backend</li> </ul>"},{"location":"proyecto/frontend/src/utils/formatearRut/","title":"formatearRut.js","text":""},{"location":"proyecto/frontend/src/utils/formatearRut/#descripcion-general","title":"Descripci\u00f3n general","text":"<p>Este archivo define una funci\u00f3n utilitaria responsable de formatear un RUT chileno a su representaci\u00f3n est\u00e1ndar, incorporando puntos como separadores de miles y un guion antes del d\u00edgito verificador.</p> <p>La funci\u00f3n est\u00e1 dise\u00f1ada para ser pura, reutilizable y segura frente a entradas incompletas, por lo que es especialmente adecuada para su uso en formularios controlados, validaciones previas o normalizaci\u00f3n de datos antes de ser enviados a una API.</p>"},{"location":"proyecto/frontend/src/utils/formatearRut/#codigo","title":"C\u00f3digo","text":"<pre><code>export function formatearRut(value) {\n  if (!value) return '';\n\n  // Eliminar puntos y gui\u00f3n existentes\n  const clean = value.replace(/[^\\dkK]/g, '').toUpperCase();\n\n  if (clean.length &lt; 2) return clean;\n\n  const cuerpo = clean.slice(0, -1);\n  const dv = clean.slice(-1);\n\n  const cuerpoConPuntos = cuerpo.replace(/\\B(?=(\\d{3})+(?!\\d))/g, '.');\n\n  return `${cuerpoConPuntos}-${dv}`;\n}\n</code></pre>"},{"location":"proyecto/frontend/src/utils/formatearRut/#analisis-detallado-del-codigo","title":"An\u00e1lisis detallado del c\u00f3digo","text":""},{"location":"proyecto/frontend/src/utils/formatearRut/#1-validacion-inicial-de-la-entrada","title":"1. Validaci\u00f3n inicial de la entrada","text":"<pre><code>if (!value) return '';\n</code></pre> <ul> <li>Evita errores cuando la funci\u00f3n recibe valores <code>null</code>, <code>undefined</code> o cadenas vac\u00edas.</li> <li>Permite utilizar la funci\u00f3n directamente en inputs controlados sin validaciones adicionales.</li> </ul>"},{"location":"proyecto/frontend/src/utils/formatearRut/#2-normalizacion-del-valor-recibido","title":"2. Normalizaci\u00f3n del valor recibido","text":"<pre><code>const clean = value.replace(/[^\\dkK]/g, '').toUpperCase();\n</code></pre> <ul> <li>Elimina cualquier car\u00e1cter que no sea un d\u00edgito o la letra K/k.</li> <li>Convierte el d\u00edgito verificador a may\u00fascula para estandarizar el formato.</li> <li> <p>Permite aceptar entradas en m\u00faltiples formatos:</p> </li> <li> <p><code>12.345.678-k</code></p> </li> <li><code>12345678K</code></li> <li><code>12-345678k</code></li> </ul> <p>Todas estas entradas terminan normalizadas a una base com\u00fan.</p>"},{"location":"proyecto/frontend/src/utils/formatearRut/#3-control-de-longitud-minima","title":"3. Control de longitud m\u00ednima","text":"<pre><code>if (clean.length &lt; 2) return clean;\n</code></pre> <ul> <li>Un RUT v\u00e1lido debe tener al menos un cuerpo y un d\u00edgito verificador.</li> <li>Mientras el usuario escribe, esta condici\u00f3n permite mostrar el valor sin forzar formato incompleto.</li> </ul>"},{"location":"proyecto/frontend/src/utils/formatearRut/#4-separacion-de-cuerpo-y-digito-verificador","title":"4. Separaci\u00f3n de cuerpo y d\u00edgito verificador","text":"<pre><code>const cuerpo = clean.slice(0, -1);\nconst dv = clean.slice(-1);\n</code></pre> <ul> <li><code>cuerpo</code>: todos los d\u00edgitos excepto el \u00faltimo.</li> <li><code>dv</code>: \u00faltimo car\u00e1cter, correspondiente al d\u00edgito verificador.</li> </ul> <p>Esta separaci\u00f3n facilita aplicar reglas distintas a cada parte.</p>"},{"location":"proyecto/frontend/src/utils/formatearRut/#5-aplicacion-de-separadores-de-miles","title":"5. Aplicaci\u00f3n de separadores de miles","text":"<pre><code>const cuerpoConPuntos = cuerpo.replace(/\\B(?=(\\d{3})+(?!\\d))/g, '.');\n</code></pre> <ul> <li>Inserta puntos cada tres d\u00edgitos desde la derecha.</li> <li>Utiliza una expresi\u00f3n regular eficiente y ampliamente utilizada para este prop\u00f3sito.</li> </ul> <p>Ejemplo:</p> <ul> <li><code>12345678</code> \u2192 <code>12.345.678</code></li> </ul>"},{"location":"proyecto/frontend/src/utils/formatearRut/#6-construccion-del-resultado-final","title":"6. Construcci\u00f3n del resultado final","text":"<pre><code>return `${cuerpoConPuntos}-${dv}`;\n</code></pre> <ul> <li>Devuelve el RUT en formato est\u00e1ndar chileno:</li> </ul> <pre><code>XX.XXX.XXX-DV\n</code></pre> <p>Este formato es adecuado tanto para visualizaci\u00f3n como para env\u00edo a backend.</p>"},{"location":"proyecto/frontend/src/utils/formatearRut/#comportamiento-esperado","title":"Comportamiento esperado","text":"Entrada Salida <code>12345678k</code> <code>12.345.678-K</code> <code>12.345.678-k</code> <code>12.345.678-K</code> <code>1</code> <code>1</code> <code>(vac\u00edo)     |</code>"},{"location":"proyecto/frontend/src/utils/formatearRut/#uso-recomendado","title":"Uso recomendado","text":"<ul> <li>Formateo en tiempo real de inputs de RUT.</li> <li>Normalizaci\u00f3n visual antes de enviar datos a la API.</li> <li>Uso combinado con validaciones Yup u otras librer\u00edas de esquema.</li> </ul> <p>Esta funci\u00f3n no valida la autenticidad del RUT, \u00fanicamente su formato. La validaci\u00f3n del d\u00edgito verificador debe realizarse por separado si es requerida.</p>"},{"location":"proyecto/frontend/src/utils/formatearRut/#ventajas-del-enfoque","title":"Ventajas del enfoque","text":"<ul> <li>No depende de librer\u00edas externas.</li> <li>Maneja entradas parciales sin romper la experiencia de usuario.</li> <li>C\u00f3digo simple, legible y f\u00e1cil de mantener.</li> <li>Compatible con React, Redux, formularios controlados y validaciones previas.</li> </ul>"},{"location":"proyecto/frontend/src/utils/normalizarNombre/","title":"normalizarNombre.js","text":""},{"location":"proyecto/frontend/src/utils/normalizarNombre/#proposito-del-archivo","title":"Prop\u00f3sito del archivo","text":"<p>Este archivo define una funci\u00f3n utilitaria encargada de normalizar cadenas de texto, espec\u00edficamente nombres u otros identificadores textuales, con el objetivo de facilitar comparaciones, b\u00fasquedas y estandarizaci\u00f3n de datos dentro de la aplicaci\u00f3n.</p> <p>Su uso es especialmente relevante en contextos como:</p> <ul> <li>Comparaci\u00f3n de nombres ingresados por usuarios.</li> <li>B\u00fasquedas insensibles a may\u00fasculas, min\u00fasculas o tildes.</li> <li>Normalizaci\u00f3n previa al almacenamiento o filtrado de informaci\u00f3n.</li> </ul>"},{"location":"proyecto/frontend/src/utils/normalizarNombre/#codigo","title":"C\u00f3digo","text":"<pre><code>const normalizarNombre = (nombre) =&gt;\n  nombre\n    .toLowerCase()\n    .normalize(\"NFD\")\n    .replace(/[\\u0300-\\u036f]/g, \"\")\n    .trim();\n\nexport default normalizarNombre;\n</code></pre>"},{"location":"proyecto/frontend/src/utils/normalizarNombre/#explicacion-detallada-del-codigo","title":"Explicaci\u00f3n detallada del c\u00f3digo","text":""},{"location":"proyecto/frontend/src/utils/normalizarNombre/#1-firma-de-la-funcion","title":"1. Firma de la funci\u00f3n","text":"<pre><code>const normalizarNombre = (nombre) =&gt;\n</code></pre> <ul> <li>Se define una funci\u00f3n flecha que recibe un \u00fanico par\u00e1metro <code>nombre</code>.</li> <li>Se asume que el valor recibido es una cadena de texto v\u00e1lida.</li> <li>La funci\u00f3n es pura, no modifica estados ni depende de variables externas.</li> </ul>"},{"location":"proyecto/frontend/src/utils/normalizarNombre/#2-conversion-a-minusculas","title":"2. Conversi\u00f3n a min\u00fasculas","text":"<pre><code>nombre.toLowerCase()\n</code></pre> <ul> <li>Convierte todo el texto a min\u00fasculas.</li> <li>Permite comparaciones consistentes independientemente del uso de may\u00fasculas.</li> <li>Evita errores comunes en b\u00fasquedas donde el casing no deber\u00eda ser relevante.</li> </ul> <p>Ejemplo:</p> <ul> <li><code>\"Juan P\u00e9rez\"</code> \u2192 <code>\"juan p\u00e9rez\"</code></li> </ul>"},{"location":"proyecto/frontend/src/utils/normalizarNombre/#3-normalizacion-unicode-nfd","title":"3. Normalizaci\u00f3n Unicode (NFD)","text":"<pre><code>.normalize(\"NFD\")\n</code></pre> <ul> <li>Convierte los caracteres acentuados en una forma descompuesta.</li> <li> <p>Por ejemplo, la letra <code>\u00e1</code> se separa en:</p> </li> <li> <p><code>a</code> (car\u00e1cter base)</p> </li> <li><code>\u00b4</code> (marca diacr\u00edtica)</li> </ul> <p>Esta transformaci\u00f3n es necesaria para poder eliminar las tildes de forma confiable.</p>"},{"location":"proyecto/frontend/src/utils/normalizarNombre/#4-eliminacion-de-tildes-y-diacriticos","title":"4. Eliminaci\u00f3n de tildes y diacr\u00edticos","text":"<pre><code>.replace(/[\\u0300-\\u036f]/g, \"\")\n</code></pre> <ul> <li>Elimina todos los caracteres Unicode correspondientes a marcas diacr\u00edticas.</li> <li>Gracias a la normalizaci\u00f3n previa, este reemplazo elimina tildes, di\u00e9resis y otros acentos.</li> </ul> <p>Ejemplos:</p> <ul> <li><code>\"p\u00e9rez\"</code> \u2192 <code>\"perez\"</code></li> <li><code>\"mu\u00f1oz\"</code> \u2192 <code>\"munoz\"</code></li> </ul>"},{"location":"proyecto/frontend/src/utils/normalizarNombre/#5-eliminacion-de-espacios-innecesarios","title":"5. Eliminaci\u00f3n de espacios innecesarios","text":"<pre><code>.trim();\n</code></pre> <ul> <li>Elimina espacios en blanco al inicio y al final de la cadena.</li> <li>Previene errores en comparaciones o validaciones causados por espacios invisibles.</li> </ul> <p>Ejemplo:</p> <ul> <li><code>\"  Juan  \"</code> \u2192 <code>\"juan\"</code></li> </ul>"},{"location":"proyecto/frontend/src/utils/normalizarNombre/#valor-retornado","title":"Valor retornado","text":"<ul> <li> <p>Retorna una cadena normalizada, lista para ser utilizada en:</p> </li> <li> <p>Comparaciones (<code>===</code>)</p> </li> <li>Filtros</li> <li>B\u00fasquedas</li> <li>Procesos de deduplicaci\u00f3n</li> </ul>"},{"location":"proyecto/frontend/src/utils/normalizarNombre/#casos-de-uso-tipicos","title":"Casos de uso t\u00edpicos","text":"<ul> <li>Comparar nombres de clientes provenientes de distintas fuentes.</li> <li>Implementar b\u00fasquedas tolerantes a errores de tipeo comunes.</li> <li>Normalizar datos antes de validarlos o almacenarlos.</li> </ul> <p>Ejemplo de comparaci\u00f3n:</p> <pre><code>normalizarNombre(\"Jos\u00e9 P\u00e9rez\") === normalizarNombre(\"jose perez\")\n// true\n</code></pre>"},{"location":"proyecto/frontend/src/utils/normalizarNombre/#consideraciones-tecnicas","title":"Consideraciones t\u00e9cnicas","text":"<ul> <li>La funci\u00f3n no valida valores nulos o indefinidos. Si existe la posibilidad de recibir esos valores, se recomienda validarlos antes de llamar a la funci\u00f3n.</li> <li>No elimina caracteres especiales distintos de los acentos (por ejemplo, guiones o n\u00fameros).</li> <li>Es compatible con navegadores modernos que soporten Unicode normalization.</li> </ul>"},{"location":"proyecto/frontend/src/utils/normalizarNombre/#conclusion","title":"Conclusi\u00f3n","text":"<p><code>normalizarNombre</code> es una funci\u00f3n utilitaria simple pero cr\u00edtica para mantener coherencia en el manejo de texto dentro de la aplicaci\u00f3n. Su implementaci\u00f3n mejora significativamente la calidad de las b\u00fasquedas, comparaciones y validaciones, reduciendo errores derivados de diferencias de formato en la entrada de datos.</p>"}]}