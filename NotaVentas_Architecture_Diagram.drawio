<mxfile host="app.diagrams.net" agent="Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36" version="27.1.5">
  <diagram id="nota-ventas-detailed" name="NotaVentas - Detailed Visual">
    <mxGraphModel dx="2526" dy="1642" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="1654" pageHeight="1169" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="2" value="Usuario" style="shape=ellipse;whiteSpace=wrap;html=1;fillColor=#ffffff;strokeColor=#6c6c6c;fontSize=12;" parent="1" vertex="1">
          <mxGeometry x="20" y="40" width="84" height="40" as="geometry" />
        </mxCell>
        <mxCell id="3" value="Cloudflare (DNS / CDN / WAF)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#eef6fb;strokeColor=#7aaed8;fontSize=12;" parent="1" vertex="1">
          <mxGeometry x="120" y="22" width="260" height="56" as="geometry" />
        </mxCell>
        <mxCell id="edge-user-cloud" style="edgeStyle=orthogonalEdgeStyle;rounded=1;html=1;strokeWidth=2;strokeColor=#6c6c6c;" parent="1" source="2" target="3" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="4" value="FRONTEND — React + Vite (Vercel)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e8f3ff;strokeColor=#4f8dd8;fontSize=14;fontStyle=1;verticalAlign=top;" parent="1" vertex="1">
          <mxGeometry x="420" y="20" width="520" height="240" as="geometry" />
        </mxCell>
        <mxCell id="5" value="React App (Vite)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffffff;strokeColor=#bcd7ff;fontSize=12;" parent="1" vertex="1">
          <mxGeometry x="440" y="56" width="200" height="92" as="geometry" />
        </mxCell>
        <mxCell id="6" value="Librerías / Dependencias&#xa;• MUI (DataGrid, Charts)&#xa;• axios&#xa;• react-hook-form&#xa;• exceljs &#xa;• pdfjs-dist" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f7fbff;strokeColor=#d6e9ff;fontSize=11;align=left;" parent="1" vertex="1">
          <mxGeometry x="660" y="56" width="260" height="92" as="geometry" />
        </mxCell>
        <mxCell id="7" value="State: Redux Toolkit" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff8e6;strokeColor=#f1d38a;fontSize=11;" parent="1" vertex="1">
          <mxGeometry x="440" y="156" width="200" height="44" as="geometry" />
        </mxCell>
        <mxCell id="8" value="Pages / Components (NavBar, SideBar, Forms, DataGrids)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffffff;strokeColor=#bcd7ff;fontSize=11;" parent="1" vertex="1">
          <mxGeometry x="660" y="156" width="260" height="44" as="geometry" />
        </mxCell>
        <mxCell id="9" style="edgeStyle=orthogonalEdgeStyle;rounded=1;html=1;strokeWidth=3;strokeColor=#4f8dd8;" parent="1" source="3" target="5" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="10" value="HTTPS / CDN" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;fontSize=10;fontColor=#4f8dd8;" parent="1" vertex="1" connectable="0">
          <mxGeometry x="0.45" relative="1" as="geometry" />
        </mxCell>
        <mxCell id="11" value="Auth endpoints (simplejwt)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff7f0;strokeColor=#e3a77a;fontSize=12;" parent="1" vertex="1">
          <mxGeometry x="420" y="270" width="320" height="64" as="geometry" />
        </mxCell>
        <mxCell id="12" value="• POST /api/v1/token/  (username/password)&#xa;  -&gt; returns {access, refresh} (access 60m, refresh 7d)&#xa;• POST /api/v1/token/refresh/  (refresh token)" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#fffaf6;strokeColor=#f3d9c0;align=left;fontSize=11;" parent="1" vertex="1">
          <mxGeometry x="104" y="292" width="300" height="42" as="geometry" />
        </mxCell>
        <mxCell id="13" value="BACKEND — Django REST Framework (Railway)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#eaf7ea;strokeColor=#54a65a;fontSize=14;fontStyle=1;verticalAlign=top;" parent="1" vertex="1">
          <mxGeometry x="420" y="340" width="760" height="420" as="geometry" />
        </mxCell>
        <mxCell id="14" value="ViewSets / API Endpoints (nota_ventas.api.v1)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffffff;strokeColor=#cfe9cf;fontSize=12;" parent="1" vertex="1">
          <mxGeometry x="440" y="380" width="420" height="160" as="geometry" />
        </mxCell>
        <mxCell id="15" value="• /api/v1/usuarios/   (GET, POST, GET {id}, PUT/PATCH, DELETE)&#xa;• /api/v1/notas/      (GET, POST, GET {id}, PUT/PATCH, DELETE)&#xa;• /api/v1/clientes/   (GET, POST, por-rut endpoint)&#xa;• /api/v1/productos/  (GET, POST, por-codigo endpoint)&#xa;• /api/v1/proveedores/ (GET, POST, por-rut endpoint)&#xa;• /api/v1/personal/    (GET, POST, asignar-sabados, historico-sabados)&#xa;• /api/v1/pedidos-mprimas/ (GET, POST, buscar endpoints)&#xa;• /api/v1/document-facturas/ (GET, POST, buscar-por-titulo)&#xa;• /api/v1/dashboard/resumen/ (GET - analytics)" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#fbfff6;strokeColor=#e6f6df;align=left;fontSize=11;" parent="1" vertex="1">
          <mxGeometry x="450" y="396" width="400" height="136" as="geometry" />
        </mxCell>
        <mxCell id="16" value="Serializers (ejemplos)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff8e6;strokeColor=#f1d38a;fontSize=12;" parent="1" vertex="1">
          <mxGeometry x="880" y="380" width="260" height="120" as="geometry" />
        </mxCell>
        <mxCell id="17" value="UsuariosSerializer: id, username, nombre, apellido, correo, cargo, rut&#xa;NotasSerializer: id_nota, num_nota, cliente, fecha_despacho, estado_solicitud&#xa;ClientesSerializer: id_cliente, razon_social, rut_cliente, direccion, comuna&#xa;ProductosSerializer: id_producto, nombre, codigo, precio_venta, stock, categoria&#xa;DocumentFacturasSerializer: id_factura, title, file_url, file_size, empresa, estado" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#fffaf6;strokeColor=#f6ead8;align=left;fontSize=11;" parent="1" vertex="1">
          <mxGeometry x="890" y="396" width="240" height="96" as="geometry" />
        </mxCell>
        <mxCell id="18" value="Models (ORM) — MySQL" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f7f0e8;strokeColor=#d9a24a;fontSize=14;fontStyle=1;" parent="1" vertex="1">
          <mxGeometry x="440" y="560" width="700" height="180" as="geometry" />
        </mxCell>
        <mxCell id="19" value="Usuarios (AbstractUser)&#xa;- id (PK)&#xa;- username (unique)&#xa;- nombre, apellido&#xa;- correo, cargo&#xa;- rut (unique)&#xa;- password (hashed)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffffff;strokeColor=#e6dff5;fontSize=11;align=left;" parent="1" vertex="1">
          <mxGeometry x="420" y="560" width="160" height="80" as="geometry" />
        </mxCell>
        <mxCell id="20" value="Notas&#xa;- id_nota (PK)&#xa;- num_nota (unique)&#xa;- cliente (FK to Clientes)&#xa;- fecha_despacho&#xa;- estado_solicitud&#xa;- observacion&#xa;- despacho_retira&#xa;- horario_desde/hasta&#xa;- id_usuario (FK)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffffff;strokeColor=#e6dff5;fontSize=11;align=left;" parent="1" vertex="1">
          <mxGeometry x="660" y="570" width="180" height="80" as="geometry" />
        </mxCell>
        <mxCell id="21" value="Clientes&#xa;- id_cliente (PK)&#xa;- razon_social&#xa;- rut_cliente (unique)&#xa;- contacto, correo&#xa;- direccion, comuna&#xa;- telefono, giro&#xa;- id_usuario (FK)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffffff;strokeColor=#e6dff5;fontSize=11;align=left;" parent="1" vertex="1">
          <mxGeometry x="840" y="590" width="180" height="80" as="geometry" />
        </mxCell>
        <mxCell id="22" value="Productos&#xa;- id_producto (PK)&#xa;- nombre, descripcion&#xa;- codigo (unique)&#xa;- precio_venta, precio_compra&#xa;- stock, categoria&#xa;- clase1, clase2&#xa;- unidad_medida, estado&#xa;- id_usuario (FK)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffffff;strokeColor=#e6dff5;fontSize=11;align=left;" parent="1" vertex="1">
          <mxGeometry x="404" y="668" width="180" height="72" as="geometry" />
        </mxCell>
        <mxCell id="23" value="Proveedores&#xa;- id_proveedor (PK)&#xa;- razon_social&#xa;- rut_proveedor (unique)&#xa;- contacto, correo&#xa;- direccion, comuna&#xa;- telefono, giro&#xa;- estado, id_usuario (FK)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffffff;strokeColor=#e6dff5;fontSize=11;align=left;" parent="1" vertex="1">
          <mxGeometry x="647" y="712" width="180" height="72" as="geometry" />
        </mxCell>
        <mxCell id="24" value="PedidoMateriasPrimas&#xa;- id_pedido (PK)&#xa;- id_proveedor (FK)&#xa;- id_producto (FK)&#xa;- cantidad, unidad_medida&#xa;- fecha_entrega&#xa;- estado (PENDIENTE)&#xa;- observacion&#xa;- id_usuario (FK)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffffff;strokeColor=#e6dff5;fontSize=11;align=left;" parent="1" vertex="1">
          <mxGeometry x="860" y="680" width="200" height="72" as="geometry" />
        </mxCell>
        <mxCell id="25" value="Personal + Sabado Models&#xa;Personal: id_personal, nombre, apellido, rut, cargo, estado&#xa;Sabado: id_sabado, fecha (unique)&#xa;SabadoTrabajado: personal (FK), sabado (FK)&#xa;ProductoProveedor: producto (FK), proveedor (FK), precio_compra" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffffff;strokeColor=#e6dff5;fontSize=11;align=left;" parent="1" vertex="1">
          <mxGeometry x="390" y="800" width="420" height="64" as="geometry" />
        </mxCell>
        <mxCell id="26" value="DocumentFacturas&#xa;- id_factura (PK)&#xa;- id_usuario (FK)&#xa;- title, file_url&#xa;- file_size, page_count&#xa;- observacion, empresa&#xa;- estado (NO PAGADO)&#xa;- created_at, updated_at" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f6f0ff;strokeColor=#d0b6ff;fontSize=11;align=left;" parent="1" vertex="1">
          <mxGeometry x="900" y="760" width="260" height="64" as="geometry" />
        </mxCell>
        <mxCell id="27" value="DATABASE — MySQL (Railway)" style="shape=cylinder;whiteSpace=wrap;html=1;fillColor=#fff1e0;strokeColor=#d9a24a;fontSize=14;fontStyle=1;" parent="1" vertex="1">
          <mxGeometry x="80" y="620" width="320" height="112" as="geometry" />
        </mxCell>
        <mxCell id="28" value="Connection options (settings): charset=utf8mb4&#xa;SSL in production (ssl_mode=REQUIRED)" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#fff8e6;strokeColor=#f1d38a;align=left;fontSize=11;" parent="1" vertex="1">
          <mxGeometry x="100" y="656" width="280" height="56" as="geometry" />
        </mxCell>
        <mxCell id="29" value="Storage — Cloudflare R2 / S3 compatible" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fffaf0;strokeColor=#e9c27a;fontSize=12;" parent="1" vertex="1">
          <mxGeometry x="1180" y="140" width="260" height="72" as="geometry" />
        </mxCell>
        <mxCell id="30" value="Usage: uploaded PDFs (DocumentFacturas) — ContentDisposition:inline, CacheControl" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#fff8f0;strokeColor=#f0e0c0;align=left;fontSize=11;" parent="1" vertex="1">
          <mxGeometry x="1190" y="176" width="240" height="36" as="geometry" />
        </mxCell>
        <mxCell id="31" style="edgeStyle=orthogonalEdgeStyle;rounded=1;html=1;strokeWidth=3;strokeColor=#2f7bbf;" parent="1" source="5" target="14" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="540" y="156" />
              <mxPoint x="540" y="380" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="32" value="REST API (HTTPS)&#xa;Authorization: Bearer (JWT)" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;fontSize=10;fontColor=#2f7bbf;" parent="31" vertex="1" connectable="0">
          <mxGeometry x="0.2" y="0.45" relative="1" as="geometry" />
        </mxCell>
        <mxCell id="33" style="edgeStyle=orthogonalEdgeStyle;rounded=1;html=1;strokeWidth=2;dashed=1;strokeColor=#b66e2f;" parent="1" source="5" target="11" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="520" y="120" />
              <mxPoint x="470" y="300" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="34" value="POST /api/v1/token/" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;fontSize=10;fontColor=#b66e2f;" parent="33" vertex="1" connectable="0">
          <mxGeometry x="0.45" y="0.5" relative="1" as="geometry" />
        </mxCell>
        <mxCell id="35" style="edgeStyle=orthogonalEdgeStyle;rounded=1;html=1;strokeWidth=2;strokeColor=#d79b00;" parent="1" source="14" target="27" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="640" y="540" />
              <mxPoint x="240" y="656" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="36" value="Django ORM / SQL" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;fontSize=10;fontColor=#d79b00;" parent="35" vertex="1" connectable="0">
          <mxGeometry x="0.5" y="0.4" relative="1" as="geometry" />
        </mxCell>
        <mxCell id="37" style="edgeStyle=orthogonalEdgeStyle;rounded=1;html=1;strokeWidth=1;dashed=1;strokeColor=#9d7c3d;" parent="1" source="14" target="29" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="38" value="Upload / Signed URLs (R2) / download via file_url" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;fontSize=10;fontColor=#9d7c3d;" parent="37" vertex="1" connectable="0">
          <mxGeometry x="0.45" y="0.5" relative="1" as="geometry" />
        </mxCell>
        <mxCell id="39" value="Static files: Whitenoise (STATIC_ROOT) — used on Railway for collectsatic" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fffdf8;strokeColor=#e9e1d6;fontSize=11;" parent="1" vertex="1">
          <mxGeometry x="1180" y="224" width="260" height="56" as="geometry" />
        </mxCell>
        <mxCell id="40" value="DOCUMENTACIÓN — MkDocs (Markdown)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f0f7f0;strokeColor=#88c298;fontSize=12;" parent="1" vertex="1">
          <mxGeometry x="1180" y="300" width="260" height="84" as="geometry" />
        </mxCell>
        <mxCell id="41" value="CI/CD: (No configurado) — Recomendado: GitHub Actions / GitLab CI (deploy to Vercel / Railway)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffffff;strokeColor=#cccccc;fontSize=11;fontStyle=2;" parent="1" vertex="1">
          <mxGeometry x="1180" y="396" width="260" height="56" as="geometry" />
        </mxCell>
        <mxCell id="42" value="Settings highlights (from settings.py):&#xa;• DEBUG controlado por env var&#xa;• SIMPLE_JWT: ACCESS 60m / REFRESH 7d&#xa;• CORS_ALLOWED_ORIGINS + CSRF cookie settings&#xa;• AWS/Cloudflare R2 env vars para storage" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffffff;strokeColor=#e0e0e0;fontSize=11;" parent="1" vertex="1">
          <mxGeometry x="1180" y="468" width="260" height="120" as="geometry" />
        </mxCell>
        <mxCell id="43" value="package.json (selected deps)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f7fbff;strokeColor=#d6e9ff;fontSize=11;" parent="1" vertex="1">
          <mxGeometry x="20" y="120" width="100" height="120" as="geometry" />
        </mxCell>
        <mxCell id="44" value="• react 19.x&#xa;• @mui/material&#xa;• @reduxjs/toolkit&#xa;• axios&#xa;• exceljs&#xa;• pdfjs-dist" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#ffffff;strokeColor=#ebf3ff;align=left;fontSize=11;" parent="1" vertex="1">
          <mxGeometry x="124" y="122" width="236" height="116" as="geometry" />
        </mxCell>
        <mxCell id="45" value="Leyenda: Azul → Frontend | Verde → Backend | Naranja → DB | Amarillo → Serializers/Utils | Gris → Infra / Docs" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffffff;strokeColor=#dddddd;fontSize=11;" parent="1" vertex="1">
          <mxGeometry x="60" y="880" width="1300" height="84" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
